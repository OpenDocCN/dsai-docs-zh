- en: pandas.DataFrame.stack
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.stack.html](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.stack.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: Stack the prescribed level(s) from columns to index.
  prefs: []
  type: TYPE_NORMAL
- en: 'Return a reshaped DataFrame or Series having a multi-level index with one or
    more new inner-most levels compared to the current DataFrame. The new inner-most
    levels are created by pivoting the columns of the current dataframe:'
  prefs: []
  type: TYPE_NORMAL
- en: if the columns have a single level, the output is a Series;
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  - PREF_IND
  type: TYPE_NORMAL
- en: if the columns have multiple levels, the new index level(s) is (are) taken from
    the prescribed level(s) and the output is a DataFrame.
  prefs:
  - PREF_BQ
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Parameters:'
  prefs: []
  type: TYPE_NORMAL
- en: '**level**int, str, list, default -1'
  prefs: []
  type: TYPE_NORMAL
- en: Level(s) to stack from the column axis onto the index axis, defined as one index
    or label, or a list of indices or labels.
  prefs: []
  type: TYPE_NORMAL
- en: '**dropna**bool, default True'
  prefs: []
  type: TYPE_NORMAL
- en: Whether to drop rows in the resulting Frame/Series with missing values. Stacking
    a column level onto the index axis can create combinations of index and column
    values that are missing from the original dataframe. See Examples section.
  prefs: []
  type: TYPE_NORMAL
- en: '**sort**bool, default True'
  prefs: []
  type: TYPE_NORMAL
- en: Whether to sort the levels of the resulting MultiIndex.
  prefs: []
  type: TYPE_NORMAL
- en: '**future_stack**bool, default False'
  prefs: []
  type: TYPE_NORMAL
- en: Whether to use the new implementation that will replace the current implementation
    in pandas 3.0\. When True, dropna and sort have no impact on the result and must
    remain unspecified. See [pandas 2.1.0 Release notes](../../whatsnew/v2.1.0.html#whatsnew-210-enhancements-new-stack)
    for more details.
  prefs: []
  type: TYPE_NORMAL
- en: 'Returns:'
  prefs: []
  type: TYPE_NORMAL
- en: DataFrame or Series
  prefs: []
  type: TYPE_NORMAL
- en: Stacked dataframe or series.
  prefs: []
  type: TYPE_NORMAL
- en: See also
  prefs: []
  type: TYPE_NORMAL
- en: '[`DataFrame.unstack`](pandas.DataFrame.unstack.html#pandas.DataFrame.unstack
    "pandas.DataFrame.unstack")'
  prefs: []
  type: TYPE_NORMAL
- en: Unstack prescribed level(s) from index axis onto column axis.
  prefs: []
  type: TYPE_NORMAL
- en: '[`DataFrame.pivot`](pandas.DataFrame.pivot.html#pandas.DataFrame.pivot "pandas.DataFrame.pivot")'
  prefs: []
  type: TYPE_NORMAL
- en: Reshape dataframe from long format to wide format.
  prefs: []
  type: TYPE_NORMAL
- en: '[`DataFrame.pivot_table`](pandas.DataFrame.pivot_table.html#pandas.DataFrame.pivot_table
    "pandas.DataFrame.pivot_table")'
  prefs: []
  type: TYPE_NORMAL
- en: Create a spreadsheet-style pivot table as a DataFrame.
  prefs: []
  type: TYPE_NORMAL
- en: Notes
  prefs: []
  type: TYPE_NORMAL
- en: The function is named by analogy with a collection of books being reorganized
    from being side by side on a horizontal position (the columns of the dataframe)
    to being stacked vertically on top of each other (in the index of the dataframe).
  prefs: []
  type: TYPE_NORMAL
- en: Reference [the user guide](../../user_guide/reshaping.html#reshaping-stacking)
    for more examples.
  prefs: []
  type: TYPE_NORMAL
- en: Examples
  prefs: []
  type: TYPE_NORMAL
- en: '**Single level columns**'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'Stacking a dataframe with a single level column axis returns a Series:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: '**Multi level columns: simple case**'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: 'Stacking a dataframe with a multi-level column axis:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: '**Missing values**'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: 'It is common to have missing values when stacking a dataframe with multi-level
    columns, as the stacked dataframe typically has more values than the original
    dataframe. Missing values are filled with NaNs:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: '**Prescribing the level(s) to be stacked**'
  prefs: []
  type: TYPE_NORMAL
- en: 'The first parameter controls which level or levels are stacked:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
