- en: What’s new in 1.3.1 (July 25, 2021)
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://pandas.pydata.org/docs/whatsnew/v1.3.1.html](https://pandas.pydata.org/docs/whatsnew/v1.3.1.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: These are the changes in pandas 1.3.1\. See [Release notes](index.html#release)
    for a full changelog including other versions of pandas.
  prefs: []
  type: TYPE_NORMAL
- en: '## Fixed regressions'
  prefs: []
  type: TYPE_NORMAL
- en: Pandas could not be built on PyPy ([GH 42355](https://github.com/pandas-dev/pandas/issues/42355))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[`DataFrame`](../reference/api/pandas.DataFrame.html#pandas.DataFrame "pandas.DataFrame")
    constructed with an older version of pandas could not be unpickled ([GH 42345](https://github.com/pandas-dev/pandas/issues/42345))'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Performance regression in constructing a [`DataFrame`](../reference/api/pandas.DataFrame.html#pandas.DataFrame
    "pandas.DataFrame") from a dictionary of dictionaries ([GH 42248](https://github.com/pandas-dev/pandas/issues/42248))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.agg()`](../reference/api/pandas.DataFrame.agg.html#pandas.DataFrame.agg
    "pandas.DataFrame.agg") dropping values when the DataFrame had an Extension Array
    dtype, a duplicate index, and `axis=1` ([GH 42380](https://github.com/pandas-dev/pandas/issues/42380))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.astype()`](../reference/api/pandas.DataFrame.astype.html#pandas.DataFrame.astype
    "pandas.DataFrame.astype") changing the order of noncontiguous data ([GH 42396](https://github.com/pandas-dev/pandas/issues/42396))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Performance regression in [`DataFrame`](../reference/api/pandas.DataFrame.html#pandas.DataFrame
    "pandas.DataFrame") in reduction operations requiring casting such as [`DataFrame.mean()`](../reference/api/pandas.DataFrame.mean.html#pandas.DataFrame.mean
    "pandas.DataFrame.mean") on integer data ([GH 38592](https://github.com/pandas-dev/pandas/issues/38592))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Performance regression in [`DataFrame.to_dict()`](../reference/api/pandas.DataFrame.to_dict.html#pandas.DataFrame.to_dict
    "pandas.DataFrame.to_dict") and [`Series.to_dict()`](../reference/api/pandas.Series.to_dict.html#pandas.Series.to_dict
    "pandas.Series.to_dict") when `orient` argument one of “records”, “dict”, or “split”
    ([GH 42352](https://github.com/pandas-dev/pandas/issues/42352))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in indexing with a `list` subclass incorrectly raising `TypeError`
    ([GH 42433](https://github.com/pandas-dev/pandas/issues/42433), [GH 42461](https://github.com/pandas-dev/pandas/issues/42461))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.isin()`](../reference/api/pandas.DataFrame.isin.html#pandas.DataFrame.isin
    "pandas.DataFrame.isin") and [`Series.isin()`](../reference/api/pandas.Series.isin.html#pandas.Series.isin
    "pandas.Series.isin") raising `TypeError` with nullable data containing at least
    one missing value ([GH 42405](https://github.com/pandas-dev/pandas/issues/42405))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Regression in [`concat()`](../reference/api/pandas.concat.html#pandas.concat
    "pandas.concat") between objects with bool dtype and integer dtype casting to
    object instead of to integer ([GH 42092](https://github.com/pandas-dev/pandas/issues/42092))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in [`Series`](../reference/api/pandas.Series.html#pandas.Series "pandas.Series")
    constructor not accepting a `dask.Array` ([GH 38645](https://github.com/pandas-dev/pandas/issues/38645))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression for `SettingWithCopyWarning` displaying incorrect stacklevel
    ([GH 42570](https://github.com/pandas-dev/pandas/issues/42570))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression for [`merge_asof()`](../reference/api/pandas.merge_asof.html#pandas.merge_asof
    "pandas.merge_asof") raising `KeyError` when one of the `by` columns is in the
    index ([GH 34488](https://github.com/pandas-dev/pandas/issues/34488))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`to_datetime()`](../reference/api/pandas.to_datetime.html#pandas.to_datetime
    "pandas.to_datetime") returning pd.NaT for inputs that produce duplicated values,
    when `cache=True` ([GH 42259](https://github.com/pandas-dev/pandas/issues/42259))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Fixed regression in `SeriesGroupBy.value_counts()` that resulted in an `IndexError`
    when called on a Series with one row ([GH 42618](https://github.com/pandas-dev/pandas/issues/42618))  ##
    Bug fixes'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed bug in [`DataFrame.transpose()`](../reference/api/pandas.DataFrame.transpose.html#pandas.DataFrame.transpose
    "pandas.DataFrame.transpose") dropping values when the DataFrame had an Extension
    Array dtype and a duplicate index ([GH 42380](https://github.com/pandas-dev/pandas/issues/42380))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed bug in [`DataFrame.to_xml()`](../reference/api/pandas.DataFrame.to_xml.html#pandas.DataFrame.to_xml
    "pandas.DataFrame.to_xml") raising `KeyError` when called with `index=False` and
    an offset index ([GH 42458](https://github.com/pandas-dev/pandas/issues/42458))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed bug in [`Styler.set_sticky()`](../reference/api/pandas.io.formats.style.Styler.set_sticky.html#pandas.io.formats.style.Styler.set_sticky
    "pandas.io.formats.style.Styler.set_sticky") not handling index names correctly
    for single index columns case ([GH 42537](https://github.com/pandas-dev/pandas/issues/42537))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Fixed bug in [`DataFrame.copy()`](../reference/api/pandas.DataFrame.copy.html#pandas.DataFrame.copy
    "pandas.DataFrame.copy") failing to consolidate blocks in the result ([GH 42579](https://github.com/pandas-dev/pandas/issues/42579))  ##
    Contributors'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A total of 17 people contributed patches to this release. People with a “+”
    by their names contributed a patch for the first time.
  prefs: []
  type: TYPE_NORMAL
- en: Fangchen Li
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: GYvan +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Matthew Roeschke
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Matthew Zeitlin
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: MeeseeksMachine
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Pandas Development Team
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Patrick Hoefler
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Richard Shadrach
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Shoham Debnath +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Simon Hawkins
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Stephan Heßelmann +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Stephen +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Thomas Li
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Zheyuan +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: attack68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: jbrockmendel
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'neelmraman +  ## Fixed regressions'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Pandas could not be built on PyPy ([GH 42355](https://github.com/pandas-dev/pandas/issues/42355))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[`DataFrame`](../reference/api/pandas.DataFrame.html#pandas.DataFrame "pandas.DataFrame")
    constructed with an older version of pandas could not be unpickled ([GH 42345](https://github.com/pandas-dev/pandas/issues/42345))'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Performance regression in constructing a [`DataFrame`](../reference/api/pandas.DataFrame.html#pandas.DataFrame
    "pandas.DataFrame") from a dictionary of dictionaries ([GH 42248](https://github.com/pandas-dev/pandas/issues/42248))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.agg()`](../reference/api/pandas.DataFrame.agg.html#pandas.DataFrame.agg
    "pandas.DataFrame.agg") dropping values when the DataFrame had an Extension Array
    dtype, a duplicate index, and `axis=1` ([GH 42380](https://github.com/pandas-dev/pandas/issues/42380))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.astype()`](../reference/api/pandas.DataFrame.astype.html#pandas.DataFrame.astype
    "pandas.DataFrame.astype") changing the order of noncontiguous data ([GH 42396](https://github.com/pandas-dev/pandas/issues/42396))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Performance regression in [`DataFrame`](../reference/api/pandas.DataFrame.html#pandas.DataFrame
    "pandas.DataFrame") in reduction operations requiring casting such as [`DataFrame.mean()`](../reference/api/pandas.DataFrame.mean.html#pandas.DataFrame.mean
    "pandas.DataFrame.mean") on integer data ([GH 38592](https://github.com/pandas-dev/pandas/issues/38592))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Performance regression in [`DataFrame.to_dict()`](../reference/api/pandas.DataFrame.to_dict.html#pandas.DataFrame.to_dict
    "pandas.DataFrame.to_dict") and [`Series.to_dict()`](../reference/api/pandas.Series.to_dict.html#pandas.Series.to_dict
    "pandas.Series.to_dict") when `orient` argument one of “records”, “dict”, or “split”
    ([GH 42352](https://github.com/pandas-dev/pandas/issues/42352))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in indexing with a `list` subclass incorrectly raising `TypeError`
    ([GH 42433](https://github.com/pandas-dev/pandas/issues/42433), [GH 42461](https://github.com/pandas-dev/pandas/issues/42461))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.isin()`](../reference/api/pandas.DataFrame.isin.html#pandas.DataFrame.isin
    "pandas.DataFrame.isin") and [`Series.isin()`](../reference/api/pandas.Series.isin.html#pandas.Series.isin
    "pandas.Series.isin") raising `TypeError` with nullable data containing at least
    one missing value ([GH 42405](https://github.com/pandas-dev/pandas/issues/42405))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Regression in [`concat()`](../reference/api/pandas.concat.html#pandas.concat
    "pandas.concat") between objects with bool dtype and integer dtype casting to
    object instead of to integer ([GH 42092](https://github.com/pandas-dev/pandas/issues/42092))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in [`Series`](../reference/api/pandas.Series.html#pandas.Series "pandas.Series")
    constructor not accepting a `dask.Array` ([GH 38645](https://github.com/pandas-dev/pandas/issues/38645))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression for `SettingWithCopyWarning` displaying incorrect stacklevel
    ([GH 42570](https://github.com/pandas-dev/pandas/issues/42570))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression for [`merge_asof()`](../reference/api/pandas.merge_asof.html#pandas.merge_asof
    "pandas.merge_asof") raising `KeyError` when one of the `by` columns is in the
    index ([GH 34488](https://github.com/pandas-dev/pandas/issues/34488))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`to_datetime()`](../reference/api/pandas.to_datetime.html#pandas.to_datetime
    "pandas.to_datetime") returning pd.NaT for inputs that produce duplicated values,
    when `cache=True` ([GH 42259](https://github.com/pandas-dev/pandas/issues/42259))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in `SeriesGroupBy.value_counts()` that resulted in an `IndexError`
    when called on a Series with one row ([GH 42618](https://github.com/pandas-dev/pandas/issues/42618))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '## Bug fixes'
  prefs: []
  type: TYPE_NORMAL
- en: Fixed bug in [`DataFrame.transpose()`](../reference/api/pandas.DataFrame.transpose.html#pandas.DataFrame.transpose
    "pandas.DataFrame.transpose") dropping values when the DataFrame had an Extension
    Array dtype and a duplicate index ([GH 42380](https://github.com/pandas-dev/pandas/issues/42380))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed bug in [`DataFrame.to_xml()`](../reference/api/pandas.DataFrame.to_xml.html#pandas.DataFrame.to_xml
    "pandas.DataFrame.to_xml") raising `KeyError` when called with `index=False` and
    an offset index ([GH 42458](https://github.com/pandas-dev/pandas/issues/42458))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed bug in [`Styler.set_sticky()`](../reference/api/pandas.io.formats.style.Styler.set_sticky.html#pandas.io.formats.style.Styler.set_sticky
    "pandas.io.formats.style.Styler.set_sticky") not handling index names correctly
    for single index columns case ([GH 42537](https://github.com/pandas-dev/pandas/issues/42537))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed bug in [`DataFrame.copy()`](../reference/api/pandas.DataFrame.copy.html#pandas.DataFrame.copy
    "pandas.DataFrame.copy") failing to consolidate blocks in the result ([GH 42579](https://github.com/pandas-dev/pandas/issues/42579))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '## Contributors'
  prefs: []
  type: TYPE_NORMAL
- en: A total of 17 people contributed patches to this release. People with a “+”
    by their names contributed a patch for the first time.
  prefs: []
  type: TYPE_NORMAL
- en: Fangchen Li
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: GYvan +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Matthew Roeschke
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Matthew Zeitlin
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: MeeseeksMachine
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Pandas Development Team
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Patrick Hoefler
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Richard Shadrach
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Shoham Debnath +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Simon Hawkins
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Stephan Heßelmann +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Stephen +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Thomas Li
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Zheyuan +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: attack68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: jbrockmendel
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: neelmraman +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
