- en: What’s new in 2.2.1 (February 22, 2024)
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://pandas.pydata.org/docs/whatsnew/v2.2.1.html](https://pandas.pydata.org/docs/whatsnew/v2.2.1.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: These are the changes in pandas 2.2.1\. See [Release notes](index.html#release)
    for a full changelog including other versions of pandas.
  prefs: []
  type: TYPE_NORMAL
- en: '## Enhancements'
  prefs: []
  type: TYPE_NORMAL
- en: 'Added `pyarrow` pip extra so users can install pandas and pyarrow with pip
    with `pip install pandas[pyarrow]` ([GH 54466](https://github.com/pandas-dev/pandas/issues/54466))  ##
    Fixed regressions'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed memory leak in [`read_csv()`](../reference/api/pandas.read_csv.html#pandas.read_csv
    "pandas.read_csv") ([GH 57039](https://github.com/pandas-dev/pandas/issues/57039))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed performance regression in [`Series.combine_first()`](../reference/api/pandas.Series.combine_first.html#pandas.Series.combine_first
    "pandas.Series.combine_first") ([GH 55845](https://github.com/pandas-dev/pandas/issues/55845))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression causing overflow for near-minimum timestamps ([GH 57150](https://github.com/pandas-dev/pandas/issues/57150))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`concat()`](../reference/api/pandas.concat.html#pandas.concat
    "pandas.concat") changing long-standing behavior that always sorted the non-concatenation
    axis when the axis was a [`DatetimeIndex`](../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex
    "pandas.DatetimeIndex") ([GH 57006](https://github.com/pandas-dev/pandas/issues/57006))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`merge_ordered()`](../reference/api/pandas.merge_ordered.html#pandas.merge_ordered
    "pandas.merge_ordered") raising `TypeError` for `fill_method="ffill"` and `how="left"`
    ([GH 57010](https://github.com/pandas-dev/pandas/issues/57010))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`pandas.testing.assert_series_equal()`](../reference/api/pandas.testing.assert_series_equal.html#pandas.testing.assert_series_equal
    "pandas.testing.assert_series_equal") defaulting to `check_exact=True` when checking
    the [`Index`](../reference/api/pandas.Index.html#pandas.Index "pandas.Index")
    ([GH 57067](https://github.com/pandas-dev/pandas/issues/57067))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`read_json()`](../reference/api/pandas.read_json.html#pandas.read_json
    "pandas.read_json") where an [`Index`](../reference/api/pandas.Index.html#pandas.Index
    "pandas.Index") would be returned instead of a [`RangeIndex`](../reference/api/pandas.RangeIndex.html#pandas.RangeIndex
    "pandas.RangeIndex") ([GH 57429](https://github.com/pandas-dev/pandas/issues/57429))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`wide_to_long()`](../reference/api/pandas.wide_to_long.html#pandas.wide_to_long
    "pandas.wide_to_long") raising an `AttributeError` for string columns ([GH 57066](https://github.com/pandas-dev/pandas/issues/57066))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrameGroupBy.idxmin()`](../reference/api/pandas.core.groupby.DataFrameGroupBy.idxmin.html#pandas.core.groupby.DataFrameGroupBy.idxmin
    "pandas.core.groupby.DataFrameGroupBy.idxmin"), [`DataFrameGroupBy.idxmax()`](../reference/api/pandas.core.groupby.DataFrameGroupBy.idxmax.html#pandas.core.groupby.DataFrameGroupBy.idxmax
    "pandas.core.groupby.DataFrameGroupBy.idxmax"), [`SeriesGroupBy.idxmin()`](../reference/api/pandas.core.groupby.SeriesGroupBy.idxmin.html#pandas.core.groupby.SeriesGroupBy.idxmin
    "pandas.core.groupby.SeriesGroupBy.idxmin"), [`SeriesGroupBy.idxmax()`](../reference/api/pandas.core.groupby.SeriesGroupBy.idxmax.html#pandas.core.groupby.SeriesGroupBy.idxmax
    "pandas.core.groupby.SeriesGroupBy.idxmax") ignoring the `skipna` argument ([GH
    57040](https://github.com/pandas-dev/pandas/issues/57040))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrameGroupBy.idxmin()`](../reference/api/pandas.core.groupby.DataFrameGroupBy.idxmin.html#pandas.core.groupby.DataFrameGroupBy.idxmin
    "pandas.core.groupby.DataFrameGroupBy.idxmin"), [`DataFrameGroupBy.idxmax()`](../reference/api/pandas.core.groupby.DataFrameGroupBy.idxmax.html#pandas.core.groupby.DataFrameGroupBy.idxmax
    "pandas.core.groupby.DataFrameGroupBy.idxmax"), [`SeriesGroupBy.idxmin()`](../reference/api/pandas.core.groupby.SeriesGroupBy.idxmin.html#pandas.core.groupby.SeriesGroupBy.idxmin
    "pandas.core.groupby.SeriesGroupBy.idxmin"), [`SeriesGroupBy.idxmax()`](../reference/api/pandas.core.groupby.SeriesGroupBy.idxmax.html#pandas.core.groupby.SeriesGroupBy.idxmax
    "pandas.core.groupby.SeriesGroupBy.idxmax") where values containing the minimum
    or maximum value for the dtype could produce incorrect results ([GH 57040](https://github.com/pandas-dev/pandas/issues/57040))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in `CategoricalIndex.difference()` raising `KeyError` when
    other contains null values other than NaN ([GH 57318](https://github.com/pandas-dev/pandas/issues/57318))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.groupby()`](../reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby
    "pandas.DataFrame.groupby") raising `ValueError` when grouping by a [`Series`](../reference/api/pandas.Series.html#pandas.Series
    "pandas.Series") in some cases ([GH 57276](https://github.com/pandas-dev/pandas/issues/57276))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.loc()`](../reference/api/pandas.DataFrame.loc.html#pandas.DataFrame.loc
    "pandas.DataFrame.loc") raising `IndexError` for non-unique, masked dtype indexes
    where result has more than 10,000 rows ([GH 57027](https://github.com/pandas-dev/pandas/issues/57027))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.loc()`](../reference/api/pandas.DataFrame.loc.html#pandas.DataFrame.loc
    "pandas.DataFrame.loc") which was unnecessarily throwing “incompatible dtype warning”
    when expanding with partial row indexer and multiple columns (see [PDEP6](https://pandas.pydata.org/pdeps/0006-ban-upcasting.html))
    ([GH 56503](https://github.com/pandas-dev/pandas/issues/56503))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.map()`](../reference/api/pandas.DataFrame.map.html#pandas.DataFrame.map
    "pandas.DataFrame.map") with `na_action="ignore"` not being respected for NumPy
    nullable and `ArrowDtypes` ([GH 57316](https://github.com/pandas-dev/pandas/issues/57316))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.merge()`](../reference/api/pandas.DataFrame.merge.html#pandas.DataFrame.merge
    "pandas.DataFrame.merge") raising `ValueError` for certain types of 3rd-party
    extension arrays ([GH 57316](https://github.com/pandas-dev/pandas/issues/57316))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.query()`](../reference/api/pandas.DataFrame.query.html#pandas.DataFrame.query
    "pandas.DataFrame.query") with all `NaT` column with object dtype ([GH 57068](https://github.com/pandas-dev/pandas/issues/57068))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.shift()`](../reference/api/pandas.DataFrame.shift.html#pandas.DataFrame.shift
    "pandas.DataFrame.shift") raising `AssertionError` for `axis=1` and empty [`DataFrame`](../reference/api/pandas.DataFrame.html#pandas.DataFrame
    "pandas.DataFrame") ([GH 57301](https://github.com/pandas-dev/pandas/issues/57301))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.sort_index()`](../reference/api/pandas.DataFrame.sort_index.html#pandas.DataFrame.sort_index
    "pandas.DataFrame.sort_index") not producing a stable sort for a index with duplicates
    ([GH 57151](https://github.com/pandas-dev/pandas/issues/57151))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.to_dict()`](../reference/api/pandas.DataFrame.to_dict.html#pandas.DataFrame.to_dict
    "pandas.DataFrame.to_dict") with `orient='list'` and datetime or timedelta types
    returning integers ([GH 54824](https://github.com/pandas-dev/pandas/issues/54824))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.to_json()`](../reference/api/pandas.DataFrame.to_json.html#pandas.DataFrame.to_json
    "pandas.DataFrame.to_json") converting nullable integers to floats ([GH 57224](https://github.com/pandas-dev/pandas/issues/57224))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.to_sql()`](../reference/api/pandas.DataFrame.to_sql.html#pandas.DataFrame.to_sql
    "pandas.DataFrame.to_sql") when `method="multi"` is passed and the dialect type
    is not Oracle ([GH 57310](https://github.com/pandas-dev/pandas/issues/57310))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.transpose()`](../reference/api/pandas.DataFrame.transpose.html#pandas.DataFrame.transpose
    "pandas.DataFrame.transpose") with nullable extension dtypes not having F-contiguous
    data potentially causing exceptions when used ([GH 57315](https://github.com/pandas-dev/pandas/issues/57315))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.update()`](../reference/api/pandas.DataFrame.update.html#pandas.DataFrame.update
    "pandas.DataFrame.update") emitting incorrect warnings about downcasting ([GH
    57124](https://github.com/pandas-dev/pandas/issues/57124))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in `DataFrameGroupBy.idxmin()`, `DataFrameGroupBy.idxmax()`,
    `SeriesGroupBy.idxmin()`, `SeriesGroupBy.idxmax()` ignoring the `skipna` argument
    ([GH 57040](https://github.com/pandas-dev/pandas/issues/57040))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in `DataFrameGroupBy.idxmin()`, `DataFrameGroupBy.idxmax()`,
    `SeriesGroupBy.idxmin()`, `SeriesGroupBy.idxmax()` where values containing the
    minimum or maximum value for the dtype could produce incorrect results ([GH 57040](https://github.com/pandas-dev/pandas/issues/57040))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in `ExtensionArray.to_numpy()` raising for non-numeric masked
    dtypes ([GH 56991](https://github.com/pandas-dev/pandas/issues/56991))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`Index.join()`](../reference/api/pandas.Index.join.html#pandas.Index.join
    "pandas.Index.join") raising `TypeError` when joining an empty index to a non-empty
    index containing mixed dtype values ([GH 57048](https://github.com/pandas-dev/pandas/issues/57048))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`Series.astype()`](../reference/api/pandas.Series.astype.html#pandas.Series.astype
    "pandas.Series.astype") introducing decimals when converting from integer with
    missing values to string dtype ([GH 57418](https://github.com/pandas-dev/pandas/issues/57418))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`Series.pct_change()`](../reference/api/pandas.Series.pct_change.html#pandas.Series.pct_change
    "pandas.Series.pct_change") raising a `ValueError` for an empty [`Series`](../reference/api/pandas.Series.html#pandas.Series
    "pandas.Series") ([GH 57056](https://github.com/pandas-dev/pandas/issues/57056))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`Series.to_numpy()`](../reference/api/pandas.Series.to_numpy.html#pandas.Series.to_numpy
    "pandas.Series.to_numpy") when dtype is given as float and the data contains NaNs
    ([GH 57121](https://github.com/pandas-dev/pandas/issues/57121))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Fixed regression in addition or subtraction of `DateOffset` objects with millisecond
    components to `datetime64` [`Index`](../reference/api/pandas.Index.html#pandas.Index
    "pandas.Index"), [`Series`](../reference/api/pandas.Series.html#pandas.Series
    "pandas.Series"), or [`DataFrame`](../reference/api/pandas.DataFrame.html#pandas.DataFrame
    "pandas.DataFrame") ([GH 57529](https://github.com/pandas-dev/pandas/issues/57529))  ##
    Bug fixes'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed bug in [`pandas.api.interchange.from_dataframe()`](../reference/api/pandas.api.interchange.from_dataframe.html#pandas.api.interchange.from_dataframe
    "pandas.api.interchange.from_dataframe") which was raising for Nullable integers
    ([GH 55069](https://github.com/pandas-dev/pandas/issues/55069))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed bug in [`pandas.api.interchange.from_dataframe()`](../reference/api/pandas.api.interchange.from_dataframe.html#pandas.api.interchange.from_dataframe
    "pandas.api.interchange.from_dataframe") which was raising for empty inputs ([GH
    56700](https://github.com/pandas-dev/pandas/issues/56700))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed bug in [`pandas.api.interchange.from_dataframe()`](../reference/api/pandas.api.interchange.from_dataframe.html#pandas.api.interchange.from_dataframe
    "pandas.api.interchange.from_dataframe") which wasn’t converting columns names
    to strings ([GH 55069](https://github.com/pandas-dev/pandas/issues/55069))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed bug in `DataFrame.__getitem__()` for empty [`DataFrame`](../reference/api/pandas.DataFrame.html#pandas.DataFrame
    "pandas.DataFrame") with Copy-on-Write enabled ([GH 57130](https://github.com/pandas-dev/pandas/issues/57130))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Fixed bug in [`PeriodIndex.asfreq()`](../reference/api/pandas.PeriodIndex.asfreq.html#pandas.PeriodIndex.asfreq
    "pandas.PeriodIndex.asfreq") which was silently converting frequencies which are
    not supported as period frequencies instead of raising an error ([GH 56945](https://github.com/pandas-dev/pandas/issues/56945))  ##
    Other'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Note
  prefs: []
  type: TYPE_NORMAL
- en: The `DeprecationWarning` that was raised when pandas was imported without PyArrow
    being installed has been removed. This decision was made because the warning was
    too noisy for too many users and a lot of feedback was collected about the decision
    to make PyArrow a required dependency. Pandas is currently considering the decision
    whether or not PyArrow should be added as a hard dependency in 3.0\. Interested
    users can follow the discussion [here](https://github.com/pandas-dev/pandas/issues/57073).
  prefs: []
  type: TYPE_NORMAL
- en: Added the argument `skipna` to `DataFrameGroupBy.first()`, `DataFrameGroupBy.last()`,
    `SeriesGroupBy.first()`, and `SeriesGroupBy.last()`; achieving `skipna=False`
    used to be available via `DataFrameGroupBy.nth()`, but the behavior was changed
    in pandas 2.0.0 ([GH 57019](https://github.com/pandas-dev/pandas/issues/57019))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Added the argument `skipna` to `Resampler.first()`, `Resampler.last()` ([GH
    57019](https://github.com/pandas-dev/pandas/issues/57019))  ## Contributors'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A total of 14 people contributed patches to this release. People with a “+”
    by their names contributed a patch for the first time.
  prefs: []
  type: TYPE_NORMAL
- en: Albert Villanova del Moral
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Luke Manley
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Lumberbot (aka Jack)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Marco Edward Gorelli
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Matthew Roeschke
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Natalia Mokeeva
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Pandas Development Team
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Patrick Hoefler
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Richard Shadrach
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Robert Schmidtke +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Samuel Chai +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Thomas Li
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: William Ayd
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'dependabot[bot]  ## Enhancements'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Added `pyarrow` pip extra so users can install pandas and pyarrow with pip with
    `pip install pandas[pyarrow]` ([GH 54466](https://github.com/pandas-dev/pandas/issues/54466))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '## Fixed regressions'
  prefs: []
  type: TYPE_NORMAL
- en: Fixed memory leak in [`read_csv()`](../reference/api/pandas.read_csv.html#pandas.read_csv
    "pandas.read_csv") ([GH 57039](https://github.com/pandas-dev/pandas/issues/57039))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed performance regression in [`Series.combine_first()`](../reference/api/pandas.Series.combine_first.html#pandas.Series.combine_first
    "pandas.Series.combine_first") ([GH 55845](https://github.com/pandas-dev/pandas/issues/55845))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression causing overflow for near-minimum timestamps ([GH 57150](https://github.com/pandas-dev/pandas/issues/57150))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`concat()`](../reference/api/pandas.concat.html#pandas.concat
    "pandas.concat") changing long-standing behavior that always sorted the non-concatenation
    axis when the axis was a [`DatetimeIndex`](../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex
    "pandas.DatetimeIndex") ([GH 57006](https://github.com/pandas-dev/pandas/issues/57006))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`merge_ordered()`](../reference/api/pandas.merge_ordered.html#pandas.merge_ordered
    "pandas.merge_ordered") raising `TypeError` for `fill_method="ffill"` and `how="left"`
    ([GH 57010](https://github.com/pandas-dev/pandas/issues/57010))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`pandas.testing.assert_series_equal()`](../reference/api/pandas.testing.assert_series_equal.html#pandas.testing.assert_series_equal
    "pandas.testing.assert_series_equal") defaulting to `check_exact=True` when checking
    the [`Index`](../reference/api/pandas.Index.html#pandas.Index "pandas.Index")
    ([GH 57067](https://github.com/pandas-dev/pandas/issues/57067))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`read_json()`](../reference/api/pandas.read_json.html#pandas.read_json
    "pandas.read_json") where an [`Index`](../reference/api/pandas.Index.html#pandas.Index
    "pandas.Index") would be returned instead of a [`RangeIndex`](../reference/api/pandas.RangeIndex.html#pandas.RangeIndex
    "pandas.RangeIndex") ([GH 57429](https://github.com/pandas-dev/pandas/issues/57429))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`wide_to_long()`](../reference/api/pandas.wide_to_long.html#pandas.wide_to_long
    "pandas.wide_to_long") raising an `AttributeError` for string columns ([GH 57066](https://github.com/pandas-dev/pandas/issues/57066))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrameGroupBy.idxmin()`](../reference/api/pandas.core.groupby.DataFrameGroupBy.idxmin.html#pandas.core.groupby.DataFrameGroupBy.idxmin
    "pandas.core.groupby.DataFrameGroupBy.idxmin"), [`DataFrameGroupBy.idxmax()`](../reference/api/pandas.core.groupby.DataFrameGroupBy.idxmax.html#pandas.core.groupby.DataFrameGroupBy.idxmax
    "pandas.core.groupby.DataFrameGroupBy.idxmax"), [`SeriesGroupBy.idxmin()`](../reference/api/pandas.core.groupby.SeriesGroupBy.idxmin.html#pandas.core.groupby.SeriesGroupBy.idxmin
    "pandas.core.groupby.SeriesGroupBy.idxmin"), [`SeriesGroupBy.idxmax()`](../reference/api/pandas.core.groupby.SeriesGroupBy.idxmax.html#pandas.core.groupby.SeriesGroupBy.idxmax
    "pandas.core.groupby.SeriesGroupBy.idxmax") ignoring the `skipna` argument ([GH
    57040](https://github.com/pandas-dev/pandas/issues/57040))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrameGroupBy.idxmin()`](../reference/api/pandas.core.groupby.DataFrameGroupBy.idxmin.html#pandas.core.groupby.DataFrameGroupBy.idxmin
    "pandas.core.groupby.DataFrameGroupBy.idxmin"), [`DataFrameGroupBy.idxmax()`](../reference/api/pandas.core.groupby.DataFrameGroupBy.idxmax.html#pandas.core.groupby.DataFrameGroupBy.idxmax
    "pandas.core.groupby.DataFrameGroupBy.idxmax"), [`SeriesGroupBy.idxmin()`](../reference/api/pandas.core.groupby.SeriesGroupBy.idxmin.html#pandas.core.groupby.SeriesGroupBy.idxmin
    "pandas.core.groupby.SeriesGroupBy.idxmin"), [`SeriesGroupBy.idxmax()`](../reference/api/pandas.core.groupby.SeriesGroupBy.idxmax.html#pandas.core.groupby.SeriesGroupBy.idxmax
    "pandas.core.groupby.SeriesGroupBy.idxmax") where values containing the minimum
    or maximum value for the dtype could produce incorrect results ([GH 57040](https://github.com/pandas-dev/pandas/issues/57040))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in `CategoricalIndex.difference()` raising `KeyError` when
    other contains null values other than NaN ([GH 57318](https://github.com/pandas-dev/pandas/issues/57318))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.groupby()`](../reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby
    "pandas.DataFrame.groupby") raising `ValueError` when grouping by a [`Series`](../reference/api/pandas.Series.html#pandas.Series
    "pandas.Series") in some cases ([GH 57276](https://github.com/pandas-dev/pandas/issues/57276))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.loc()`](../reference/api/pandas.DataFrame.loc.html#pandas.DataFrame.loc
    "pandas.DataFrame.loc") raising `IndexError` for non-unique, masked dtype indexes
    where result has more than 10,000 rows ([GH 57027](https://github.com/pandas-dev/pandas/issues/57027))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.loc()`](../reference/api/pandas.DataFrame.loc.html#pandas.DataFrame.loc
    "pandas.DataFrame.loc") which was unnecessarily throwing “incompatible dtype warning”
    when expanding with partial row indexer and multiple columns (see [PDEP6](https://pandas.pydata.org/pdeps/0006-ban-upcasting.html))
    ([GH 56503](https://github.com/pandas-dev/pandas/issues/56503))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.map()`](../reference/api/pandas.DataFrame.map.html#pandas.DataFrame.map
    "pandas.DataFrame.map") with `na_action="ignore"` not being respected for NumPy
    nullable and `ArrowDtypes` ([GH 57316](https://github.com/pandas-dev/pandas/issues/57316))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.merge()`](../reference/api/pandas.DataFrame.merge.html#pandas.DataFrame.merge
    "pandas.DataFrame.merge") raising `ValueError` for certain types of 3rd-party
    extension arrays ([GH 57316](https://github.com/pandas-dev/pandas/issues/57316))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.query()`](../reference/api/pandas.DataFrame.query.html#pandas.DataFrame.query
    "pandas.DataFrame.query") with all `NaT` column with object dtype ([GH 57068](https://github.com/pandas-dev/pandas/issues/57068))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.shift()`](../reference/api/pandas.DataFrame.shift.html#pandas.DataFrame.shift
    "pandas.DataFrame.shift") raising `AssertionError` for `axis=1` and empty [`DataFrame`](../reference/api/pandas.DataFrame.html#pandas.DataFrame
    "pandas.DataFrame") ([GH 57301](https://github.com/pandas-dev/pandas/issues/57301))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.sort_index()`](../reference/api/pandas.DataFrame.sort_index.html#pandas.DataFrame.sort_index
    "pandas.DataFrame.sort_index") not producing a stable sort for a index with duplicates
    ([GH 57151](https://github.com/pandas-dev/pandas/issues/57151))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.to_dict()`](../reference/api/pandas.DataFrame.to_dict.html#pandas.DataFrame.to_dict
    "pandas.DataFrame.to_dict") with `orient='list'` and datetime or timedelta types
    returning integers ([GH 54824](https://github.com/pandas-dev/pandas/issues/54824))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.to_json()`](../reference/api/pandas.DataFrame.to_json.html#pandas.DataFrame.to_json
    "pandas.DataFrame.to_json") converting nullable integers to floats ([GH 57224](https://github.com/pandas-dev/pandas/issues/57224))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.to_sql()`](../reference/api/pandas.DataFrame.to_sql.html#pandas.DataFrame.to_sql
    "pandas.DataFrame.to_sql") when `method="multi"` is passed and the dialect type
    is not Oracle ([GH 57310](https://github.com/pandas-dev/pandas/issues/57310))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.transpose()`](../reference/api/pandas.DataFrame.transpose.html#pandas.DataFrame.transpose
    "pandas.DataFrame.transpose") with nullable extension dtypes not having F-contiguous
    data potentially causing exceptions when used ([GH 57315](https://github.com/pandas-dev/pandas/issues/57315))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.update()`](../reference/api/pandas.DataFrame.update.html#pandas.DataFrame.update
    "pandas.DataFrame.update") emitting incorrect warnings about downcasting ([GH
    57124](https://github.com/pandas-dev/pandas/issues/57124))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in `DataFrameGroupBy.idxmin()`, `DataFrameGroupBy.idxmax()`,
    `SeriesGroupBy.idxmin()`, `SeriesGroupBy.idxmax()` ignoring the `skipna` argument
    ([GH 57040](https://github.com/pandas-dev/pandas/issues/57040))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in `DataFrameGroupBy.idxmin()`, `DataFrameGroupBy.idxmax()`,
    `SeriesGroupBy.idxmin()`, `SeriesGroupBy.idxmax()` where values containing the
    minimum or maximum value for the dtype could produce incorrect results ([GH 57040](https://github.com/pandas-dev/pandas/issues/57040))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in `ExtensionArray.to_numpy()` raising for non-numeric masked
    dtypes ([GH 56991](https://github.com/pandas-dev/pandas/issues/56991))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`Index.join()`](../reference/api/pandas.Index.join.html#pandas.Index.join
    "pandas.Index.join") raising `TypeError` when joining an empty index to a non-empty
    index containing mixed dtype values ([GH 57048](https://github.com/pandas-dev/pandas/issues/57048))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`Series.astype()`](../reference/api/pandas.Series.astype.html#pandas.Series.astype
    "pandas.Series.astype") introducing decimals when converting from integer with
    missing values to string dtype ([GH 57418](https://github.com/pandas-dev/pandas/issues/57418))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`Series.pct_change()`](../reference/api/pandas.Series.pct_change.html#pandas.Series.pct_change
    "pandas.Series.pct_change") raising a `ValueError` for an empty [`Series`](../reference/api/pandas.Series.html#pandas.Series
    "pandas.Series") ([GH 57056](https://github.com/pandas-dev/pandas/issues/57056))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`Series.to_numpy()`](../reference/api/pandas.Series.to_numpy.html#pandas.Series.to_numpy
    "pandas.Series.to_numpy") when dtype is given as float and the data contains NaNs
    ([GH 57121](https://github.com/pandas-dev/pandas/issues/57121))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in addition or subtraction of `DateOffset` objects with millisecond
    components to `datetime64` [`Index`](../reference/api/pandas.Index.html#pandas.Index
    "pandas.Index"), [`Series`](../reference/api/pandas.Series.html#pandas.Series
    "pandas.Series"), or [`DataFrame`](../reference/api/pandas.DataFrame.html#pandas.DataFrame
    "pandas.DataFrame") ([GH 57529](https://github.com/pandas-dev/pandas/issues/57529))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '## Bug fixes'
  prefs: []
  type: TYPE_NORMAL
- en: Fixed bug in [`pandas.api.interchange.from_dataframe()`](../reference/api/pandas.api.interchange.from_dataframe.html#pandas.api.interchange.from_dataframe
    "pandas.api.interchange.from_dataframe") which was raising for Nullable integers
    ([GH 55069](https://github.com/pandas-dev/pandas/issues/55069))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed bug in [`pandas.api.interchange.from_dataframe()`](../reference/api/pandas.api.interchange.from_dataframe.html#pandas.api.interchange.from_dataframe
    "pandas.api.interchange.from_dataframe") which was raising for empty inputs ([GH
    56700](https://github.com/pandas-dev/pandas/issues/56700))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed bug in [`pandas.api.interchange.from_dataframe()`](../reference/api/pandas.api.interchange.from_dataframe.html#pandas.api.interchange.from_dataframe
    "pandas.api.interchange.from_dataframe") which wasn’t converting columns names
    to strings ([GH 55069](https://github.com/pandas-dev/pandas/issues/55069))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed bug in `DataFrame.__getitem__()` for empty [`DataFrame`](../reference/api/pandas.DataFrame.html#pandas.DataFrame
    "pandas.DataFrame") with Copy-on-Write enabled ([GH 57130](https://github.com/pandas-dev/pandas/issues/57130))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed bug in [`PeriodIndex.asfreq()`](../reference/api/pandas.PeriodIndex.asfreq.html#pandas.PeriodIndex.asfreq
    "pandas.PeriodIndex.asfreq") which was silently converting frequencies which are
    not supported as period frequencies instead of raising an error ([GH 56945](https://github.com/pandas-dev/pandas/issues/56945))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '## Other'
  prefs: []
  type: TYPE_NORMAL
- en: Note
  prefs: []
  type: TYPE_NORMAL
- en: The `DeprecationWarning` that was raised when pandas was imported without PyArrow
    being installed has been removed. This decision was made because the warning was
    too noisy for too many users and a lot of feedback was collected about the decision
    to make PyArrow a required dependency. Pandas is currently considering the decision
    whether or not PyArrow should be added as a hard dependency in 3.0\. Interested
    users can follow the discussion [here](https://github.com/pandas-dev/pandas/issues/57073).
  prefs: []
  type: TYPE_NORMAL
- en: Added the argument `skipna` to `DataFrameGroupBy.first()`, `DataFrameGroupBy.last()`,
    `SeriesGroupBy.first()`, and `SeriesGroupBy.last()`; achieving `skipna=False`
    used to be available via `DataFrameGroupBy.nth()`, but the behavior was changed
    in pandas 2.0.0 ([GH 57019](https://github.com/pandas-dev/pandas/issues/57019))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Added the argument `skipna` to `Resampler.first()`, `Resampler.last()` ([GH
    57019](https://github.com/pandas-dev/pandas/issues/57019))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '## Contributors'
  prefs: []
  type: TYPE_NORMAL
- en: A total of 14 people contributed patches to this release. People with a “+”
    by their names contributed a patch for the first time.
  prefs: []
  type: TYPE_NORMAL
- en: Albert Villanova del Moral
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Luke Manley
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Lumberbot (aka Jack)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Marco Edward Gorelli
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Matthew Roeschke
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Natalia Mokeeva
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Pandas Development Team
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Patrick Hoefler
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Richard Shadrach
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Robert Schmidtke +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Samuel Chai +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Thomas Li
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: William Ayd
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: dependabot[bot]
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
