- en: What’s new in 1.0.4 (May 28, 2020)
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://pandas.pydata.org/docs/whatsnew/v1.0.4.html](https://pandas.pydata.org/docs/whatsnew/v1.0.4.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: These are the changes in pandas 1.0.4\. See [Release notes](index.html#release)
    for a full changelog including other versions of pandas.
  prefs: []
  type: TYPE_NORMAL
- en: '## Fixed regressions'
  prefs: []
  type: TYPE_NORMAL
- en: Fix regression where [`Series.isna()`](../reference/api/pandas.Series.isna.html#pandas.Series.isna
    "pandas.Series.isna") and [`DataFrame.isna()`](../reference/api/pandas.DataFrame.isna.html#pandas.DataFrame.isna
    "pandas.DataFrame.isna") would raise for categorical dtype when `pandas.options.mode.use_inf_as_na`
    was set to `True` ([GH 33594](https://github.com/pandas-dev/pandas/issues/33594))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fix regression in [`DataFrameGroupBy.first()`](../reference/api/pandas.core.groupby.DataFrameGroupBy.first.html#pandas.core.groupby.DataFrameGroupBy.first
    "pandas.core.groupby.DataFrameGroupBy.first"), [`SeriesGroupBy.first()`](../reference/api/pandas.core.groupby.SeriesGroupBy.first.html#pandas.core.groupby.SeriesGroupBy.first
    "pandas.core.groupby.SeriesGroupBy.first"), [`DataFrameGroupBy.last()`](../reference/api/pandas.core.groupby.DataFrameGroupBy.last.html#pandas.core.groupby.DataFrameGroupBy.last
    "pandas.core.groupby.DataFrameGroupBy.last"), and [`SeriesGroupBy.last()`](../reference/api/pandas.core.groupby.SeriesGroupBy.last.html#pandas.core.groupby.SeriesGroupBy.last
    "pandas.core.groupby.SeriesGroupBy.last") where None is not preserved in object
    dtype ([GH 32800](https://github.com/pandas-dev/pandas/issues/32800))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fix regression in DataFrame reductions using `numeric_only=True` and ExtensionArrays
    ([GH 33256](https://github.com/pandas-dev/pandas/issues/33256)).
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fix performance regression in `memory_usage(deep=True)` for object dtype ([GH
    33012](https://github.com/pandas-dev/pandas/issues/33012))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fix regression where `Categorical.replace()` would replace with `NaN` whenever
    the new value and replacement value were equal ([GH 33288](https://github.com/pandas-dev/pandas/issues/33288))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fix regression where an ordered [`Categorical`](../reference/api/pandas.Categorical.html#pandas.Categorical
    "pandas.Categorical") containing only `NaN` values would raise rather than returning
    `NaN` when taking the minimum or maximum ([GH 33450](https://github.com/pandas-dev/pandas/issues/33450))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fix regression in `DataFrameGroupBy.agg()` with dictionary input losing `ExtensionArray`
    dtypes ([GH 32194](https://github.com/pandas-dev/pandas/issues/32194))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fix to preserve the ability to index with the “nearest” method with xarray’s
    CFTimeIndex, an [`Index`](../reference/api/pandas.Index.html#pandas.Index "pandas.Index")
    subclass ([pydata/xarray#3751](https://github.com/pydata/xarray/issues/3751),
    [GH 32905](https://github.com/pandas-dev/pandas/issues/32905)).
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Fix regression in [`DataFrame.describe()`](../reference/api/pandas.DataFrame.describe.html#pandas.DataFrame.describe
    "pandas.DataFrame.describe") raising `TypeError: unhashable type: ''dict''` ([GH
    32409](https://github.com/pandas-dev/pandas/issues/32409))'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fix regression in [`DataFrame.replace()`](../reference/api/pandas.DataFrame.replace.html#pandas.DataFrame.replace
    "pandas.DataFrame.replace") casts columns to `object` dtype if items in `to_replace`
    not in values ([GH 32988](https://github.com/pandas-dev/pandas/issues/32988))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fix regression in [`Series.groupby()`](../reference/api/pandas.Series.groupby.html#pandas.Series.groupby
    "pandas.Series.groupby") would raise `ValueError` when grouping by [`PeriodIndex`](../reference/api/pandas.PeriodIndex.html#pandas.PeriodIndex
    "pandas.PeriodIndex") level ([GH 34010](https://github.com/pandas-dev/pandas/issues/34010))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fix regression in `DataFrameGroupBy.rolling.apply()` and `SeriesGroupBy.rolling.apply()`
    ignoring args and kwargs parameters ([GH 33433](https://github.com/pandas-dev/pandas/issues/33433))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fix regression in error message with `np.min` or `np.max` on unordered [`Categorical`](../reference/api/pandas.Categorical.html#pandas.Categorical
    "pandas.Categorical") ([GH 33115](https://github.com/pandas-dev/pandas/issues/33115))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Fix regression in [`DataFrame.loc()`](../reference/api/pandas.DataFrame.loc.html#pandas.DataFrame.loc
    "pandas.DataFrame.loc") and [`Series.loc()`](../reference/api/pandas.Series.loc.html#pandas.Series.loc
    "pandas.Series.loc") throwing an error when a `datetime64[ns, tz]` value is provided
    ([GH 32395](https://github.com/pandas-dev/pandas/issues/32395))  ## Bug fixes'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in `SeriesGroupBy.first()`, `SeriesGroupBy.last()`, `SeriesGroupBy.min()`,
    and `SeriesGroupBy.max()` returning floats when applied to nullable Booleans ([GH
    33071](https://github.com/pandas-dev/pandas/issues/33071))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Bug in `Rolling.min()` and `Rolling.max()`: Growing memory usage after multiple
    calls when using a fixed window ([GH 30726](https://github.com/pandas-dev/pandas/issues/30726))'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in [`to_parquet()`](../reference/api/pandas.DataFrame.to_parquet.html#pandas.DataFrame.to_parquet
    "pandas.DataFrame.to_parquet") was not raising `PermissionError` when writing
    to a private s3 bucket with invalid creds. ([GH 27679](https://github.com/pandas-dev/pandas/issues/27679))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in [`to_csv()`](../reference/api/pandas.DataFrame.to_csv.html#pandas.DataFrame.to_csv
    "pandas.DataFrame.to_csv") was silently failing when writing to an invalid s3
    bucket. ([GH 32486](https://github.com/pandas-dev/pandas/issues/32486))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in [`read_parquet()`](../reference/api/pandas.read_parquet.html#pandas.read_parquet
    "pandas.read_parquet") was raising a `FileNotFoundError` when passed an s3 directory
    path. ([GH 26388](https://github.com/pandas-dev/pandas/issues/26388))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in [`to_parquet()`](../reference/api/pandas.DataFrame.to_parquet.html#pandas.DataFrame.to_parquet
    "pandas.DataFrame.to_parquet") was throwing an `AttributeError` when writing a
    partitioned parquet file to s3 ([GH 27596](https://github.com/pandas-dev/pandas/issues/27596))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in [`DataFrameGroupBy.quantile()`](../reference/api/pandas.core.groupby.DataFrameGroupBy.quantile.html#pandas.core.groupby.DataFrameGroupBy.quantile
    "pandas.core.groupby.DataFrameGroupBy.quantile") and [`SeriesGroupBy.quantile()`](../reference/api/pandas.core.groupby.SeriesGroupBy.quantile.html#pandas.core.groupby.SeriesGroupBy.quantile
    "pandas.core.groupby.SeriesGroupBy.quantile") causes the quantiles to be shifted
    when the `by` axis contains `NaN` ([GH 33200](https://github.com/pandas-dev/pandas/issues/33200),
    [GH 33569](https://github.com/pandas-dev/pandas/issues/33569))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Contributors
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: A total of 18 people contributed patches to this release. People with a “+”
    by their names contributed a patch for the first time.
  prefs: []
  type: TYPE_NORMAL
- en: Daniel Saxton
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: JDkuba +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Joris Van den Bossche
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Kaiqi Dong
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Mabel Villalba
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: MeeseeksMachine
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: MomIsBestFriend
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Pandas Development Team
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Simon Hawkins
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Spencer Clark +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Tom Augspurger
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Vikas Pandey +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: alimcmaster1
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: h-vishal +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: jbrockmendel
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: mproszewska +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: neilkg +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: rebecca-palmer +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '## Fixed regressions'
  prefs: []
  type: TYPE_NORMAL
- en: Fix regression where [`Series.isna()`](../reference/api/pandas.Series.isna.html#pandas.Series.isna
    "pandas.Series.isna") and [`DataFrame.isna()`](../reference/api/pandas.DataFrame.isna.html#pandas.DataFrame.isna
    "pandas.DataFrame.isna") would raise for categorical dtype when `pandas.options.mode.use_inf_as_na`
    was set to `True` ([GH 33594](https://github.com/pandas-dev/pandas/issues/33594))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fix regression in [`DataFrameGroupBy.first()`](../reference/api/pandas.core.groupby.DataFrameGroupBy.first.html#pandas.core.groupby.DataFrameGroupBy.first
    "pandas.core.groupby.DataFrameGroupBy.first"), [`SeriesGroupBy.first()`](../reference/api/pandas.core.groupby.SeriesGroupBy.first.html#pandas.core.groupby.SeriesGroupBy.first
    "pandas.core.groupby.SeriesGroupBy.first"), [`DataFrameGroupBy.last()`](../reference/api/pandas.core.groupby.DataFrameGroupBy.last.html#pandas.core.groupby.DataFrameGroupBy.last
    "pandas.core.groupby.DataFrameGroupBy.last"), and [`SeriesGroupBy.last()`](../reference/api/pandas.core.groupby.SeriesGroupBy.last.html#pandas.core.groupby.SeriesGroupBy.last
    "pandas.core.groupby.SeriesGroupBy.last") where None is not preserved in object
    dtype ([GH 32800](https://github.com/pandas-dev/pandas/issues/32800))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fix regression in DataFrame reductions using `numeric_only=True` and ExtensionArrays
    ([GH 33256](https://github.com/pandas-dev/pandas/issues/33256)).
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fix performance regression in `memory_usage(deep=True)` for object dtype ([GH
    33012](https://github.com/pandas-dev/pandas/issues/33012))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fix regression where `Categorical.replace()` would replace with `NaN` whenever
    the new value and replacement value were equal ([GH 33288](https://github.com/pandas-dev/pandas/issues/33288))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fix regression where an ordered [`Categorical`](../reference/api/pandas.Categorical.html#pandas.Categorical
    "pandas.Categorical") containing only `NaN` values would raise rather than returning
    `NaN` when taking the minimum or maximum ([GH 33450](https://github.com/pandas-dev/pandas/issues/33450))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fix regression in `DataFrameGroupBy.agg()` with dictionary input losing `ExtensionArray`
    dtypes ([GH 32194](https://github.com/pandas-dev/pandas/issues/32194))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fix to preserve the ability to index with the “nearest” method with xarray’s
    CFTimeIndex, an [`Index`](../reference/api/pandas.Index.html#pandas.Index "pandas.Index")
    subclass ([pydata/xarray#3751](https://github.com/pydata/xarray/issues/3751),
    [GH 32905](https://github.com/pandas-dev/pandas/issues/32905)).
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Fix regression in [`DataFrame.describe()`](../reference/api/pandas.DataFrame.describe.html#pandas.DataFrame.describe
    "pandas.DataFrame.describe") raising `TypeError: unhashable type: ''dict''` ([GH
    32409](https://github.com/pandas-dev/pandas/issues/32409))'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fix regression in [`DataFrame.replace()`](../reference/api/pandas.DataFrame.replace.html#pandas.DataFrame.replace
    "pandas.DataFrame.replace") casts columns to `object` dtype if items in `to_replace`
    not in values ([GH 32988](https://github.com/pandas-dev/pandas/issues/32988))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fix regression in [`Series.groupby()`](../reference/api/pandas.Series.groupby.html#pandas.Series.groupby
    "pandas.Series.groupby") would raise `ValueError` when grouping by [`PeriodIndex`](../reference/api/pandas.PeriodIndex.html#pandas.PeriodIndex
    "pandas.PeriodIndex") level ([GH 34010](https://github.com/pandas-dev/pandas/issues/34010))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fix regression in `DataFrameGroupBy.rolling.apply()` and `SeriesGroupBy.rolling.apply()`
    ignoring args and kwargs parameters ([GH 33433](https://github.com/pandas-dev/pandas/issues/33433))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fix regression in error message with `np.min` or `np.max` on unordered [`Categorical`](../reference/api/pandas.Categorical.html#pandas.Categorical
    "pandas.Categorical") ([GH 33115](https://github.com/pandas-dev/pandas/issues/33115))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fix regression in [`DataFrame.loc()`](../reference/api/pandas.DataFrame.loc.html#pandas.DataFrame.loc
    "pandas.DataFrame.loc") and [`Series.loc()`](../reference/api/pandas.Series.loc.html#pandas.Series.loc
    "pandas.Series.loc") throwing an error when a `datetime64[ns, tz]` value is provided
    ([GH 32395](https://github.com/pandas-dev/pandas/issues/32395))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '## Bug fixes'
  prefs: []
  type: TYPE_NORMAL
- en: Bug in `SeriesGroupBy.first()`, `SeriesGroupBy.last()`, `SeriesGroupBy.min()`,
    and `SeriesGroupBy.max()` returning floats when applied to nullable Booleans ([GH
    33071](https://github.com/pandas-dev/pandas/issues/33071))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Bug in `Rolling.min()` and `Rolling.max()`: Growing memory usage after multiple
    calls when using a fixed window ([GH 30726](https://github.com/pandas-dev/pandas/issues/30726))'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in [`to_parquet()`](../reference/api/pandas.DataFrame.to_parquet.html#pandas.DataFrame.to_parquet
    "pandas.DataFrame.to_parquet") was not raising `PermissionError` when writing
    to a private s3 bucket with invalid creds. ([GH 27679](https://github.com/pandas-dev/pandas/issues/27679))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in [`to_csv()`](../reference/api/pandas.DataFrame.to_csv.html#pandas.DataFrame.to_csv
    "pandas.DataFrame.to_csv") was silently failing when writing to an invalid s3
    bucket. ([GH 32486](https://github.com/pandas-dev/pandas/issues/32486))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in [`read_parquet()`](../reference/api/pandas.read_parquet.html#pandas.read_parquet
    "pandas.read_parquet") was raising a `FileNotFoundError` when passed an s3 directory
    path. ([GH 26388](https://github.com/pandas-dev/pandas/issues/26388))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in [`to_parquet()`](../reference/api/pandas.DataFrame.to_parquet.html#pandas.DataFrame.to_parquet
    "pandas.DataFrame.to_parquet") was throwing an `AttributeError` when writing a
    partitioned parquet file to s3 ([GH 27596](https://github.com/pandas-dev/pandas/issues/27596))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in [`DataFrameGroupBy.quantile()`](../reference/api/pandas.core.groupby.DataFrameGroupBy.quantile.html#pandas.core.groupby.DataFrameGroupBy.quantile
    "pandas.core.groupby.DataFrameGroupBy.quantile") and [`SeriesGroupBy.quantile()`](../reference/api/pandas.core.groupby.SeriesGroupBy.quantile.html#pandas.core.groupby.SeriesGroupBy.quantile
    "pandas.core.groupby.SeriesGroupBy.quantile") causes the quantiles to be shifted
    when the `by` axis contains `NaN` ([GH 33200](https://github.com/pandas-dev/pandas/issues/33200),
    [GH 33569](https://github.com/pandas-dev/pandas/issues/33569))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Contributors
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: A total of 18 people contributed patches to this release. People with a “+”
    by their names contributed a patch for the first time.
  prefs: []
  type: TYPE_NORMAL
- en: Daniel Saxton
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: JDkuba +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Joris Van den Bossche
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Kaiqi Dong
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Mabel Villalba
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: MeeseeksMachine
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: MomIsBestFriend
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Pandas Development Team
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Simon Hawkins
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Spencer Clark +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Tom Augspurger
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Vikas Pandey +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: alimcmaster1
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: h-vishal +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: jbrockmendel
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: mproszewska +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: neilkg +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: rebecca-palmer +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
