- en: Version 0.15.0 (October 18, 2014)
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 版本 0.15.0（2014年10月18日）
- en: 原文：[https://pandas.pydata.org/docs/whatsnew/v0.15.0.html](https://pandas.pydata.org/docs/whatsnew/v0.15.0.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://pandas.pydata.org/docs/whatsnew/v0.15.0.html](https://pandas.pydata.org/docs/whatsnew/v0.15.0.html)
- en: This is a major release from 0.14.1 and includes a small number of API changes,
    several new features, enhancements, and performance improvements along with a
    large number of bug fixes. We recommend that all users upgrade to this version.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 这是从 0.14.1 版本的一个重大发布，包括少量 API 更改、几个新功能、增强功能和性能改进，以及大量的错误修复。我们建议所有用户升级到这个版本。
- en: Warning
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 警告
- en: pandas >= 0.15.0 will no longer support compatibility with NumPy versions <
    1.7.0\. If you want to use the latest versions of pandas, please upgrade to NumPy
    >= 1.7.0 ([GH 7711](https://github.com/pandas-dev/pandas/issues/7711))
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: pandas >= 0.15.0 将不再支持与 NumPy 版本 < 1.7.0 兼容。如果您想使用最新版本的 pandas，请升级到 NumPy >=
    1.7.0 ([GH 7711](https://github.com/pandas-dev/pandas/issues/7711))
- en: 'Highlights include:'
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 亮点包括：
- en: The `Categorical` type was integrated as a first-class pandas type, see [here](#whatsnew-0150-cat)
  id: totrans-6
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Categorical` 类型被整合为第一类 pandas 类型，详见[这里](#whatsnew-0150-cat)'
- en: New scalar type `Timedelta`, and a new index type `TimedeltaIndex`, see [here](#whatsnew-0150-timedeltaindex)
  id: totrans-7
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新的标量类型`Timedelta`，以及新的索引类型`TimedeltaIndex`，详见[这里](#whatsnew-0150-timedeltaindex)
- en: New datetimelike properties accessor `.dt` for Series, see [Datetimelike Properties](#whatsnew-0150-dt)
  id: totrans-8
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为 Series 新增了日期时间属性访问器`.dt`，详见[日期时间属性](#whatsnew-0150-dt)
- en: New DataFrame default display for `df.info()` to include memory usage, see [Memory
    Usage](#whatsnew-0150-memory)
  id: totrans-9
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新的 DataFrame 默认显示`df.info()`以包括内存使用情况，详见[内存使用情况](#whatsnew-0150-memory)
- en: '`read_csv` will now by default ignore blank lines when parsing, see [here](#whatsnew-0150-blanklines)'
  id: totrans-10
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`read_csv`现在默认情况下在解析时会忽略空行，详见[这里](#whatsnew-0150-blanklines)'
- en: API change in using Indexes in set operations, see [here](#whatsnew-0150-index-set-ops)
  id: totrans-11
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在集合操作中使用索引的 API 更改，详见[这里](#whatsnew-0150-index-set-ops)
- en: Enhancements in the handling of timezones, see [here](#whatsnew-0150-tz)
  id: totrans-12
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 时区处理方面的增强功能，详见[这里](#whatsnew-0150-tz)
- en: A lot of improvements to the rolling and expanding moment functions, see [here](#whatsnew-0150-roll)
  id: totrans-13
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对滚动和扩展动量函数进行了许多改进，详见[这里](#whatsnew-0150-roll)
- en: Internal refactoring of the `Index` class to no longer sub-class `ndarray`,
    see [Internal Refactoring](#whatsnew-0150-refactoring)
  id: totrans-14
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将`Index`类的内部重构为不再是子类`ndarray`，详见[内部重构](#whatsnew-0150-refactoring)
- en: dropping support for `PyTables` less than version 3.0.0, and `numexpr` less
    than version 2.1 ([GH 7990](https://github.com/pandas-dev/pandas/issues/7990))
  id: totrans-15
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不再支持`PyTables`低于版本 3.0.0，以及`numexpr`低于版本 2.1 ([GH 7990](https://github.com/pandas-dev/pandas/issues/7990))
- en: Split indexing documentation into [Indexing and Selecting Data](../user_guide/indexing.html#indexing)
    and [MultiIndex / Advanced Indexing](../user_guide/advanced.html#advanced)
  id: totrans-16
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将索引文档拆分为[索引和选择数据](../user_guide/indexing.html#indexing)和[MultiIndex / 高级索引](../user_guide/advanced.html#advanced)
- en: Split out string methods documentation into [Working with Text Data](../user_guide/text.html#text)
  id: totrans-17
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将字符串方法文档拆分为[处理文本数据](../user_guide/text.html#text)
- en: Check the [API Changes](#whatsnew-0150-api) and [deprecations](#whatsnew-0150-deprecations)
    before updating
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在更新之前，请查看[API 更改](#whatsnew-0150-api)和[弃用](#whatsnew-0150-deprecations)
- en: '[Other Enhancements](#whatsnew-0150-enhancements)'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[其他增强功能](#whatsnew-0150-enhancements)'
- en: '[Performance Improvements](#whatsnew-0150-performance)'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[性能改进](#whatsnew-0150-performance)'
- en: '[Bug Fixes](#whatsnew-0150-bug-fixes)'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[错误修复](#whatsnew-0150-bug-fixes)'
- en: Warning
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 警告
- en: In 0.15.0 `Index` has internally been refactored to no longer sub-class `ndarray`
    but instead subclass `PandasObject`, similarly to the rest of the pandas objects.
    This change allows very easy sub-classing and creation of new index types. This
    should be a transparent change with only very limited API implications (See the
    [Internal Refactoring](#whatsnew-0150-refactoring))
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 在 0.15.0 版本中，`Index` 在内部已经重构，不再是子类`ndarray`，而是子类`PandasObject`，类似于其他 pandas
    对象。这个改变使得非常容易进行子类化和创建新的索引类型。这应该是一个透明的改变，只有非常有限的 API 影响（参见[内部重构](#whatsnew-0150-refactoring)）
- en: Warning
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 警告
- en: The refactoring in [`Categorical`](../reference/api/pandas.Categorical.html#pandas.Categorical
    "pandas.Categorical") changed the two argument constructor from “codes/labels
    and levels” to “values and levels (now called ‘categories’)”. This can lead to
    subtle bugs. If you use [`Categorical`](../reference/api/pandas.Categorical.html#pandas.Categorical
    "pandas.Categorical") directly, please audit your code before updating to this
    pandas version and change it to use the [`from_codes()`](../reference/api/pandas.Categorical.from_codes.html#pandas.Categorical.from_codes
    "pandas.Categorical.from_codes") constructor. See more on `Categorical` [here](#whatsnew-0150-cat)
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 在[`Categorical`](../reference/api/pandas.Categorical.html#pandas.Categorical
    "pandas.Categorical")中的重构改变了两个参数构造函数从“codes/labels和levels”到“values和levels（现在称为‘categories’）”。这可能导致一些微妙的错误。如果您直接使用[`Categorical`](../reference/api/pandas.Categorical.html#pandas.Categorical
    "pandas.Categorical")，请在更新到此pandas版本之前审查您的代码，并将其更改为使用[`from_codes()`](../reference/api/pandas.Categorical.from_codes.html#pandas.Categorical.from_codes
    "pandas.Categorical.from_codes")构造函数。在这里查看更多关于`Categorical`的信息(#whatsnew-0150-cat)
- en: New features
  id: totrans-26
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 新功能
- en: '### Categoricals in Series/DataFrame'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: '### Series/DataFrame中的Categoricals'
- en: '[`Categorical`](../reference/api/pandas.Categorical.html#pandas.Categorical
    "pandas.Categorical") can now be included in `Series` and `DataFrames` and gained
    new methods to manipulate. Thanks to Jan Schulz for much of this API/implementation.
    ([GH 3943](https://github.com/pandas-dev/pandas/issues/3943), [GH 5313](https://github.com/pandas-dev/pandas/issues/5313),
    [GH 5314](https://github.com/pandas-dev/pandas/issues/5314), [GH 7444](https://github.com/pandas-dev/pandas/issues/7444),
    [GH 7839](https://github.com/pandas-dev/pandas/issues/7839), [GH 7848](https://github.com/pandas-dev/pandas/issues/7848),
    [GH 7864](https://github.com/pandas-dev/pandas/issues/7864), [GH 7914](https://github.com/pandas-dev/pandas/issues/7914),
    [GH 7768](https://github.com/pandas-dev/pandas/issues/7768), [GH 8006](https://github.com/pandas-dev/pandas/issues/8006),
    [GH 3678](https://github.com/pandas-dev/pandas/issues/3678), [GH 8075](https://github.com/pandas-dev/pandas/issues/8075),
    [GH 8076](https://github.com/pandas-dev/pandas/issues/8076), [GH 8143](https://github.com/pandas-dev/pandas/issues/8143),
    [GH 8453](https://github.com/pandas-dev/pandas/issues/8453), [GH 8518](https://github.com/pandas-dev/pandas/issues/8518)).'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: '[`Categorical`](../reference/api/pandas.Categorical.html#pandas.Categorical
    "pandas.Categorical")现在可以包含在`Series`和`DataFrames`中，并获得了新的操作方法。感谢Jan Schulz为此API/实现做出的贡献。([GH
    3943](https://github.com/pandas-dev/pandas/issues/3943), [GH 5313](https://github.com/pandas-dev/pandas/issues/5313),
    [GH 5314](https://github.com/pandas-dev/pandas/issues/5314), [GH 7444](https://github.com/pandas-dev/pandas/issues/7444),
    [GH 7839](https://github.com/pandas-dev/pandas/issues/7839), [GH 7848](https://github.com/pandas-dev/pandas/issues/7848),
    [GH 7864](https://github.com/pandas-dev/pandas/issues/7864), [GH 7914](https://github.com/pandas-dev/pandas/issues/7914),
    [GH 7768](https://github.com/pandas-dev/pandas/issues/7768), [GH 8006](https://github.com/pandas-dev/pandas/issues/8006),
    [GH 3678](https://github.com/pandas-dev/pandas/issues/3678), [GH 8075](https://github.com/pandas-dev/pandas/issues/8075),
    [GH 8076](https://github.com/pandas-dev/pandas/issues/8076), [GH 8143](https://github.com/pandas-dev/pandas/issues/8143),
    [GH 8453](https://github.com/pandas-dev/pandas/issues/8453), [GH 8518](https://github.com/pandas-dev/pandas/issues/8518)).'
- en: For full docs, see the [categorical introduction](../user_guide/categorical.html#categorical)
    and the [API documentation](../reference/arrays.html#api-arrays-categorical).
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 有关完整文档，请参阅[分类介绍](../user_guide/categorical.html#categorical)和[API文档](../reference/arrays.html#api-arrays-categorical)。
- en: '[PRE0]'
  id: totrans-30
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '`pandas.core.group_agg` and `pandas.core.factor_agg` were removed. As an alternative,
    construct a dataframe and use `df.groupby(<group>).agg(<func>)`.'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pandas.core.group_agg` 和 `pandas.core.factor_agg` 已移除。作为替代方案，构建一个数据框并使用 `df.groupby(<group>).agg(<func>)`。'
- en: Supplying “codes/labels and levels” to the [`Categorical`](../reference/api/pandas.Categorical.html#pandas.Categorical
    "pandas.Categorical") constructor is not supported anymore. Supplying two arguments
    to the constructor is now interpreted as “values and levels (now called ‘categories’)”.
    Please change your code to use the [`from_codes()`](../reference/api/pandas.Categorical.from_codes.html#pandas.Categorical.from_codes
    "pandas.Categorical.from_codes") constructor.
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不再支持向[`Categorical`](../reference/api/pandas.Categorical.html#pandas.Categorical
    "pandas.Categorical")构造函数提供“codes/labels和levels”。现在将两个参数提供给构造函数解释为“values和levels（现在称为‘categories’）”。请修改您的代码以使用[`from_codes()`](../reference/api/pandas.Categorical.from_codes.html#pandas.Categorical.from_codes
    "pandas.Categorical.from_codes")构造函数。
- en: The `Categorical.labels` attribute was renamed to `Categorical.codes` and is
    read only. If you want to manipulate codes, please use one of the [API methods
    on Categoricals](../reference/arrays.html#api-arrays-categorical).
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Categorical.labels` 属性已更名为 `Categorical.codes`，且只读。如果您想要操作编码，请使用[Categoricals的API方法](../reference/arrays.html#api-arrays-categorical)之一。'
- en: 'The `Categorical.levels` attribute is renamed to `Categorical.categories`.  ###
    TimedeltaIndex/scalar'
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Categorical.levels`属性更名为`Categorical.categories`。### TimedeltaIndex/scalar'
- en: We introduce a new scalar type `Timedelta`, which is a subclass of `datetime.timedelta`,
    and behaves in a similar manner, but allows compatibility with `np.timedelta64`
    types as well as a host of custom representation, parsing, and attributes. This
    type is very similar to how `Timestamp` works for `datetimes`. It is a nice-API
    box for the type. See the [docs](../user_guide/timedeltas.html#timedeltas-timedeltas).
    ([GH 3009](https://github.com/pandas-dev/pandas/issues/3009), [GH 4533](https://github.com/pandas-dev/pandas/issues/4533),
    [GH 8209](https://github.com/pandas-dev/pandas/issues/8209), [GH 8187](https://github.com/pandas-dev/pandas/issues/8187),
    [GH 8190](https://github.com/pandas-dev/pandas/issues/8190), [GH 7869](https://github.com/pandas-dev/pandas/issues/7869),
    [GH 7661](https://github.com/pandas-dev/pandas/issues/7661), [GH 8345](https://github.com/pandas-dev/pandas/issues/8345),
    [GH 8471](https://github.com/pandas-dev/pandas/issues/8471))
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 我们引入了一个新的标量类型`Timedelta`，它是`datetime.timedelta`的子类，并且行为类似，但允许与`np.timedelta64`类型兼容，以及一系列自定义表示、解析和属性。这种类型与`Timestamp`处理`datetimes`的方式非常相似。它是类型的一个很好的
    API 包装。请参阅[文档](../user_guide/timedeltas.html#timedeltas-timedeltas)。([GH 3009](https://github.com/pandas-dev/pandas/issues/3009),
    [GH 4533](https://github.com/pandas-dev/pandas/issues/4533), [GH 8209](https://github.com/pandas-dev/pandas/issues/8209),
    [GH 8187](https://github.com/pandas-dev/pandas/issues/8187), [GH 8190](https://github.com/pandas-dev/pandas/issues/8190),
    [GH 7869](https://github.com/pandas-dev/pandas/issues/7869), [GH 7661](https://github.com/pandas-dev/pandas/issues/7661),
    [GH 8345](https://github.com/pandas-dev/pandas/issues/8345), [GH 8471](https://github.com/pandas-dev/pandas/issues/8471))
- en: Warning
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 警告
- en: '`Timedelta` scalars (and `TimedeltaIndex`) component fields are *not the same*
    as the component fields on a `datetime.timedelta` object. For example, `.seconds`
    on a `datetime.timedelta` object returns the total number of seconds combined
    between `hours`, `minutes` and `seconds`. In contrast, the pandas `Timedelta`
    breaks out hours, minutes, microseconds and nanoseconds separately.'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: '`Timedelta`标量（和`TimedeltaIndex`）的组件字段与`datetime.timedelta`对象上的组件字段*不同*。例如，`datetime.timedelta`对象上的`.seconds`返回`hours`、`minutes`和`seconds`之间组合的总秒数。相比之下，pandas的`Timedelta`将小时、分钟、微秒和纳秒分开。'
- en: '[PRE1]'
  id: totrans-38
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '**Note**: this is no longer true starting from v0.16.0, where full compatibility
    with `datetime.timedelta` is introduced. See the [0.16.0 whatsnew entry](v0.16.0.html#whatsnew-0160-api-breaking-timedelta)'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意**：从 v0.16.0 开始，这不再成立，引入了与`datetime.timedelta`完全兼容的功能。请参阅[0.16.0 版本更新](v0.16.0.html#whatsnew-0160-api-breaking-timedelta)'
- en: Warning
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 警告
- en: Prior to 0.15.0 `pd.to_timedelta` would return a `Series` for list-like/Series
    input, and a `np.timedelta64` for scalar input. It will now return a `TimedeltaIndex`
    for list-like input, `Series` for Series input, and `Timedelta` for scalar input.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 在 0.15.0 之前，`pd.to_timedelta`会为类似列表/Series的输入返回一个`Series`，对于标量输入会返回一个`np.timedelta64`。现在将为类似列表的输入返回一个`TimedeltaIndex`，对于Series输入返回一个`Series`，对于标量输入返回一个`Timedelta`。
- en: The arguments to `pd.to_timedelta` are now `(arg,unit='ns',box=True,coerce=False)`,
    previously were `(arg,box=True,unit='ns')` as these are more logical.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: '`pd.to_timedelta`的参数现在是`(arg,unit=''ns'',box=True,coerce=False)`，之前是`(arg,box=True,unit=''ns'')`，因为这样更合乎逻辑。'
- en: Construct a scalar
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 构建一个标量
- en: '[PRE2]'
  id: totrans-44
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Access fields for a `Timedelta`
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 访问`Timedelta`的字段
- en: '[PRE3]'
  id: totrans-46
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Construct a `TimedeltaIndex`
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 构建一个`TimedeltaIndex`
- en: '[PRE4]'
  id: totrans-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Constructing a `TimedeltaIndex` with a regular range
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 使用常规范围构建`TimedeltaIndex`
- en: '[PRE5]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '[PRE6]'
  id: totrans-51
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: You can now use a `TimedeltaIndex` as the index of a pandas object
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在可以将`TimedeltaIndex`用作 pandas 对象的索引
- en: '[PRE7]'
  id: totrans-53
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: You can select with partial string selections
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用部分字符串选择
- en: '[PRE8]'
  id: totrans-55
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Finally, the combination of `TimedeltaIndex` with `DatetimeIndex` allow certain
    combination operations that are `NaT` preserving:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，`TimedeltaIndex`与`DatetimeIndex`的组合允许保留某些`NaT`组合操作：
- en: '[PRE9]'
  id: totrans-57
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'iteration of a `Series` e.g. `list(Series(...))` of `timedelta64[ns]` would
    prior to v0.15.0 return `np.timedelta64` for each element. These will now be wrapped
    in `Timedelta`.  ### Memory usage'
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Series`的迭代，例如`list(Series(...))`的`timedelta64[ns]`在 v0.15.0 之前会为每个元素返回`np.timedelta64`。现在将包装在`Timedelta`中。###
    内存使用'
- en: Implemented methods to find memory usage of a DataFrame. See the [FAQ](../user_guide/gotchas.html#df-memory-usage)
    for more. ([GH 6852](https://github.com/pandas-dev/pandas/issues/6852)).
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 实现了查找 DataFrame 内存使用的方法。更多信息请参阅[FAQ](../user_guide/gotchas.html#df-memory-usage)。([GH
    6852](https://github.com/pandas-dev/pandas/issues/6852))。
- en: A new display option `display.memory_usage` (see [Options and settings](../user_guide/options.html#options))
    sets the default behavior of the `memory_usage` argument in the `df.info()` method.
    By default `display.memory_usage` is `True`.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 新的显示选项 `display.memory_usage`（请参阅[选项和设置](../user_guide/options.html#options)）设置
    `df.info()` 方法中 `memory_usage` 参数的默认行为。默认情况下，`display.memory_usage` 为 `True`。
- en: '[PRE10]'
  id: totrans-61
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Additionally [`memory_usage()`](../reference/api/pandas.DataFrame.memory_usage.html#pandas.DataFrame.memory_usage
    "pandas.DataFrame.memory_usage") is an available method for a dataframe object
    which returns the memory usage of each column.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 此外 [`memory_usage()`](../reference/api/pandas.DataFrame.memory_usage.html#pandas.DataFrame.memory_usage
    "pandas.DataFrame.memory_usage") 是一个 dataframe 对象的可用方法，它返回每列的内存使用情况。
- en: '[PRE11]  ### Series.dt accessor'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE11]  ### Series.dt 访问器'
- en: '`Series` has gained an accessor to succinctly return datetime like properties
    for the *values* of the Series, if its a datetime/period like Series. ([GH 7207](https://github.com/pandas-dev/pandas/issues/7207))
    This will return a Series, indexed like the existing Series. See the [docs](../user_guide/basics.html#basics-dt-accessors)'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: '`Series` 已经增加了一个访问器，以简洁地返回系列的日期时间属性，如果它是一个类似于日期时间/周期的系列。（[GH 7207](https://github.com/pandas-dev/pandas/issues/7207)）这将返回一个
    Series，索引类似于现有的 Series。请参阅[文档](../user_guide/basics.html#basics-dt-accessors)'
- en: '[PRE12]'
  id: totrans-65
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'This enables nice expressions like this:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 这使得这样的表达式变得简单：
- en: '[PRE13]'
  id: totrans-67
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'You can easily produce tz aware transformations:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以轻松地生成 tz-aware 转换：
- en: '[PRE14]'
  id: totrans-69
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'You can also chain these types of operations:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 您也可以链式操作这些类型的操作：
- en: '[PRE15]'
  id: totrans-71
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: The `.dt` accessor works for period and timedelta dtypes.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: '`.dt` 访问器适用于期间和时间增量 dtypes。'
- en: '[PRE16]'
  id: totrans-73
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: '[PRE17]  ### Timezone handling improvements'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE17]  ### 时区处理改进'
- en: '`tz_localize(None)` for tz-aware `Timestamp` and `DatetimeIndex` now removes
    timezone holding local time, previously this resulted in `Exception` or `TypeError`
    ([GH 7812](https://github.com/pandas-dev/pandas/issues/7812))'
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`tz_localize(None)` 适用于 tz-aware `Timestamp` 和 `DatetimeIndex`，现在删除持有本地时间的时区，以前会导致
    `Exception` 或 `TypeError`（[GH 7812](https://github.com/pandas-dev/pandas/issues/7812)）'
- en: '[PRE18]'
  id: totrans-76
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE18]'
- en: '`tz_localize` now accepts the `ambiguous` keyword which allows for passing
    an array of bools indicating whether the date belongs in DST or not, ‘NaT’ for
    setting transition times to NaT, ‘infer’ for inferring DST/non-DST, and ‘raise’
    (default) for an `AmbiguousTimeError` to be raised. See [the docs](../user_guide/timeseries.html#timeseries-timezone-ambiguous)
    for more details ([GH 7943](https://github.com/pandas-dev/pandas/issues/7943))'
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`tz_localize` 现在接受 `ambiguous` 关键字，允许传递一个指示日期是否属于夏令时的布尔数组，将过渡时间设置为 NaT 的 ‘NaT’，用于推断
    DST/非 DST 的 ‘infer’，和 ‘raise’（默认）用于引发 `AmbiguousTimeError`。（[GH 7943](https://github.com/pandas-dev/pandas/issues/7943)）有关更多详细信息，请参阅[文档](../user_guide/timeseries.html#timeseries-timezone-ambiguous)。'
- en: '`DataFrame.tz_localize` and `DataFrame.tz_convert` now accepts an optional
    `level` argument for localizing a specific level of a MultiIndex ([GH 7846](https://github.com/pandas-dev/pandas/issues/7846))'
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.tz_localize` 和 `DataFrame.tz_convert` 现在接受可选的 `level` 参数，用于本地化多级索引的特定级别（[GH
    7846](https://github.com/pandas-dev/pandas/issues/7846)）'
- en: '`Timestamp.tz_localize` and `Timestamp.tz_convert` now raise `TypeError` in
    error cases, rather than `Exception` ([GH 8025](https://github.com/pandas-dev/pandas/issues/8025))'
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Timestamp.tz_localize` 和 `Timestamp.tz_convert` 现在在错误情况下引发 `TypeError`，而不是
    `Exception`（[GH 8025](https://github.com/pandas-dev/pandas/issues/8025)）'
- en: a timeseries/index localized to UTC when inserted into a Series/DataFrame will
    preserve the UTC timezone (rather than being a naive `datetime64[ns]`) as `object`
    dtype ([GH 8411](https://github.com/pandas-dev/pandas/issues/8411))
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 插入到 Series/DataFrame 中的时序/索引在本地化为 UTC 时将保留 UTC 时区（而不是作为 `object` dtype 的幼稚 `datetime64[ns]`）（[GH
    8411](https://github.com/pandas-dev/pandas/issues/8411)）
- en: '`Timestamp.__repr__` displays `dateutil.tz.tzoffset` info ([GH 7907](https://github.com/pandas-dev/pandas/issues/7907))  ###
    Rolling/expanding moments improvements'
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Timestamp.__repr__` 显示 `dateutil.tz.tzoffset` 信息（[GH 7907](https://github.com/pandas-dev/pandas/issues/7907))  ###
    滚动/扩展时刻改进'
- en: '`rolling_min()`, `rolling_max()`, `rolling_cov()`, and `rolling_corr()` now
    return objects with all `NaN` when `len(arg) < min_periods <= window` rather than
    raising. (This makes all rolling functions consistent in this behavior). ([GH
    7766](https://github.com/pandas-dev/pandas/issues/7766))'
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当 `len(arg) < min_periods <= window` 时，`rolling_min()`、`rolling_max()`、`rolling_cov()`
    和 `rolling_corr()` 现在返回所有 `NaN` 的对象，而不是引发异常。（这使得所有滚动函数在这方面的行为一致）。（[GH 7766](https://github.com/pandas-dev/pandas/issues/7766)）
- en: Prior to 0.15.0
  id: totrans-83
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在 0.15.0 之前
- en: '[PRE19]'
  id: totrans-84
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE19]'
- en: '[PRE20]'
  id: totrans-85
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE20]'
- en: New behavior
  id: totrans-86
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 新行为
- en: '[PRE21]'
  id: totrans-87
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE21]'
- en: '`rolling_max()`, `rolling_min()`, `rolling_sum()`, `rolling_mean()`, `rolling_median()`,
    `rolling_std()`, `rolling_var()`, `rolling_skew()`, `rolling_kurt()`, `rolling_quantile()`,
    `rolling_cov()`, `rolling_corr()`, `rolling_corr_pairwise()`, `rolling_window()`,
    and `rolling_apply()` with `center=True` previously would return a result of the
    same structure as the input `arg` with `NaN` in the final `(window-1)/2` entries.'
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`rolling_max()`、`rolling_min()`、`rolling_sum()`、`rolling_mean()`、`rolling_median()`、`rolling_std()`、`rolling_var()`、`rolling_skew()`、`rolling_kurt()`、`rolling_quantile()`、`rolling_cov()`、`rolling_corr()`、`rolling_corr_pairwise()`、`rolling_window()`和`rolling_apply()`与`center=True`以前会返回与输入`arg`结构相同的结果，最后`(window-1)/2`个条目为`NaN`。'
- en: Now the final `(window-1)/2` entries of the result are calculated as if the
    input `arg` were followed by `(window-1)/2` `NaN` values (or with shrinking windows,
    in the case of `rolling_apply()`). ([GH 7925](https://github.com/pandas-dev/pandas/issues/7925),
    [GH 8269](https://github.com/pandas-dev/pandas/issues/8269))
  id: totrans-89
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 现在结果的最后`(window-1)/2`个条目被计算为如果输入`arg`后跟随`(window-1)/2`个`NaN`值（或在`rolling_apply()`的情况下，使用缩小窗口）。([GH
    7925](https://github.com/pandas-dev/pandas/issues/7925), [GH 8269](https://github.com/pandas-dev/pandas/issues/8269))
- en: 'Prior behavior (note final value is `NaN`):'
  id: totrans-90
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 先前的行为（注意最终值为`NaN`）：
- en: '[PRE22]'
  id: totrans-91
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'New behavior (note final value is `5 = sum([2, 3, NaN])`):'
  id: totrans-92
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 新行为（注意最终值为`5 = sum([2, 3, NaN])`）：
- en: '[PRE23]'
  id: totrans-93
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE23]'
- en: '`rolling_window()` now normalizes the weights properly in rolling mean mode
    (mean=True) so that the calculated weighted means (e.g. ‘triang’, ‘gaussian’)
    are distributed about the same means as those calculated without weighting (i.e.
    ‘boxcar’). See [the note on normalization](../user_guide/window.html#window-weighted)
    for further details. ([GH 7618](https://github.com/pandas-dev/pandas/issues/7618))'
  id: totrans-94
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`rolling_window()`现在在滚动均值模式（mean=True）中正确地对权重进行归一化，以便计算的加权平均值（例如‘triang’、‘gaussian’）分布在没有加权计算的平均值周围（即‘boxcar’）。有关详细信息，请参阅[归一化说明](../user_guide/window.html#window-weighted)。([GH
    7618](https://github.com/pandas-dev/pandas/issues/7618))'
- en: '[PRE24]'
  id: totrans-95
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'Behavior prior to 0.15.0:'
  id: totrans-96
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 0.15.0之前的行为：
- en: '[PRE25]'
  id: totrans-97
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE25]'
- en: New behavior
  id: totrans-98
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 新行为
- en: '[PRE26]'
  id: totrans-99
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE26]'
- en: Removed `center` argument from all `expanding_` functions (see [list](../reference/window.html#api-functions-expanding)),
    as the results produced when `center=True` did not make much sense. ([GH 7925](https://github.com/pandas-dev/pandas/issues/7925))
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从所有`expanding_`函数中删除了`center`参数（参见[列表](../reference/window.html#api-functions-expanding)），因为当`center=True`时产生的结果并没有太多意义。([GH
    7925](https://github.com/pandas-dev/pandas/issues/7925))
- en: Added optional `ddof` argument to `expanding_cov()` and `rolling_cov()`. The
    default value of `1` is backwards-compatible. ([GH 8279](https://github.com/pandas-dev/pandas/issues/8279))
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 向`expanding_cov()`和`rolling_cov()`添加了可选的`ddof`参数。默认值为`1`与向后兼容。([GH 8279](https://github.com/pandas-dev/pandas/issues/8279))
- en: Documented the `ddof` argument to `expanding_var()`, `expanding_std()`, `rolling_var()`,
    and `rolling_std()`. These functions’ support of a `ddof` argument (with a default
    value of `1`) was previously undocumented. ([GH 8064](https://github.com/pandas-dev/pandas/issues/8064))
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 讲解了`expanding_var()`、`expanding_std()`、`rolling_var()`和`rolling_std()`中的`ddof`参数。这些函数支持`ddof`参数（默认值为`1`）以前未记录。([GH
    8064](https://github.com/pandas-dev/pandas/issues/8064))
- en: '`ewma()`, `ewmstd()`, `ewmvol()`, `ewmvar()`, `ewmcov()`, and `ewmcorr()` now
    interpret `min_periods` in the same manner that the `rolling_*()` and `expanding_*()`
    functions do: a given result entry will be `NaN` if the (expanding, in this case)
    window does not contain at least `min_periods` values. The previous behavior was
    to set to `NaN` the `min_periods` entries starting with the first non- `NaN` value.
    ([GH 7977](https://github.com/pandas-dev/pandas/issues/7977))'
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ewma()`、`ewmstd()`、`ewmvol()`、`ewmvar()`、`ewmcov()`和`ewmcorr()`现在以与`rolling_*()`和`expanding_*()`函数相同的方式解释`min_periods`：如果（在这种情况下是扩展）窗口不包含至少`min_periods`个值，则给定的结果条目将为`NaN`。以前的行为是从第一个非`NaN`值开始将`min_periods`条目设置为`NaN`。([GH
    7977](https://github.com/pandas-dev/pandas/issues/7977))'
- en: 'Prior behavior (note values start at index `2`, which is `min_periods` after
    index `0` (the index of the first non-empty value)):'
  id: totrans-104
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 先前的行为（注意值从索引`2`开始，这是索引`0`（第一个非空值的索引）之后的`min_periods`）：
- en: '[PRE27]'
  id: totrans-105
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE27]'
- en: '[PRE28]'
  id: totrans-106
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'New behavior (note values start at index `4`, the location of the 2nd (since
    `min_periods=2`) non-empty value):'
  id: totrans-107
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 新行为（注意值从索引`4`开始，第2个（因为`min_periods=2`）非空值的位置）：
- en: '[PRE29]'
  id: totrans-108
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE29]'
- en: '`ewmstd()`, `ewmvol()`, `ewmvar()`, `ewmcov()`, and `ewmcorr()` now have an
    optional `adjust` argument, just like `ewma()` does, affecting how the weights
    are calculated. The default value of `adjust` is `True`, which is backwards-compatible.
    See [Exponentially weighted moment functions](../user_guide/window.html#window-exponentially-weighted)
    for details. ([GH 7911](https://github.com/pandas-dev/pandas/issues/7911))'
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ewmstd()`、`ewmvol()`、`ewmvar()`、`ewmcov()` 和 `ewmcorr()` 现在具有可选的 `adjust`
    参数，就像 `ewma()` 一样，影响权重的计算方式。`adjust` 的默认值为 `True`，与旧版本兼容。详见[指数加权矩函数](../user_guide/window.html#window-exponentially-weighted)了解详情。([GH
    7911](https://github.com/pandas-dev/pandas/issues/7911))'
- en: '`ewma()`, `ewmstd()`, `ewmvol()`, `ewmvar()`, `ewmcov()`, and `ewmcorr()` now
    have an optional `ignore_na` argument. When `ignore_na=False` (the default), missing
    values are taken into account in the weights calculation. When `ignore_na=True`
    (which reproduces the pre-0.15.0 behavior), missing values are ignored in the
    weights calculation. ([GH 7543](https://github.com/pandas-dev/pandas/issues/7543))'
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ewma()`、`ewmstd()`、`ewmvol()`、`ewmvar()`、`ewmcov()` 和 `ewmcorr()` 现在具有可选的
    `ignore_na` 参数。当 `ignore_na=False`（默认值）时，在权重计算中将考虑缺失值。当 `ignore_na=True`（重现早于
    0.15.0 版本的行为）时，在权重计算中将忽略缺失值。([GH 7543](https://github.com/pandas-dev/pandas/issues/7543))'
- en: '[PRE30]'
  id: totrans-111
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE30]'
- en: Warning
  id: totrans-112
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 警告
- en: By default (`ignore_na=False`) the `ewm*()` functions’ weights calculation in
    the presence of missing values is different than in pre-0.15.0 versions. To reproduce
    the pre-0.15.0 calculation of weights in the presence of missing values one must
    specify explicitly `ignore_na=True`.
  id: totrans-113
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 默认情况下（`ignore_na=False`），在缺失值存在的情况下，`ewm*()` 函数的权重计算与早于 0.15.0 版本中的不同。要重现缺失值存在的情况下早于
    0.15.0 版本的权重计算，必须明确指定 `ignore_na=True`。
- en: Bug in `expanding_cov()`, `expanding_corr()`, `rolling_cov()`, `rolling_cor()`,
    `ewmcov()`, and `ewmcorr()` returning results with columns sorted by name and
    producing an error for non-unique columns; now handles non-unique columns and
    returns columns in original order (except for the case of two DataFrames with
    `pairwise=False`, where behavior is unchanged) ([GH 7542](https://github.com/pandas-dev/pandas/issues/7542))
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`expanding_cov()`、`expanding_corr()`、`rolling_cov()`、`rolling_cor()`、`ewmcov()`
    和 `ewmcorr()` 中的错误，返回以列名排序的结果，并对非唯一列生成错误；现在处理非唯一列，并按照原始顺序返回列（除了两个 `pairwise=False`
    的 DataFrame 的情况，其中行为不变）([GH 7542](https://github.com/pandas-dev/pandas/issues/7542))'
- en: Bug in `rolling_count()` and `expanding_*()` functions unnecessarily producing
    error message for zero-length data ([GH 8056](https://github.com/pandas-dev/pandas/issues/8056))
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`rolling_count()` 和 `expanding_*()` 函数中的错误，在零长度数据上不必要地生成错误消息 ([GH 8056](https://github.com/pandas-dev/pandas/issues/8056))'
- en: Bug in `rolling_apply()` and `expanding_apply()` interpreting `min_periods=0`
    as `min_periods=1` ([GH 8080](https://github.com/pandas-dev/pandas/issues/8080))
  id: totrans-116
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`rolling_apply()` 和 `expanding_apply()` 中的错误，将 `min_periods=0` 解释为 `min_periods=1`
    ([GH 8080](https://github.com/pandas-dev/pandas/issues/8080))'
- en: Bug in `expanding_std()` and `expanding_var()` for a single value producing
    a confusing error message ([GH 7900](https://github.com/pandas-dev/pandas/issues/7900))
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`expanding_std()` 和 `expanding_var()` 中的错误，对于单个值生成令人困惑的错误消息 ([GH 7900](https://github.com/pandas-dev/pandas/issues/7900))'
- en: Bug in `rolling_std()` and `rolling_var()` for a single value producing `0`
    rather than `NaN` ([GH 7900](https://github.com/pandas-dev/pandas/issues/7900))
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`rolling_std()` 和 `rolling_var()` 中的错误，对于单个值生成 `0` 而不是 `NaN` ([GH 7900](https://github.com/pandas-dev/pandas/issues/7900))'
- en: Bug in `ewmstd()`, `ewmvol()`, `ewmvar()`, and `ewmcov()` calculation of de-biasing
    factors when `bias=False` (the default). Previously an incorrect constant factor
    was used, based on `adjust=True`, `ignore_na=True`, and an infinite number of
    observations. Now a different factor is used for each entry, based on the actual
    weights (analogous to the usual `N/(N-1)` factor). In particular, for a single
    point a value of `NaN` is returned when `bias=False`, whereas previously a value
    of (approximately) `0` was returned.
  id: totrans-119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当 `bias=False`（默认值）时，`ewmstd()`、`ewmvol()`、`ewmvar()` 和 `ewmcov()` 计算去偏因子时的错误。之前使用了错误的常数因子，基于
    `adjust=True`、`ignore_na=True` 和无限数量的观测。现在，对于每个条目使用不同的因子，基于实际权重（类似于通常的 `N/(N-1)`
    因子）。特别地，当 `bias=False` 时，对于单个点，返回 `NaN` 值，而以前返回 (近似) `0` 值。
- en: 'For example, consider the following pre-0.15.0 results for `ewmvar(..., bias=False)`,
    and the corresponding debiasing factors:'
  id: totrans-120
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 例如，考虑 `ewmvar(..., bias=False)` 的以下早于 0.15.0 版本的结果，以及相应的去偏因子：
- en: '[PRE31]'
  id: totrans-121
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE31]'
- en: '[PRE32]'
  id: totrans-122
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE32]'
- en: 'Note that entry `0` is approximately 0, and the debiasing factors are a constant
    1.25. By comparison, the following 0.15.0 results have a `NaN` for entry `0`,
    and the debiasing factors are decreasing (towards 1.25):'
  id: totrans-123
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意，条目 `0` 约为 0，并且校准因子是一个常数 1.25。相比之下，以下是 0.15.0 结果的 `NaN` 条目 `0`，并且校准因子逐渐减少（向
    1.25 靠拢）：
- en: '[PRE33]'
  id: totrans-124
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE33]'
- en: 'See [Exponentially weighted moment functions](../user_guide/window.html#window-exponentially-weighted)
    for details. ([GH 7912](https://github.com/pandas-dev/pandas/issues/7912))  ###
    Improvements in the SQL IO module'
  id: totrans-125
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 详情请见[指数加权矩函数](../user_guide/window.html#window-exponentially-weighted)（[GH 7912](https://github.com/pandas-dev/pandas/issues/7912)）。###
    SQL IO 模块的改进
- en: Added support for a `chunksize` parameter to `to_sql` function. This allows
    DataFrame to be written in chunks and avoid packet-size overflow errors ([GH 8062](https://github.com/pandas-dev/pandas/issues/8062)).
  id: totrans-126
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为 `to_sql` 函数添加了一个 `chunksize` 参数的支持。这允许 DataFrame 被分块写入，避免了数据包大小溢出错误（[GH 8062](https://github.com/pandas-dev/pandas/issues/8062)）。
- en: Added support for a `chunksize` parameter to `read_sql` function. Specifying
    this argument will return an iterator through chunks of the query result ([GH
    2908](https://github.com/pandas-dev/pandas/issues/2908)).
  id: totrans-127
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为 `read_sql` 函数添加了一个 `chunksize` 参数的支持。指定此参数将返回查询结果的一个迭代器，以便逐块获取数据（[GH 2908](https://github.com/pandas-dev/pandas/issues/2908)）。
- en: Added support for writing `datetime.date` and `datetime.time` object columns
    with `to_sql` ([GH 6932](https://github.com/pandas-dev/pandas/issues/6932)).
  id: totrans-128
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为 `to_sql` 添加了写入 `datetime.date` 和 `datetime.time` 对象列的支持（[GH 6932](https://github.com/pandas-dev/pandas/issues/6932)）。
- en: 'Added support for specifying a `schema` to read from/write to with `read_sql_table`
    and `to_sql` ([GH 7441](https://github.com/pandas-dev/pandas/issues/7441), [GH
    7952](https://github.com/pandas-dev/pandas/issues/7952)). For example:'
  id: totrans-129
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为 `read_sql_table` 和 `to_sql` 添加了支持指定 `schema` 来读取/写入的功能（[GH 7441](https://github.com/pandas-dev/pandas/issues/7441),
    [GH 7952](https://github.com/pandas-dev/pandas/issues/7952)）。例如：
- en: '[PRE34]'
  id: totrans-130
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE34]'
- en: Added support for writing `NaN` values with `to_sql` ([GH 2754](https://github.com/pandas-dev/pandas/issues/2754)).
  id: totrans-131
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为 `to_sql` 添加了写入 `NaN` 值的支持（[GH 2754](https://github.com/pandas-dev/pandas/issues/2754)）。
- en: 'Added support for writing datetime64 columns with `to_sql` for all database
    flavors ([GH 7103](https://github.com/pandas-dev/pandas/issues/7103)).  ## Backwards
    incompatible API changes'
  id: totrans-132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为所有数据库类型的 `to_sql` 添加了写入 datetime64 列的支持（[GH 7103](https://github.com/pandas-dev/pandas/issues/7103)）。##
    向后不兼容的 API 更改
- en: '### Breaking changes'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: '### 重大变更'
- en: 'API changes related to `Categorical` (see [here](#whatsnew-0150-cat) for more
    details):'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 与 `Categorical` 相关的 API 更改（更多详情请见[这里](#whatsnew-0150-cat)）：
- en: The `Categorical` constructor with two arguments changed from “codes/labels
    and levels” to “values and levels (now called ‘categories’)”. This can lead to
    subtle bugs. If you use [`Categorical`](../reference/api/pandas.Categorical.html#pandas.Categorical
    "pandas.Categorical") directly, please audit your code by changing it to use the
    [`from_codes()`](../reference/api/pandas.Categorical.from_codes.html#pandas.Categorical.from_codes
    "pandas.Categorical.from_codes") constructor.
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Categorical` 构造函数的两个参数从“codes/labels 和 levels”更改为“values 和 levels（现在称为‘categories’）”。这可能导致一些微妙的错误。如果直接使用
    [`Categorical`](../reference/api/pandas.Categorical.html#pandas.Categorical "pandas.Categorical")，请通过更改为使用
    [`from_codes()`](../reference/api/pandas.Categorical.from_codes.html#pandas.Categorical.from_codes
    "pandas.Categorical.from_codes") 构造函数来审查您的代码。'
- en: 'An old function call like (prior to 0.15.0):'
  id: totrans-136
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 类似于旧版本（0.15.0 之前）的函数调用：
- en: '[PRE35]'
  id: totrans-137
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE35]'
- en: 'will have to adapted to the following to keep the same behaviour:'
  id: totrans-138
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 必须适应以下以保持相同的行为：
- en: '[PRE36]'
  id: totrans-139
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE36]'
- en: 'API changes related to the introduction of the `Timedelta` scalar (see [above](#whatsnew-0150-timedeltaindex)
    for more details):'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 与引入 `Timedelta` 标量相关的 API 更改（更多详情请见[上文](#whatsnew-0150-timedeltaindex)）：
- en: Prior to 0.15.0 [`to_timedelta()`](../reference/api/pandas.to_timedelta.html#pandas.to_timedelta
    "pandas.to_timedelta") would return a `Series` for list-like/Series input, and
    a `np.timedelta64` for scalar input. It will now return a `TimedeltaIndex` for
    list-like input, `Series` for Series input, and `Timedelta` for scalar input.
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 0.15.0 之前，[`to_timedelta()`](../reference/api/pandas.to_timedelta.html#pandas.to_timedelta
    "pandas.to_timedelta") 对于类似列表/序列的输入返回一个 `Series`，对于标量输入返回一个 `np.timedelta64`。现在，对于类似列表的输入，将返回一个
    `TimedeltaIndex`，对于序列输入，将返回一个 `Series`，对于标量输入，将返回一个 `Timedelta`。
- en: For API changes related to the rolling and expanding functions, see detailed
    overview [above](#whatsnew-0150-roll).
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 关于滚动和扩展函数的 API 更改，请参阅上述详细概述（[#whatsnew-0150-roll](#whatsnew-0150-roll)）。
- en: 'Other notable API changes:'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 其他值得注意的 API 更改：
- en: Consistency when indexing with `.loc` and a list-like indexer when no values
    are found.
  id: totrans-144
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当使用 `.loc` 和类似列表的索引器进行索引时，如果找不到值，则保持一致性。
- en: '[PRE37]'
  id: totrans-145
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE37]'
- en: 'In prior versions there was a difference in these two constructs:'
  id: totrans-146
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在早期版本中，这两个结构之间存在差异：
- en: '`df.loc[[3]]` would return a frame reindexed by 3 (with all `np.nan` values)'
  id: totrans-147
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`df.loc[[3]]`将返回一个由3重新索引的框架（所有值为`np.nan`）'
- en: '`df.loc[[3],:]` would raise `KeyError`.'
  id: totrans-148
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`df.loc[[3],:]`会引发`KeyError`。'
- en: Both will now raise a `KeyError`. The rule is that *at least 1* indexer must
    be found when using a list-like and `.loc` ([GH 7999](https://github.com/pandas-dev/pandas/issues/7999))
  id: totrans-149
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 现在两者都会引发`KeyError`。规则是使用类似列表和`.loc`时必须找到*至少1*个索引器（[GH 7999](https://github.com/pandas-dev/pandas/issues/7999)）
- en: 'Furthermore in prior versions these were also different:'
  id: totrans-150
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此外，在早期版本中，这两者也是不同的：
- en: '`df.loc[[1,3]]` would return a frame reindexed by [1,3]'
  id: totrans-151
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`df.loc[[1,3]]`将返回一个由[1,3]重新索引的框架'
- en: '`df.loc[[1,3],:]` would raise `KeyError`.'
  id: totrans-152
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`df.loc[[1,3],:]`会引发`KeyError`。'
- en: Both will now return a frame reindex by [1,3]. E.g.
  id: totrans-153
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 现在两者都将返回由[1,3]重新索引的框架。例如
- en: '[PRE38]'
  id: totrans-154
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE38]'
- en: This can also be seen in multi-axis indexing with a `Panel`.
  id: totrans-155
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这也可以在使用`Panel`进行多轴索引时看到。
- en: '[PRE39]'
  id: totrans-156
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE39]'
- en: 'The following would raise `KeyError` prior to 0.15.0:'
  id: totrans-157
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在0.15.0之前，以下内容会引发`KeyError`：
- en: '[PRE40]'
  id: totrans-158
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE40]'
- en: 'Furthermore, `.loc` will raise If no values are found in a MultiIndex with
    a list-like indexer:'
  id: totrans-159
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此外，如果在具有类似列表索引器的MultiIndex中找不到任何值，`.loc`将引发错误：
- en: '[PRE41]'
  id: totrans-160
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE41]'
- en: Assigning values to `None` now considers the dtype when choosing an ‘empty’
    value ([GH 7941](https://github.com/pandas-dev/pandas/issues/7941)).
  id: totrans-161
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在在选择“空”值时，将考虑`None`的dtype（[GH 7941](https://github.com/pandas-dev/pandas/issues/7941)）。
- en: 'Previously, assigning to `None` in numeric containers changed the dtype to
    object (or errored, depending on the call). It now uses `NaN`:'
  id: totrans-162
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 以前，在数值容器中将`None`赋值会将dtype更改为object（或者根据调用而出错）。现在使用`NaN`：
- en: '[PRE42]'
  id: totrans-163
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE42]'
- en: '`NaT` is now used similarly for datetime containers.'
  id: totrans-164
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`NaT`现在类似于datetime容器。'
- en: For object containers, we now preserve `None` values (previously these were
    converted to `NaN` values).
  id: totrans-165
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于对象容器，我们现在保留`None`值（以前这些值会转换为`NaN`值）。
- en: '[PRE43]'
  id: totrans-166
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE43]'
- en: To insert a `NaN`, you must explicitly use `np.nan`. See the [docs](../user_guide/missing_data.html#missing-inserting).
  id: totrans-167
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 要插入一个`NaN`，必须明确使用`np.nan`。请参阅[文档](../user_guide/missing_data.html#missing-inserting)。
- en: In prior versions, updating a pandas object inplace would not reflect in other
    python references to this object. ([GH 8511](https://github.com/pandas-dev/pandas/issues/8511),
    [GH 5104](https://github.com/pandas-dev/pandas/issues/5104))
  id: totrans-168
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在早期版本中，就地更新pandas对象不会反映在对该对象的其他python引用中。([GH 8511](https://github.com/pandas-dev/pandas/issues/8511),
    [GH 5104](https://github.com/pandas-dev/pandas/issues/5104))
- en: '[PRE44]'
  id: totrans-169
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE44]'
- en: Behavior prior to v0.15.0
  id: totrans-170
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: v0.15.0之前的行为
- en: '[PRE45]'
  id: totrans-171
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE45]'
- en: This is now the correct behavior
  id: totrans-172
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 现在这是正确的行为
- en: '[PRE46]'
  id: totrans-173
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE46]'
- en: Made both the C-based and Python engines for `read_csv` and `read_table` ignore
    empty lines in input as well as white space-filled lines, as long as `sep` is
    not white space. This is an API change that can be controlled by the keyword parameter
    `skip_blank_lines`. See [the docs](../user_guide/io.html#io-skiplines) ([GH 4466](https://github.com/pandas-dev/pandas/issues/4466))
  id: totrans-174
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使`read_csv`和`read_table`的基于C和Python引擎都忽略输入中的空行以及填充了空格的行，只要`sep`不是空格。这是一个可以通过关键字参数`skip_blank_lines`控制的API更改。请参阅[文档](../user_guide/io.html#io-skiplines)（[GH
    4466](https://github.com/pandas-dev/pandas/issues/4466)）
- en: A timeseries/index localized to UTC when inserted into a Series/DataFrame will
    preserve the UTC timezone and inserted as `object` dtype rather than being converted
    to a naive `datetime64[ns]` ([GH 8411](https://github.com/pandas-dev/pandas/issues/8411)).
  id: totrans-175
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将插入到Series/DataFrame中的UTC本地化的时间序列/索引将保留UTC时区，并插入为`object` dtype，而不是转换为一个naive的`datetime64[ns]`（[GH
    8411](https://github.com/pandas-dev/pandas/issues/8411)）。
- en: Bug in passing a `DatetimeIndex` with a timezone that was not being retained
    in DataFrame construction from a dict ([GH 7822](https://github.com/pandas-dev/pandas/issues/7822))
  id: totrans-176
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在从字典构建DataFrame时，传递具有时区的`DatetimeIndex`的错误未被保留（[GH 7822](https://github.com/pandas-dev/pandas/issues/7822)）
- en: 'In prior versions this would drop the timezone, now it retains the timezone,
    but gives a column of `object` dtype:'
  id: totrans-177
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在早期版本中，这将删除时区，现在保留时区，但会给出一个`object` dtype的列：
- en: '[PRE47]'
  id: totrans-178
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE47]'
- en: Previously this would have yielded a column of `datetime64` dtype, but without
    timezone info.
  id: totrans-179
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 以前这将产生一个带有时区信���但没有时区信息的`datetime64` dtype列。
- en: The behaviour of assigning a column to an existing dataframe as `df['a'] = i`
    remains unchanged (this already returned an `object` column with a timezone).
  id: totrans-180
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 将列分配给现有数据框的行为`df['a'] = i`保持不变（这已经返回了一个带有时区的`object`列）。
- en: When passing multiple levels to [`stack()`](../reference/api/pandas.DataFrame.stack.html#pandas.DataFrame.stack
    "pandas.DataFrame.stack"), it will now raise a `ValueError` when the levels aren’t
    all level names or all level numbers ([GH 7660](https://github.com/pandas-dev/pandas/issues/7660)).
    See [Reshaping by stacking and unstacking](../user_guide/reshaping.html#reshaping-stack-multiple).
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当将多个级别传递给 [`stack()`](../reference/api/pandas.DataFrame.stack.html#pandas.DataFrame.stack
    "pandas.DataFrame.stack") 时，如果级别不全是级别名称或全是级别编号，将引发 `ValueError` ([GH 7660](https://github.com/pandas-dev/pandas/issues/7660)).
    参见 [通过堆叠和展开进行重塑](../user_guide/reshaping.html#reshaping-stack-multiple).
- en: Raise a `ValueError` in `df.to_hdf` with ‘fixed’ format, if `df` has non-unique
    columns as the resulting file will be broken ([GH 7761](https://github.com/pandas-dev/pandas/issues/7761))
  id: totrans-182
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在使用 ‘fixed’ 格式时，如果 `df` 有非唯一列，则 `df.to_hdf` 将引发 `ValueError`，因为生成的文件将会损坏 ([GH
    7761](https://github.com/pandas-dev/pandas/issues/7761))
- en: '`SettingWithCopy` raise/warnings (according to the option `mode.chained_assignment`)
    will now be issued when setting a value on a sliced mixed-dtype DataFrame using
    chained-assignment. ([GH 7845](https://github.com/pandas-dev/pandas/issues/7845),
    [GH 7950](https://github.com/pandas-dev/pandas/issues/7950))'
  id: totrans-183
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用链式赋值在切片的混合 dtype 数据框上设置值时，根据选项 `mode.chained_assignment`，会发出 `SettingWithCopy`
    的警告或者错误提示。([GH 7845](https://github.com/pandas-dev/pandas/issues/7845), [GH 7950](https://github.com/pandas-dev/pandas/issues/7950))
- en: '[PRE48]'
  id: totrans-184
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE48]'
- en: '`merge`, `DataFrame.merge`, and `ordered_merge` now return the same type as
    the `left` argument ([GH 7737](https://github.com/pandas-dev/pandas/issues/7737)).'
  id: totrans-185
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`merge`, `DataFrame.merge`, 和 `ordered_merge` 现在返回与 `left` 参数相同的类型 ([GH 7737](https://github.com/pandas-dev/pandas/issues/7737)).'
- en: 'Previously an enlargement with a mixed-dtype frame would act unlike `.append`
    which will preserve dtypes (related [GH 2578](https://github.com/pandas-dev/pandas/issues/2578),
    [GH 8176](https://github.com/pandas-dev/pandas/issues/8176)):'
  id: totrans-186
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 以前，对混合 dtype 数据框进行扩展会与 `.append` 的行为不同，后者会保留 dtype（相关 [GH 2578](https://github.com/pandas-dev/pandas/issues/2578),
    [GH 8176](https://github.com/pandas-dev/pandas/issues/8176)）：
- en: '[PRE49]'
  id: totrans-187
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE49]'
- en: '`Series.to_csv()` now returns a string when `path=None`, matching the behaviour
    of `DataFrame.to_csv()` ([GH 8215](https://github.com/pandas-dev/pandas/issues/8215)).'
  id: totrans-188
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当 `path=None` 时，`Series.to_csv()` 现在返回一个字符串，与 `DataFrame.to_csv()` 的行为匹配 ([GH
    8215](https://github.com/pandas-dev/pandas/issues/8215)).
- en: '`read_hdf` now raises `IOError` when a file that doesn’t exist is passed in.
    Previously, a new, empty file was created, and a `KeyError` raised ([GH 7715](https://github.com/pandas-dev/pandas/issues/7715)).'
  id: totrans-189
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当传递不存在的文件时，`read_hdf` 现在会引发 `IOError`。以前，会创建一个新的空文件，并引发 `KeyError` ([GH 7715](https://github.com/pandas-dev/pandas/issues/7715)).
- en: '`DataFrame.info()` now ends its output with a newline character ([GH 8114](https://github.com/pandas-dev/pandas/issues/8114))'
  id: totrans-190
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.info()` 现在在输出末尾加入了一个换行符 ([GH 8114](https://github.com/pandas-dev/pandas/issues/8114))'
- en: Concatenating no objects will now raise a `ValueError` rather than a bare `Exception`.
  id: totrans-191
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在连接不同对象将引发 `ValueError` 而不是原始的 `Exception`。
- en: Merge errors will now be sub-classes of `ValueError` rather than raw `Exception`
    ([GH 8501](https://github.com/pandas-dev/pandas/issues/8501))
  id: totrans-192
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 合并错误现在将是 `ValueError` 的子类，而不是原始的 `Exception` ([GH 8501](https://github.com/pandas-dev/pandas/issues/8501))
- en: '`DataFrame.plot` and `Series.plot` keywords are now have consistent orders
    ([GH 8037](https://github.com/pandas-dev/pandas/issues/8037))  ### Internal refactoring'
  id: totrans-193
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.plot` 和 `Series.plot` 关键字现在具有一致的顺序 ([GH 8037](https://github.com/pandas-dev/pandas/issues/8037))  ###
    内部重构'
- en: 'In 0.15.0 `Index` has internally been refactored to no longer sub-class `ndarray`
    but instead subclass `PandasObject`, similarly to the rest of the pandas objects.
    This change allows very easy sub-classing and creation of new index types. This
    should be a transparent change with only very limited API implications ([GH 5080](https://github.com/pandas-dev/pandas/issues/5080),
    [GH 7439](https://github.com/pandas-dev/pandas/issues/7439), [GH 7796](https://github.com/pandas-dev/pandas/issues/7796),
    [GH 8024](https://github.com/pandas-dev/pandas/issues/8024), [GH 8367](https://github.com/pandas-dev/pandas/issues/8367),
    [GH 7997](https://github.com/pandas-dev/pandas/issues/7997), [GH 8522](https://github.com/pandas-dev/pandas/issues/8522)):'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: '在 0.15.0 中，`Index` 在内部已经被重新设计，不再是 `ndarray` 的子类，而是子类 `PandasObject`，类似于 pandas
    其他对象。这个改变使得新建索引类型的子类和创建变得非常容易。这应该是一个透明的变化，只有非常有限的 API 影响 ([GH 5080](https://github.com/pandas-dev/pandas/issues/5080),
    [GH 7439](https://github.com/pandas-dev/pandas/issues/7439), [GH 7796](https://github.com/pandas-dev/pandas/issues/7796),
    [GH 8024](https://github.com/pandas-dev/pandas/issues/8024), [GH 8367](https://github.com/pandas-dev/pandas/issues/8367),
    [GH 7997](https://github.com/pandas-dev/pandas/issues/7997), [GH 8522](https://github.com/pandas-dev/pandas/issues/8522)):'
- en: you may need to unpickle pandas version < 0.15.0 pickles using `pd.read_pickle`
    rather than `pickle.load`. See [pickle docs](../user_guide/io.html#io-pickle)
  id: totrans-195
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您可能需要使用 `pd.read_pickle` 而不是 `pickle.load` 来解除 pandas 版本 < 0.15.0 的 pickle。请参阅[pickle
    文档](../user_guide/io.html#io-pickle)
- en: when plotting with a `PeriodIndex`, the matplotlib internal axes will now be
    arrays of `Period` rather than a `PeriodIndex` (this is similar to how a `DatetimeIndex`
    passes arrays of `datetimes` now)
  id: totrans-196
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当使用 `PeriodIndex` 绘图时，matplotlib 的内部轴现在将是 `Period` 的数组，而不是 `PeriodIndex`（这类似于现在
    `DatetimeIndex` 传递的 `datetimes` 数组）
- en: MultiIndexes will now raise similarly to other pandas objects w.r.t. truth testing,
    see [here](../user_guide/gotchas.html#gotchas-truth) ([GH 7897](https://github.com/pandas-dev/pandas/issues/7897)).
  id: totrans-197
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 多重索引现在会像其他 pandas 对象一样提升到关于真值测试的类似程度，请参阅[此处](../user_guide/gotchas.html#gotchas-truth)（[GH
    7897](https://github.com/pandas-dev/pandas/issues/7897)）。
- en: 'When plotting a DatetimeIndex directly with matplotlib’s `plot` function, the
    axis labels will no longer be formatted as dates but as integers (the internal
    representation of a `datetime64`). **UPDATE** This is fixed in 0.15.1, see [here](v0.15.1.html#whatsnew-0151-datetime64-plotting).  ###
    Deprecations'
  id: totrans-198
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '当直接使用 matplotlib 的 `plot` 函数绘制 DatetimeIndex 时，轴标签将不再以日期格式显示，而是以整数格式显示（`datetime64`
    的内部表示）。 **更新** 这在 0.15.1 版中已修复，请参阅[此处](v0.15.1.html#whatsnew-0151-datetime64-plotting)。  ###
    弃用'
- en: The attributes `Categorical` `labels` and `levels` attributes are deprecated
    and renamed to `codes` and `categories`.
  id: totrans-199
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Categorical` 的 `labels` 和 `levels` 属性已弃用，并重命名为 `codes` 和 `categories`。'
- en: The `outtype` argument to `pd.DataFrame.to_dict` has been deprecated in favor
    of `orient`. ([GH 7840](https://github.com/pandas-dev/pandas/issues/7840))
  id: totrans-200
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pd.DataFrame.to_dict` 的 `outtype` 参数已被弃用，改用 `orient`。（[GH 7840](https://github.com/pandas-dev/pandas/issues/7840)）'
- en: The `convert_dummies` method has been deprecated in favor of `get_dummies` ([GH
    8140](https://github.com/pandas-dev/pandas/issues/8140))
  id: totrans-201
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`convert_dummies` 方法已被弃用，改用 `get_dummies`（[GH 8140](https://github.com/pandas-dev/pandas/issues/8140)）'
- en: The `infer_dst` argument in `tz_localize` will be deprecated in favor of `ambiguous`
    to allow for more flexibility in dealing with DST transitions. Replace `infer_dst=True`
    with `ambiguous='infer'` for the same behavior ([GH 7943](https://github.com/pandas-dev/pandas/issues/7943)).
    See [the docs](../user_guide/timeseries.html#timeseries-timezone-ambiguous) for
    more details.
  id: totrans-202
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `tz_localize` 中的 `infer_dst` 参数将被弃用，改用 `ambiguous` 来提供更灵活的处理夏令时转换的方法。将 `infer_dst=True`
    替换为 `ambiguous='infer'` 可获得相同的行为（[GH 7943](https://github.com/pandas-dev/pandas/issues/7943)）。有关更多详细信息，请参阅[文档](../user_guide/timeseries.html#timeseries-timezone-ambiguous)。
- en: The top-level `pd.value_range` has been deprecated and can be replaced by `.describe()`
    ([GH 8481](https://github.com/pandas-dev/pandas/issues/8481))
  id: totrans-203
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 顶级 `pd.value_range` 已被弃用，可以被 `.describe()` 替换（[GH 8481](https://github.com/pandas-dev/pandas/issues/8481)）
- en: The `Index` set operations `+` and `-` were deprecated in order to provide these
    for numeric type operations on certain index types. `+` can be replaced by `.union()`
    or `|`, and `-` by `.difference()`. Further the method name `Index.diff()` is
    deprecated and can be replaced by `Index.difference()` ([GH 8226](https://github.com/pandas-dev/pandas/issues/8226))
  id: totrans-204
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Index` 集合操作 `+` 和 `-` 已被弃用，以提供这些操作用于某些索引类型的数值类型操作。`+` 可以被 `.union()` 或 `|`
    替换，`-` 可以被 `.difference()` 替换。此外，方法名 `Index.diff()` 已被弃用，可以被 `Index.difference()`
    替换（[GH 8226](https://github.com/pandas-dev/pandas/issues/8226)）'
- en: '[PRE50]'
  id: totrans-205
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE50]'
- en: '[PRE51]'
  id: totrans-206
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE51]'
- en: 'The `infer_types` argument to [`read_html()`](../reference/api/pandas.read_html.html#pandas.read_html
    "pandas.read_html") now has no effect and is deprecated ([GH 7762](https://github.com/pandas-dev/pandas/issues/7762),
    [GH 7032](https://github.com/pandas-dev/pandas/issues/7032)).  ### Removal of
    prior version deprecations/changes'
  id: totrans-207
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`read_html()` 的 `infer_types` 参数现在不起作用，并已被弃用（[GH 7762](https://github.com/pandas-dev/pandas/issues/7762)、[GH
    7032](https://github.com/pandas-dev/pandas/issues/7032)）。### 删除之前版本的弃用/更改'
- en: 'Remove `DataFrame.delevel` method in favor of `DataFrame.reset_index`  ## Enhancements'
  id: totrans-208
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '删除 `DataFrame.delevel` 方法，改用 `DataFrame.reset_index`  ## 增强功能'
- en: 'Enhancements in the importing/exporting of Stata files:'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 改进了导入/导出 Stata 文件的功能：
- en: Added support for bool, uint8, uint16 and uint32 data types in `to_stata` ([GH
    7097](https://github.com/pandas-dev/pandas/issues/7097), [GH 7365](https://github.com/pandas-dev/pandas/issues/7365))
  id: totrans-210
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `to_stata` 中添加了对 bool、uint8、uint16 和 uint32 数据类型的支持（[GH 7097](https://github.com/pandas-dev/pandas/issues/7097)、[GH
    7365](https://github.com/pandas-dev/pandas/issues/7365)）
- en: Added conversion option when importing Stata files ([GH 8527](https://github.com/pandas-dev/pandas/issues/8527))
  id: totrans-211
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 导入 Stata 文件时添加了转换选项（[GH 8527](https://github.com/pandas-dev/pandas/issues/8527)）
- en: '`DataFrame.to_stata` and `StataWriter` check string length for compatibility
    with limitations imposed in dta files where fixed-width strings must contain 244
    or fewer characters. Attempting to write Stata dta files with strings longer than
    244 characters raises a `ValueError`. ([GH 7858](https://github.com/pandas-dev/pandas/issues/7858))'
  id: totrans-212
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.to_stata` 和 `StataWriter` 检查字符串长度，以确保与 dta 文件中施加的限制的兼容性，其中固定宽度字符串必须包含
    244 个或更少字符。尝试写入超过 244 个字符的字符串的 Stata dta 文件将引发 `ValueError`。 ([GH 7858](https://github.com/pandas-dev/pandas/issues/7858))。'
- en: '`read_stata` and `StataReader` can import missing data information into a `DataFrame`
    by setting the argument `convert_missing` to `True`. When using this options,
    missing values are returned as `StataMissingValue` objects and columns containing
    missing values have `object` data type. ([GH 8045](https://github.com/pandas-dev/pandas/issues/8045))'
  id: totrans-213
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`read_stata` 和 `StataReader` 可以通过将参数 `convert_missing` 设置为 `True` 将丢失的数据信息导入到
    `DataFrame` 中。当使用此选项时，丢失的值将作为 `StataMissingValue` 对象返回，包含缺失值的列将具有 `object` 数据类型。
    ([GH 8045](https://github.com/pandas-dev/pandas/issues/8045))。'
- en: 'Enhancements in the plotting functions:'
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 绘图函数的增强：
- en: Added `layout` keyword to `DataFrame.plot`. You can pass a tuple of `(rows,
    columns)`, one of which can be `-1` to automatically infer ([GH 6667](https://github.com/pandas-dev/pandas/issues/6667),
    [GH 8071](https://github.com/pandas-dev/pandas/issues/8071)).
  id: totrans-215
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `DataFrame.plot` 中添加了 `layout` 关键字。你可以传递一个元组 `(rows, columns)`，其中一个可以是 `-1`
    以自动推断 ([GH 6667](https://github.com/pandas-dev/pandas/issues/6667), [GH 8071](https://github.com/pandas-dev/pandas/issues/8071))。
- en: Allow to pass multiple axes to `DataFrame.plot`, `hist` and `boxplot` ([GH 5353](https://github.com/pandas-dev/pandas/issues/5353),
    [GH 6970](https://github.com/pandas-dev/pandas/issues/6970), [GH 7069](https://github.com/pandas-dev/pandas/issues/7069))
  id: totrans-216
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许将多个轴传递给 `DataFrame.plot`、`hist` 和 `boxplot` ([GH 5353](https://github.com/pandas-dev/pandas/issues/5353),
    [GH 6970](https://github.com/pandas-dev/pandas/issues/6970), [GH 7069](https://github.com/pandas-dev/pandas/issues/7069))。
- en: Added support for `c`, `colormap` and `colorbar` arguments for `DataFrame.plot`
    with `kind='scatter'` ([GH 7780](https://github.com/pandas-dev/pandas/issues/7780))
  id: totrans-217
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为 `DataFrame.plot` 添加了对 `c`、`colormap` 和 `colorbar` 参数的支持，其中 `kind='scatter'`
    ([GH 7780](https://github.com/pandas-dev/pandas/issues/7780))。
- en: Histogram from `DataFrame.plot` with `kind='hist'` ([GH 7809](https://github.com/pandas-dev/pandas/issues/7809)),
    See [the docs](../user_guide/visualization.html#visualization-hist).
  id: totrans-218
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 `kind='hist'` 的 `DataFrame.plot` 中的直方图 ([GH 7809](https://github.com/pandas-dev/pandas/issues/7809))，请参阅[文档](../user_guide/visualization.html#visualization-hist)。
- en: Boxplot from `DataFrame.plot` with `kind='box'` ([GH 7998](https://github.com/pandas-dev/pandas/issues/7998)),
    See [the docs](../user_guide/visualization.html#visualization-box).
  id: totrans-219
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 `kind='box'` 的 `DataFrame.plot` 中的箱线图 ([GH 7998](https://github.com/pandas-dev/pandas/issues/7998))，请参阅[文档](../user_guide/visualization.html#visualization-box)。
- en: 'Other:'
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 其他：
- en: '`read_csv` now has a keyword parameter `float_precision` which specifies which
    floating-point converter the C engine should use during parsing, see [here](../user_guide/io.html#io-float-precision)
    ([GH 8002](https://github.com/pandas-dev/pandas/issues/8002), [GH 8044](https://github.com/pandas-dev/pandas/issues/8044))'
  id: totrans-221
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`read_csv` 现在有一个关键字参数 `float_precision`，用于指定 C 引擎在解析过程中应使用的浮点转换器，请参阅[此处](../user_guide/io.html#io-float-precision)
    ([GH 8002](https://github.com/pandas-dev/pandas/issues/8002), [GH 8044](https://github.com/pandas-dev/pandas/issues/8044))。'
- en: Added `searchsorted` method to `Series` objects ([GH 7447](https://github.com/pandas-dev/pandas/issues/7447))
  id: totrans-222
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 向 `Series` 对象添加了 `searchsorted` 方法 ([GH 7447](https://github.com/pandas-dev/pandas/issues/7447))。
- en: '`describe()` on mixed-types DataFrames is more flexible. Type-based column
    filtering is now possible via the `include`/`exclude` arguments. See the [docs](../user_guide/basics.html#basics-describe)
    ([GH 8164](https://github.com/pandas-dev/pandas/issues/8164)).'
  id: totrans-223
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对混合类型数据框的 `describe()` 更加灵活。现在可以通过 `include`/`exclude` 参数进行基于类型的列过滤。请参阅[文档](../user_guide/basics.html#basics-describe)
    ([GH 8164](https://github.com/pandas-dev/pandas/issues/8164))。
- en: '[PRE52]'
  id: totrans-224
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE52]'
- en: Requesting all columns is possible with the shorthand ‘all’
  id: totrans-225
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 使用速记符号 ‘all’ 可以请求所有列。
- en: '[PRE53]'
  id: totrans-226
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE53]'
- en: Without those arguments, `describe` will behave as before, including only numerical
    columns or, if none are, only categorical columns. See also the [docs](../user_guide/basics.html#basics-describe)
  id: totrans-227
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果没有这些参数，`describe` 的行为将与以前相同，仅包括数字列，或者如果没有数字列，则仅包括分类列。另请参阅[文档](../user_guide/basics.html#basics-describe)。
- en: Added `split` as an option to the `orient` argument in `pd.DataFrame.to_dict`.
    ([GH 7840](https://github.com/pandas-dev/pandas/issues/7840))
  id: totrans-228
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `pd.DataFrame.to_dict` 的 `orient` 参数中添加了 `split` 作为选项。 ([GH 7840](https://github.com/pandas-dev/pandas/issues/7840))。
- en: The `get_dummies` method can now be used on DataFrames. By default only categorical
    columns are encoded as 0’s and 1’s, while other columns are left untouched.
  id: totrans-229
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`get_dummies` 方法现在可以用于 DataFrame。默认情况下，只有分类列被编码为 0 和 1，而其他列保持不变。'
- en: '[PRE54]'
  id: totrans-230
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE54]'
- en: '`PeriodIndex` supports `resolution` as the same as `DatetimeIndex` ([GH 7708](https://github.com/pandas-dev/pandas/issues/7708))'
  id: totrans-231
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`PeriodIndex` 支持 `resolution`，与 `DatetimeIndex` 相同（[GH 7708](https://github.com/pandas-dev/pandas/issues/7708)）'
- en: '`pandas.tseries.holiday` has added support for additional holidays and ways
    to observe holidays ([GH 7070](https://github.com/pandas-dev/pandas/issues/7070))'
  id: totrans-232
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pandas.tseries.holiday` 添加了对其他节日和观察节日方式的支持（[GH 7070](https://github.com/pandas-dev/pandas/issues/7070)）'
- en: '`pandas.tseries.holiday.Holiday` now supports a list of offsets in Python3
    ([GH 7070](https://github.com/pandas-dev/pandas/issues/7070))'
  id: totrans-233
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pandas.tseries.holiday.Holiday` 现在支持 Python3 中的偏移量列表（[GH 7070](https://github.com/pandas-dev/pandas/issues/7070)）'
- en: '`pandas.tseries.holiday.Holiday` now supports a days_of_week parameter ([GH
    7070](https://github.com/pandas-dev/pandas/issues/7070))'
  id: totrans-234
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pandas.tseries.holiday.Holiday` 现在支持一个 `days_of_week` 参数（[GH 7070](https://github.com/pandas-dev/pandas/issues/7070)）'
- en: '`GroupBy.nth()` now supports selecting multiple nth values ([GH 7910](https://github.com/pandas-dev/pandas/issues/7910))'
  id: totrans-235
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`GroupBy.nth()` 现在支持选择多个第 n 个值（[GH 7910](https://github.com/pandas-dev/pandas/issues/7910)）'
- en: '[PRE55]'
  id: totrans-236
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE55]'
- en: '`Period` and `PeriodIndex` supports addition/subtraction with `timedelta`-likes
    ([GH 7966](https://github.com/pandas-dev/pandas/issues/7966))'
  id: totrans-237
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Period` 和 `PeriodIndex` 支持与 `timedelta` 类似的加法/减法（[GH 7966](https://github.com/pandas-dev/pandas/issues/7966)）'
- en: If `Period` freq is `D`, `H`, `T`, `S`, `L`, `U`, `N`, `Timedelta`-like can
    be added if the result can have same freq. Otherwise, only the same `offsets`
    can be added.
  id: totrans-238
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果 `Period` 频率是 `D`、`H`、`T`、`S`、`L`、`U`、`N`，且结果可以具有相同的频率，则可以添加 `Timedelta`-like。否则，只能添加相同的
    `offsets`。
- en: '[PRE56]'
  id: totrans-239
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE56]'
- en: Added experimental compatibility with `openpyxl` for versions >= 2.0\. The `DataFrame.to_excel`
    method `engine` keyword now recognizes `openpyxl1` and `openpyxl2` which will
    explicitly require openpyxl v1 and v2 respectively, failing if the requested version
    is not available. The `openpyxl` engine is a now a meta-engine that automatically
    uses whichever version of openpyxl is installed. ([GH 7177](https://github.com/pandas-dev/pandas/issues/7177))
  id: totrans-240
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了与 `openpyxl` 版本 >= 2.0 的实验性兼容性。`DataFrame.to_excel` 方法的 `engine` 关键字现在识别
    `openpyxl1` 和 `openpyxl2`，分别显式要求 openpyxl v1 和 v2，如果请求的版本不可用则失败。`openpyxl` 引擎现在是一个元引擎，自动使用已安装的
    openpyxl 版本（[GH 7177](https://github.com/pandas-dev/pandas/issues/7177)）
- en: '`DataFrame.fillna` can now accept a `DataFrame` as a fill value ([GH 8377](https://github.com/pandas-dev/pandas/issues/8377))'
  id: totrans-241
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.fillna` 现在可以接受一个 `DataFrame` 作为填充值（[GH 8377](https://github.com/pandas-dev/pandas/issues/8377)）'
- en: Passing multiple levels to [`stack()`](../reference/api/pandas.DataFrame.stack.html#pandas.DataFrame.stack
    "pandas.DataFrame.stack") will now work when multiple level numbers are passed
    ([GH 7660](https://github.com/pandas-dev/pandas/issues/7660)). See [Reshaping
    by stacking and unstacking](../user_guide/reshaping.html#reshaping-stack-multiple).
  id: totrans-242
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当传递多个级别编号时，[`stack()`](../reference/api/pandas.DataFrame.stack.html#pandas.DataFrame.stack
    "pandas.DataFrame.stack") 现在会起作用。请参阅 [Reshaping by stacking and unstacking](../user_guide/reshaping.html#reshaping-stack-multiple)。（[GH
    7660](https://github.com/pandas-dev/pandas/issues/7660)）
- en: '`set_names()`, `set_labels()`, and `set_levels()` methods now take an optional
    `level` keyword argument to all modification of specific level(s) of a MultiIndex.
    Additionally `set_names()` now accepts a scalar string value when operating on
    an `Index` or on a specific level of a `MultiIndex` ([GH 7792](https://github.com/pandas-dev/pandas/issues/7792))'
  id: totrans-243
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`set_names()`、`set_labels()` 和 `set_levels()` 方法现在都接受一个可选的 `level` 关键字参数，用于修改
    MultiIndex 的特定级别。另外，当操作 `Index` 或 `MultiIndex` 的特定级别时，`set_names()` 现在接受一个标量字符串值（[GH
    7792](https://github.com/pandas-dev/pandas/issues/7792)）'
- en: '[PRE57]'
  id: totrans-244
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE57]'
- en: '`Index.isin` now supports a `level` argument to specify which index level to
    use for membership tests ([GH 7892](https://github.com/pandas-dev/pandas/issues/7892),
    [GH 7890](https://github.com/pandas-dev/pandas/issues/7890))'
  id: totrans-245
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Index.isin` 现在支持 `level` 参数，用于指定要用于成员测试的索引级别（[GH 7892](https://github.com/pandas-dev/pandas/issues/7892),
    [GH 7890](https://github.com/pandas-dev/pandas/issues/7890)）'
- en: '[PRE58]'
  id: totrans-246
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE58]'
- en: '`Index` now supports `duplicated` and `drop_duplicates`. ([GH 4060](https://github.com/pandas-dev/pandas/issues/4060))'
  id: totrans-247
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Index` 现在支持 `duplicated` 和 `drop_duplicates`。（[GH 4060](https://github.com/pandas-dev/pandas/issues/4060)）'
- en: '[PRE59]'
  id: totrans-248
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE59]'
- en: add `copy=True` argument to `pd.concat` to enable pass through of complete blocks
    ([GH 8252](https://github.com/pandas-dev/pandas/issues/8252))
  id: totrans-249
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 向 `pd.concat` 添加了 `copy=True` 参数，以启用完整块的传递（[GH 8252](https://github.com/pandas-dev/pandas/issues/8252)）
- en: 'Added support for numpy 1.8+ data types (`bool_`, `int_`, `float_`, `string_`)
    for conversion to R dataframe ([GH 8400](https://github.com/pandas-dev/pandas/issues/8400))  ##
    Performance'
  id: totrans-250
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '为numpy 1.8+数据类型（`bool_`、`int_`、`float_`、`string_`）添加了转换为R dataframe的支持（[GH
    8400](https://github.com/pandas-dev/pandas/issues/8400)）  ## 性能'
- en: Performance improvements in `DatetimeIndex.__iter__` to allow faster iteration
    ([GH 7683](https://github.com/pandas-dev/pandas/issues/7683))
  id: totrans-251
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 改进了`DatetimeIndex.__iter__`的性能，以实现更快的迭代（[GH 7683](https://github.com/pandas-dev/pandas/issues/7683)）
- en: Performance improvements in `Period` creation (and `PeriodIndex` setitem) ([GH
    5155](https://github.com/pandas-dev/pandas/issues/5155))
  id: totrans-252
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Period`创建（和`PeriodIndex` setitem）的性能改进（[GH 5155](https://github.com/pandas-dev/pandas/issues/5155)）'
- en: Improvements in Series.transform for significant performance gains (revised)
    ([GH 6496](https://github.com/pandas-dev/pandas/issues/6496))
  id: totrans-253
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Series.transform的性能改进，获得了显著的性能提升（修订版）（[GH 6496](https://github.com/pandas-dev/pandas/issues/6496)）
- en: Performance improvements in `StataReader` when reading large files ([GH 8040](https://github.com/pandas-dev/pandas/issues/8040),
    [GH 8073](https://github.com/pandas-dev/pandas/issues/8073))
  id: totrans-254
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在读取大文件时改进了`StataReader`的性能（[GH 8040](https://github.com/pandas-dev/pandas/issues/8040),
    [GH 8073](https://github.com/pandas-dev/pandas/issues/8073)）
- en: Performance improvements in `StataWriter` when writing large files ([GH 8079](https://github.com/pandas-dev/pandas/issues/8079))
  id: totrans-255
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在写入大文件时改进了`StataWriter`的性能（[GH 8079](https://github.com/pandas-dev/pandas/issues/8079)）
- en: Performance and memory usage improvements in multi-key `groupby` ([GH 8128](https://github.com/pandas-dev/pandas/issues/8128))
  id: totrans-256
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在多键`groupby`中的性能和内存使用方面进行了改进（[GH 8128](https://github.com/pandas-dev/pandas/issues/8128)）
- en: Performance improvements in groupby `.agg` and `.apply` where builtins max/min
    were not mapped to numpy/cythonized versions ([GH 7722](https://github.com/pandas-dev/pandas/issues/7722))
  id: totrans-257
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在groupby `.agg`和`.apply`中的性能改进，未将内置的max/min映射到numpy/cythonized版本的错误（[GH 7722](https://github.com/pandas-dev/pandas/issues/7722)）
- en: Performance improvement in writing to sql (`to_sql`) of up to 50% ([GH 8208](https://github.com/pandas-dev/pandas/issues/8208)).
  id: totrans-258
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 写入 sql（`to_sql`）的性能提高了50%（[GH 8208](https://github.com/pandas-dev/pandas/issues/8208)）。
- en: Performance benchmarking of groupby for large value of ngroups ([GH 6787](https://github.com/pandas-dev/pandas/issues/6787))
  id: totrans-259
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对大量ngroups的groupby性能进行基准测试（[GH 6787](https://github.com/pandas-dev/pandas/issues/6787)）
- en: Performance improvement in `CustomBusinessDay`, `CustomBusinessMonth` ([GH 8236](https://github.com/pandas-dev/pandas/issues/8236))
  id: totrans-260
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`CustomBusinessDay`、`CustomBusinessMonth`中的性能改进（[GH 8236](https://github.com/pandas-dev/pandas/issues/8236)）
- en: 'Performance improvement for `MultiIndex.values` for multi-level indexes containing
    datetimes ([GH 8543](https://github.com/pandas-dev/pandas/issues/8543))  ## Bug
    fixes'
  id: totrans-261
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '对包含日期时间的多级索引的`MultiIndex.values`的性能改进（[GH 8543](https://github.com/pandas-dev/pandas/issues/8543)）  ##
    修复错误'
- en: Bug in pivot_table, when using margins and a dict aggfunc ([GH 8349](https://github.com/pandas-dev/pandas/issues/8349))
  id: totrans-262
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在使用边距和字典aggfunc时，pivot_table中的错误（[GH 8349](https://github.com/pandas-dev/pandas/issues/8349)）
- en: Bug in `read_csv` where `squeeze=True` would return a view ([GH 8217](https://github.com/pandas-dev/pandas/issues/8217))
  id: totrans-263
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`read_csv`中，`squeeze=True`会返回一个视图的错误（[GH 8217](https://github.com/pandas-dev/pandas/issues/8217)）
- en: Bug in checking of table name in `read_sql` in certain cases ([GH 7826](https://github.com/pandas-dev/pandas/issues/7826)).
  id: totrans-264
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在某些情况下检查`read_sql`中表名的错误（[GH 7826](https://github.com/pandas-dev/pandas/issues/7826)）。
- en: Bug in `DataFrame.groupby` where `Grouper` does not recognize level when frequency
    is specified ([GH 7885](https://github.com/pandas-dev/pandas/issues/7885))
  id: totrans-265
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在指定频率时，`DataFrame.groupby`中`Grouper`不识别级别的错误（[GH 7885](https://github.com/pandas-dev/pandas/issues/7885)）
- en: Bug in multiindexes dtypes getting mixed up when DataFrame is saved to SQL table
    ([GH 8021](https://github.com/pandas-dev/pandas/issues/8021))
  id: totrans-266
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在将DataFrame保存到SQL表时，多索引dtype混淆的错误（[GH 8021](https://github.com/pandas-dev/pandas/issues/8021)）
- en: Bug in `Series` 0-division with a float and integer operand dtypes ([GH 7785](https://github.com/pandas-dev/pandas/issues/7785))
  id: totrans-267
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在具有浮点数和整数操作数dtype的`Series` 0-division中的错误（[GH 7785](https://github.com/pandas-dev/pandas/issues/7785)）
- en: Bug in `Series.astype("unicode")` not calling `unicode` on the values correctly
    ([GH 7758](https://github.com/pandas-dev/pandas/issues/7758))
  id: totrans-268
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`Series.astype("unicode")`中，未正确调用值的`unicode`的错误（[GH 7758](https://github.com/pandas-dev/pandas/issues/7758)）
- en: Bug in `DataFrame.as_matrix()` with mixed `datetime64[ns]` and `timedelta64[ns]`
    dtypes ([GH 7778](https://github.com/pandas-dev/pandas/issues/7778))
  id: totrans-269
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在混合了`datetime64[ns]`和`timedelta64[ns]` dtype的情况下，`DataFrame.as_matrix()`中的错误（[GH
    7778](https://github.com/pandas-dev/pandas/issues/7778)）
- en: Bug in `HDFStore.select_column()` not preserving UTC timezone info when selecting
    a `DatetimeIndex` ([GH 7777](https://github.com/pandas-dev/pandas/issues/7777))
  id: totrans-270
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在选择`DatetimeIndex`时`HDFStore.select_column()`不会保留UTC时区信息（[GH 7777](https://github.com/pandas-dev/pandas/issues/7777)）
- en: Bug in `to_datetime` when `format='%Y%m%d'` and `coerce=True` are specified,
    where previously an object array was returned (rather than a coerced time-series
    with `NaT`), ([GH 7930](https://github.com/pandas-dev/pandas/issues/7930))
  id: totrans-271
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在指定`format='%Y%m%d'`和`coerce=True`时`to_datetime`中的错误，先前返回对象数组（而不是具有`NaT`的强制时间序列）（[GH
    7930](https://github.com/pandas-dev/pandas/issues/7930)）
- en: Bug in `DatetimeIndex` and `PeriodIndex` in-place addition and subtraction cause
    different result from normal one ([GH 6527](https://github.com/pandas-dev/pandas/issues/6527))
  id: totrans-272
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`DatetimeIndex`和`PeriodIndex`的原地加法和减法导致与正常结果不同的错误（[GH 6527](https://github.com/pandas-dev/pandas/issues/6527)）
- en: Bug in adding and subtracting `PeriodIndex` with `PeriodIndex` raise `TypeError`
    ([GH 7741](https://github.com/pandas-dev/pandas/issues/7741))
  id: totrans-273
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在添加和减去`PeriodIndex`与`PeriodIndex`时引发`TypeError`的错误（[GH 7741](https://github.com/pandas-dev/pandas/issues/7741)）
- en: Bug in `combine_first` with `PeriodIndex` data raises `TypeError` ([GH 3367](https://github.com/pandas-dev/pandas/issues/3367))
  id: totrans-274
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`combine_first`中使用`PeriodIndex`数据引发`TypeError`的错误（[GH 3367](https://github.com/pandas-dev/pandas/issues/3367)）
- en: Bug in MultiIndex slicing with missing indexers ([GH 7866](https://github.com/pandas-dev/pandas/issues/7866))
  id: totrans-275
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在缺少索引器的`MultiIndex`切片中的错误（[GH 7866](https://github.com/pandas-dev/pandas/issues/7866)）
- en: Bug in MultiIndex slicing with various edge cases ([GH 8132](https://github.com/pandas-dev/pandas/issues/8132))
  id: totrans-276
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在各种边缘情况下切片`MultiIndex`中的错误（[GH 8132](https://github.com/pandas-dev/pandas/issues/8132)）
- en: Regression in MultiIndex indexing with a non-scalar type object ([GH 7914](https://github.com/pandas-dev/pandas/issues/7914))
  id: totrans-277
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在具有非标量类型对象的`MultiIndex`索引中的回归错误（[GH 7914](https://github.com/pandas-dev/pandas/issues/7914)）
- en: Bug in `Timestamp` comparisons with `==` and `int64` dtype ([GH 8058](https://github.com/pandas-dev/pandas/issues/8058))
  id: totrans-278
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`Timestamp`与`int64`类型的比较中的错误��[GH 8058](https://github.com/pandas-dev/pandas/issues/8058)）
- en: Bug in pickles contains `DateOffset` may raise `AttributeError` when `normalize`
    attribute is referred internally ([GH 7748](https://github.com/pandas-dev/pandas/issues/7748))
  id: totrans-279
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`pickles`中包含`DateOffset`可能在内部引用`normalize`属性时引发`AttributeError`的错误（[GH 7748](https://github.com/pandas-dev/pandas/issues/7748)）
- en: Bug in `Panel` when using `major_xs` and `copy=False` is passed (deprecation
    warning fails because of missing `warnings`) ([GH 8152](https://github.com/pandas-dev/pandas/issues/8152)).
  id: totrans-280
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在使用`major_xs`和传递`copy=False`时`Panel`中的错误（由于缺少`warnings`而导致弃用警告失败）（[GH 8152](https://github.com/pandas-dev/pandas/issues/8152)）
- en: Bug in pickle deserialization that failed for pre-0.14.1 containers with dup
    items trying to avoid ambiguity when matching block and manager items, when there’s
    only one block there’s no ambiguity ([GH 7794](https://github.com/pandas-dev/pandas/issues/7794))
  id: totrans-281
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 反序列化`pickle`中的错误，对于先前版本为0.14.1的容器存在重复项时会失败，试图避免匹配块和管理器项时的歧义，当只有一个块时就没有歧义（[GH
    7794](https://github.com/pandas-dev/pandas/issues/7794)）
- en: Bug in putting a `PeriodIndex` into a `Series` would convert to `int64` dtype,
    rather than `object` of `Periods` ([GH 7932](https://github.com/pandas-dev/pandas/issues/7932))
  id: totrans-282
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将`PeriodIndex`放入`Series`中会转换为`int64`类型，而不是`Periods`的`object`的错误（[GH 7932](https://github.com/pandas-dev/pandas/issues/7932)）
- en: Bug in `HDFStore` iteration when passing a where ([GH 8014](https://github.com/pandas-dev/pandas/issues/8014))
  id: totrans-283
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在传递`where`时`HDFStore`迭代中的错误（[GH 8014](https://github.com/pandas-dev/pandas/issues/8014)）
- en: Bug in `DataFrameGroupby.transform` when transforming with a passed non-sorted
    key ([GH 8046](https://github.com/pandas-dev/pandas/issues/8046), [GH 8430](https://github.com/pandas-dev/pandas/issues/8430))
  id: totrans-284
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在使用传递的非排序键进行转换时`DataFrameGroupby.transform`中的错误（[GH 8046](https://github.com/pandas-dev/pandas/issues/8046)，[GH
    8430](https://github.com/pandas-dev/pandas/issues/8430)）
- en: Bug in repeated timeseries line and area plot may result in `ValueError` or
    incorrect kind ([GH 7733](https://github.com/pandas-dev/pandas/issues/7733))
  id: totrans-285
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在重复时间序列线和区域图中可能导致`ValueError`或不正确类型的错误（[GH 7733](https://github.com/pandas-dev/pandas/issues/7733)）
- en: Bug in inference in a `MultiIndex` with `datetime.date` inputs ([GH 7888](https://github.com/pandas-dev/pandas/issues/7888))
  id: totrans-286
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在具有`datetime.date`输入的`MultiIndex`推断中的错误（[GH 7888](https://github.com/pandas-dev/pandas/issues/7888)）
- en: Bug in `get` where an `IndexError` would not cause the default value to be returned
    ([GH 7725](https://github.com/pandas-dev/pandas/issues/7725))
  id: totrans-287
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`get`中，`IndexError`不会导致返回默认值的错误（[GH 7725](https://github.com/pandas-dev/pandas/issues/7725)）
- en: Bug in `offsets.apply`, `rollforward` and `rollback` may reset nanosecond ([GH
    7697](https://github.com/pandas-dev/pandas/issues/7697))
  id: totrans-288
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`offsets.apply`、`rollforward`和`rollback`中可能重置纳秒的错误（[GH 7697](https://github.com/pandas-dev/pandas/issues/7697)）
- en: Bug in `offsets.apply`, `rollforward` and `rollback` may raise `AttributeError`
    if `Timestamp` has `dateutil` tzinfo ([GH 7697](https://github.com/pandas-dev/pandas/issues/7697))
  id: totrans-289
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`offsets.apply`、`rollforward` 和 `rollback` 中的 Bug，如果 `Timestamp` 具有 `dateutil`
    时区信息，则可能会引发 `AttributeError` ([GH 7697](https://github.com/pandas-dev/pandas/issues/7697))'
- en: Bug in sorting a MultiIndex frame with a `Float64Index` ([GH 8017](https://github.com/pandas-dev/pandas/issues/8017))
  id: totrans-290
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 `Float64Index` 对 MultiIndex 帧进行排序时出现 Bug ([GH 8017](https://github.com/pandas-dev/pandas/issues/8017))
- en: Bug in inconsistent panel setitem with a rhs of a `DataFrame` for alignment
    ([GH 7763](https://github.com/pandas-dev/pandas/issues/7763))
  id: totrans-291
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不一致的面板设置项中存在 Bug，对齐右侧边的 `DataFrame` 时 ([GH 7763](https://github.com/pandas-dev/pandas/issues/7763))
- en: Bug in `is_superperiod` and `is_subperiod` cannot handle higher frequencies
    than `S` ([GH 7760](https://github.com/pandas-dev/pandas/issues/7760), [GH 7772](https://github.com/pandas-dev/pandas/issues/7772),
    [GH 7803](https://github.com/pandas-dev/pandas/issues/7803))
  id: totrans-292
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`is_superperiod` 和 `is_subperiod` 中存在 Bug，不能处理高于 `S` 的更高频率 ([GH 7760](https://github.com/pandas-dev/pandas/issues/7760),
    [GH 7772](https://github.com/pandas-dev/pandas/issues/7772), [GH 7803](https://github.com/pandas-dev/pandas/issues/7803))'
- en: Bug in 32-bit platforms with `Series.shift` ([GH 8129](https://github.com/pandas-dev/pandas/issues/8129))
  id: totrans-293
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 32 位平台上，`Series.shift` 中存在 Bug ([GH 8129](https://github.com/pandas-dev/pandas/issues/8129))
- en: Bug in `PeriodIndex.unique` returns int64 `np.ndarray` ([GH 7540](https://github.com/pandas-dev/pandas/issues/7540))
  id: totrans-294
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`PeriodIndex.unique` 中存在 Bug，返回 int64 `np.ndarray` ([GH 7540](https://github.com/pandas-dev/pandas/issues/7540))'
- en: Bug in `groupby.apply` with a non-affecting mutation in the function ([GH 8467](https://github.com/pandas-dev/pandas/issues/8467))
  id: totrans-295
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`groupby.apply` 中的 Bug，函数中存在不影响的突变时可能会引发 `AttributeError` ([GH 8467](https://github.com/pandas-dev/pandas/issues/8467))'
- en: Bug in `DataFrame.reset_index` which has `MultiIndex` contains `PeriodIndex`
    or `DatetimeIndex` with tz raises `ValueError` ([GH 7746](https://github.com/pandas-dev/pandas/issues/7746),
    [GH 7793](https://github.com/pandas-dev/pandas/issues/7793))
  id: totrans-296
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.reset_index` 中的 Bug，当 `MultiIndex` 包含 `PeriodIndex` 或 `DatetimeIndex`
    时，引发 `ValueError` ([GH 7746](https://github.com/pandas-dev/pandas/issues/7746),
    [GH 7793](https://github.com/pandas-dev/pandas/issues/7793))'
- en: Bug in `DataFrame.plot` with `subplots=True` may draw unnecessary minor xticks
    and yticks ([GH 7801](https://github.com/pandas-dev/pandas/issues/7801))
  id: totrans-297
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.plot` 中存在 Bug，当 `subplots=True` 时，可能会绘制不必要的次要 xticks 和 yticks ([GH
    7801](https://github.com/pandas-dev/pandas/issues/7801))'
- en: Bug in `StataReader` which did not read variable labels in 117 files due to
    difference between Stata documentation and implementation ([GH 7816](https://github.com/pandas-dev/pandas/issues/7816))
  id: totrans-298
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`StataReader` 中的 Bug，由于 Stata 文档和实现之间的差异，117 个文件中的变量标签没有被读取 ([GH 7816](https://github.com/pandas-dev/pandas/issues/7816))'
- en: Bug in `StataReader` where strings were always converted to 244 characters-fixed
    width irrespective of underlying string size ([GH 7858](https://github.com/pandas-dev/pandas/issues/7858))
  id: totrans-299
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`StataReader` 中的 Bug，字符串总是被转换为 244 个字符的固定宽度，而不考虑底层字符串大小 ([GH 7858](https://github.com/pandas-dev/pandas/issues/7858))'
- en: Bug in `DataFrame.plot` and `Series.plot` may ignore `rot` and `fontsize` keywords
    ([GH 7844](https://github.com/pandas-dev/pandas/issues/7844))
  id: totrans-300
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.plot` 和 `Series.plot` 中的 Bug 可能会忽略 `rot` 和 `fontsize` 关键字 ([GH 7844](https://github.com/pandas-dev/pandas/issues/7844))'
- en: Bug in `DatetimeIndex.value_counts` doesn’t preserve tz ([GH 7735](https://github.com/pandas-dev/pandas/issues/7735))
  id: totrans-301
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DatetimeIndex.value_counts` 中存在 Bug，不保留时区信息 ([GH 7735](https://github.com/pandas-dev/pandas/issues/7735))'
- en: Bug in `PeriodIndex.value_counts` results in `Int64Index` ([GH 7735](https://github.com/pandas-dev/pandas/issues/7735))
  id: totrans-302
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`PeriodIndex.value_counts` 中的 Bug 导致 `Int64Index` 的结果 ([GH 7735](https://github.com/pandas-dev/pandas/issues/7735))'
- en: Bug in `DataFrame.join` when doing left join on index and there are multiple
    matches ([GH 5391](https://github.com/pandas-dev/pandas/issues/5391))
  id: totrans-303
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.join` 中存在 Bug，在索引上进行左连接时存在多个匹配项 ([GH 5391](https://github.com/pandas-dev/pandas/issues/5391))'
- en: Bug in `GroupBy.transform()` where int groups with a transform that didn’t preserve
    the index were incorrectly truncated ([GH 7972](https://github.com/pandas-dev/pandas/issues/7972)).
  id: totrans-304
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`GroupBy.transform()` 中的 Bug，使用不保留索引的转换的 int 分组会被错误地截断 ([GH 7972](https://github.com/pandas-dev/pandas/issues/7972))'
- en: Bug in `groupby` where callable objects without name attributes would take the
    wrong path, and produce a `DataFrame` instead of a `Series` ([GH 7929](https://github.com/pandas-dev/pandas/issues/7929))
  id: totrans-305
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`groupby` 中的 Bug，没有名称属性的可调用对象会选择错误的路径，并生成一个 `DataFrame` 而不是一个 `Series` ([GH
    7929](https://github.com/pandas-dev/pandas/issues/7929))'
- en: Bug in `groupby` error message when a DataFrame grouping column is duplicated
    ([GH 7511](https://github.com/pandas-dev/pandas/issues/7511))
  id: totrans-306
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当 DataFrame 分组列重复时，`groupby` 中存在 Bug，错误消息 ([GH 7511](https://github.com/pandas-dev/pandas/issues/7511))
- en: Bug in `read_html` where the `infer_types` argument forced coercion of date-likes
    incorrectly ([GH 7762](https://github.com/pandas-dev/pandas/issues/7762), [GH
    7032](https://github.com/pandas-dev/pandas/issues/7032)).
  id: totrans-307
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `read_html` 中存在的问题，`infer_types` 参数错误地强制转换了日期类似对象（[GH 7762](https://github.com/pandas-dev/pandas/issues/7762),
    [GH 7032](https://github.com/pandas-dev/pandas/issues/7032)）。
- en: Bug in `Series.str.cat` with an index which was filtered as to not include the
    first item ([GH 7857](https://github.com/pandas-dev/pandas/issues/7857))
  id: totrans-308
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在具有索引的 `Series.str.cat` 中存在的问题，被过滤为不包含第一个项（[GH 7857](https://github.com/pandas-dev/pandas/issues/7857)）。
- en: Bug in `Timestamp` cannot parse `nanosecond` from string ([GH 7878](https://github.com/pandas-dev/pandas/issues/7878))
  id: totrans-309
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Timestamp` 中无法从字符串中解析 `nanosecond`（[GH 7878](https://github.com/pandas-dev/pandas/issues/7878)）。'
- en: Bug in `Timestamp` with string offset and `tz` results incorrect ([GH 7833](https://github.com/pandas-dev/pandas/issues/7833))
  id: totrans-310
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 带有字符串偏移和 `tz` 的 `Timestamp` 结果不正确（[GH 7833](https://github.com/pandas-dev/pandas/issues/7833)）。
- en: Bug in `tslib.tz_convert` and `tslib.tz_convert_single` may return different
    results ([GH 7798](https://github.com/pandas-dev/pandas/issues/7798))
  id: totrans-311
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `tslib.tz_convert` 和 `tslib.tz_convert_single` 中存在的问题可能会返回不同的结果（[GH 7798](https://github.com/pandas-dev/pandas/issues/7798)）。
- en: Bug in `DatetimeIndex.intersection` of non-overlapping timestamps with tz raises
    `IndexError` ([GH 7880](https://github.com/pandas-dev/pandas/issues/7880))
  id: totrans-312
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在具有时区的非重叠时间戳的 `DatetimeIndex.intersection` 中存在的问题会引发 `IndexError`（[GH 7880](https://github.com/pandas-dev/pandas/issues/7880)）。
- en: Bug in alignment with TimeOps and non-unique indexes ([GH 8363](https://github.com/pandas-dev/pandas/issues/8363))
  id: totrans-313
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 TimeOps 和非唯一索引对齐中存在的问题（[GH 8363](https://github.com/pandas-dev/pandas/issues/8363)）。
- en: Bug in `GroupBy.filter()` where fast path vs. slow path made the filter return
    a non scalar value that appeared valid but wasn’t ([GH 7870](https://github.com/pandas-dev/pandas/issues/7870)).
  id: totrans-314
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `GroupBy.filter()` 中存在的问题，快速路径与慢速路径使过滤器返回一个看似有效但实际上无效的非标量值（[GH 7870](https://github.com/pandas-dev/pandas/issues/7870)）。
- en: Bug in `date_range()`/`DatetimeIndex()` when the timezone was inferred from
    input dates yet incorrect times were returned when crossing DST boundaries ([GH
    7835](https://github.com/pandas-dev/pandas/issues/7835), [GH 7901](https://github.com/pandas-dev/pandas/issues/7901)).
  id: totrans-315
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当时区是从输入日期中推断出的但在跨越夏令时边界时返回错误时间时，在 `date_range()`/`DatetimeIndex()` 中存在的问题（[GH
    7835](https://github.com/pandas-dev/pandas/issues/7835), [GH 7901](https://github.com/pandas-dev/pandas/issues/7901)）。
- en: Bug in `to_excel()` where a negative sign was being prepended to positive infinity
    and was absent for negative infinity ([GH 7949](https://github.com/pandas-dev/pandas/issues/7949))
  id: totrans-316
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `to_excel()` 中存在的问题，负无穷被附加了负号，而正无穷则不存在（[GH 7949](https://github.com/pandas-dev/pandas/issues/7949)）。
- en: Bug in area plot draws legend with incorrect `alpha` when `stacked=True` ([GH
    8027](https://github.com/pandas-dev/pandas/issues/8027))
  id: totrans-317
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `stacked=True` 时，区域图绘制的图例具有不正确的 `alpha`（[GH 8027](https://github.com/pandas-dev/pandas/issues/8027)）。
- en: '`Period` and `PeriodIndex` addition/subtraction with `np.timedelta64` results
    in incorrect internal representations ([GH 7740](https://github.com/pandas-dev/pandas/issues/7740))'
  id: totrans-318
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 `np.timedelta64` 进行 `Period` 和 `PeriodIndex` 的加法/减法会导致内部表示不正确（[GH 7740](https://github.com/pandas-dev/pandas/issues/7740)）。
- en: Bug in `Holiday` with no offset or observance ([GH 7987](https://github.com/pandas-dev/pandas/issues/7987))
  id: totrans-319
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在没有偏移或观察时的 `Holiday` 中存在的问题（[GH 7987](https://github.com/pandas-dev/pandas/issues/7987)）。
- en: Bug in `DataFrame.to_latex` formatting when columns or index is a `MultiIndex`
    ([GH 7982](https://github.com/pandas-dev/pandas/issues/7982)).
  id: totrans-320
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当列或索引是 `MultiIndex` 时，`DataFrame.to_latex` 格式化存在问题（[GH 7982](https://github.com/pandas-dev/pandas/issues/7982)）。
- en: Bug in `DateOffset` around Daylight Savings Time produces unexpected results
    ([GH 5175](https://github.com/pandas-dev/pandas/issues/5175)).
  id: totrans-321
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在夏令时周围的 `DateOffset` 中存在的问题会产生意外结果（[GH 5175](https://github.com/pandas-dev/pandas/issues/5175)）。
- en: Bug in `DataFrame.shift` where empty columns would throw `ZeroDivisionError`
    on numpy 1.7 ([GH 8019](https://github.com/pandas-dev/pandas/issues/8019))
  id: totrans-322
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `DataFrame.shift` 中存在的问题，空列会在 numpy 1.7 上引发 `ZeroDivisionError`（[GH 8019](https://github.com/pandas-dev/pandas/issues/8019)）。
- en: Bug in installation where `html_encoding/*.html` wasn’t installed and therefore
    some tests were not running correctly ([GH 7927](https://github.com/pandas-dev/pandas/issues/7927)).
  id: totrans-323
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装中存在的问题，`html_encoding/*.html` 未被安装，因此一些测试未能正确运行（[GH 7927](https://github.com/pandas-dev/pandas/issues/7927)）。
- en: Bug in `read_html` where `bytes` objects were not tested for in `_read` ([GH
    7927](https://github.com/pandas-dev/pandas/issues/7927)).
  id: totrans-324
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `read_html` 中存在的问题，`bytes` 对象未在 `_read` 中进行测试（[GH 7927](https://github.com/pandas-dev/pandas/issues/7927)）。
- en: Bug in `DataFrame.stack()` when one of the column levels was a datelike ([GH
    8039](https://github.com/pandas-dev/pandas/issues/8039))
  id: totrans-325
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当一个列级别是日期样式时，`DataFrame.stack()` 存在的问题（[GH 8039](https://github.com/pandas-dev/pandas/issues/8039)）。
- en: Bug in broadcasting numpy scalars with `DataFrame` ([GH 8116](https://github.com/pandas-dev/pandas/issues/8116))
  id: totrans-326
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与 `DataFrame` 广播 numpy 标量的 Bug（[GH 8116](https://github.com/pandas-dev/pandas/issues/8116)）。
- en: Bug in `pivot_table` performed with nameless `index` and `columns` raises `KeyError`
    ([GH 8103](https://github.com/pandas-dev/pandas/issues/8103))
  id: totrans-327
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在没有名称的 `index` 和 `columns` 上执行的 `pivot_table` 引发 `KeyError`（[GH 8103](https://github.com/pandas-dev/pandas/issues/8103)）。
- en: Bug in `DataFrame.plot(kind='scatter')` draws points and errorbars with different
    colors when the color is specified by `c` keyword ([GH 8081](https://github.com/pandas-dev/pandas/issues/8081))
  id: totrans-328
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当颜色由 `c` 关键字指定时，`DataFrame.plot(kind='scatter')` 中的 Bug 会以不同颜色绘制点和误差条（[GH 8081](https://github.com/pandas-dev/pandas/issues/8081)）。
- en: Bug in `Float64Index` where `iat` and `at` were not testing and were failing
    ([GH 8092](https://github.com/pandas-dev/pandas/issues/8092)).
  id: totrans-329
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Float64Index` 中的 Bug，`iat` 和 `at` 未进行测试且失败（[GH 8092](https://github.com/pandas-dev/pandas/issues/8092)）。'
- en: Bug in `DataFrame.boxplot()` where y-limits were not set correctly when producing
    multiple axes ([GH 7528](https://github.com/pandas-dev/pandas/issues/7528), [GH
    5517](https://github.com/pandas-dev/pandas/issues/5517)).
  id: totrans-330
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `DataFrame.boxplot()` 中，当生成多个轴时未正确设置 y 轴限制的 Bug（[GH 7528](https://github.com/pandas-dev/pandas/issues/7528),
    [GH 5517](https://github.com/pandas-dev/pandas/issues/5517)）。
- en: Bug in `read_csv` where line comments were not handled correctly given a custom
    line terminator or `delim_whitespace=True` ([GH 8122](https://github.com/pandas-dev/pandas/issues/8122)).
  id: totrans-331
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `read_csv` 中，行注释在给定自定义行终止符或 `delim_whitespace=True` 时未正确处理（[GH 8122](https://github.com/pandas-dev/pandas/issues/8122)）。
- en: Bug in `read_html` where empty tables caused a `StopIteration` ([GH 7575](https://github.com/pandas-dev/pandas/issues/7575))
  id: totrans-332
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`read_html` 中的 Bug，空表导致 `StopIteration`（[GH 7575](https://github.com/pandas-dev/pandas/issues/7575)）。'
- en: Bug in casting when setting a column in a same-dtype block ([GH 7704](https://github.com/pandas-dev/pandas/issues/7704))
  id: totrans-333
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在设置相同 dtype 块中的列时进行转换时的 Bug（[GH 7704](https://github.com/pandas-dev/pandas/issues/7704)）。
- en: Bug in accessing groups from a `GroupBy` when the original grouper was a tuple
    ([GH 8121](https://github.com/pandas-dev/pandas/issues/8121)).
  id: totrans-334
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `GroupBy` 中访问组时的 Bug，当原始分组器是元组时（[GH 8121](https://github.com/pandas-dev/pandas/issues/8121)）。
- en: Bug in `.at` that would accept integer indexers on a non-integer index and do
    fallback ([GH 7814](https://github.com/pandas-dev/pandas/issues/7814))
  id: totrans-335
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `.at` 中，将整数索引器应用于非整数索引并进行回退的 Bug（[GH 7814](https://github.com/pandas-dev/pandas/issues/7814)）。
- en: Bug with kde plot and NaNs ([GH 8182](https://github.com/pandas-dev/pandas/issues/8182))
  id: totrans-336
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: kde 绘图和 NaN 的 Bug（[GH 8182](https://github.com/pandas-dev/pandas/issues/8182)）。
- en: Bug in `GroupBy.count` with float32 data type were nan values were not excluded
    ([GH 8169](https://github.com/pandas-dev/pandas/issues/8169)).
  id: totrans-337
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `GroupBy.count` 中，float32 数据类型的 Bug，nan 值未排除（[GH 8169](https://github.com/pandas-dev/pandas/issues/8169)）。
- en: Bug with stacked barplots and NaNs ([GH 8175](https://github.com/pandas-dev/pandas/issues/8175)).
  id: totrans-338
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 堆叠条形图和 NaN 的 Bug（[GH 8175](https://github.com/pandas-dev/pandas/issues/8175)）。
- en: Bug in resample with non evenly divisible offsets (e.g. ‘7s’) ([GH 8371](https://github.com/pandas-dev/pandas/issues/8371))
  id: totrans-339
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与非均匀可整除偏移（例如 '7s'）的重新采样中的 Bug（[GH 8371](https://github.com/pandas-dev/pandas/issues/8371)）。
- en: Bug in interpolation methods with the `limit` keyword when no values needed
    interpolating ([GH 7173](https://github.com/pandas-dev/pandas/issues/7173)).
  id: totrans-340
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 插值方法中的 Bug 在使用 `limit` 关键字时，当不需要插值数值时出现问题（[GH 7173](https://github.com/pandas-dev/pandas/issues/7173)）。
- en: Bug where `col_space` was ignored in `DataFrame.to_string()` when `header=False`
    ([GH 8230](https://github.com/pandas-dev/pandas/issues/8230)).
  id: totrans-341
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `DataFrame.to_string()` 中忽略了 `header=False` 时 `col_space` 的 Bug（[GH 8230](https://github.com/pandas-dev/pandas/issues/8230)）。
- en: Bug with `DatetimeIndex.asof` incorrectly matching partial strings and returning
    the wrong date ([GH 8245](https://github.com/pandas-dev/pandas/issues/8245)).
  id: totrans-342
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DatetimeIndex.asof` 中的 Bug 不正确地匹配部分字符串并返回错误的日期（[GH 8245](https://github.com/pandas-dev/pandas/issues/8245)）。'
- en: Bug in plotting methods modifying the global matplotlib rcParams ([GH 8242](https://github.com/pandas-dev/pandas/issues/8242)).
  id: totrans-343
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在修改全局 matplotlib rcParams 的绘图方法中的 Bug（[GH 8242](https://github.com/pandas-dev/pandas/issues/8242)）。
- en: Bug in `DataFrame.__setitem__` that caused errors when setting a dataframe column
    to a sparse array ([GH 8131](https://github.com/pandas-dev/pandas/issues/8131))
  id: totrans-344
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.__setitem__` 中的 Bug，当将数据框列设置为稀疏数组时引发错误（[GH 8131](https://github.com/pandas-dev/pandas/issues/8131)）。'
- en: Bug where `Dataframe.boxplot()` failed when entire column was empty ([GH 8181](https://github.com/pandas-dev/pandas/issues/8181)).
  id: totrans-345
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当整列为空时，`Dataframe.boxplot()` 失败的 Bug（[GH 8181](https://github.com/pandas-dev/pandas/issues/8181)）。
- en: Bug with messed variables in `radviz` visualization ([GH 8199](https://github.com/pandas-dev/pandas/issues/8199)).
  id: totrans-346
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `radviz` 可视化中出现的变量混乱 Bug（[GH 8199](https://github.com/pandas-dev/pandas/issues/8199)）。
- en: Bug in interpolation methods with the `limit` keyword when no values needed
    interpolating ([GH 7173](https://github.com/pandas-dev/pandas/issues/7173)).
  id: totrans-347
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在使用带有`limit`关键字的插值方法时出现插值不需要的值时的 Bug（[GH 7173](https://github.com/pandas-dev/pandas/issues/7173)）。
- en: Bug where `col_space` was ignored in `DataFrame.to_string()` when `header=False`
    ([GH 8230](https://github.com/pandas-dev/pandas/issues/8230)).
  id: totrans-348
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`DataFrame.to_string()`中的 Bug，当`header=False`时忽略了`col_space`（[GH 8230](https://github.com/pandas-dev/pandas/issues/8230)）。
- en: Bug in `to_clipboard` that would clip long column data ([GH 8305](https://github.com/pandas-dev/pandas/issues/8305))
  id: totrans-349
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`to_clipboard`中的 Bug，会剪切长列数据（[GH 8305](https://github.com/pandas-dev/pandas/issues/8305)）
- en: 'Bug in `DataFrame` terminal display: Setting max_column/max_rows to zero did
    not trigger auto-resizing of dfs to fit terminal width/height ([GH 7180](https://github.com/pandas-dev/pandas/issues/7180)).'
  id: totrans-350
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`DataFrame`终端显示中的 Bug：将 max_column/max_rows 设置为零不会触发自动调整 dfs 以适应终端宽度/高度（[GH
    7180](https://github.com/pandas-dev/pandas/issues/7180)）。
- en: Bug in OLS where running with “cluster” and “nw_lags” parameters did not work
    correctly, but also did not throw an error ([GH 5884](https://github.com/pandas-dev/pandas/issues/5884)).
  id: totrans-351
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 OLS 中出现的 Bug，当运行带有“cluster”和“nw_lags”参数时无法正确工作，但也不会抛出错误（[GH 5884](https://github.com/pandas-dev/pandas/issues/5884)）。
- en: Bug in `DataFrame.dropna` that interpreted non-existent columns in the subset
    argument as the ‘last column’ ([GH 8303](https://github.com/pandas-dev/pandas/issues/8303))
  id: totrans-352
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`DataFrame.dropna`中出现的 Bug，将子集参数中不存在的列解释为“最后一列”（[GH 8303](https://github.com/pandas-dev/pandas/issues/8303)）。
- en: Bug in `Index.intersection` on non-monotonic non-unique indexes ([GH 8362](https://github.com/pandas-dev/pandas/issues/8362)).
  id: totrans-353
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在非单调非唯一索引上的`Index.intersection`中的 Bug（[GH 8362](https://github.com/pandas-dev/pandas/issues/8362)）。
- en: Bug in masked series assignment where mismatching types would break alignment
    ([GH 8387](https://github.com/pandas-dev/pandas/issues/8387))
  id: totrans-354
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在掩码系列赋值中出现的 Bug，类型不匹配会破坏对齐性（[GH 8387](https://github.com/pandas-dev/pandas/issues/8387)）。
- en: Bug in `NDFrame.equals` gives false negatives with dtype=object ([GH 8437](https://github.com/pandas-dev/pandas/issues/8437))
  id: totrans-355
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`NDFrame.equals`中的 Bug，dtype=object 时会产生假阴性结果（[GH 8437](https://github.com/pandas-dev/pandas/issues/8437)）。
- en: Bug in assignment with indexer where type diversity would break alignment ([GH
    8258](https://github.com/pandas-dev/pandas/issues/8258))
  id: totrans-356
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在索引器赋值时出现的 Bug，当类型不一致时会破坏对齐性（[GH 8258](https://github.com/pandas-dev/pandas/issues/8258)）。
- en: Bug in `NDFrame.loc` indexing when row/column names were lost when target was
    a list/ndarray ([GH 6552](https://github.com/pandas-dev/pandas/issues/6552))
  id: totrans-357
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`NDFrame.loc`索引中的 Bug，当行/列名称在目标是列表/ndarray时丢失时（[GH 6552](https://github.com/pandas-dev/pandas/issues/6552)）。
- en: Regression in `NDFrame.loc` indexing when rows/columns were converted to Float64Index
    if target was an empty list/ndarray ([GH 7774](https://github.com/pandas-dev/pandas/issues/7774))
  id: totrans-358
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`NDFrame.loc`索引中的回归，当行/列转换为 Float64Index，如果目标是空列表/ndarray，则会出现错误（[GH 7774](https://github.com/pandas-dev/pandas/issues/7774)）。
- en: Bug in `Series` that allows it to be indexed by a `DataFrame` which has unexpected
    results. Such indexing is no longer permitted ([GH 8444](https://github.com/pandas-dev/pandas/issues/8444))
  id: totrans-359
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`Series`中的 Bug，允许通过 `DataFrame` 索引它会产生意外结果。不再允许此类索引（[GH 8444](https://github.com/pandas-dev/pandas/issues/8444)）。
- en: Bug in item assignment of a `DataFrame` with MultiIndex columns where right-hand-side
    columns were not aligned ([GH 7655](https://github.com/pandas-dev/pandas/issues/7655))
  id: totrans-360
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在具有 MultiIndex 列的`DataFrame`的项目赋值中的 Bug，右侧列不对齐（[GH 7655](https://github.com/pandas-dev/pandas/issues/7655)）。
- en: Suppress FutureWarning generated by NumPy when comparing object arrays containing
    NaN for equality ([GH 7065](https://github.com/pandas-dev/pandas/issues/7065))
  id: totrans-361
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 抑制 NumPy 生成的 FutureWarning，当比较包含 NaN 的对象数组时，用于相等性判断（[GH 7065](https://github.com/pandas-dev/pandas/issues/7065)）。
- en: 'Bug in `DataFrame.eval()` where the dtype of the `not` operator (`~`) was not
    correctly inferred as `bool`.  ## Contributors'
  id: totrans-362
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`DataFrame.eval()`中出现的 Bug，`not`运算符（`~`）的 dtype 没有正确地被推断为`bool`。## 贡献者
- en: A total of 80 people contributed patches to this release. People with a “+”
    by their names contributed a patch for the first time.
  id: totrans-363
  prefs: []
  type: TYPE_NORMAL
  zh: 总共有 80 人为这个版本贡献了补丁。名字后面带有“+”符号的人第一次为此版本贡献了补丁。
- en: Aaron Schumacher +
  id: totrans-364
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Aaron Schumacher +
- en: Adam Greenhall
  id: totrans-365
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Adam Greenhall
- en: Andy Hayden
  id: totrans-366
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Andy Hayden
- en: Anthony O’Brien +
  id: totrans-367
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Anthony O’Brien +
- en: Artemy Kolchinsky +
  id: totrans-368
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Artemy Kolchinsky +
- en: Ben Schiller +
  id: totrans-369
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Ben Schiller +
- en: Benedikt Sauer
  id: totrans-370
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Benedikt Sauer
- en: Benjamin Thyreau +
  id: totrans-371
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Benjamin Thyreau +
- en: BorisVerk +
  id: totrans-372
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: BorisVerk +
- en: Chris Reynolds +
  id: totrans-373
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Chris Reynolds +
- en: Chris Stoafer +
  id: totrans-374
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Chris Stoafer +
- en: DSM
  id: totrans-375
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: DSM
- en: Dav Clark +
  id: totrans-376
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Dav Clark +
- en: FragLegs +
  id: totrans-377
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: FragLegs +
- en: German Gomez-Herrero +
  id: totrans-378
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: German Gomez-Herrero +
- en: Hsiaoming Yang +
  id: totrans-379
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Hsiaoming Yang +
- en: Huan Li +
  id: totrans-380
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Huan Li +
- en: Hyungtae Kim +
  id: totrans-381
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Hyungtae Kim +
- en: Isaac Slavitt +
  id: totrans-382
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Isaac Slavitt +
- en: Jacob Schaer
  id: totrans-383
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Jacob Schaer
- en: Jacob Wasserman +
  id: totrans-384
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Jacob Wasserman +
- en: Jan Schulz
  id: totrans-385
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Jan Schulz
- en: Jeff Reback
  id: totrans-386
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Jeff Reback
- en: Jeff Tratner
  id: totrans-387
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Jeff Tratner
- en: Jesse Farnham +
  id: totrans-388
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Jesse Farnham +
- en: Joe Bradish +
  id: totrans-389
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Joe Bradish +
- en: Joerg Rittinger +
  id: totrans-390
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Joerg Rittinger +
- en: John W. O’Brien
  id: totrans-391
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: John W. O’Brien
- en: Joris Van den Bossche
  id: totrans-392
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Joris Van den Bossche
- en: Kevin Sheppard
  id: totrans-393
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Kevin Sheppard
- en: Kyle Meyer
  id: totrans-394
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Kyle Meyer
- en: Max Chang +
  id: totrans-395
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Max Chang +
- en: Michael Mueller
  id: totrans-396
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Michael Mueller
- en: Michael W Schatzow +
  id: totrans-397
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Michael W Schatzow +
- en: Mike Kelly
  id: totrans-398
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Mike Kelly
- en: Mortada Mehyar
  id: totrans-399
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Mortada Mehyar
- en: Nathan Sanders +
  id: totrans-400
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Nathan Sanders +
- en: Nathan Typanski +
  id: totrans-401
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Nathan Typanski +
- en: Paul Masurel +
  id: totrans-402
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Paul Masurel +
- en: Phillip Cloud
  id: totrans-403
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Phillip Cloud
- en: Pietro Battiston
  id: totrans-404
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Pietro Battiston
- en: RenzoBertocchi +
  id: totrans-405
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: RenzoBertocchi +
- en: Ross Petchler +
  id: totrans-406
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Ross Petchler +
- en: Shahul Hameed +
  id: totrans-407
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Shahul Hameed +
- en: Shashank Agarwal +
  id: totrans-408
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Shashank Agarwal +
- en: Stephan Hoyer
  id: totrans-409
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Stephan Hoyer
- en: Tom Augspurger
  id: totrans-410
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Tom Augspurger
- en: TomAugspurger
  id: totrans-411
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: TomAugspurger
- en: Tony Lorenzo +
  id: totrans-412
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Tony Lorenzo +
- en: Wes Turner
  id: totrans-413
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Wes Turner
- en: Wilfred Hughes +
  id: totrans-414
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Wilfred Hughes +
- en: Yevgeniy Grechka +
  id: totrans-415
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Yevgeniy Grechka +
- en: Yoshiki Vázquez Baeza +
  id: totrans-416
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Yoshiki Vázquez Baeza +
- en: behzad nouri +
  id: totrans-417
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: behzad nouri +
- en: benjamin
  id: totrans-418
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: benjamin
- en: bjonen +
  id: totrans-419
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: bjonen +
- en: dlovell +
  id: totrans-420
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: dlovell +
- en: dsm054
  id: totrans-421
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: dsm054
- en: hunterowens +
  id: totrans-422
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: hunterowens +
- en: immerrr
  id: totrans-423
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: immerrr
- en: ischwabacher
  id: totrans-424
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ischwabacher
- en: jmorris0x0 +
  id: totrans-425
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: jmorris0x0 +
- en: jnmclarty +
  id: totrans-426
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: jnmclarty +
- en: jreback
  id: totrans-427
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: jreback
- en: klonuo +
  id: totrans-428
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: klonuo +
- en: lexual
  id: totrans-429
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: lexual
- en: mcjcode +
  id: totrans-430
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: mcjcode +
- en: mtrbean +
  id: totrans-431
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: mtrbean +
- en: onesandzeroes
  id: totrans-432
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: onesandzeroes
- en: rockg
  id: totrans-433
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: rockg
- en: seth-p
  id: totrans-434
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: seth-p
- en: sinhrks
  id: totrans-435
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: sinhrks
- en: someben +
  id: totrans-436
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: someben +
- en: stahlous +
  id: totrans-437
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: stahlous +
- en: stas-sl +
  id: totrans-438
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: stas-sl +
- en: thatneat +
  id: totrans-439
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: thatneat +
- en: tom-alcorn +
  id: totrans-440
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: tom-alcorn +
- en: unknown
  id: totrans-441
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: unknown
- en: unutbu
  id: totrans-442
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: unutbu
- en: zachcp +
  id: totrans-443
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: zachcp +
- en: New features
  id: totrans-444
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 新特性
- en: '### Categoricals in Series/DataFrame'
  id: totrans-445
  prefs: []
  type: TYPE_NORMAL
  zh: '### `Series/DataFrame` 中的分类变量'
- en: '[`Categorical`](../reference/api/pandas.Categorical.html#pandas.Categorical
    "pandas.Categorical") can now be included in `Series` and `DataFrames` and gained
    new methods to manipulate. Thanks to Jan Schulz for much of this API/implementation.
    ([GH 3943](https://github.com/pandas-dev/pandas/issues/3943), [GH 5313](https://github.com/pandas-dev/pandas/issues/5313),
    [GH 5314](https://github.com/pandas-dev/pandas/issues/5314), [GH 7444](https://github.com/pandas-dev/pandas/issues/7444),
    [GH 7839](https://github.com/pandas-dev/pandas/issues/7839), [GH 7848](https://github.com/pandas-dev/pandas/issues/7848),
    [GH 7864](https://github.com/pandas-dev/pandas/issues/7864), [GH 7914](https://github.com/pandas-dev/pandas/issues/7914),
    [GH 7768](https://github.com/pandas-dev/pandas/issues/7768), [GH 8006](https://github.com/pandas-dev/pandas/issues/8006),
    [GH 3678](https://github.com/pandas-dev/pandas/issues/3678), [GH 8075](https://github.com/pandas-dev/pandas/issues/8075),
    [GH 8076](https://github.com/pandas-dev/pandas/issues/8076), [GH 8143](https://github.com/pandas-dev/pandas/issues/8143),
    [GH 8453](https://github.com/pandas-dev/pandas/issues/8453), [GH 8518](https://github.com/pandas-dev/pandas/issues/8518)).'
  id: totrans-446
  prefs: []
  type: TYPE_NORMAL
  zh: '[`Categorical`](../reference/api/pandas.Categorical.html#pandas.Categorical
    "pandas.Categorical")现在可以包含在`Series`和`DataFrames`中，并且获得了新的操纵方法。感谢Jan Schulz为此API/实现做出的贡献。([GH
    3943](https://github.com/pandas-dev/pandas/issues/3943), [GH 5313](https://github.com/pandas-dev/pandas/issues/5313),
    [GH 5314](https://github.com/pandas-dev/pandas/issues/5314), [GH 7444](https://github.com/pandas-dev/pandas/issues/7444),
    [GH 7839](https://github.com/pandas-dev/pandas/issues/7839), [GH 7848](https://github.com/pandas-dev/pandas/issues/7848),
    [GH 7864](https://github.com/pandas-dev/pandas/issues/7864), [GH 7914](https://github.com/pandas-dev/pandas/issues/7914),
    [GH 7768](https://github.com/pandas-dev/pandas/issues/7768), [GH 8006](https://github.com/pandas-dev/pandas/issues/8006),
    [GH 3678](https://github.com/pandas-dev/pandas/issues/3678), [GH 8075](https://github.com/pandas-dev/pandas/issues/8075),
    [GH 8076](https://github.com/pandas-dev/pandas/issues/8076), [GH 8143](https://github.com/pandas-dev/pandas/issues/8143),
    [GH 8453](https://github.com/pandas-dev/pandas/issues/8453), [GH 8518](https://github.com/pandas-dev/pandas/issues/8518))。'
- en: For full docs, see the [categorical introduction](../user_guide/categorical.html#categorical)
    and the [API documentation](../reference/arrays.html#api-arrays-categorical).
  id: totrans-447
  prefs: []
  type: TYPE_NORMAL
  zh: 完整文档请参阅[分类介绍](../user_guide/categorical.html#categorical)和[API文档](../reference/arrays.html#api-arrays-categorical)。
- en: '[PRE60]'
  id: totrans-448
  prefs: []
  type: TYPE_PRE
  zh: '[PRE60]'
- en: '`pandas.core.group_agg` and `pandas.core.factor_agg` were removed. As an alternative,
    construct a dataframe and use `df.groupby(<group>).agg(<func>)`.'
  id: totrans-449
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pandas.core.group_agg`和`pandas.core.factor_agg`已被移除。作为替代，请构建一个DataFrame并使用`df.groupby(<group>).agg(<func>)`。'
- en: Supplying “codes/labels and levels” to the [`Categorical`](../reference/api/pandas.Categorical.html#pandas.Categorical
    "pandas.Categorical") constructor is not supported anymore. Supplying two arguments
    to the constructor is now interpreted as “values and levels (now called ‘categories’)”.
    Please change your code to use the [`from_codes()`](../reference/api/pandas.Categorical.from_codes.html#pandas.Categorical.from_codes
    "pandas.Categorical.from_codes") constructor.
  id: totrans-450
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 给[`Categorical`](../reference/api/pandas.Categorical.html#pandas.Categorical
    "pandas.Categorical")构造函数提供“codes/labels和levels”参数不再支持。现在将构造函数提供两个参数解释为“values和levels（现在称为‘categories’）”。请修改您的代码以使用[`from_codes()`](../reference/api/pandas.Categorical.from_codes.html#pandas.Categorical.from_codes
    "pandas.Categorical.from_codes")构造函数。
- en: The `Categorical.labels` attribute was renamed to `Categorical.codes` and is
    read only. If you want to manipulate codes, please use one of the [API methods
    on Categoricals](../reference/arrays.html#api-arrays-categorical).
  id: totrans-451
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Categorical.labels`属性已重命名为`Categorical.codes`，且为只读属性。如果您想操纵codes，请使用[Categoricals上的API方法](../reference/arrays.html#api-arrays-categorical)之一。'
- en: 'The `Categorical.levels` attribute is renamed to `Categorical.categories`.  ###
    TimedeltaIndex/scalar'
  id: totrans-452
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Categorical.levels` 属性更名为 `Categorical.categories`。### TimedeltaIndex/scalar'
- en: We introduce a new scalar type `Timedelta`, which is a subclass of `datetime.timedelta`,
    and behaves in a similar manner, but allows compatibility with `np.timedelta64`
    types as well as a host of custom representation, parsing, and attributes. This
    type is very similar to how `Timestamp` works for `datetimes`. It is a nice-API
    box for the type. See the [docs](../user_guide/timedeltas.html#timedeltas-timedeltas).
    ([GH 3009](https://github.com/pandas-dev/pandas/issues/3009), [GH 4533](https://github.com/pandas-dev/pandas/issues/4533),
    [GH 8209](https://github.com/pandas-dev/pandas/issues/8209), [GH 8187](https://github.com/pandas-dev/pandas/issues/8187),
    [GH 8190](https://github.com/pandas-dev/pandas/issues/8190), [GH 7869](https://github.com/pandas-dev/pandas/issues/7869),
    [GH 7661](https://github.com/pandas-dev/pandas/issues/7661), [GH 8345](https://github.com/pandas-dev/pandas/issues/8345),
    [GH 8471](https://github.com/pandas-dev/pandas/issues/8471))
  id: totrans-453
  prefs: []
  type: TYPE_NORMAL
  zh: 我们引入了一个新的标量类型 `Timedelta`，它是 `datetime.timedelta` 的子类，并且行为类似，但允许与 `np.timedelta64`
    类型以及大量自定义表示、解析和属性兼容。这种类型与 `Timestamp` 处理 `datetimes` 的方式非常相似。它是类型的一个美观的 API 盒。请参阅
    [文档](../user_guide/timedeltas.html#timedeltas-timedeltas)。 ([GH 3009](https://github.com/pandas-dev/pandas/issues/3009),
    [GH 4533](https://github.com/pandas-dev/pandas/issues/4533), [GH 8209](https://github.com/pandas-dev/pandas/issues/8209),
    [GH 8187](https://github.com/pandas-dev/pandas/issues/8187), [GH 8190](https://github.com/pandas-dev/pandas/issues/8190),
    [GH 7869](https://github.com/pandas-dev/pandas/issues/7869), [GH 7661](https://github.com/pandas-dev/pandas/issues/7661),
    [GH 8345](https://github.com/pandas-dev/pandas/issues/8345), [GH 8471](https://github.com/pandas-dev/pandas/issues/8471))
- en: Warning
  id: totrans-454
  prefs: []
  type: TYPE_NORMAL
  zh: 警告
- en: '`Timedelta` scalars (and `TimedeltaIndex`) component fields are *not the same*
    as the component fields on a `datetime.timedelta` object. For example, `.seconds`
    on a `datetime.timedelta` object returns the total number of seconds combined
    between `hours`, `minutes` and `seconds`. In contrast, the pandas `Timedelta`
    breaks out hours, minutes, microseconds and nanoseconds separately.'
  id: totrans-455
  prefs: []
  type: TYPE_NORMAL
  zh: '`Timedelta` 标量（和 `TimedeltaIndex`）组件字段与 `datetime.timedelta` 对象上的组件字段*不同*。例如，`datetime.timedelta`
    对象上的 `.seconds` 返回 `小时`、`分钟` 和 `秒` 之间组合的总秒数。相反，pandas 的 `Timedelta` 将小时、分钟、微秒和纳秒分开。'
- en: '[PRE61]'
  id: totrans-456
  prefs: []
  type: TYPE_PRE
  zh: '[PRE61]'
- en: '**Note**: this is no longer true starting from v0.16.0, where full compatibility
    with `datetime.timedelta` is introduced. See the [0.16.0 whatsnew entry](v0.16.0.html#whatsnew-0160-api-breaking-timedelta)'
  id: totrans-457
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意**：从 v0.16.0 开始，这不再成立，因为引入了与 `datetime.timedelta` 的完全兼容性。请参阅 [0.16.0 版本更新内容](v0.16.0.html#whatsnew-0160-api-breaking-timedelta)'
- en: Warning
  id: totrans-458
  prefs: []
  type: TYPE_NORMAL
  zh: 警告
- en: Prior to 0.15.0 `pd.to_timedelta` would return a `Series` for list-like/Series
    input, and a `np.timedelta64` for scalar input. It will now return a `TimedeltaIndex`
    for list-like input, `Series` for Series input, and `Timedelta` for scalar input.
  id: totrans-459
  prefs: []
  type: TYPE_NORMAL
  zh: 在 0.15.0 之前，对于类似列表/系列的输入，`pd.to_timedelta` 会返回一个 `Series`，对于标量输入则会返回一个 `np.timedelta64`。现在，对于类似列表的输入，它将返回一个
    `TimedeltaIndex`，对于系列输入，它将返回一个 `Series`，对于标量输入，它将返回一个 `Timedelta`。
- en: The arguments to `pd.to_timedelta` are now `(arg,unit='ns',box=True,coerce=False)`,
    previously were `(arg,box=True,unit='ns')` as these are more logical.
  id: totrans-460
  prefs: []
  type: TYPE_NORMAL
  zh: '`pd.to_timedelta` 的参数现在是 `(arg,unit=''ns'',box=True,coerce=False)`，之前是 `(arg,box=True,unit=''ns'')`，因为这样更合乎逻辑。'
- en: Construct a scalar
  id: totrans-461
  prefs: []
  type: TYPE_NORMAL
  zh: 构造一个标量
- en: '[PRE62]'
  id: totrans-462
  prefs: []
  type: TYPE_PRE
  zh: '[PRE62]'
- en: Access fields for a `Timedelta`
  id: totrans-463
  prefs: []
  type: TYPE_NORMAL
  zh: 访问 `Timedelta` 的字段
- en: '[PRE63]'
  id: totrans-464
  prefs: []
  type: TYPE_PRE
  zh: '[PRE63]'
- en: Construct a `TimedeltaIndex`
  id: totrans-465
  prefs: []
  type: TYPE_NORMAL
  zh: 构造一个 `TimedeltaIndex`
- en: '[PRE64]'
  id: totrans-466
  prefs: []
  type: TYPE_PRE
  zh: '[PRE64]'
- en: Constructing a `TimedeltaIndex` with a regular range
  id: totrans-467
  prefs: []
  type: TYPE_NORMAL
  zh: 用常规范围构造一个 `TimedeltaIndex`
- en: '[PRE65]'
  id: totrans-468
  prefs: []
  type: TYPE_PRE
  zh: '[PRE65]'
- en: '[PRE66]'
  id: totrans-469
  prefs: []
  type: TYPE_PRE
  zh: '[PRE66]'
- en: You can now use a `TimedeltaIndex` as the index of a pandas object
  id: totrans-470
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你可以将 `TimedeltaIndex` 用作 pandas 对象的索引
- en: '[PRE67]'
  id: totrans-471
  prefs: []
  type: TYPE_PRE
  zh: '[PRE67]'
- en: You can select with partial string selections
  id: totrans-472
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以用部分字符串选择进行选择
- en: '[PRE68]'
  id: totrans-473
  prefs: []
  type: TYPE_PRE
  zh: '[PRE68]'
- en: 'Finally, the combination of `TimedeltaIndex` with `DatetimeIndex` allow certain
    combination operations that are `NaT` preserving:'
  id: totrans-474
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，`TimedeltaIndex` 与 `DatetimeIndex` 的组合允许保留某些组合操作中的 `NaT`：
- en: '[PRE69]'
  id: totrans-475
  prefs: []
  type: TYPE_PRE
  zh: '[PRE69]'
- en: 'iteration of a `Series` e.g. `list(Series(...))` of `timedelta64[ns]` would
    prior to v0.15.0 return `np.timedelta64` for each element. These will now be wrapped
    in `Timedelta`.  ### Memory usage'
  id: totrans-476
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对系列进行迭代，例如 `list(Series(...))` 或 `timedelta64[ns]`，在 v0.15.0 之前，每个元素都会返回 `np.timedelta64`。现在这些将被包装在
    `Timedelta` 中。### 内存使用量
- en: Implemented methods to find memory usage of a DataFrame. See the [FAQ](../user_guide/gotchas.html#df-memory-usage)
    for more. ([GH 6852](https://github.com/pandas-dev/pandas/issues/6852)).
  id: totrans-477
  prefs: []
  type: TYPE_NORMAL
  zh: 实现了查找 DataFrame 内存使用量的方法。更多信息请参见 [FAQ](../user_guide/gotchas.html#df-memory-usage)。([GH
    6852](https://github.com/pandas-dev/pandas/issues/6852)).
- en: A new display option `display.memory_usage` (see [Options and settings](../user_guide/options.html#options))
    sets the default behavior of the `memory_usage` argument in the `df.info()` method.
    By default `display.memory_usage` is `True`.
  id: totrans-478
  prefs: []
  type: TYPE_NORMAL
  zh: 新的显示选项 `display.memory_usage`（参见 [选项和设置](../user_guide/options.html#options)）设置了
    `df.info()` 方法中 `memory_usage` 参数的默认行为。默认情况下 `display.memory_usage` 是 `True`。
- en: '[PRE70]'
  id: totrans-479
  prefs: []
  type: TYPE_PRE
  zh: '[PRE70]'
- en: Additionally [`memory_usage()`](../reference/api/pandas.DataFrame.memory_usage.html#pandas.DataFrame.memory_usage
    "pandas.DataFrame.memory_usage") is an available method for a dataframe object
    which returns the memory usage of each column.
  id: totrans-480
  prefs: []
  type: TYPE_NORMAL
  zh: 此外 [`memory_usage()`](../reference/api/pandas.DataFrame.memory_usage.html#pandas.DataFrame.memory_usage
    "pandas.DataFrame.memory_usage") 是一个可用于 dataframe 对象的方法，它返回每列的内存使用情况。
- en: '[PRE71]  ### Series.dt accessor'
  id: totrans-481
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE71]  ### Series.dt 访问器'
- en: '`Series` has gained an accessor to succinctly return datetime like properties
    for the *values* of the Series, if its a datetime/period like Series. ([GH 7207](https://github.com/pandas-dev/pandas/issues/7207))
    This will return a Series, indexed like the existing Series. See the [docs](../user_guide/basics.html#basics-dt-accessors)'
  id: totrans-482
  prefs: []
  type: TYPE_NORMAL
  zh: '`Series` 增加了一个访问器，用于简洁地返回 Series 的 *values* 的日期时间属性，如果它是日期时间/周期类型的 Series。
    ([GH 7207](https://github.com/pandas-dev/pandas/issues/7207)) 这将返回一个 Series，索引与现有的
    Series 相同。参见 [文档](../user_guide/basics.html#basics-dt-accessors)'
- en: '[PRE72]'
  id: totrans-483
  prefs: []
  type: TYPE_PRE
  zh: '[PRE72]'
- en: 'This enables nice expressions like this:'
  id: totrans-484
  prefs: []
  type: TYPE_NORMAL
  zh: 这使得以下表达式可读：
- en: '[PRE73]'
  id: totrans-485
  prefs: []
  type: TYPE_PRE
  zh: '[PRE73]'
- en: 'You can easily produce tz aware transformations:'
  id: totrans-486
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以轻松地生成带有时区信息的转换：
- en: '[PRE74]'
  id: totrans-487
  prefs: []
  type: TYPE_PRE
  zh: '[PRE74]'
- en: 'You can also chain these types of operations:'
  id: totrans-488
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以链式地执行这些类型的操作：
- en: '[PRE75]'
  id: totrans-489
  prefs: []
  type: TYPE_PRE
  zh: '[PRE75]'
- en: The `.dt` accessor works for period and timedelta dtypes.
  id: totrans-490
  prefs: []
  type: TYPE_NORMAL
  zh: '`.dt` 访问器适用于周期和时间增量 dtypes。'
- en: '[PRE76]'
  id: totrans-491
  prefs: []
  type: TYPE_PRE
  zh: '[PRE76]'
- en: '[PRE77]  ### Timezone handling improvements'
  id: totrans-492
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE77]  ### 时区处理改进'
- en: '`tz_localize(None)` for tz-aware `Timestamp` and `DatetimeIndex` now removes
    timezone holding local time, previously this resulted in `Exception` or `TypeError`
    ([GH 7812](https://github.com/pandas-dev/pandas/issues/7812))'
  id: totrans-493
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于带有时区信息的 `Timestamp` 和 `DatetimeIndex`，现在使用 `tz_localize(None)` 将移除持有本地时间的时区，之前这会导致
    `Exception` 或 `TypeError`（[GH 7812](https://github.com/pandas-dev/pandas/issues/7812)）
- en: '[PRE78]'
  id: totrans-494
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE78]'
- en: '`tz_localize` now accepts the `ambiguous` keyword which allows for passing
    an array of bools indicating whether the date belongs in DST or not, ‘NaT’ for
    setting transition times to NaT, ‘infer’ for inferring DST/non-DST, and ‘raise’
    (default) for an `AmbiguousTimeError` to be raised. See [the docs](../user_guide/timeseries.html#timeseries-timezone-ambiguous)
    for more details ([GH 7943](https://github.com/pandas-dev/pandas/issues/7943))'
  id: totrans-495
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`tz_localize` 现在接受 `ambiguous` 关键字，允许传递一个布尔数组，指示日期是否属于夏令时，‘NaT’ 用于将过渡时间设置为
    NaT，‘infer’ 用于推断夏令时/非夏令时，‘raise’（默认）用于引发 `AmbiguousTimeError`。更多详情请参见 [文档](../user_guide/timeseries.html#timeseries-timezone-ambiguous)
    ([GH 7943](https://github.com/pandas-dev/pandas/issues/7943))'
- en: '`DataFrame.tz_localize` and `DataFrame.tz_convert` now accepts an optional
    `level` argument for localizing a specific level of a MultiIndex ([GH 7846](https://github.com/pandas-dev/pandas/issues/7846))'
  id: totrans-496
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.tz_localize` 和 `DataFrame.tz_convert` 现在接受可选的 `level` 参数，用于将 MultiIndex
    的特定级别本地化（[GH 7846](https://github.com/pandas-dev/pandas/issues/7846)）'
- en: '`Timestamp.tz_localize` and `Timestamp.tz_convert` now raise `TypeError` in
    error cases, rather than `Exception` ([GH 8025](https://github.com/pandas-dev/pandas/issues/8025))'
  id: totrans-497
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Timestamp.tz_localize` 和 `Timestamp.tz_convert` 现在在错误情况下引发 `TypeError`，而不是
    `Exception`（[GH 8025](https://github.com/pandas-dev/pandas/issues/8025)）'
- en: a timeseries/index localized to UTC when inserted into a Series/DataFrame will
    preserve the UTC timezone (rather than being a naive `datetime64[ns]`) as `object`
    dtype ([GH 8411](https://github.com/pandas-dev/pandas/issues/8411))
  id: totrans-498
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 插入 Series/DataFrame 中的时序/索引在本地化为 UTC 时将保留 UTC 时区（而不是作为无时区的 `datetime64[ns]`）作为
    `object` dtype 显示 ([GH 8411](https://github.com/pandas-dev/pandas/issues/8411))
- en: '`Timestamp.__repr__` displays `dateutil.tz.tzoffset` info ([GH 7907](https://github.com/pandas-dev/pandas/issues/7907))  ###
    Rolling/expanding moments improvements'
  id: totrans-499
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Timestamp.__repr__` 显示 `dateutil.tz.tzoffset` 信息 ([GH 7907](https://github.com/pandas-dev/pandas/issues/7907))  ###
    滚动/扩展矩阵改进'
- en: '`rolling_min()`, `rolling_max()`, `rolling_cov()`, and `rolling_corr()` now
    return objects with all `NaN` when `len(arg) < min_periods <= window` rather than
    raising. (This makes all rolling functions consistent in this behavior). ([GH
    7766](https://github.com/pandas-dev/pandas/issues/7766))'
  id: totrans-500
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`rolling_min()`、`rolling_max()`、`rolling_cov()` 和 `rolling_corr()` 现在在 `len(arg)
    < min_periods <= window` 时返回具有全部 `NaN` 的对象，而不是引发异常。（这使得所有滚动函数在这个行为上保持一致）。([GH
    7766](https://github.com/pandas-dev/pandas/issues/7766))'
- en: Prior to 0.15.0
  id: totrans-501
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在 0.15.0 之前
- en: '[PRE79]'
  id: totrans-502
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE79]'
- en: '[PRE80]'
  id: totrans-503
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE80]'
- en: New behavior
  id: totrans-504
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 新行为
- en: '[PRE81]'
  id: totrans-505
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE81]'
- en: '`rolling_max()`, `rolling_min()`, `rolling_sum()`, `rolling_mean()`, `rolling_median()`,
    `rolling_std()`, `rolling_var()`, `rolling_skew()`, `rolling_kurt()`, `rolling_quantile()`,
    `rolling_cov()`, `rolling_corr()`, `rolling_corr_pairwise()`, `rolling_window()`,
    and `rolling_apply()` with `center=True` previously would return a result of the
    same structure as the input `arg` with `NaN` in the final `(window-1)/2` entries.'
  id: totrans-506
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`rolling_max()`、`rolling_min()`、`rolling_sum()`、`rolling_mean()`、`rolling_median()`、`rolling_std()`、`rolling_var()`、`rolling_skew()`、`rolling_kurt()`、`rolling_quantile()`、`rolling_cov()`、`rolling_corr()`、`rolling_corr_pairwise()`、`rolling_window()`
    和 `rolling_apply()` 在之前使用 `center=True` 时，返回的结果与输入参数 `arg` 结构相同，最后 `(window-1)/2`
    个条目为 `NaN`。'
- en: Now the final `(window-1)/2` entries of the result are calculated as if the
    input `arg` were followed by `(window-1)/2` `NaN` values (or with shrinking windows,
    in the case of `rolling_apply()`). ([GH 7925](https://github.com/pandas-dev/pandas/issues/7925),
    [GH 8269](https://github.com/pandas-dev/pandas/issues/8269))
  id: totrans-507
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 现在，结果的最后 `(window-1)/2` 个条目是按照输入参数 `arg` 后跟 `(window-1)/2` 个 `NaN` 值计算的（或者在
    `rolling_apply()` 的情况下是在窗口收缩时计算的）。([GH 7925](https://github.com/pandas-dev/pandas/issues/7925),
    [GH 8269](https://github.com/pandas-dev/pandas/issues/8269))
- en: 'Prior behavior (note final value is `NaN`):'
  id: totrans-508
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '先前的行为（注意最终值为 `NaN`）:'
- en: '[PRE82]'
  id: totrans-509
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE82]'
- en: 'New behavior (note final value is `5 = sum([2, 3, NaN])`):'
  id: totrans-510
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 新行为（注意最终值为 `5 = sum([2, 3, NaN])`）：
- en: '[PRE83]'
  id: totrans-511
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE83]'
- en: '`rolling_window()` now normalizes the weights properly in rolling mean mode
    (mean=True) so that the calculated weighted means (e.g. ‘triang’, ‘gaussian’)
    are distributed about the same means as those calculated without weighting (i.e.
    ‘boxcar’). See [the note on normalization](../user_guide/window.html#window-weighted)
    for further details. ([GH 7618](https://github.com/pandas-dev/pandas/issues/7618))'
  id: totrans-512
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`rolling_window()` 现在在滚动均值模式（mean=True）下正确归一化权重，使得计算的加权均值（例如 ''triang''、''gaussian''）分布在与不加权计算（即
    ''boxcar''）的均值相同的位置。有关归一化的说明，请参阅 [归一化注释](../user_guide/window.html#window-weighted)。([GH
    7618](https://github.com/pandas-dev/pandas/issues/7618))'
- en: '[PRE84]'
  id: totrans-513
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE84]'
- en: 'Behavior prior to 0.15.0:'
  id: totrans-514
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 0.15.0 之前的行为：
- en: '[PRE85]'
  id: totrans-515
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE85]'
- en: New behavior
  id: totrans-516
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 新行为
- en: '[PRE86]'
  id: totrans-517
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE86]'
- en: Removed `center` argument from all `expanding_` functions (see [list](../reference/window.html#api-functions-expanding)),
    as the results produced when `center=True` did not make much sense. ([GH 7925](https://github.com/pandas-dev/pandas/issues/7925))
  id: totrans-518
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从所有 `expanding_` 函数中删除了 `center` 参数（参见 [list](../reference/window.html#api-functions-expanding)），因为当
    `center=True` 时产生的结果没有太多意义。([GH 7925](https://github.com/pandas-dev/pandas/issues/7925))
- en: Added optional `ddof` argument to `expanding_cov()` and `rolling_cov()`. The
    default value of `1` is backwards-compatible. ([GH 8279](https://github.com/pandas-dev/pandas/issues/8279))
  id: totrans-519
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `expanding_cov()` 和 `rolling_cov()` 中添加了可选的 `ddof` 参数。默认值为 `1` 是向后兼容的。([GH
    8279](https://github.com/pandas-dev/pandas/issues/8279))
- en: Documented the `ddof` argument to `expanding_var()`, `expanding_std()`, `rolling_var()`,
    and `rolling_std()`. These functions’ support of a `ddof` argument (with a default
    value of `1`) was previously undocumented. ([GH 8064](https://github.com/pandas-dev/pandas/issues/8064))
  id: totrans-520
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将 `ddof` 参数文档化到 `expanding_var()`、`expanding_std()`、`rolling_var()` 和 `rolling_std()`。这些函数对
    `ddof` 参数的支持（默认值为 `1`）之前是未文档化的。([GH 8064](https://github.com/pandas-dev/pandas/issues/8064))
- en: '`ewma()`, `ewmstd()`, `ewmvol()`, `ewmvar()`, `ewmcov()`, and `ewmcorr()` now
    interpret `min_periods` in the same manner that the `rolling_*()` and `expanding_*()`
    functions do: a given result entry will be `NaN` if the (expanding, in this case)
    window does not contain at least `min_periods` values. The previous behavior was
    to set to `NaN` the `min_periods` entries starting with the first non- `NaN` value.
    ([GH 7977](https://github.com/pandas-dev/pandas/issues/7977))'
  id: totrans-521
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ewma()`、`ewmstd()`、`ewmvol()`、`ewmvar()`、`ewmcov()` 和 `ewmcorr()` 现在以与 `rolling_*()`
    和 `expanding_*()` 函数相同的方式解释 `min_periods`：如果（在此情况下是扩展的）窗口不包含至少 `min_periods` 个值，则给定的结果条目将为
    `NaN`。先前的行为是从第一个非 `NaN` 值开始设置 `min_periods` 条目为 `NaN`。([GH 7977](https://github.com/pandas-dev/pandas/issues/7977))'
- en: 'Prior behavior (note values start at index `2`, which is `min_periods` after
    index `0` (the index of the first non-empty value)):'
  id: totrans-522
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 之前的行为（注意值从索引 `2` 开始，即在索引 `0`（第一个非空值的索引）之后的 `min_periods` 个位置）：
- en: '[PRE87]'
  id: totrans-523
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE87]'
- en: '[PRE88]'
  id: totrans-524
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE88]'
- en: 'New behavior (note values start at index `4`, the location of the 2nd (since
    `min_periods=2`) non-empty value):'
  id: totrans-525
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 新行为（注意值从索引 `4` 开始，即第二个（由于 `min_periods=2`）非空值的位置）：
- en: '[PRE89]'
  id: totrans-526
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE89]'
- en: '`ewmstd()`, `ewmvol()`, `ewmvar()`, `ewmcov()`, and `ewmcorr()` now have an
    optional `adjust` argument, just like `ewma()` does, affecting how the weights
    are calculated. The default value of `adjust` is `True`, which is backwards-compatible.
    See [Exponentially weighted moment functions](../user_guide/window.html#window-exponentially-weighted)
    for details. ([GH 7911](https://github.com/pandas-dev/pandas/issues/7911))'
  id: totrans-527
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ewmstd()`、`ewmvol()`、`ewmvar()`、`ewmcov()` 和 `ewmcorr()` 现在都有一个可选的 `adjust`
    参数，就像 `ewma()` 一样，影响权重的计算方式。`adjust` 的默认值是 `True`，与之前兼容。详细信息请参见[指数加权矩函数](../user_guide/window.html#window-exponentially-weighted)。([GH
    7911](https://github.com/pandas-dev/pandas/issues/7911))'
- en: '`ewma()`, `ewmstd()`, `ewmvol()`, `ewmvar()`, `ewmcov()`, and `ewmcorr()` now
    have an optional `ignore_na` argument. When `ignore_na=False` (the default), missing
    values are taken into account in the weights calculation. When `ignore_na=True`
    (which reproduces the pre-0.15.0 behavior), missing values are ignored in the
    weights calculation. ([GH 7543](https://github.com/pandas-dev/pandas/issues/7543))'
  id: totrans-528
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ewma()`、`ewmstd()`、`ewmvol()`、`ewmvar()`、`ewmcov()` 和 `ewmcorr()` 现在都有一个可选的
    `ignore_na` 参数。当 `ignore_na=False`（默认情况下）时，在权重计算中会考虑缺失值。当 `ignore_na=True`（复制了
    0.15.0 版本之前的行为）时，在权重计算中会忽略缺失值。([GH 7543](https://github.com/pandas-dev/pandas/issues/7543))'
- en: '[PRE90]'
  id: totrans-529
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE90]'
- en: Warning
  id: totrans-530
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 警告
- en: By default (`ignore_na=False`) the `ewm*()` functions’ weights calculation in
    the presence of missing values is different than in pre-0.15.0 versions. To reproduce
    the pre-0.15.0 calculation of weights in the presence of missing values one must
    specify explicitly `ignore_na=True`.
  id: totrans-531
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 默认情况下（`ignore_na=False`），在存在缺失值时，`ewm*()` 函数的权重计算与 0.15.0 版本之前的版本不同。要复制在存在缺失值时的权重计算，必须明确指定
    `ignore_na=True`。
- en: Bug in `expanding_cov()`, `expanding_corr()`, `rolling_cov()`, `rolling_cor()`,
    `ewmcov()`, and `ewmcorr()` returning results with columns sorted by name and
    producing an error for non-unique columns; now handles non-unique columns and
    returns columns in original order (except for the case of two DataFrames with
    `pairwise=False`, where behavior is unchanged) ([GH 7542](https://github.com/pandas-dev/pandas/issues/7542))
  id: totrans-532
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`expanding_cov()`、`expanding_corr()`、`rolling_cov()`、`rolling_cor()`、`ewmcov()`
    和 `ewmcorr()` 中的 Bug 返回按名称排序的列，并对非唯一列产生错误；现在处理非唯一列并按原始顺序返回列（除了两个 `pairwise=False`
    的 DataFrame 的情况，行为不变） ([GH 7542](https://github.com/pandas-dev/pandas/issues/7542))'
- en: Bug in `rolling_count()` and `expanding_*()` functions unnecessarily producing
    error message for zero-length data ([GH 8056](https://github.com/pandas-dev/pandas/issues/8056))
  id: totrans-533
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`rolling_count()` 和 `expanding_*()` 函数中的 Bug 不必要地为零长度数据产生错误消息 ([GH 8056](https://github.com/pandas-dev/pandas/issues/8056))'
- en: Bug in `rolling_apply()` and `expanding_apply()` interpreting `min_periods=0`
    as `min_periods=1` ([GH 8080](https://github.com/pandas-dev/pandas/issues/8080))
  id: totrans-534
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`rolling_apply()` 和 `expanding_apply()` 中的 Bug 将 `min_periods=0` 解释为 `min_periods=1`
    ([GH 8080](https://github.com/pandas-dev/pandas/issues/8080))'
- en: Bug in `expanding_std()` and `expanding_var()` for a single value producing
    a confusing error message ([GH 7900](https://github.com/pandas-dev/pandas/issues/7900))
  id: totrans-535
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`expanding_std()` 和 `expanding_var()` 中的 Bug 对于单个值产生令人困惑的错误消息 ([GH 7900](https://github.com/pandas-dev/pandas/issues/7900))'
- en: Bug in `rolling_std()` and `rolling_var()` for a single value producing `0`
    rather than `NaN` ([GH 7900](https://github.com/pandas-dev/pandas/issues/7900))
  id: totrans-536
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`rolling_std()` 和 `rolling_var()` 中的 Bug 对于单个值产生 `0` 而不是 `NaN` ([GH 7900](https://github.com/pandas-dev/pandas/issues/7900))'
- en: Bug in `ewmstd()`, `ewmvol()`, `ewmvar()`, and `ewmcov()` calculation of de-biasing
    factors when `bias=False` (the default). Previously an incorrect constant factor
    was used, based on `adjust=True`, `ignore_na=True`, and an infinite number of
    observations. Now a different factor is used for each entry, based on the actual
    weights (analogous to the usual `N/(N-1)` factor). In particular, for a single
    point a value of `NaN` is returned when `bias=False`, whereas previously a value
    of (approximately) `0` was returned.
  id: totrans-537
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当 `bias=False`（默认情况下）时，`ewmstd()`、`ewmvol()`、`ewmvar()` 和 `ewmcov()` 中的 Bug
    在计算去偏因子时。先前使用了一个基于 `adjust=True`、`ignore_na=True` 和无限观测次数的不正确的常数因子。现在为每个条目使用不同的因子，基于实际权重（类似于通常的
    `N/(N-1)` 因子）。特别地，对于单个点，当 `bias=False` 时返回 `NaN` 值，而以前返回 (大约) `0` 的值。
- en: 'For example, consider the following pre-0.15.0 results for `ewmvar(..., bias=False)`,
    and the corresponding debiasing factors:'
  id: totrans-538
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 例如，考虑以下 `ewmvar(..., bias=False)` 的 0.15.0 版本之前的结果，以及相应的去偏因子：
- en: '[PRE91]'
  id: totrans-539
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE91]'
- en: '[PRE92]'
  id: totrans-540
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE92]'
- en: 'Note that entry `0` is approximately 0, and the debiasing factors are a constant
    1.25. By comparison, the following 0.15.0 results have a `NaN` for entry `0`,
    and the debiasing factors are decreasing (towards 1.25):'
  id: totrans-541
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意，条目`0`大约为0，而去偏差因子是一个常数1.25。相比之下，以下0.15.0版本的结果中，条目`0`为`NaN`，并且去偏差因子正在减小（朝向1.25）：
- en: '[PRE93]'
  id: totrans-542
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE93]'
- en: 'See [Exponentially weighted moment functions](../user_guide/window.html#window-exponentially-weighted)
    for details. ([GH 7912](https://github.com/pandas-dev/pandas/issues/7912))  ###
    Improvements in the SQL IO module'
  id: totrans-543
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '详情请参阅[指数加权时刻函数](../user_guide/window.html#window-exponentially-weighted)（[GH
    7912](https://github.com/pandas-dev/pandas/issues/7912)） ### SQL IO模块的改进'
- en: Added support for a `chunksize` parameter to `to_sql` function. This allows
    DataFrame to be written in chunks and avoid packet-size overflow errors ([GH 8062](https://github.com/pandas-dev/pandas/issues/8062)).
  id: totrans-544
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对`to_sql`函数的`chunksize`参数的支持。这允许DataFrame分块写入，避免包大小溢出错误（[GH 8062](https://github.com/pandas-dev/pandas/issues/8062)）。
- en: Added support for a `chunksize` parameter to `read_sql` function. Specifying
    this argument will return an iterator through chunks of the query result ([GH
    2908](https://github.com/pandas-dev/pandas/issues/2908)).
  id: totrans-545
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对`read_sql`函数的`chunksize`参数的支持。指定此参数将返回查询结果的迭代器（[GH 2908](https://github.com/pandas-dev/pandas/issues/2908)）。
- en: Added support for writing `datetime.date` and `datetime.time` object columns
    with `to_sql` ([GH 6932](https://github.com/pandas-dev/pandas/issues/6932)).
  id: totrans-546
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了使用`to_sql`写入`datetime.date`和`datetime.time`对象列的支持（[GH 6932](https://github.com/pandas-dev/pandas/issues/6932)）。
- en: 'Added support for specifying a `schema` to read from/write to with `read_sql_table`
    and `to_sql` ([GH 7441](https://github.com/pandas-dev/pandas/issues/7441), [GH
    7952](https://github.com/pandas-dev/pandas/issues/7952)). For example:'
  id: totrans-547
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了使用`read_sql_table`和`to_sql`指定`schema`读取/写入的支持（[GH 7441](https://github.com/pandas-dev/pandas/issues/7441)，[GH
    7952](https://github.com/pandas-dev/pandas/issues/7952)）。例如：
- en: '[PRE94]'
  id: totrans-548
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE94]'
- en: Added support for writing `NaN` values with `to_sql` ([GH 2754](https://github.com/pandas-dev/pandas/issues/2754)).
  id: totrans-549
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了使用`to_sql`写入`NaN`值的支持（[GH 2754](https://github.com/pandas-dev/pandas/issues/2754)）。
- en: 'Added support for writing datetime64 columns with `to_sql` for all database
    flavors ([GH 7103](https://github.com/pandas-dev/pandas/issues/7103)).  ### Categoricals
    in Series/DataFrame'
  id: totrans-550
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '增加了对所有数据库类型使用`to_sql`写入datetime64列的支持（[GH 7103](https://github.com/pandas-dev/pandas/issues/7103)）
    ### Series/DataFrame中的分类'
- en: '[`Categorical`](../reference/api/pandas.Categorical.html#pandas.Categorical
    "pandas.Categorical") can now be included in `Series` and `DataFrames` and gained
    new methods to manipulate. Thanks to Jan Schulz for much of this API/implementation.
    ([GH 3943](https://github.com/pandas-dev/pandas/issues/3943), [GH 5313](https://github.com/pandas-dev/pandas/issues/5313),
    [GH 5314](https://github.com/pandas-dev/pandas/issues/5314), [GH 7444](https://github.com/pandas-dev/pandas/issues/7444),
    [GH 7839](https://github.com/pandas-dev/pandas/issues/7839), [GH 7848](https://github.com/pandas-dev/pandas/issues/7848),
    [GH 7864](https://github.com/pandas-dev/pandas/issues/7864), [GH 7914](https://github.com/pandas-dev/pandas/issues/7914),
    [GH 7768](https://github.com/pandas-dev/pandas/issues/7768), [GH 8006](https://github.com/pandas-dev/pandas/issues/8006),
    [GH 3678](https://github.com/pandas-dev/pandas/issues/3678), [GH 8075](https://github.com/pandas-dev/pandas/issues/8075),
    [GH 8076](https://github.com/pandas-dev/pandas/issues/8076), [GH 8143](https://github.com/pandas-dev/pandas/issues/8143),
    [GH 8453](https://github.com/pandas-dev/pandas/issues/8453), [GH 8518](https://github.com/pandas-dev/pandas/issues/8518)).'
  id: totrans-551
  prefs: []
  type: TYPE_NORMAL
  zh: '[`Categorical`](../reference/api/pandas.Categorical.html#pandas.Categorical
    "pandas.Categorical")现在可以包含在`Series`和`DataFrame`中，并获得了新的操纵方法。感谢Jan Schulz为此API/实现的贡献。
    （[GH 3943](https://github.com/pandas-dev/pandas/issues/3943)，[GH 5313](https://github.com/pandas-dev/pandas/issues/5313)，[GH
    5314](https://github.com/pandas-dev/pandas/issues/5314)，[GH 7444](https://github.com/pandas-dev/pandas/issues/7444)，[GH
    7839](https://github.com/pandas-dev/pandas/issues/7839)，[GH 7848](https://github.com/pandas-dev/pandas/issues/7848)，[GH
    7864](https://github.com/pandas-dev/pandas/issues/7864)，[GH 7914](https://github.com/pandas-dev/pandas/issues/7914)，[GH
    7768](https://github.com/pandas-dev/pandas/issues/7768)，[GH 8006](https://github.com/pandas-dev/pandas/issues/8006)，[GH
    3678](https://github.com/pandas-dev/pandas/issues/3678)，[GH 8075](https://github.com/pandas-dev/pandas/issues/8075)，[GH
    8076](https://github.com/pandas-dev/pandas/issues/8076)，[GH 8143](https://github.com/pandas-dev/pandas/issues/8143)，[GH
    8453](https://github.com/pandas-dev/pandas/issues/8453)，[GH 8518](https://github.com/pandas-dev/pandas/issues/8518)）。'
- en: For full docs, see the [categorical introduction](../user_guide/categorical.html#categorical)
    and the [API documentation](../reference/arrays.html#api-arrays-categorical).
  id: totrans-552
  prefs: []
  type: TYPE_NORMAL
  zh: 有关完整文档，请参阅[分类介绍](../user_guide/categorical.html#categorical)和[API文档](../reference/arrays.html#api-arrays-categorical)。
- en: '[PRE95]'
  id: totrans-553
  prefs: []
  type: TYPE_PRE
  zh: '[PRE95]'
- en: '`pandas.core.group_agg` and `pandas.core.factor_agg` were removed. As an alternative,
    construct a dataframe and use `df.groupby(<group>).agg(<func>)`.'
  id: totrans-554
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pandas.core.group_agg`和`pandas.core.factor_agg`已被移除。作为替代，构建一个数据框并使用`df.groupby(<group>).agg(<func>)`。'
- en: Supplying “codes/labels and levels” to the [`Categorical`](../reference/api/pandas.Categorical.html#pandas.Categorical
    "pandas.Categorical") constructor is not supported anymore. Supplying two arguments
    to the constructor is now interpreted as “values and levels (now called ‘categories’)”.
    Please change your code to use the [`from_codes()`](../reference/api/pandas.Categorical.from_codes.html#pandas.Categorical.from_codes
    "pandas.Categorical.from_codes") constructor.
  id: totrans-555
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不再支持向[`Categorical`](../reference/api/pandas.Categorical.html#pandas.Categorical
    "pandas.Categorical")构造函数提供“codes/labels和levels”。现在向构造函数提供两个参数被解释为“values和levels（现在称为‘categories’）”。请修改您的代码以使用[`from_codes()`](../reference/api/pandas.Categorical.from_codes.html#pandas.Categorical.from_codes
    "pandas.Categorical.from_codes")构造函数。
- en: The `Categorical.labels` attribute was renamed to `Categorical.codes` and is
    read only. If you want to manipulate codes, please use one of the [API methods
    on Categoricals](../reference/arrays.html#api-arrays-categorical).
  id: totrans-556
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Categorical.labels`属性已更名为`Categorical.codes`，且为只读。如果要操作codes，请使用[Categoricals上的API方法](../reference/arrays.html#api-arrays-categorical)之一。'
- en: The `Categorical.levels` attribute is renamed to `Categorical.categories`.
  id: totrans-557
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Categorical.levels`属性已更名为`Categorical.categories`。'
- en: '### TimedeltaIndex/scalar'
  id: totrans-558
  prefs: []
  type: TYPE_NORMAL
  zh: '### TimedeltaIndex/scalar'
- en: We introduce a new scalar type `Timedelta`, which is a subclass of `datetime.timedelta`,
    and behaves in a similar manner, but allows compatibility with `np.timedelta64`
    types as well as a host of custom representation, parsing, and attributes. This
    type is very similar to how `Timestamp` works for `datetimes`. It is a nice-API
    box for the type. See the [docs](../user_guide/timedeltas.html#timedeltas-timedeltas).
    ([GH 3009](https://github.com/pandas-dev/pandas/issues/3009), [GH 4533](https://github.com/pandas-dev/pandas/issues/4533),
    [GH 8209](https://github.com/pandas-dev/pandas/issues/8209), [GH 8187](https://github.com/pandas-dev/pandas/issues/8187),
    [GH 8190](https://github.com/pandas-dev/pandas/issues/8190), [GH 7869](https://github.com/pandas-dev/pandas/issues/7869),
    [GH 7661](https://github.com/pandas-dev/pandas/issues/7661), [GH 8345](https://github.com/pandas-dev/pandas/issues/8345),
    [GH 8471](https://github.com/pandas-dev/pandas/issues/8471))
  id: totrans-559
  prefs: []
  type: TYPE_NORMAL
  zh: 我们引入了一个新的标量类型`Timedelta`，它是`datetime.timedelta`的子类，并且行为类似，但允许与`np.timedelta64`类型兼容，以及一系列自定义表示、解析和属性。这种类型与`datetimes`中`Timestamp`的工作方式非常相似。它是该类型的一个很好的API盒子。请查看[文档](../user_guide/timedeltas.html#timedeltas-timedeltas)。([GH
    3009](https://github.com/pandas-dev/pandas/issues/3009), [GH 4533](https://github.com/pandas-dev/pandas/issues/4533),
    [GH 8209](https://github.com/pandas-dev/pandas/issues/8209), [GH 8187](https://github.com/pandas-dev/pandas/issues/8187),
    [GH 8190](https://github.com/pandas-dev/pandas/issues/8190), [GH 7869](https://github.com/pandas-dev/pandas/issues/7869),
    [GH 7661](https://github.com/pandas-dev/pandas/issues/7661), [GH 8345](https://github.com/pandas-dev/pandas/issues/8345),
    [GH 8471](https://github.com/pandas-dev/pandas/issues/8471))
- en: Warning
  id: totrans-560
  prefs: []
  type: TYPE_NORMAL
  zh: 警告
- en: '`Timedelta` scalars (and `TimedeltaIndex`) component fields are *not the same*
    as the component fields on a `datetime.timedelta` object. For example, `.seconds`
    on a `datetime.timedelta` object returns the total number of seconds combined
    between `hours`, `minutes` and `seconds`. In contrast, the pandas `Timedelta`
    breaks out hours, minutes, microseconds and nanoseconds separately.'
  id: totrans-561
  prefs: []
  type: TYPE_NORMAL
  zh: '`Timedelta`标量（以及`TimedeltaIndex`）的组件字段与`datetime.timedelta`对象上的组件字段*不同*。例如，`datetime.timedelta`对象上的`.seconds`返回`hours`、`minutes`和`seconds`之间的总秒数。相比之下，pandas的`Timedelta`将小时、分钟、微秒和纳秒分开。'
- en: '[PRE96]'
  id: totrans-562
  prefs: []
  type: TYPE_PRE
  zh: '[PRE96]'
- en: '**Note**: this is no longer true starting from v0.16.0, where full compatibility
    with `datetime.timedelta` is introduced. See the [0.16.0 whatsnew entry](v0.16.0.html#whatsnew-0160-api-breaking-timedelta)'
  id: totrans-563
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意**：从v0.16.0开始，这不再成立，引入了与`datetime.timedelta`的完全兼容性。请查看[0.16.0版本更新条目](v0.16.0.html#whatsnew-0160-api-breaking-timedelta)'
- en: Warning
  id: totrans-564
  prefs: []
  type: TYPE_NORMAL
  zh: 警告
- en: Prior to 0.15.0 `pd.to_timedelta` would return a `Series` for list-like/Series
    input, and a `np.timedelta64` for scalar input. It will now return a `TimedeltaIndex`
    for list-like input, `Series` for Series input, and `Timedelta` for scalar input.
  id: totrans-565
  prefs: []
  type: TYPE_NORMAL
  zh: 在0.15.0之前，`pd.to_timedelta`对于类似列表/系列的输入会返���一个`Series`，对于标量输入会返回一个`np.timedelta64`。现在，对于类似列表的输入，将返回一个`TimedeltaIndex`，对于系列输入，将返回一个`Series`，对于标量输入，将返回一个`Timedelta`。
- en: The arguments to `pd.to_timedelta` are now `(arg,unit='ns',box=True,coerce=False)`,
    previously were `(arg,box=True,unit='ns')` as these are more logical.
  id: totrans-566
  prefs: []
  type: TYPE_NORMAL
  zh: '`pd.to_timedelta`的参数现在是`(arg,unit=''ns'',box=True,coerce=False)`，之前是`(arg,box=True,unit=''ns'')`，因为这样更合乎逻辑。'
- en: Construct a scalar
  id: totrans-567
  prefs: []
  type: TYPE_NORMAL
  zh: 构建一个标量
- en: '[PRE97]'
  id: totrans-568
  prefs: []
  type: TYPE_PRE
  zh: '[PRE97]'
- en: Access fields for a `Timedelta`
  id: totrans-569
  prefs: []
  type: TYPE_NORMAL
  zh: 访问`Timedelta`的字段
- en: '[PRE98]'
  id: totrans-570
  prefs: []
  type: TYPE_PRE
  zh: '[PRE98]'
- en: Construct a `TimedeltaIndex`
  id: totrans-571
  prefs: []
  type: TYPE_NORMAL
  zh: 构建一个`TimedeltaIndex`
- en: '[PRE99]'
  id: totrans-572
  prefs: []
  type: TYPE_PRE
  zh: '[PRE99]'
- en: Constructing a `TimedeltaIndex` with a regular range
  id: totrans-573
  prefs: []
  type: TYPE_NORMAL
  zh: 使用常规范围构建`TimedeltaIndex`。
- en: '[PRE100]'
  id: totrans-574
  prefs: []
  type: TYPE_PRE
  zh: '[PRE100]'
- en: '[PRE101]'
  id: totrans-575
  prefs: []
  type: TYPE_PRE
  zh: '[PRE101]'
- en: You can now use a `TimedeltaIndex` as the index of a pandas object
  id: totrans-576
  prefs: []
  type: TYPE_NORMAL
  zh: 现在可以使用`TimedeltaIndex`作为pandas对象的索引。
- en: '[PRE102]'
  id: totrans-577
  prefs: []
  type: TYPE_PRE
  zh: '[PRE102]'
- en: You can select with partial string selections
  id: totrans-578
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以使用部分字符串选择。
- en: '[PRE103]'
  id: totrans-579
  prefs: []
  type: TYPE_PRE
  zh: '[PRE103]'
- en: 'Finally, the combination of `TimedeltaIndex` with `DatetimeIndex` allow certain
    combination operations that are `NaT` preserving:'
  id: totrans-580
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，`TimedeltaIndex`与`DatetimeIndex`的组合允许进行某些保留`NaT`的组合操作：
- en: '[PRE104]'
  id: totrans-581
  prefs: []
  type: TYPE_PRE
  zh: '[PRE104]'
- en: iteration of a `Series` e.g. `list(Series(...))` of `timedelta64[ns]` would
    prior to v0.15.0 return `np.timedelta64` for each element. These will now be wrapped
    in `Timedelta`.
  id: totrans-582
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对`Series`进行迭代，例如`list(Series(...))`或`timedelta64[ns]`，在 v0.15.0 之前返回的是每个元素的`np.timedelta64`。现在将会包装在`Timedelta`中。
- en: '### Memory usage'
  id: totrans-583
  prefs: []
  type: TYPE_NORMAL
  zh: '### 内存使用'
- en: Implemented methods to find memory usage of a DataFrame. See the [FAQ](../user_guide/gotchas.html#df-memory-usage)
    for more. ([GH 6852](https://github.com/pandas-dev/pandas/issues/6852)).
  id: totrans-584
  prefs: []
  type: TYPE_NORMAL
  zh: 实现了查找DataFrame内存使用量的方法。更多信息请参阅[FAQ](../user_guide/gotchas.html#df-memory-usage)。（[GH
    6852](https://github.com/pandas-dev/pandas/issues/6852)）
- en: A new display option `display.memory_usage` (see [Options and settings](../user_guide/options.html#options))
    sets the default behavior of the `memory_usage` argument in the `df.info()` method.
    By default `display.memory_usage` is `True`.
  id: totrans-585
  prefs: []
  type: TYPE_NORMAL
  zh: 一个新的显示选项`display.memory_usage`（请参阅[选项和设置](../user_guide/options.html#options)）设置了`df.info()`方法中`memory_usage`参数的默认行为。默认情况下，`display.memory_usage`是`True`。
- en: '[PRE105]'
  id: totrans-586
  prefs: []
  type: TYPE_PRE
  zh: '[PRE105]'
- en: Additionally [`memory_usage()`](../reference/api/pandas.DataFrame.memory_usage.html#pandas.DataFrame.memory_usage
    "pandas.DataFrame.memory_usage") is an available method for a dataframe object
    which returns the memory usage of each column.
  id: totrans-587
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，[`memory_usage()`](../reference/api/pandas.DataFrame.memory_usage.html#pandas.DataFrame.memory_usage
    "pandas.DataFrame.memory_usage")是一个dataframe对象可用的方法，它返回每列的内存使用情况。
- en: '[PRE106]'
  id: totrans-588
  prefs: []
  type: TYPE_PRE
  zh: '[PRE106]'
- en: '### Series.dt accessor'
  id: totrans-589
  prefs: []
  type: TYPE_NORMAL
  zh: '### Series.dt访问器'
- en: '`Series` has gained an accessor to succinctly return datetime like properties
    for the *values* of the Series, if its a datetime/period like Series. ([GH 7207](https://github.com/pandas-dev/pandas/issues/7207))
    This will return a Series, indexed like the existing Series. See the [docs](../user_guide/basics.html#basics-dt-accessors)'
  id: totrans-590
  prefs: []
  type: TYPE_NORMAL
  zh: '`Series`已经获得了一个访问器，以简洁地返回*Series*的日期时间属性，如果它是一个日期时间/期间类型的Series。（[GH 7207](https://github.com/pandas-dev/pandas/issues/7207)）这将返回一个Series，像现有的Series一样索引。请参阅[文档](../user_guide/basics.html#basics-dt-accessors)'
- en: '[PRE107]'
  id: totrans-591
  prefs: []
  type: TYPE_PRE
  zh: '[PRE107]'
- en: 'This enables nice expressions like this:'
  id: totrans-592
  prefs: []
  type: TYPE_NORMAL
  zh: 这使得可以有如下美好的表达：
- en: '[PRE108]'
  id: totrans-593
  prefs: []
  type: TYPE_PRE
  zh: '[PRE108]'
- en: 'You can easily produce tz aware transformations:'
  id: totrans-594
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以轻松地生成带时区信息的转换：
- en: '[PRE109]'
  id: totrans-595
  prefs: []
  type: TYPE_PRE
  zh: '[PRE109]'
- en: 'You can also chain these types of operations:'
  id: totrans-596
  prefs: []
  type: TYPE_NORMAL
  zh: 你也可以链接这些类型的操作：
- en: '[PRE110]'
  id: totrans-597
  prefs: []
  type: TYPE_PRE
  zh: '[PRE110]'
- en: The `.dt` accessor works for period and timedelta dtypes.
  id: totrans-598
  prefs: []
  type: TYPE_NORMAL
  zh: '`.dt`访问器适用于期间和时间增量数据类型。'
- en: '[PRE111]'
  id: totrans-599
  prefs: []
  type: TYPE_PRE
  zh: '[PRE111]'
- en: '[PRE112]'
  id: totrans-600
  prefs: []
  type: TYPE_PRE
  zh: '[PRE112]'
- en: '### Timezone handling improvements'
  id: totrans-601
  prefs: []
  type: TYPE_NORMAL
  zh: '### 时区处理改进'
- en: '`tz_localize(None)` for tz-aware `Timestamp` and `DatetimeIndex` now removes
    timezone holding local time, previously this resulted in `Exception` or `TypeError`
    ([GH 7812](https://github.com/pandas-dev/pandas/issues/7812))'
  id: totrans-602
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于tz-aware `Timestamp`和`DatetimeIndex`，`tz_localize(None)`现在会移除持有本地时间的时区，以前这会导致`Exception`或`TypeError`。（[GH
    7812](https://github.com/pandas-dev/pandas/issues/7812)）
- en: '[PRE113]'
  id: totrans-603
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE113]'
- en: '`tz_localize` now accepts the `ambiguous` keyword which allows for passing
    an array of bools indicating whether the date belongs in DST or not, ‘NaT’ for
    setting transition times to NaT, ‘infer’ for inferring DST/non-DST, and ‘raise’
    (default) for an `AmbiguousTimeError` to be raised. See [the docs](../user_guide/timeseries.html#timeseries-timezone-ambiguous)
    for more details ([GH 7943](https://github.com/pandas-dev/pandas/issues/7943))'
  id: totrans-604
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`tz_localize`现在接受`ambiguous`关键字，它允许传递一个布尔数组，指示日期是否属于夏令时，‘NaT’表示将过渡时间设置为NaT，‘infer’表示推断DST/non-DST，‘raise’（默认）表示引发`AmbiguousTimeError`。请参阅[文档](../user_guide/timeseries.html#timeseries-timezone-ambiguous)了解更多详情（[GH
    7943](https://github.com/pandas-dev/pandas/issues/7943)）'
- en: '`DataFrame.tz_localize` and `DataFrame.tz_convert` now accepts an optional
    `level` argument for localizing a specific level of a MultiIndex ([GH 7846](https://github.com/pandas-dev/pandas/issues/7846))'
  id: totrans-605
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.tz_localize`和`DataFrame.tz_convert`现在接受可选的`level`参数，用于本地化多级索引的特定级别（[GH
    7846](https://github.com/pandas-dev/pandas/issues/7846)）'
- en: '`Timestamp.tz_localize` and `Timestamp.tz_convert` now raise `TypeError` in
    error cases, rather than `Exception` ([GH 8025](https://github.com/pandas-dev/pandas/issues/8025))'
  id: totrans-606
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Timestamp.tz_localize`和`Timestamp.tz_convert`现在在错误情况下会引发`TypeError`，而不是`Exception`（[GH
    8025](https://github.com/pandas-dev/pandas/issues/8025)）'
- en: a timeseries/index localized to UTC when inserted into a Series/DataFrame will
    preserve the UTC timezone (rather than being a naive `datetime64[ns]`) as `object`
    dtype ([GH 8411](https://github.com/pandas-dev/pandas/issues/8411))
  id: totrans-607
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将插入到Series/DataFrame中的UTC本地化的时间序列/索引将保留UTC时区（而不是作为`object` dtype的简单`datetime64[ns]）。([GH
    8411](https://github.com/pandas-dev/pandas/issues/8411))
- en: '`Timestamp.__repr__` displays `dateutil.tz.tzoffset` info ([GH 7907](https://github.com/pandas-dev/pandas/issues/7907))'
  id: totrans-608
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Timestamp.__repr__`显示`dateutil.tz.tzoffset`信息。([GH 7907](https://github.com/pandas-dev/pandas/issues/7907))'
- en: '### Rolling/expanding moments improvements'
  id: totrans-609
  prefs: []
  type: TYPE_NORMAL
  zh: '### 滚动/扩展时刻的改进'
- en: '`rolling_min()`, `rolling_max()`, `rolling_cov()`, and `rolling_corr()` now
    return objects with all `NaN` when `len(arg) < min_periods <= window` rather than
    raising. (This makes all rolling functions consistent in this behavior). ([GH
    7766](https://github.com/pandas-dev/pandas/issues/7766))'
  id: totrans-610
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当`len(arg) < min_periods <= window`时，`rolling_min()`、`rolling_max()`、`rolling_cov()`和`rolling_corr()`现在返回所有`NaN`的对象，而不是引发异常。（这使得所有滚动函数在这种行为上保持一致）。([GH
    7766](https://github.com/pandas-dev/pandas/issues/7766))
- en: Prior to 0.15.0
  id: totrans-611
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在0.15.0之前
- en: '[PRE114]'
  id: totrans-612
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE114]'
- en: '[PRE115]'
  id: totrans-613
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE115]'
- en: New behavior
  id: totrans-614
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 新行为
- en: '[PRE116]'
  id: totrans-615
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE116]'
- en: '`rolling_max()`, `rolling_min()`, `rolling_sum()`, `rolling_mean()`, `rolling_median()`,
    `rolling_std()`, `rolling_var()`, `rolling_skew()`, `rolling_kurt()`, `rolling_quantile()`,
    `rolling_cov()`, `rolling_corr()`, `rolling_corr_pairwise()`, `rolling_window()`,
    and `rolling_apply()` with `center=True` previously would return a result of the
    same structure as the input `arg` with `NaN` in the final `(window-1)/2` entries.'
  id: totrans-616
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`rolling_max()`、`rolling_min()`、`rolling_sum()`、`rolling_mean()`、`rolling_median()`、`rolling_std()`、`rolling_var()`、`rolling_skew()`、`rolling_kurt()`、`rolling_quantile()`、`rolling_cov()`、`rolling_corr()`、`rolling_corr_pairwise()`、`rolling_window()`和`rolling_apply()`在`center=True`时以前会返回与输入`arg`相同结构的结果，最后`(window-1)/2`个条目为`NaN`。'
- en: Now the final `(window-1)/2` entries of the result are calculated as if the
    input `arg` were followed by `(window-1)/2` `NaN` values (or with shrinking windows,
    in the case of `rolling_apply()`). ([GH 7925](https://github.com/pandas-dev/pandas/issues/7925),
    [GH 8269](https://github.com/pandas-dev/pandas/issues/8269))
  id: totrans-617
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 现在，结果的最后`(window-1)/2`个条目被计算，就好像输入的`arg`后面跟着`(window-1)/2`个`NaN`值（或者在`rolling_apply()`的情况下，使用缩小的窗口）。([GH
    7925](https://github.com/pandas-dev/pandas/issues/7925), [GH 8269](https://github.com/pandas-dev/pandas/issues/8269))
- en: 'Prior behavior (note final value is `NaN`):'
  id: totrans-618
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 先前的行为（注意最终值为`NaN`）：
- en: '[PRE117]'
  id: totrans-619
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE117]'
- en: 'New behavior (note final value is `5 = sum([2, 3, NaN])`):'
  id: totrans-620
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 新行为（注意最终值为`5 = sum([2, 3, NaN])`）：
- en: '[PRE118]'
  id: totrans-621
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE118]'
- en: '`rolling_window()` now normalizes the weights properly in rolling mean mode
    (mean=True) so that the calculated weighted means (e.g. ‘triang’, ‘gaussian’)
    are distributed about the same means as those calculated without weighting (i.e.
    ‘boxcar’). See [the note on normalization](../user_guide/window.html#window-weighted)
    for further details. ([GH 7618](https://github.com/pandas-dev/pandas/issues/7618))'
  id: totrans-622
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`rolling_window()`现在在滚动均值模式（mean=True）中正确规范权重，以便计算的加权均值（例如‘triang’、‘gaussian’）分布在与未加权计算（即‘boxcar’）相同均值周围。有关详细信息，请参见[有关规范化的说明](../user_guide/window.html#window-weighted)。([GH
    7618](https://github.com/pandas-dev/pandas/issues/7618))'
- en: '[PRE119]'
  id: totrans-623
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE119]'
- en: 'Behavior prior to 0.15.0:'
  id: totrans-624
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在0.15.0之前的行为：
- en: '[PRE120]'
  id: totrans-625
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE120]'
- en: New behavior
  id: totrans-626
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 新行为
- en: '[PRE121]'
  id: totrans-627
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE121]'
- en: Removed `center` argument from all `expanding_` functions (see [list](../reference/window.html#api-functions-expanding)),
    as the results produced when `center=True` did not make much sense. ([GH 7925](https://github.com/pandas-dev/pandas/issues/7925))
  id: totrans-628
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从所有`expanding_`函数中删除了`center`参数（参见[列表](../reference/window.html#api-functions-expanding)），因为当`center=True`时产生的结果并没有太多意义。([GH
    7925](https://github.com/pandas-dev/pandas/issues/7925))
- en: Added optional `ddof` argument to `expanding_cov()` and `rolling_cov()`. The
    default value of `1` is backwards-compatible. ([GH 8279](https://github.com/pandas-dev/pandas/issues/8279))
  id: totrans-629
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 向`expanding_cov()`和`rolling_cov()`添加了可选的`ddof`参数。默认值为`1`与向后兼容。([GH 8279](https://github.com/pandas-dev/pandas/issues/8279))
- en: Documented the `ddof` argument to `expanding_var()`, `expanding_std()`, `rolling_var()`,
    and `rolling_std()`. These functions’ support of a `ddof` argument (with a default
    value of `1`) was previously undocumented. ([GH 8064](https://github.com/pandas-dev/pandas/issues/8064))
  id: totrans-630
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为`expanding_var()`、`expanding_std()`、`rolling_var()`和`rolling_std()`记录了`ddof`参数。这些函数对`ddof`参数的支持（默认值为`1`）以前未记录。([GH
    8064](https://github.com/pandas-dev/pandas/issues/8064))
- en: '`ewma()`, `ewmstd()`, `ewmvol()`, `ewmvar()`, `ewmcov()`, and `ewmcorr()` now
    interpret `min_periods` in the same manner that the `rolling_*()` and `expanding_*()`
    functions do: a given result entry will be `NaN` if the (expanding, in this case)
    window does not contain at least `min_periods` values. The previous behavior was
    to set to `NaN` the `min_periods` entries starting with the first non- `NaN` value.
    ([GH 7977](https://github.com/pandas-dev/pandas/issues/7977))'
  id: totrans-631
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ewma()`、`ewmstd()`、`ewmvol()`、`ewmvar()`、`ewmcov()` 和 `ewmcorr()` 现在对 `min_periods`
    的解释与 `rolling_*()` 和 `expanding_*()` 函数相同：如果（在这种情况下是扩展窗口）窗口中的值至少不包含 `min_periods`
    个值，则给定的结果条目将为 `NaN`。先前的行为是从第一个非 `NaN` 值开始将 `min_periods` 条目设置为 `NaN`。([GH 7977](https://github.com/pandas-dev/pandas/issues/7977))'
- en: 'Prior behavior (note values start at index `2`, which is `min_periods` after
    index `0` (the index of the first non-empty value)):'
  id: totrans-632
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 先前的行为（请注意，值从索引 `2` 开始，这是索引 `0`（第一个非空值的索引）后的 `min_periods`）：
- en: '[PRE122]'
  id: totrans-633
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE122]'
- en: '[PRE123]'
  id: totrans-634
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE123]'
- en: 'New behavior (note values start at index `4`, the location of the 2nd (since
    `min_periods=2`) non-empty value):'
  id: totrans-635
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 新行为（请注意，值从索引 `4` 开始，即第二个（因为 `min_periods=2`）非空值的位置）：
- en: '[PRE124]'
  id: totrans-636
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE124]'
- en: '`ewmstd()`, `ewmvol()`, `ewmvar()`, `ewmcov()`, and `ewmcorr()` now have an
    optional `adjust` argument, just like `ewma()` does, affecting how the weights
    are calculated. The default value of `adjust` is `True`, which is backwards-compatible.
    See [Exponentially weighted moment functions](../user_guide/window.html#window-exponentially-weighted)
    for details. ([GH 7911](https://github.com/pandas-dev/pandas/issues/7911))'
  id: totrans-637
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ewmstd()`、`ewmvol()`、`ewmvar()`、`ewmcov()` 和 `ewmcorr()` 现在有一个可选的 `adjust`
    参数，就像 `ewma()` 一样，影响权重的计算方式。`adjust` 的默认值为 `True`，与向后兼容。有关详细信息，请参阅[指数加权矩函数](../user_guide/window.html#window-exponentially-weighted)。([GH
    7911](https://github.com/pandas-dev/pandas/issues/7911))'
- en: '`ewma()`, `ewmstd()`, `ewmvol()`, `ewmvar()`, `ewmcov()`, and `ewmcorr()` now
    have an optional `ignore_na` argument. When `ignore_na=False` (the default), missing
    values are taken into account in the weights calculation. When `ignore_na=True`
    (which reproduces the pre-0.15.0 behavior), missing values are ignored in the
    weights calculation. ([GH 7543](https://github.com/pandas-dev/pandas/issues/7543))'
  id: totrans-638
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ewma()`、`ewmstd()`、`ewmvol()`、`ewmvar()`、`ewmcov()` 和 `ewmcorr()` 现在有一个可选的
    `ignore_na` 参数。当 `ignore_na=False`（默认值）时，权重计算中会考虑缺失值。当 `ignore_na=True`（重现 0.15.0
    之前的行为）时，权重计算中会忽略缺失值。([GH 7543](https://github.com/pandas-dev/pandas/issues/7543))'
- en: '[PRE125]'
  id: totrans-639
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE125]'
- en: Warning
  id: totrans-640
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 警告
- en: By default (`ignore_na=False`) the `ewm*()` functions’ weights calculation in
    the presence of missing values is different than in pre-0.15.0 versions. To reproduce
    the pre-0.15.0 calculation of weights in the presence of missing values one must
    specify explicitly `ignore_na=True`.
  id: totrans-641
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 默认情况下（`ignore_na=False`），存在缺失值时 `ewm*()` 函数的权重计算与 0.15.0 之前的版本不同。要在存在缺失值时重现
    0.15.0 之前的权重计算，必须显式指定 `ignore_na=True`。
- en: Bug in `expanding_cov()`, `expanding_corr()`, `rolling_cov()`, `rolling_cor()`,
    `ewmcov()`, and `ewmcorr()` returning results with columns sorted by name and
    producing an error for non-unique columns; now handles non-unique columns and
    returns columns in original order (except for the case of two DataFrames with
    `pairwise=False`, where behavior is unchanged) ([GH 7542](https://github.com/pandas-dev/pandas/issues/7542))
  id: totrans-642
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`expanding_cov()`、`expanding_corr()`、`rolling_cov()`、`rolling_cor()`、`ewmcov()`
    和 `ewmcorr()` 中的 Bug，返回以名称排序的列和对于非唯一列产生错误的结果；现在处理非唯一列并按原始顺序返回列（除了两个 DataFrame
    的情况下，`pairwise=False`，其行为不变）([GH 7542](https://github.com/pandas-dev/pandas/issues/7542))'
- en: Bug in `rolling_count()` and `expanding_*()` functions unnecessarily producing
    error message for zero-length data ([GH 8056](https://github.com/pandas-dev/pandas/issues/8056))
  id: totrans-643
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`rolling_count()` 和 `expanding_*()` 函数中的 Bug，在长度为零的数据上不必要地产生错误消息 ([GH 8056](https://github.com/pandas-dev/pandas/issues/8056))'
- en: Bug in `rolling_apply()` and `expanding_apply()` interpreting `min_periods=0`
    as `min_periods=1` ([GH 8080](https://github.com/pandas-dev/pandas/issues/8080))
  id: totrans-644
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`rolling_apply()` 和 `expanding_apply()` 中的 Bug，将 `min_periods=0` 解释为 `min_periods=1`
    ([GH 8080](https://github.com/pandas-dev/pandas/issues/8080))'
- en: Bug in `expanding_std()` and `expanding_var()` for a single value producing
    a confusing error message ([GH 7900](https://github.com/pandas-dev/pandas/issues/7900))
  id: totrans-645
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`expanding_std()` 和 `expanding_var()` 在只有一个数值时会产生令人困惑的错误消息的 Bug ([GH 7900](https://github.com/pandas-dev/pandas/issues/7900))'
- en: Bug in `rolling_std()` and `rolling_var()` for a single value producing `0`
    rather than `NaN` ([GH 7900](https://github.com/pandas-dev/pandas/issues/7900))
  id: totrans-646
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`rolling_std()` 和 `rolling_var()` 在只有一个数值时产生 `0` 而不是 `NaN` 的 Bug ([GH 7900](https://github.com/pandas-dev/pandas/issues/7900))'
- en: Bug in `ewmstd()`, `ewmvol()`, `ewmvar()`, and `ewmcov()` calculation of de-biasing
    factors when `bias=False` (the default). Previously an incorrect constant factor
    was used, based on `adjust=True`, `ignore_na=True`, and an infinite number of
    observations. Now a different factor is used for each entry, based on the actual
    weights (analogous to the usual `N/(N-1)` factor). In particular, for a single
    point a value of `NaN` is returned when `bias=False`, whereas previously a value
    of (approximately) `0` was returned.
  id: totrans-647
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当`bias=False`（默认）时，`ewmstd()`、`ewmvol()`、`ewmvar()`和`ewmcov()`计算去偏因子时存在错误。先前使用了一个错误的常数因子，基于`adjust=True`、`ignore_na=True`和无限观察次数。现在，针对每个条目使用不同的因子，基于实际权重（类似于通常的`N/(N-1)`因子）。特别是，当`bias=False`时，对于单个点会返回`NaN`值，而以前会返回（大约）`0`值。
- en: 'For example, consider the following pre-0.15.0 results for `ewmvar(..., bias=False)`,
    and the corresponding debiasing factors:'
  id: totrans-648
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 例如，考虑以下`ewmvar(..., bias=False)`的0.15.0之前结果，以及相应的去偏因子：
- en: '[PRE126]'
  id: totrans-649
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE126]'
- en: '[PRE127]'
  id: totrans-650
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE127]'
- en: 'Note that entry `0` is approximately 0, and the debiasing factors are a constant
    1.25. By comparison, the following 0.15.0 results have a `NaN` for entry `0`,
    and the debiasing factors are decreasing (towards 1.25):'
  id: totrans-651
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 请注意，条目`0`大约为0，去偏因子为常数1.25。相比之下，以下是0.15.0结果，条目`0`为`NaN`，去偏因子递减（朝向1.25）：
- en: '[PRE128]'
  id: totrans-652
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE128]'
- en: See [Exponentially weighted moment functions](../user_guide/window.html#window-exponentially-weighted)
    for details. ([GH 7912](https://github.com/pandas-dev/pandas/issues/7912))
  id: totrans-653
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 详情请参见[指数加权矩函数](../user_guide/window.html#window-exponentially-weighted)。 ([GH
    7912](https://github.com/pandas-dev/pandas/issues/7912))
- en: '### Improvements in the SQL IO module'
  id: totrans-654
  prefs: []
  type: TYPE_NORMAL
  zh: '### SQL IO模块中的改进'
- en: Added support for a `chunksize` parameter to `to_sql` function. This allows
    DataFrame to be written in chunks and avoid packet-size overflow errors ([GH 8062](https://github.com/pandas-dev/pandas/issues/8062)).
  id: totrans-655
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了`to_sql`函数的`chunksize`参数支持。这允许DataFrame被分块写入，避免数据包大小溢出错误 ([GH 8062](https://github.com/pandas-dev/pandas/issues/8062))。
- en: Added support for a `chunksize` parameter to `read_sql` function. Specifying
    this argument will return an iterator through chunks of the query result ([GH
    2908](https://github.com/pandas-dev/pandas/issues/2908)).
  id: totrans-656
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了`read_sql`函数的`chunksize`参数支持。指定此参数将返回查询结果的迭代器 ([GH 2908](https://github.com/pandas-dev/pandas/issues/2908))。
- en: Added support for writing `datetime.date` and `datetime.time` object columns
    with `to_sql` ([GH 6932](https://github.com/pandas-dev/pandas/issues/6932)).
  id: totrans-657
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了使用`to_sql`写入`datetime.date`和`datetime.time`对象列的支持 ([GH 6932](https://github.com/pandas-dev/pandas/issues/6932))。
- en: 'Added support for specifying a `schema` to read from/write to with `read_sql_table`
    and `to_sql` ([GH 7441](https://github.com/pandas-dev/pandas/issues/7441), [GH
    7952](https://github.com/pandas-dev/pandas/issues/7952)). For example:'
  id: totrans-658
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对使用`read_sql_table`和`to_sql`指定`schema`进行读取/写入的支持 ([GH 7441](https://github.com/pandas-dev/pandas/issues/7441),
    [GH 7952](https://github.com/pandas-dev/pandas/issues/7952))。例如：
- en: '[PRE129]'
  id: totrans-659
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE129]'
- en: Added support for writing `NaN` values with `to_sql` ([GH 2754](https://github.com/pandas-dev/pandas/issues/2754)).
  id: totrans-660
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了使用`to_sql`写入`NaN`值的支持 ([GH 2754](https://github.com/pandas-dev/pandas/issues/2754))。
- en: Added support for writing datetime64 columns with `to_sql` for all database
    flavors ([GH 7103](https://github.com/pandas-dev/pandas/issues/7103)).
  id: totrans-661
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加了对使用`to_sql`写入datetime64列的所有数据库类型的支持 ([GH 7103](https://github.com/pandas-dev/pandas/issues/7103))。
- en: '## Backwards incompatible API changes'
  id: totrans-662
  prefs: []
  type: TYPE_NORMAL
  zh: '## 不向后兼容的API更改'
- en: '### Breaking changes'
  id: totrans-663
  prefs: []
  type: TYPE_NORMAL
  zh: '### 破坏性变化'
- en: 'API changes related to `Categorical` (see [here](#whatsnew-0150-cat) for more
    details):'
  id: totrans-664
  prefs: []
  type: TYPE_NORMAL
  zh: 与`Categorical`相关的API更改（有关更多详情，请参见[此处](#whatsnew-0150-cat)）：
- en: The `Categorical` constructor with two arguments changed from “codes/labels
    and levels” to “values and levels (now called ‘categories’)”. This can lead to
    subtle bugs. If you use [`Categorical`](../reference/api/pandas.Categorical.html#pandas.Categorical
    "pandas.Categorical") directly, please audit your code by changing it to use the
    [`from_codes()`](../reference/api/pandas.Categorical.from_codes.html#pandas.Categorical.from_codes
    "pandas.Categorical.from_codes") constructor.
  id: totrans-665
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 两个参数的`Categorical`构造函数从“codes/labels和levels”更改为“values和levels（现在称为‘categories’）”。这可能会导致细微的错误。如果您直接使用[`Categorical`](../reference/api/pandas.Categorical.html#pandas.Categorical
    "pandas.Categorical")，请通过将其更改为使用[`from_codes()`](../reference/api/pandas.Categorical.from_codes.html#pandas.Categorical.from_codes
    "pandas.Categorical.from_codes")构造函数来审查您的代码。
- en: 'An old function call like (prior to 0.15.0):'
  id: totrans-666
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 旧的函数调用（0.15.0之前）如下：
- en: '[PRE130]'
  id: totrans-667
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE130]'
- en: 'will have to adapted to the following to keep the same behaviour:'
  id: totrans-668
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 将需要调整以下内容以保持相同的行为：
- en: '[PRE131]'
  id: totrans-669
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE131]'
- en: 'API changes related to the introduction of the `Timedelta` scalar (see [above](#whatsnew-0150-timedeltaindex)
    for more details):'
  id: totrans-670
  prefs: []
  type: TYPE_NORMAL
  zh: 与引入`Timedelta`标量相关的 API 更改（有关更多详细信息，请参见[上文](#whatsnew-0150-timedeltaindex)）：
- en: Prior to 0.15.0 [`to_timedelta()`](../reference/api/pandas.to_timedelta.html#pandas.to_timedelta
    "pandas.to_timedelta") would return a `Series` for list-like/Series input, and
    a `np.timedelta64` for scalar input. It will now return a `TimedeltaIndex` for
    list-like input, `Series` for Series input, and `Timedelta` for scalar input.
  id: totrans-671
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 0.15.0 之前 [`to_timedelta()`](../reference/api/pandas.to_timedelta.html#pandas.to_timedelta
    "pandas.to_timedelta")将为类似列表/序列输入返回`Series`，对于标量输入返回`np.timedelta64`。现在，对于类似列表的输入，将返回`TimedeltaIndex`，对于序列输入，将返回`Series`，对于标量输入将返回`Timedelta`。
- en: For API changes related to the rolling and expanding functions, see detailed
    overview [above](#whatsnew-0150-roll).
  id: totrans-672
  prefs: []
  type: TYPE_NORMAL
  zh: 与滚动和扩展函数相关的 API 更改，请参见[上文](#whatsnew-0150-roll)的详细概述。
- en: 'Other notable API changes:'
  id: totrans-673
  prefs: []
  type: TYPE_NORMAL
  zh: 其他值得注意的 API 更改：
- en: Consistency when indexing with `.loc` and a list-like indexer when no values
    are found.
  id: totrans-674
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用`.loc`和列表类索引器进行索引时的一致性，当未找到值时。
- en: '[PRE132]'
  id: totrans-675
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE132]'
- en: 'In prior versions there was a difference in these two constructs:'
  id: totrans-676
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在以前的版本中，这两个构造之间存在差异：
- en: '`df.loc[[3]]` would return a frame reindexed by 3 (with all `np.nan` values)'
  id: totrans-677
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`df.loc[[3]]`将返回由 3 重新索引的框架（所有`np.nan`值）'
- en: '`df.loc[[3],:]` would raise `KeyError`.'
  id: totrans-678
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`df.loc[[3],:]`将引发`KeyError`。'
- en: Both will now raise a `KeyError`. The rule is that *at least 1* indexer must
    be found when using a list-like and `.loc` ([GH 7999](https://github.com/pandas-dev/pandas/issues/7999))
  id: totrans-679
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 现在两者都将引发`KeyError`。规则是使用类似列表和`.loc`时必须至少找到*1*个索引器（[GH 7999](https://github.com/pandas-dev/pandas/issues/7999)）
- en: 'Furthermore in prior versions these were also different:'
  id: totrans-680
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此外，在以前的版本中，这些也不同：
- en: '`df.loc[[1,3]]` would return a frame reindexed by [1,3]'
  id: totrans-681
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`df.loc[[1,3]]`将返回由[1,3]重新索引的框架'
- en: '`df.loc[[1,3],:]` would raise `KeyError`.'
  id: totrans-682
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`df.loc[[1,3],:]`将引发`KeyError`。'
- en: Both will now return a frame reindex by [1,3]. E.g.
  id: totrans-683
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 现在两者都将返回由[1,3]重新索引的框架。例如。
- en: '[PRE133]'
  id: totrans-684
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE133]'
- en: This can also be seen in multi-axis indexing with a `Panel`.
  id: totrans-685
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这也可以在使用`Panel`的多轴索引中看到。
- en: '[PRE134]'
  id: totrans-686
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE134]'
- en: 'The following would raise `KeyError` prior to 0.15.0:'
  id: totrans-687
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 以下内容在 0.15.0 之前将引发`KeyError`：
- en: '[PRE135]'
  id: totrans-688
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE135]'
- en: 'Furthermore, `.loc` will raise If no values are found in a MultiIndex with
    a list-like indexer:'
  id: totrans-689
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此外，如果在具有列表类索引器的 MultiIndex 中未找到值，则`.loc`将引发异常：
- en: '[PRE136]'
  id: totrans-690
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE136]'
- en: Assigning values to `None` now considers the dtype when choosing an ‘empty’
    value ([GH 7941](https://github.com/pandas-dev/pandas/issues/7941)).
  id: totrans-691
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在在选择“空”值时，将考虑 dtype 分配给`None`（[GH 7941](https://github.com/pandas-dev/pandas/issues/7941)）。
- en: 'Previously, assigning to `None` in numeric containers changed the dtype to
    object (or errored, depending on the call). It now uses `NaN`:'
  id: totrans-692
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 以前，在数字容器中将值分配给`None`会将 dtype 更改为 object（或者根据调用而出错）。现在使用`NaN`：
- en: '[PRE137]'
  id: totrans-693
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE137]'
- en: '`NaT` is now used similarly for datetime containers.'
  id: totrans-694
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 现在类似于日期时间容器使用`NaT`。
- en: For object containers, we now preserve `None` values (previously these were
    converted to `NaN` values).
  id: totrans-695
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于对象容器，我们现在保留`None`值（以前这些值被转换为`NaN`值）。
- en: '[PRE138]'
  id: totrans-696
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE138]'
- en: To insert a `NaN`, you must explicitly use `np.nan`. See the [docs](../user_guide/missing_data.html#missing-inserting).
  id: totrans-697
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 要插入`NaN`，必须明确使用`np.nan`。请参见[文档](../user_guide/missing_data.html#missing-inserting)。
- en: In prior versions, updating a pandas object inplace would not reflect in other
    python references to this object. ([GH 8511](https://github.com/pandas-dev/pandas/issues/8511),
    [GH 5104](https://github.com/pandas-dev/pandas/issues/5104))
  id: totrans-698
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在以前的版本中，就地更新 pandas 对象不会反映在对该对象的其他 Python 引用中。([GH 8511](https://github.com/pandas-dev/pandas/issues/8511),
    [GH 5104](https://github.com/pandas-dev/pandas/issues/5104))
- en: '[PRE139]'
  id: totrans-699
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE139]'
- en: Behavior prior to v0.15.0
  id: totrans-700
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 0.15.0 之前的行为
- en: '[PRE140]'
  id: totrans-701
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE140]'
- en: This is now the correct behavior
  id: totrans-702
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这现在是正确的行为
- en: '[PRE141]'
  id: totrans-703
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE141]'
- en: Made both the C-based and Python engines for `read_csv` and `read_table` ignore
    empty lines in input as well as white space-filled lines, as long as `sep` is
    not white space. This is an API change that can be controlled by the keyword parameter
    `skip_blank_lines`. See [the docs](../user_guide/io.html#io-skiplines) ([GH 4466](https://github.com/pandas-dev/pandas/issues/4466))
  id: totrans-704
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使`read_csv`和`read_table`的基于 C 和 Python 的引擎都忽略输入中的空行以及填充了空格的行，只要`sep`不是空格。这是一个可以通过关键字参数`skip_blank_lines`来控制的
    API 更改。参见[文档](../user_guide/io.html#io-skiplines)（[GH 4466](https://github.com/pandas-dev/pandas/issues/4466)）
- en: A timeseries/index localized to UTC when inserted into a Series/DataFrame will
    preserve the UTC timezone and inserted as `object` dtype rather than being converted
    to a naive `datetime64[ns]` ([GH 8411](https://github.com/pandas-dev/pandas/issues/8411)).
  id: totrans-705
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 插入到 Series/DataFrame 中的 UTC 本地化的时间序列/索引将保留 UTC 时区，并插入为`object` dtype 而不是转换为不带时区的`datetime64[ns]`（[GH
    8411](https://github.com/pandas-dev/pandas/issues/8411)）。
- en: Bug in passing a `DatetimeIndex` with a timezone that was not being retained
    in DataFrame construction from a dict ([GH 7822](https://github.com/pandas-dev/pandas/issues/7822))
  id: totrans-706
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从字典构建DataFrame时，传递具有时区的`DatetimeIndex`时没有保留时区的错误（[GH 7822](https://github.com/pandas-dev/pandas/issues/7822))
- en: 'In prior versions this would drop the timezone, now it retains the timezone,
    but gives a column of `object` dtype:'
  id: totrans-707
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在之前的版本中，这会丢失时区信息，现在保留时区，但会给出一个`object` dtype的列：
- en: '[PRE142]'
  id: totrans-708
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE142]'
- en: Previously this would have yielded a column of `datetime64` dtype, but without
    timezone info.
  id: totrans-709
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 之前会产生一个没有时区信息的`datetime64` dtype列。
- en: The behaviour of assigning a column to an existing dataframe as `df['a'] = i`
    remains unchanged (this already returned an `object` column with a timezone).
  id: totrans-710
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 将列分配给现有DataFrame的行为`df['a'] = i`保持不变（这已经返回了一个带有时区的`object`列）。
- en: When passing multiple levels to [`stack()`](../reference/api/pandas.DataFrame.stack.html#pandas.DataFrame.stack
    "pandas.DataFrame.stack"), it will now raise a `ValueError` when the levels aren’t
    all level names or all level numbers ([GH 7660](https://github.com/pandas-dev/pandas/issues/7660)).
    See [Reshaping by stacking and unstacking](../user_guide/reshaping.html#reshaping-stack-multiple).
  id: totrans-711
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当向[`stack()`](../reference/api/pandas.DataFrame.stack.html#pandas.DataFrame.stack
    "pandas.DataFrame.stack")传递多个级别时，如果级别不全是级别名称或全是级别编号，则现在会引发`ValueError`（[GH 7660](https://github.com/pandas-dev/pandas/issues/7660)）。参见[通过堆叠和取消堆叠进行重塑](../user_guide/reshaping.html#reshaping-stack-multiple)。
- en: Raise a `ValueError` in `df.to_hdf` with ‘fixed’ format, if `df` has non-unique
    columns as the resulting file will be broken ([GH 7761](https://github.com/pandas-dev/pandas/issues/7761))
  id: totrans-712
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在使用‘fixed’格式时，如果`df`具有非唯一列，则在`df.to_hdf`中引发`ValueError`，因为生成的文件将损坏（[GH 7761](https://github.com/pandas-dev/pandas/issues/7761)）。
- en: '`SettingWithCopy` raise/warnings (according to the option `mode.chained_assignment`)
    will now be issued when setting a value on a sliced mixed-dtype DataFrame using
    chained-assignment. ([GH 7845](https://github.com/pandas-dev/pandas/issues/7845),
    [GH 7950](https://github.com/pandas-dev/pandas/issues/7950))'
  id: totrans-713
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当使用链式赋值在切片的混合dtype DataFrame上设置值时，根据选项`mode.chained_assignment`，将发出`SettingWithCopy`的警告/错误（[GH
    7845](https://github.com/pandas-dev/pandas/issues/7845)，[GH 7950](https://github.com/pandas-dev/pandas/issues/7950)）。
- en: '[PRE143]'
  id: totrans-714
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE143]'
- en: '`merge`, `DataFrame.merge`, and `ordered_merge` now return the same type as
    the `left` argument ([GH 7737](https://github.com/pandas-dev/pandas/issues/7737)).'
  id: totrans-715
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`merge`、`DataFrame.merge`和`ordered_merge`现在返回与`left`参数相同的类型（[GH 7737](https://github.com/pandas-dev/pandas/issues/7737)）。'
- en: 'Previously an enlargement with a mixed-dtype frame would act unlike `.append`
    which will preserve dtypes (related [GH 2578](https://github.com/pandas-dev/pandas/issues/2578),
    [GH 8176](https://github.com/pandas-dev/pandas/issues/8176)):'
  id: totrans-716
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 之前对混合dtype的DataFrame进行扩展时的行为与`.append`不同，后者会保留dtype（相关问题[GH 2578](https://github.com/pandas-dev/pandas/issues/2578)，[GH
    8176](https://github.com/pandas-dev/pandas/issues/8176)）：
- en: '[PRE144]'
  id: totrans-717
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE144]'
- en: '`Series.to_csv()` now returns a string when `path=None`, matching the behaviour
    of `DataFrame.to_csv()` ([GH 8215](https://github.com/pandas-dev/pandas/issues/8215)).'
  id: totrans-718
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Series.to_csv()`现在在`path=None`时返回一个字符串，与`DataFrame.to_csv()`的行为匹配（[GH 8215](https://github.com/pandas-dev/pandas/issues/8215)）。'
- en: '`read_hdf` now raises `IOError` when a file that doesn’t exist is passed in.
    Previously, a new, empty file was created, and a `KeyError` raised ([GH 7715](https://github.com/pandas-dev/pandas/issues/7715)).'
  id: totrans-719
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`read_hdf`现在在传入不存在的文件时会引发`IOError`。之前会创建一个新的空文件，并引发`KeyError`（[GH 7715](https://github.com/pandas-dev/pandas/issues/7715)）。'
- en: '`DataFrame.info()` now ends its output with a newline character ([GH 8114](https://github.com/pandas-dev/pandas/issues/8114))'
  id: totrans-720
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.info()`现在在输出结束时会加上一个换行符（[GH 8114](https://github.com/pandas-dev/pandas/issues/8114)）。'
- en: Concatenating no objects will now raise a `ValueError` rather than a bare `Exception`.
  id: totrans-721
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在连接空对象将引发`ValueError`而不是裸的`Exception`。
- en: Merge errors will now be sub-classes of `ValueError` rather than raw `Exception`
    ([GH 8501](https://github.com/pandas-dev/pandas/issues/8501))
  id: totrans-722
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 合并错误现在将是`ValueError`的子类，而不是裸的`Exception`（[GH 8501](https://github.com/pandas-dev/pandas/issues/8501)）。
- en: '`DataFrame.plot` and `Series.plot` keywords are now have consistent orders
    ([GH 8037](https://github.com/pandas-dev/pandas/issues/8037))  ### Internal refactoring'
  id: totrans-723
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.plot`和`Series.plot`的关键字现在具有一致的顺序（[GH 8037](https://github.com/pandas-dev/pandas/issues/8037)）  ###
    内部重构'
- en: 'In 0.15.0 `Index` has internally been refactored to no longer sub-class `ndarray`
    but instead subclass `PandasObject`, similarly to the rest of the pandas objects.
    This change allows very easy sub-classing and creation of new index types. This
    should be a transparent change with only very limited API implications ([GH 5080](https://github.com/pandas-dev/pandas/issues/5080),
    [GH 7439](https://github.com/pandas-dev/pandas/issues/7439), [GH 7796](https://github.com/pandas-dev/pandas/issues/7796),
    [GH 8024](https://github.com/pandas-dev/pandas/issues/8024), [GH 8367](https://github.com/pandas-dev/pandas/issues/8367),
    [GH 7997](https://github.com/pandas-dev/pandas/issues/7997), [GH 8522](https://github.com/pandas-dev/pandas/issues/8522)):'
  id: totrans-724
  prefs: []
  type: TYPE_NORMAL
  zh: '在0.15.0版本中，`Index`在内部已经被重构，不再是`ndarray`的子类，而是`PandasObject`的子类，与其他pandas对象类似。这个改变使得非常容易进行子类化和创建新的索引类型。这应该是一个透明的改变，只有非常有限的API影响
    ([GH 5080](https://github.com/pandas-dev/pandas/issues/5080), [GH 7439](https://github.com/pandas-dev/pandas/issues/7439),
    [GH 7796](https://github.com/pandas-dev/pandas/issues/7796), [GH 8024](https://github.com/pandas-dev/pandas/issues/8024),
    [GH 8367](https://github.com/pandas-dev/pandas/issues/8367), [GH 7997](https://github.com/pandas-dev/pandas/issues/7997),
    [GH 8522](https://github.com/pandas-dev/pandas/issues/8522)):'
- en: you may need to unpickle pandas version < 0.15.0 pickles using `pd.read_pickle`
    rather than `pickle.load`. See [pickle docs](../user_guide/io.html#io-pickle)
  id: totrans-725
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您可能需要使用`pd.read_pickle`而不是`pickle.load`来解除pickle pandas版本< 0.15.0的pickle。参见[pickle文档](../user_guide/io.html#io-pickle)
- en: when plotting with a `PeriodIndex`, the matplotlib internal axes will now be
    arrays of `Period` rather than a `PeriodIndex` (this is similar to how a `DatetimeIndex`
    passes arrays of `datetimes` now)
  id: totrans-726
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用`PeriodIndex`绘图时，matplotlib内部轴现在将是`Period`的数组，而不是`PeriodIndex`（类似于`DatetimeIndex`现在传递`datetimes`数组的方式）
- en: MultiIndexes will now raise similarly to other pandas objects w.r.t. truth testing,
    see [here](../user_guide/gotchas.html#gotchas-truth) ([GH 7897](https://github.com/pandas-dev/pandas/issues/7897)).
  id: totrans-727
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: MultiIndexes现在将与其他pandas对象类似地引发异常，关于真值测试，请参见[这里](../user_guide/gotchas.html#gotchas-truth)
    ([GH 7897](https://github.com/pandas-dev/pandas/issues/7897)).
- en: 'When plotting a DatetimeIndex directly with matplotlib’s `plot` function, the
    axis labels will no longer be formatted as dates but as integers (the internal
    representation of a `datetime64`). **UPDATE** This is fixed in 0.15.1, see [here](v0.15.1.html#whatsnew-0151-datetime64-plotting).  ###
    Deprecations'
  id: totrans-728
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '直接使用matplotlib的`plot`函数绘制DatetimeIndex时，轴标签将不再格式化为日期，而是整数（`datetime64`的内部表示）。**更新**
    这在0.15.1中已修复，参见[这里](v0.15.1.html#whatsnew-0151-datetime64-plotting)。  ### 弃用'
- en: The attributes `Categorical` `labels` and `levels` attributes are deprecated
    and renamed to `codes` and `categories`.
  id: totrans-729
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Categorical`的`labels`和`levels`属性已被弃用，并更名为`codes`和`categories`。'
- en: The `outtype` argument to `pd.DataFrame.to_dict` has been deprecated in favor
    of `orient`. ([GH 7840](https://github.com/pandas-dev/pandas/issues/7840))
  id: totrans-730
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pd.DataFrame.to_dict`的`outtype`参数已被弃用，推荐使用`orient`。([GH 7840](https://github.com/pandas-dev/pandas/issues/7840))'
- en: The `convert_dummies` method has been deprecated in favor of `get_dummies` ([GH
    8140](https://github.com/pandas-dev/pandas/issues/8140))
  id: totrans-731
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`convert_dummies`方法已被弃用，推荐使用`get_dummies` ([GH 8140](https://github.com/pandas-dev/pandas/issues/8140))'
- en: The `infer_dst` argument in `tz_localize` will be deprecated in favor of `ambiguous`
    to allow for more flexibility in dealing with DST transitions. Replace `infer_dst=True`
    with `ambiguous='infer'` for the same behavior ([GH 7943](https://github.com/pandas-dev/pandas/issues/7943)).
    See [the docs](../user_guide/timeseries.html#timeseries-timezone-ambiguous) for
    more details.
  id: totrans-732
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`tz_localize`中的`infer_dst`参数将被弃用，推荐使用`ambiguous`以更灵活地处理夏令时转换。将`infer_dst=True`替换为`ambiguous=''infer''`以获得相同的行为
    ([GH 7943](https://github.com/pandas-dev/pandas/issues/7943))。更多详情请参见[文档](../user_guide/timeseries.html#timeseries-timezone-ambiguous)。'
- en: The top-level `pd.value_range` has been deprecated and can be replaced by `.describe()`
    ([GH 8481](https://github.com/pandas-dev/pandas/issues/8481))
  id: totrans-733
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 顶层的`pd.value_range`已被弃用，可以用`.describe()`替代 ([GH 8481](https://github.com/pandas-dev/pandas/issues/8481))
- en: The `Index` set operations `+` and `-` were deprecated in order to provide these
    for numeric type operations on certain index types. `+` can be replaced by `.union()`
    or `|`, and `-` by `.difference()`. Further the method name `Index.diff()` is
    deprecated and can be replaced by `Index.difference()` ([GH 8226](https://github.com/pandas-dev/pandas/issues/8226))
  id: totrans-734
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Index`的集合操作`+`和`-`已被弃用，以便为某些索引类型的数值类型操作提供这些操作。`+`可以用`.union()`或`|`替换，`-`可以用`.difference()`替换。此外，方法名`Index.diff()`已被弃用，可以用`Index.difference()`替换
    ([GH 8226](https://github.com/pandas-dev/pandas/issues/8226))'
- en: '[PRE145]'
  id: totrans-735
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE145]'
- en: '[PRE146]'
  id: totrans-736
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE146]'
- en: 'The `infer_types` argument to [`read_html()`](../reference/api/pandas.read_html.html#pandas.read_html
    "pandas.read_html") now has no effect and is deprecated ([GH 7762](https://github.com/pandas-dev/pandas/issues/7762),
    [GH 7032](https://github.com/pandas-dev/pandas/issues/7032)).  ### Removal of
    prior version deprecations/changes'
  id: totrans-737
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`read_html()`](../reference/api/pandas.read_html.html#pandas.read_html "pandas.read_html")中的`infer_types`参数现在不起作用，并且已被弃用（[GH
    7762](https://github.com/pandas-dev/pandas/issues/7762)、[GH 7032](https://github.com/pandas-dev/pandas/issues/7032)）。  ###
    删除之前版本的弃用/更改'
- en: 'Remove `DataFrame.delevel` method in favor of `DataFrame.reset_index`  ###
    Breaking changes'
  id: totrans-738
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '删除`DataFrame.delevel`方法，改用`DataFrame.reset_index`  ### 重大变更'
- en: 'API changes related to `Categorical` (see [here](#whatsnew-0150-cat) for more
    details):'
  id: totrans-739
  prefs: []
  type: TYPE_NORMAL
  zh: 与`Categorical`相关的API更改（有关更多详细信息，请参见[此处](#whatsnew-0150-cat)）：
- en: The `Categorical` constructor with two arguments changed from “codes/labels
    and levels” to “values and levels (now called ‘categories’)”. This can lead to
    subtle bugs. If you use [`Categorical`](../reference/api/pandas.Categorical.html#pandas.Categorical
    "pandas.Categorical") directly, please audit your code by changing it to use the
    [`from_codes()`](../reference/api/pandas.Categorical.from_codes.html#pandas.Categorical.from_codes
    "pandas.Categorical.from_codes") constructor.
  id: totrans-740
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Categorical`构造函数的两个参数从“codes/labels和levels”更改为“值和levels（现在称为‘categories’）”。这可能会导致微妙的错误。如果直接使用[`Categorical`](../reference/api/pandas.Categorical.html#pandas.Categorical
    "pandas.Categorical")，请通过将其更改为使用[`from_codes()`](../reference/api/pandas.Categorical.from_codes.html#pandas.Categorical.from_codes
    "pandas.Categorical.from_codes")构造函数来审查代码。'
- en: 'An old function call like (prior to 0.15.0):'
  id: totrans-741
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 老的函数调用（在 0.15.0 之前）：
- en: '[PRE147]'
  id: totrans-742
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE147]'
- en: 'will have to adapted to the following to keep the same behaviour:'
  id: totrans-743
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 将必须适应以下内容以保持相同的行为：
- en: '[PRE148]'
  id: totrans-744
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE148]'
- en: 'API changes related to the introduction of the `Timedelta` scalar (see [above](#whatsnew-0150-timedeltaindex)
    for more details):'
  id: totrans-745
  prefs: []
  type: TYPE_NORMAL
  zh: 与`Timedelta`标量的引入相关的API更改（有关更多详细信息，请参见[上文](#whatsnew-0150-timedeltaindex)）：
- en: Prior to 0.15.0 [`to_timedelta()`](../reference/api/pandas.to_timedelta.html#pandas.to_timedelta
    "pandas.to_timedelta") would return a `Series` for list-like/Series input, and
    a `np.timedelta64` for scalar input. It will now return a `TimedeltaIndex` for
    list-like input, `Series` for Series input, and `Timedelta` for scalar input.
  id: totrans-746
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 0.15.0 之前，[`to_timedelta()`](../reference/api/pandas.to_timedelta.html#pandas.to_timedelta
    "pandas.to_timedelta")对于类似列表的/系列输入会返回一个`Series`，对于标量输入会返回一个`np.timedelta64`。现在，对于类似列表的输入，将返回一个`TimedeltaIndex`，对于系列输入，将返回一个`Series`，对于标量输入将返回一个`Timedelta`。
- en: For API changes related to the rolling and expanding functions, see detailed
    overview [above](#whatsnew-0150-roll).
  id: totrans-747
  prefs: []
  type: TYPE_NORMAL
  zh: 有关滚动和扩展函数的API更改，请参见[上文](#whatsnew-0150-roll)中的详细概述。
- en: 'Other notable API changes:'
  id: totrans-748
  prefs: []
  type: TYPE_NORMAL
  zh: 其他显著的API更改：
- en: Consistency when indexing with `.loc` and a list-like indexer when no values
    are found.
  id: totrans-749
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当使用`.loc`和类似列表的索引器进行索引时，如果找不到值，则保持一致性。
- en: '[PRE149]'
  id: totrans-750
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE149]'
- en: 'In prior versions there was a difference in these two constructs:'
  id: totrans-751
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在之前的版本中，这两种结构有区别：
- en: '`df.loc[[3]]` would return a frame reindexed by 3 (with all `np.nan` values)'
  id: totrans-752
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`df.loc[[3]]`会返回由3重新索引的数据框（所有值为`np.nan`）。'
- en: '`df.loc[[3],:]` would raise `KeyError`.'
  id: totrans-753
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`df.loc[[3],:]`会引发`KeyError`。'
- en: Both will now raise a `KeyError`. The rule is that *at least 1* indexer must
    be found when using a list-like and `.loc` ([GH 7999](https://github.com/pandas-dev/pandas/issues/7999))
  id: totrans-754
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 当使用类似列表的索引器和`.loc`时，**至少要找到 1 个**索引器，否则会引发`KeyError`（[GH 7999](https://github.com/pandas-dev/pandas/issues/7999)）。
- en: 'Furthermore in prior versions these were also different:'
  id: totrans-755
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此外，在之前的版本中，这两者也是不同的：
- en: '`df.loc[[1,3]]` would return a frame reindexed by [1,3]'
  id: totrans-756
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`df.loc[[1,3]]`会返回一个由[1,3]重新索引的数据框。'
- en: '`df.loc[[1,3],:]` would raise `KeyError`.'
  id: totrans-757
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`df.loc[[1,3],:]`会引发`KeyError`。'
- en: Both will now return a frame reindex by [1,3]. E.g.
  id: totrans-758
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 现在两者都会返回由[1,3]重新索引的数据框。例如：
- en: '[PRE150]'
  id: totrans-759
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE150]'
- en: This can also be seen in multi-axis indexing with a `Panel`.
  id: totrans-760
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这在使用`Panel`进行多轴索引时也可以看到。
- en: '[PRE151]'
  id: totrans-761
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE151]'
- en: 'The following would raise `KeyError` prior to 0.15.0:'
  id: totrans-762
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在 0.15.0 之前，以下操作会引发`KeyError`：
- en: '[PRE152]'
  id: totrans-763
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE152]'
- en: 'Furthermore, `.loc` will raise If no values are found in a MultiIndex with
    a list-like indexer:'
  id: totrans-764
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此外，如果在具有类似列表的索引器的MultiIndex中找不到值，`.loc`会引发异常：
- en: '[PRE153]'
  id: totrans-765
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE153]'
- en: Assigning values to `None` now considers the dtype when choosing an ‘empty’
    value ([GH 7941](https://github.com/pandas-dev/pandas/issues/7941)).
  id: totrans-766
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当选择“空”值时，现在会考虑dtype（[GH 7941](https://github.com/pandas-dev/pandas/issues/7941)）。
- en: 'Previously, assigning to `None` in numeric containers changed the dtype to
    object (or errored, depending on the call). It now uses `NaN`:'
  id: totrans-767
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 以前，在数字容器中将值分配给`None`会将dtype更改为对象（或者，根据调用方式，会引发错误）。现在它使用`NaN`：
- en: '[PRE154]'
  id: totrans-768
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE154]'
- en: '`NaT` is now used similarly for datetime containers.'
  id: totrans-769
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`NaT`现在在日期时间容器中也类似使用。'
- en: For object containers, we now preserve `None` values (previously these were
    converted to `NaN` values).
  id: totrans-770
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于对象容器��我们现在保留`None`值（以前这些值被转换为`NaN`值）。
- en: '[PRE155]'
  id: totrans-771
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE155]'
- en: To insert a `NaN`, you must explicitly use `np.nan`. See the [docs](../user_guide/missing_data.html#missing-inserting).
  id: totrans-772
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 要插入一个`NaN`，必须明确使用`np.nan`。请参阅[文档](../user_guide/missing_data.html#missing-inserting)。
- en: In prior versions, updating a pandas object inplace would not reflect in other
    python references to this object. ([GH 8511](https://github.com/pandas-dev/pandas/issues/8511),
    [GH 5104](https://github.com/pandas-dev/pandas/issues/5104))
  id: totrans-773
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在之前的版本中，就地更新pandas对象不会反映在对该对象的其他python引用中。([GH 8511](https://github.com/pandas-dev/pandas/issues/8511)，[GH
    5104](https://github.com/pandas-dev/pandas/issues/5104))
- en: '[PRE156]'
  id: totrans-774
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE156]'
- en: Behavior prior to v0.15.0
  id: totrans-775
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: v0.15.0之前的行为
- en: '[PRE157]'
  id: totrans-776
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE157]'
- en: This is now the correct behavior
  id: totrans-777
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这现在是正确的行为
- en: '[PRE158]'
  id: totrans-778
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE158]'
- en: Made both the C-based and Python engines for `read_csv` and `read_table` ignore
    empty lines in input as well as white space-filled lines, as long as `sep` is
    not white space. This is an API change that can be controlled by the keyword parameter
    `skip_blank_lines`. See [the docs](../user_guide/io.html#io-skiplines) ([GH 4466](https://github.com/pandas-dev/pandas/issues/4466))
  id: totrans-779
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使基于C和Python的`read_csv`和`read_table`引擎忽略输入中的空行以及填充有空格的行，只要`sep`不是空格。这是一个可以通过关键字参数`skip_blank_lines`控制的API更改。请参阅[文档](../user_guide/io.html#io-skiplines)
    ([GH 4466](https://github.com/pandas-dev/pandas/issues/4466))
- en: A timeseries/index localized to UTC when inserted into a Series/DataFrame will
    preserve the UTC timezone and inserted as `object` dtype rather than being converted
    to a naive `datetime64[ns]` ([GH 8411](https://github.com/pandas-dev/pandas/issues/8411)).
  id: totrans-780
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将插入Series/DataFrame的时间序列/索引本地化为UTC时，将保留UTC时区，并插入为`object`类型，而不是转换为一个无时区的`datetime64[ns]`（[GH
    8411](https://github.com/pandas-dev/pandas/issues/8411)）。
- en: Bug in passing a `DatetimeIndex` with a timezone that was not being retained
    in DataFrame construction from a dict ([GH 7822](https://github.com/pandas-dev/pandas/issues/7822))
  id: totrans-781
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在从字典构建DataFrame时，传递具有未保留的时区的时区的`DatetimeIndex`的bug（[GH 7822](https://github.com/pandas-dev/pandas/issues/7822）
- en: 'In prior versions this would drop the timezone, now it retains the timezone,
    but gives a column of `object` dtype:'
  id: totrans-782
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在之前的版本中，这将丢弃时区，现在保留时区，但会给出一个`object`类型的列：
- en: '[PRE159]'
  id: totrans-783
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE159]'
- en: Previously this would have yielded a column of `datetime64` dtype, but without
    timezone info.
  id: totrans-784
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 以前，这将产生一个带有时区信息的`datetime64` dtype列。
- en: The behaviour of assigning a column to an existing dataframe as `df['a'] = i`
    remains unchanged (this already returned an `object` column with a timezone).
  id: totrans-785
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 将列分配给现有DataFrame的行为为`df['a'] = i`保持不变（这已经返回了一个带有时区的`object`列）。
- en: When passing multiple levels to [`stack()`](../reference/api/pandas.DataFrame.stack.html#pandas.DataFrame.stack
    "pandas.DataFrame.stack"), it will now raise a `ValueError` when the levels aren’t
    all level names or all level numbers ([GH 7660](https://github.com/pandas-dev/pandas/issues/7660)).
    See [Reshaping by stacking and unstacking](../user_guide/reshaping.html#reshaping-stack-multiple).
  id: totrans-786
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当向[`stack()`](../reference/api/pandas.DataFrame.stack.html#pandas.DataFrame.stack
    "pandas.DataFrame.stack")传递多个级别时，如果级别不全是级别名称或全是级别数字，则现在会引发`ValueError`（[GH 7660](https://github.com/pandas-dev/pandas/issues/7660)）。请参阅[通过堆叠和取消堆叠进行重塑](../user_guide/reshaping.html#reshaping-stack-multiple)。
- en: Raise a `ValueError` in `df.to_hdf` with ‘fixed’ format, if `df` has non-unique
    columns as the resulting file will be broken ([GH 7761](https://github.com/pandas-dev/pandas/issues/7761))
  id: totrans-787
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在使用‘fixed’格式的`df.to_hdf`中，如果`df`具有非唯一列，则会引发`ValueError`，因为生成的文件将损坏（[GH 7761](https://github.com/pandas-dev/pandas/issues/7761)）
- en: '`SettingWithCopy` raise/warnings (according to the option `mode.chained_assignment`)
    will now be issued when setting a value on a sliced mixed-dtype DataFrame using
    chained-assignment. ([GH 7845](https://github.com/pandas-dev/pandas/issues/7845),
    [GH 7950](https://github.com/pandas-dev/pandas/issues/7950))'
  id: totrans-788
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用链式赋值设置切片的混合dtype DataFrame上设置值时，`SettingWithCopy`会根据选项`mode.chained_assignment`发出警告/提醒。([GH
    7845](https://github.com/pandas-dev/pandas/issues/7845)，[GH 7950](https://github.com/pandas-dev/pandas/issues/7950))
- en: '[PRE160]'
  id: totrans-789
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE160]'
- en: '`merge`, `DataFrame.merge`, and `ordered_merge` now return the same type as
    the `left` argument ([GH 7737](https://github.com/pandas-dev/pandas/issues/7737)).'
  id: totrans-790
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`merge`，`DataFrame.merge`和`ordered_merge`现在返回与`left`参数相同的类型（[GH 7737](https://github.com/pandas-dev/pandas/issues/7737)）。'
- en: 'Previously an enlargement with a mixed-dtype frame would act unlike `.append`
    which will preserve dtypes (related [GH 2578](https://github.com/pandas-dev/pandas/issues/2578),
    [GH 8176](https://github.com/pandas-dev/pandas/issues/8176)):'
  id: totrans-791
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 以前，使用混合dtype框架进行扩展的行为与`.append`不同，后者将保留dtype（相关[GH 2578](https://github.com/pandas-dev/pandas/issues/2578)，[GH
    8176](https://github.com/pandas-dev/pandas/issues/8176)）：
- en: '[PRE161]'
  id: totrans-792
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE161]'
- en: '`Series.to_csv()` now returns a string when `path=None`, matching the behaviour
    of `DataFrame.to_csv()` ([GH 8215](https://github.com/pandas-dev/pandas/issues/8215)).'
  id: totrans-793
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Series.to_csv()` 现在在 `path=None` 时返回一个字符串，与 `DataFrame.to_csv()` 的行为匹配 ([GH
    8215](https://github.com/pandas-dev/pandas/issues/8215)).'
- en: '`read_hdf` now raises `IOError` when a file that doesn’t exist is passed in.
    Previously, a new, empty file was created, and a `KeyError` raised ([GH 7715](https://github.com/pandas-dev/pandas/issues/7715)).'
  id: totrans-794
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当传递不存在的文件时，`read_hdf` 现在会引发 `IOError`。之前，会创建一个新的空文件，并引发 `KeyError` ([GH 7715](https://github.com/pandas-dev/pandas/issues/7715)).
- en: '`DataFrame.info()` now ends its output with a newline character ([GH 8114](https://github.com/pandas-dev/pandas/issues/8114))'
  id: totrans-795
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.info()` 现在在输出末尾添加了一个换行符 ([GH 8114](https://github.com/pandas-dev/pandas/issues/8114))'
- en: Concatenating no objects will now raise a `ValueError` rather than a bare `Exception`.
  id: totrans-796
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 连接没有对象现在会引发 `ValueError` 而不是裸露的 `Exception`。
- en: Merge errors will now be sub-classes of `ValueError` rather than raw `Exception`
    ([GH 8501](https://github.com/pandas-dev/pandas/issues/8501))
  id: totrans-797
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 合并错误现在将是 `ValueError` 的子类，而不是原始的 `Exception` ([GH 8501](https://github.com/pandas-dev/pandas/issues/8501))
- en: '`DataFrame.plot` and `Series.plot` keywords are now have consistent orders
    ([GH 8037](https://github.com/pandas-dev/pandas/issues/8037))'
  id: totrans-798
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.plot` 和 `Series.plot` 的关键字现在具有一致的顺序 ([GH 8037](https://github.com/pandas-dev/pandas/issues/8037))'
- en: '### Internal refactoring'
  id: totrans-799
  prefs: []
  type: TYPE_NORMAL
  zh: '### 内部重构'
- en: 'In 0.15.0 `Index` has internally been refactored to no longer sub-class `ndarray`
    but instead subclass `PandasObject`, similarly to the rest of the pandas objects.
    This change allows very easy sub-classing and creation of new index types. This
    should be a transparent change with only very limited API implications ([GH 5080](https://github.com/pandas-dev/pandas/issues/5080),
    [GH 7439](https://github.com/pandas-dev/pandas/issues/7439), [GH 7796](https://github.com/pandas-dev/pandas/issues/7796),
    [GH 8024](https://github.com/pandas-dev/pandas/issues/8024), [GH 8367](https://github.com/pandas-dev/pandas/issues/8367),
    [GH 7997](https://github.com/pandas-dev/pandas/issues/7997), [GH 8522](https://github.com/pandas-dev/pandas/issues/8522)):'
  id: totrans-800
  prefs: []
  type: TYPE_NORMAL
  zh: '在 0.15.0 版本中，`Index` 在内部已经被重构，不再是 `ndarray` 的子类，而是 `PandasObject` 的子类，与 pandas
    的其他对象类似。这个改变使得非常容易创建新的索引类型。这应该是一个透明的改变，只有非常有限的 API 影响 ([GH 5080](https://github.com/pandas-dev/pandas/issues/5080),
    [GH 7439](https://github.com/pandas-dev/pandas/issues/7439), [GH 7796](https://github.com/pandas-dev/pandas/issues/7796),
    [GH 8024](https://github.com/pandas-dev/pandas/issues/8024), [GH 8367](https://github.com/pandas-dev/pandas/issues/8367),
    [GH 7997](https://github.com/pandas-dev/pandas/issues/7997), [GH 8522](https://github.com/pandas-dev/pandas/issues/8522)):'
- en: you may need to unpickle pandas version < 0.15.0 pickles using `pd.read_pickle`
    rather than `pickle.load`. See [pickle docs](../user_guide/io.html#io-pickle)
  id: totrans-801
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您可能需要使用 `pd.read_pickle` 而不是 `pickle.load` 来解除序列化 pandas 版本 < 0.15.0 的 pickle。请参阅
    [pickle 文档](../user_guide/io.html#io-pickle)
- en: when plotting with a `PeriodIndex`, the matplotlib internal axes will now be
    arrays of `Period` rather than a `PeriodIndex` (this is similar to how a `DatetimeIndex`
    passes arrays of `datetimes` now)
  id: totrans-802
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当使用 `PeriodIndex` 绘图时，matplotlib 内部的坐标轴现在将是 `Period` 的数组，而不是 `PeriodIndex`（这类似于
    `DatetimeIndex` 现在传递 `datetimes` 数组的方式）
- en: MultiIndexes will now raise similarly to other pandas objects w.r.t. truth testing,
    see [here](../user_guide/gotchas.html#gotchas-truth) ([GH 7897](https://github.com/pandas-dev/pandas/issues/7897)).
  id: totrans-803
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: MultiIndexes 现在将与其他 pandas 对象类似地引发关于真值测试的异常，请参见 [这里](../user_guide/gotchas.html#gotchas-truth)
    ([GH 7897](https://github.com/pandas-dev/pandas/issues/7897)).
- en: When plotting a DatetimeIndex directly with matplotlib’s `plot` function, the
    axis labels will no longer be formatted as dates but as integers (the internal
    representation of a `datetime64`). **UPDATE** This is fixed in 0.15.1, see [here](v0.15.1.html#whatsnew-0151-datetime64-plotting).
  id: totrans-804
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 直接使用 matplotlib 的 `plot` 函数绘制 DatetimeIndex 时，轴标签将不再格式化为日期，而是整数（`datetime64`
    的内部表示）。 **更新** 这在 0.15.1 版本中已修复，参见 [这里](v0.15.1.html#whatsnew-0151-datetime64-plotting).
- en: '### Deprecations'
  id: totrans-805
  prefs: []
  type: TYPE_NORMAL
  zh: '### 弃用'
- en: The attributes `Categorical` `labels` and `levels` attributes are deprecated
    and renamed to `codes` and `categories`.
  id: totrans-806
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Categorical` 的 `labels` 和 `levels` 属性已被弃用，并更名为 `codes` 和 `categories`.'
- en: The `outtype` argument to `pd.DataFrame.to_dict` has been deprecated in favor
    of `orient`. ([GH 7840](https://github.com/pandas-dev/pandas/issues/7840))
  id: totrans-807
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pd.DataFrame.to_dict` 的 `outtype` 参数已被弃用，推荐使用 `orient`。 ([GH 7840](https://github.com/pandas-dev/pandas/issues/7840))'
- en: The `convert_dummies` method has been deprecated in favor of `get_dummies` ([GH
    8140](https://github.com/pandas-dev/pandas/issues/8140))
  id: totrans-808
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`convert_dummies` 方法已被弃用，推荐使用 `get_dummies` ([GH 8140](https://github.com/pandas-dev/pandas/issues/8140))'
- en: The `infer_dst` argument in `tz_localize` will be deprecated in favor of `ambiguous`
    to allow for more flexibility in dealing with DST transitions. Replace `infer_dst=True`
    with `ambiguous='infer'` for the same behavior ([GH 7943](https://github.com/pandas-dev/pandas/issues/7943)).
    See [the docs](../user_guide/timeseries.html#timeseries-timezone-ambiguous) for
    more details.
  id: totrans-809
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `tz_localize` 中，`infer_dst` 参数将被弃用，以支持 `ambiguous` 参数，以便更灵活地处理 DST 过渡。将 `infer_dst=True`
    替换为 `ambiguous='infer'` 可以实现相同的行为 ([GH 7943](https://github.com/pandas-dev/pandas/issues/7943))。详细信息请参见[文档](../user_guide/timeseries.html#timeseries-timezone-ambiguous)。
- en: The top-level `pd.value_range` has been deprecated and can be replaced by `.describe()`
    ([GH 8481](https://github.com/pandas-dev/pandas/issues/8481))
  id: totrans-810
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 顶层 `pd.value_range` 已弃用，可以用 `.describe()` 替代 ([GH 8481](https://github.com/pandas-dev/pandas/issues/8481))
- en: The `Index` set operations `+` and `-` were deprecated in order to provide these
    for numeric type operations on certain index types. `+` can be replaced by `.union()`
    or `|`, and `-` by `.difference()`. Further the method name `Index.diff()` is
    deprecated and can be replaced by `Index.difference()` ([GH 8226](https://github.com/pandas-dev/pandas/issues/8226))
  id: totrans-811
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Index` 的集合操作 `+` 和 `-` 已弃用，以便在某些索引类型上提供数值类型操作。`+` 可以用 `.union()` 或 `|` 替换，`-`
    可以用 `.difference()` 替换。此外，`Index.diff()` 方法名称已弃用，可以用 `Index.difference()` 替换 ([GH
    8226](https://github.com/pandas-dev/pandas/issues/8226))'
- en: '[PRE162]'
  id: totrans-812
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE162]'
- en: '[PRE163]'
  id: totrans-813
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE163]'
- en: The `infer_types` argument to [`read_html()`](../reference/api/pandas.read_html.html#pandas.read_html
    "pandas.read_html") now has no effect and is deprecated ([GH 7762](https://github.com/pandas-dev/pandas/issues/7762),
    [GH 7032](https://github.com/pandas-dev/pandas/issues/7032)).
  id: totrans-814
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`read_html()`](../reference/api/pandas.read_html.html#pandas.read_html "pandas.read_html")
    的 `infer_types` 参数现在不再起作用，已弃用 ([GH 7762](https://github.com/pandas-dev/pandas/issues/7762),
    [GH 7032](https://github.com/pandas-dev/pandas/issues/7032)).'
- en: '### Removal of prior version deprecations/changes'
  id: totrans-815
  prefs: []
  type: TYPE_NORMAL
  zh: '### 移除之前版本的弃用/更改'
- en: Remove `DataFrame.delevel` method in favor of `DataFrame.reset_index`
  id: totrans-816
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 删除 `DataFrame.delevel` 方法，使用 `DataFrame.reset_index` 替代
- en: '## Enhancements'
  id: totrans-817
  prefs: []
  type: TYPE_NORMAL
  zh: '## 增强功能'
- en: 'Enhancements in the importing/exporting of Stata files:'
  id: totrans-818
  prefs: []
  type: TYPE_NORMAL
  zh: Stata 文件的导入/导出中的增强功能：
- en: Added support for bool, uint8, uint16 and uint32 data types in `to_stata` ([GH
    7097](https://github.com/pandas-dev/pandas/issues/7097), [GH 7365](https://github.com/pandas-dev/pandas/issues/7365))
  id: totrans-819
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `to_stata` 中添加了对 bool、uint8、uint16 和 uint32 数据类型的支持 ([GH 7097](https://github.com/pandas-dev/pandas/issues/7097),
    [GH 7365](https://github.com/pandas-dev/pandas/issues/7365))
- en: Added conversion option when importing Stata files ([GH 8527](https://github.com/pandas-dev/pandas/issues/8527))
  id: totrans-820
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在导入 Stata 文件时添加转换选项 ([GH 8527](https://github.com/pandas-dev/pandas/issues/8527))
- en: '`DataFrame.to_stata` and `StataWriter` check string length for compatibility
    with limitations imposed in dta files where fixed-width strings must contain 244
    or fewer characters. Attempting to write Stata dta files with strings longer than
    244 characters raises a `ValueError`. ([GH 7858](https://github.com/pandas-dev/pandas/issues/7858))'
  id: totrans-821
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.to_stata` 和 `StataWriter` 会检查字符串长度，以确保与 dta 文件中的限制相容，其中固定宽度字符串必须包含
    244 个或更少字符。尝试写入超过 244 个字符的字符串的 Stata dta 文件会引发 `ValueError`。([GH 7858](https://github.com/pandas-dev/pandas/issues/7858))'
- en: '`read_stata` and `StataReader` can import missing data information into a `DataFrame`
    by setting the argument `convert_missing` to `True`. When using this options,
    missing values are returned as `StataMissingValue` objects and columns containing
    missing values have `object` data type. ([GH 8045](https://github.com/pandas-dev/pandas/issues/8045))'
  id: totrans-822
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`read_stata` 和 `StataReader` 可以通过将 `convert_missing` 参数设置为 `True` 将缺失数据信息导入到
    `DataFrame` 中。在使用此选项时，缺失值将作为 `StataMissingValue` 对象返回，包含缺失值的列将具有 `object` 数据类型。
    ([GH 8045](https://github.com/pandas-dev/pandas/issues/8045))'
- en: 'Enhancements in the plotting functions:'
  id: totrans-823
  prefs: []
  type: TYPE_NORMAL
  zh: 绘图函数的增强功能：
- en: Added `layout` keyword to `DataFrame.plot`. You can pass a tuple of `(rows,
    columns)`, one of which can be `-1` to automatically infer ([GH 6667](https://github.com/pandas-dev/pandas/issues/6667),
    [GH 8071](https://github.com/pandas-dev/pandas/issues/8071)).
  id: totrans-824
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `DataFrame.plot` 中添加了 `layout` 关键字。你可以传递一个元组 `(rows, columns)`，其中之一可以为 `-1`，以自动推断。([GH
    6667](https://github.com/pandas-dev/pandas/issues/6667), [GH 8071](https://github.com/pandas-dev/pandas/issues/8071))
- en: Allow to pass multiple axes to `DataFrame.plot`, `hist` and `boxplot` ([GH 5353](https://github.com/pandas-dev/pandas/issues/5353),
    [GH 6970](https://github.com/pandas-dev/pandas/issues/6970), [GH 7069](https://github.com/pandas-dev/pandas/issues/7069))
  id: totrans-825
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许将多个轴传递给 `DataFrame.plot`, `hist` 和 `boxplot` ([GH 5353](https://github.com/pandas-dev/pandas/issues/5353),
    [GH 6970](https://github.com/pandas-dev/pandas/issues/6970), [GH 7069](https://github.com/pandas-dev/pandas/issues/7069))
- en: Added support for `c`, `colormap` and `colorbar` arguments for `DataFrame.plot`
    with `kind='scatter'` ([GH 7780](https://github.com/pandas-dev/pandas/issues/7780))
  id: totrans-826
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为`DataFrame.plot`中的`kind='scatter'`添加了对`c`、`colormap`和`colorbar`参数的支持 ([GH 7780](https://github.com/pandas-dev/pandas/issues/7780))
- en: Histogram from `DataFrame.plot` with `kind='hist'` ([GH 7809](https://github.com/pandas-dev/pandas/issues/7809)),
    See [the docs](../user_guide/visualization.html#visualization-hist).
  id: totrans-827
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从`DataFrame.plot`中的直方图，使用`kind='hist'` ([GH 7809](https://github.com/pandas-dev/pandas/issues/7809))，参见[文档](../user_guide/visualization.html#visualization-hist)。
- en: Boxplot from `DataFrame.plot` with `kind='box'` ([GH 7998](https://github.com/pandas-dev/pandas/issues/7998)),
    See [the docs](../user_guide/visualization.html#visualization-box).
  id: totrans-828
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从`DataFrame.plot`中的箱线图，使用`kind='box'` ([GH 7998](https://github.com/pandas-dev/pandas/issues/7998))，参见[文档](../user_guide/visualization.html#visualization-box)。
- en: 'Other:'
  id: totrans-829
  prefs: []
  type: TYPE_NORMAL
  zh: 其他：
- en: '`read_csv` now has a keyword parameter `float_precision` which specifies which
    floating-point converter the C engine should use during parsing, see [here](../user_guide/io.html#io-float-precision)
    ([GH 8002](https://github.com/pandas-dev/pandas/issues/8002), [GH 8044](https://github.com/pandas-dev/pandas/issues/8044))'
  id: totrans-830
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`read_csv`现在有一个关键参数`float_precision`，指定C引擎在解析过程中应使用哪种浮点转换器，参见[这里](../user_guide/io.html#io-float-precision)
    ([GH 8002](https://github.com/pandas-dev/pandas/issues/8002), [GH 8044](https://github.com/pandas-dev/pandas/issues/8044))'
- en: Added `searchsorted` method to `Series` objects ([GH 7447](https://github.com/pandas-dev/pandas/issues/7447))
  id: totrans-831
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 向`Series`对象添加了`searchsorted`方法 ([GH 7447](https://github.com/pandas-dev/pandas/issues/7447))
- en: '`describe()` on mixed-types DataFrames is more flexible. Type-based column
    filtering is now possible via the `include`/`exclude` arguments. See the [docs](../user_guide/basics.html#basics-describe)
    ([GH 8164](https://github.com/pandas-dev/pandas/issues/8164)).'
  id: totrans-832
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 混合类型的DataFrame上的`describe()`更加灵活。现在可以通过`include`/`exclude`参数实现基于类型的列过滤。参见[文档](../user_guide/basics.html#basics-describe)
    ([GH 8164](https://github.com/pandas-dev/pandas/issues/8164))。
- en: '[PRE164]'
  id: totrans-833
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE164]'
- en: Requesting all columns is possible with the shorthand ‘all’
  id: totrans-834
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 使用简写‘all’可以请求所有列
- en: '[PRE165]'
  id: totrans-835
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE165]'
- en: Without those arguments, `describe` will behave as before, including only numerical
    columns or, if none are, only categorical columns. See also the [docs](../user_guide/basics.html#basics-describe)
  id: totrans-836
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 没有这些参数，`describe`将像以前一样运行，只包括数值列或者如果没有数值列，则只包括分类列。另请参阅[文档](../user_guide/basics.html#basics-describe)
- en: Added `split` as an option to the `orient` argument in `pd.DataFrame.to_dict`.
    ([GH 7840](https://github.com/pandas-dev/pandas/issues/7840))
  id: totrans-837
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`pd.DataFrame.to_dict`的`orient`参数中，添加了`split`作为一个选项。 ([GH 7840](https://github.com/pandas-dev/pandas/issues/7840))
- en: The `get_dummies` method can now be used on DataFrames. By default only categorical
    columns are encoded as 0’s and 1’s, while other columns are left untouched.
  id: totrans-838
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`get_dummies`方法现在可以用于DataFrame。默认情况下，只有分类列被编码为0和1，而其他列保持不变。'
- en: '[PRE166]'
  id: totrans-839
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE166]'
- en: '`PeriodIndex` supports `resolution` as the same as `DatetimeIndex` ([GH 7708](https://github.com/pandas-dev/pandas/issues/7708))'
  id: totrans-840
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`PeriodIndex`支持`resolution`与`DatetimeIndex`相同 ([GH 7708](https://github.com/pandas-dev/pandas/issues/7708))'
- en: '`pandas.tseries.holiday` has added support for additional holidays and ways
    to observe holidays ([GH 7070](https://github.com/pandas-dev/pandas/issues/7070))'
  id: totrans-841
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pandas.tseries.holiday`已经添加了对额外节假日和观察节假日方式的支持 ([GH 7070](https://github.com/pandas-dev/pandas/issues/7070))'
- en: '`pandas.tseries.holiday.Holiday` now supports a list of offsets in Python3
    ([GH 7070](https://github.com/pandas-dev/pandas/issues/7070))'
  id: totrans-842
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pandas.tseries.holiday.Holiday`现在在Python3中支持偏移列表 ([GH 7070](https://github.com/pandas-dev/pandas/issues/7070))'
- en: '`pandas.tseries.holiday.Holiday` now supports a days_of_week parameter ([GH
    7070](https://github.com/pandas-dev/pandas/issues/7070))'
  id: totrans-843
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pandas.tseries.holiday.Holiday`现在支持一个`days_of_week`参数 ([GH 7070](https://github.com/pandas-dev/pandas/issues/7070))'
- en: '`GroupBy.nth()` now supports selecting multiple nth values ([GH 7910](https://github.com/pandas-dev/pandas/issues/7910))'
  id: totrans-844
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`GroupBy.nth()`现在支持选择多个第n个值 ([GH 7910](https://github.com/pandas-dev/pandas/issues/7910))'
- en: '[PRE167]'
  id: totrans-845
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE167]'
- en: '`Period` and `PeriodIndex` supports addition/subtraction with `timedelta`-likes
    ([GH 7966](https://github.com/pandas-dev/pandas/issues/7966))'
  id: totrans-846
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Period`和`PeriodIndex`支持与`timedelta`类似的加法/减法 ([GH 7966](https://github.com/pandas-dev/pandas/issues/7966))'
- en: If `Period` freq is `D`, `H`, `T`, `S`, `L`, `U`, `N`, `Timedelta`-like can
    be added if the result can have same freq. Otherwise, only the same `offsets`
    can be added.
  id: totrans-847
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果`Period`频率是`D`、`H`、`T`、`S`、`L`、`U`、`N`，则如果结果具有相同的频率，则可以添加类似于`Timedelta`的内容。否则，只能添加相同的`offsets`。
- en: '[PRE168]'
  id: totrans-848
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE168]'
- en: Added experimental compatibility with `openpyxl` for versions >= 2.0\. The `DataFrame.to_excel`
    method `engine` keyword now recognizes `openpyxl1` and `openpyxl2` which will
    explicitly require openpyxl v1 and v2 respectively, failing if the requested version
    is not available. The `openpyxl` engine is a now a meta-engine that automatically
    uses whichever version of openpyxl is installed. ([GH 7177](https://github.com/pandas-dev/pandas/issues/7177))
  id: totrans-849
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加与`openpyxl`版本>= 2.0的实验性兼容性。`DataFrame.to_excel`方法的`engine`关键字现在识别`openpyxl1`和`openpyxl2`，分别明确要求openpyxl
    v1和v2，如果请求的版本不可用，则失败。`openpyxl`引擎现在是一个元引擎，自动使用已安装的openpyxl版本（[GH 7177](https://github.com/pandas-dev/pandas/issues/7177)）
- en: '`DataFrame.fillna` can now accept a `DataFrame` as a fill value ([GH 8377](https://github.com/pandas-dev/pandas/issues/8377))'
  id: totrans-850
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.fillna`现在可以接受`DataFrame`作为填充值（[GH 8377](https://github.com/pandas-dev/pandas/issues/8377)）'
- en: Passing multiple levels to [`stack()`](../reference/api/pandas.DataFrame.stack.html#pandas.DataFrame.stack
    "pandas.DataFrame.stack") will now work when multiple level numbers are passed
    ([GH 7660](https://github.com/pandas-dev/pandas/issues/7660)). See [Reshaping
    by stacking and unstacking](../user_guide/reshaping.html#reshaping-stack-multiple).
  id: totrans-851
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将多个级别传递给[`stack()`](../reference/api/pandas.DataFrame.stack.html#pandas.DataFrame.stack
    "pandas.DataFrame.stack")现在可以在传递多个级别编号时正常工作（[GH 7660](https://github.com/pandas-dev/pandas/issues/7660)）。请参阅[通过堆叠和取消堆叠进行重塑](../user_guide/reshaping.html#reshaping-stack-multiple)。
- en: '`set_names()`, `set_labels()`, and `set_levels()` methods now take an optional
    `level` keyword argument to all modification of specific level(s) of a MultiIndex.
    Additionally `set_names()` now accepts a scalar string value when operating on
    an `Index` or on a specific level of a `MultiIndex` ([GH 7792](https://github.com/pandas-dev/pandas/issues/7792))'
  id: totrans-852
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`set_names()`，`set_labels()`和`set_levels()`方法现在接受一个可选的`level`关键字参数，以修改多级索引的特定级别。此外，当在`Index`上操作或在`MultiIndex`的特定级别上操作时，`set_names()`现在接受标量字符串值（[GH
    7792](https://github.com/pandas-dev/pandas/issues/7792)）'
- en: '[PRE169]'
  id: totrans-853
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE169]'
- en: '`Index.isin` now supports a `level` argument to specify which index level to
    use for membership tests ([GH 7892](https://github.com/pandas-dev/pandas/issues/7892),
    [GH 7890](https://github.com/pandas-dev/pandas/issues/7890))'
  id: totrans-854
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Index.isin`现在支持`level`参数，用于指定要用于成员测试的索引级别（[GH 7892](https://github.com/pandas-dev/pandas/issues/7892)，[GH
    7890](https://github.com/pandas-dev/pandas/issues/7890)）'
- en: '[PRE170]'
  id: totrans-855
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE170]'
- en: '`Index` now supports `duplicated` and `drop_duplicates`. ([GH 4060](https://github.com/pandas-dev/pandas/issues/4060))'
  id: totrans-856
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Index`现在支持`duplicated`和`drop_duplicates`（[GH 4060](https://github.com/pandas-dev/pandas/issues/4060)）'
- en: '[PRE171]'
  id: totrans-857
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE171]'
- en: add `copy=True` argument to `pd.concat` to enable pass through of complete blocks
    ([GH 8252](https://github.com/pandas-dev/pandas/issues/8252))
  id: totrans-858
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`pd.concat`中添加`copy=True`参数，以便通过完整块进行传递（[GH 8252](https://github.com/pandas-dev/pandas/issues/8252)）
- en: Added support for numpy 1.8+ data types (`bool_`, `int_`, `float_`, `string_`)
    for conversion to R dataframe ([GH 8400](https://github.com/pandas-dev/pandas/issues/8400))
  id: totrans-859
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加对numpy 1.8+数据类型（`bool_`，`int_`，`float_`，`string_`）的支持，以便转换为R dataframe（[GH
    8400](https://github.com/pandas-dev/pandas/issues/8400)）
- en: '## Performance'
  id: totrans-860
  prefs: []
  type: TYPE_NORMAL
  zh: '## 性能'
- en: Performance improvements in `DatetimeIndex.__iter__` to allow faster iteration
    ([GH 7683](https://github.com/pandas-dev/pandas/issues/7683))
  id: totrans-861
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DatetimeIndex.__iter__`中的性能改进，以实现更快的迭代（[GH 7683](https://github.com/pandas-dev/pandas/issues/7683)）'
- en: Performance improvements in `Period` creation (and `PeriodIndex` setitem) ([GH
    5155](https://github.com/pandas-dev/pandas/issues/5155))
  id: totrans-862
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Period`创建（以及`PeriodIndex` setitem）中的性能改进（[GH 5155](https://github.com/pandas-dev/pandas/issues/5155)）'
- en: Improvements in Series.transform for significant performance gains (revised)
    ([GH 6496](https://github.com/pandas-dev/pandas/issues/6496))
  id: totrans-863
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Series.transform的性能显著提升（修订版）（[GH 6496](https://github.com/pandas-dev/pandas/issues/6496))
- en: Performance improvements in `StataReader` when reading large files ([GH 8040](https://github.com/pandas-dev/pandas/issues/8040),
    [GH 8073](https://github.com/pandas-dev/pandas/issues/8073))
  id: totrans-864
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在读取大文件时，`StataReader`的性能改进（[GH 8040](https://github.com/pandas-dev/pandas/issues/8040)，[GH
    8073](https://github.com/pandas-dev/pandas/issues/8073)）
- en: Performance improvements in `StataWriter` when writing large files ([GH 8079](https://github.com/pandas-dev/pandas/issues/8079))
  id: totrans-865
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在写入大文件时，`StataWriter`的性能改进（[GH 8079](https://github.com/pandas-dev/pandas/issues/8079)）
- en: Performance and memory usage improvements in multi-key `groupby` ([GH 8128](https://github.com/pandas-dev/pandas/issues/8128))
  id: totrans-866
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 多键`groupby`中的性能和内存使用改进（[GH 8128](https://github.com/pandas-dev/pandas/issues/8128)）
- en: Performance improvements in groupby `.agg` and `.apply` where builtins max/min
    were not mapped to numpy/cythonized versions ([GH 7722](https://github.com/pandas-dev/pandas/issues/7722))
  id: totrans-867
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在组别`.agg`和`.apply`中的性能改进，其中内置的max/min未映射到numpy/cython化的版本（[GH 7722](https://github.com/pandas-dev/pandas/issues/7722)）
- en: Performance improvement in writing to sql (`to_sql`) of up to 50% ([GH 8208](https://github.com/pandas-dev/pandas/issues/8208)).
  id: totrans-868
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在写入sql（`to_sql`）中的性能改进，高达50%（[GH 8208](https://github.com/pandas-dev/pandas/issues/8208)）
- en: Performance benchmarking of groupby for large value of ngroups ([GH 6787](https://github.com/pandas-dev/pandas/issues/6787))
  id: totrans-869
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于ngroups的大值，对groupby进行性能基准测试（[GH 6787](https://github.com/pandas-dev/pandas/issues/6787)）
- en: Performance improvement in `CustomBusinessDay`, `CustomBusinessMonth` ([GH 8236](https://github.com/pandas-dev/pandas/issues/8236))
  id: totrans-870
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`CustomBusinessDay`，`CustomBusinessMonth`中的性能改进（[GH 8236](https://github.com/pandas-dev/pandas/issues/8236)）
- en: Performance improvement for `MultiIndex.values` for multi-level indexes containing
    datetimes ([GH 8543](https://github.com/pandas-dev/pandas/issues/8543))
  id: totrans-871
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对包含日期时间的多级索引的`MultiIndex.values`进行性能改进（[GH 8543](https://github.com/pandas-dev/pandas/issues/8543)）
- en: '## Bug fixes'
  id: totrans-872
  prefs: []
  type: TYPE_NORMAL
  zh: '## 错误修复'
- en: Bug in pivot_table, when using margins and a dict aggfunc ([GH 8349](https://github.com/pandas-dev/pandas/issues/8349))
  id: totrans-873
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在pivot_table中存在错误，当使用margins和dict aggfunc时（[GH 8349](https://github.com/pandas-dev/pandas/issues/8349)）
- en: Bug in `read_csv` where `squeeze=True` would return a view ([GH 8217](https://github.com/pandas-dev/pandas/issues/8217))
  id: totrans-874
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`read_csv`中存在错误，其中`squeeze=True`会返回一个视图（[GH 8217](https://github.com/pandas-dev/pandas/issues/8217)）
- en: Bug in checking of table name in `read_sql` in certain cases ([GH 7826](https://github.com/pandas-dev/pandas/issues/7826)).
  id: totrans-875
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在某些情况下检查`read_sql`中的表名存在错误（[GH 7826](https://github.com/pandas-dev/pandas/issues/7826)）
- en: Bug in `DataFrame.groupby` where `Grouper` does not recognize level when frequency
    is specified ([GH 7885](https://github.com/pandas-dev/pandas/issues/7885))
  id: totrans-876
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`DataFrame.groupby`中存在错误，当指定频率时，`Grouper`不识别级别（[GH 7885](https://github.com/pandas-dev/pandas/issues/7885)）
- en: Bug in multiindexes dtypes getting mixed up when DataFrame is saved to SQL table
    ([GH 8021](https://github.com/pandas-dev/pandas/issues/8021))
  id: totrans-877
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在DataFrame保存到SQL表时，MultiIndex的dtype混淆引发错误（[GH 8021](https://github.com/pandas-dev/pandas/issues/8021)）
- en: Bug in `Series` 0-division with a float and integer operand dtypes ([GH 7785](https://github.com/pandas-dev/pandas/issues/7785))
  id: totrans-878
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`Series`中存在错误，使用float和整数操作数dtype进行0-除法（[GH 7785](https://github.com/pandas-dev/pandas/issues/7785)）
- en: Bug in `Series.astype("unicode")` not calling `unicode` on the values correctly
    ([GH 7758](https://github.com/pandas-dev/pandas/issues/7758))
  id: totrans-879
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`Series.astype("unicode")`中存在错误，未正确调用值上的`unicode`（[GH 7758](https://github.com/pandas-dev/pandas/issues/7758)）
- en: Bug in `DataFrame.as_matrix()` with mixed `datetime64[ns]` and `timedelta64[ns]`
    dtypes ([GH 7778](https://github.com/pandas-dev/pandas/issues/7778))
  id: totrans-880
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`DataFrame.as_matrix()`中存在错误，混合`datetime64[ns]`和`timedelta64[ns]` dtype时（[GH
    7778](https://github.com/pandas-dev/pandas/issues/7778)）
- en: Bug in `HDFStore.select_column()` not preserving UTC timezone info when selecting
    a `DatetimeIndex` ([GH 7777](https://github.com/pandas-dev/pandas/issues/7777))
  id: totrans-881
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在选择`DatetimeIndex`时，`HDFStore.select_column()`不保留UTC时区信息时存在错误（[GH 7777](https://github.com/pandas-dev/pandas/issues/7777)）
- en: Bug in `to_datetime` when `format='%Y%m%d'` and `coerce=True` are specified,
    where previously an object array was returned (rather than a coerced time-series
    with `NaT`), ([GH 7930](https://github.com/pandas-dev/pandas/issues/7930))
  id: totrans-882
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`to_datetime`中存在错误，当指定`format='%Y%m%d'`和`coerce=True`时，之前会返回对象数组（而不是一个强制转换的时间序列，带有`NaT`）（[GH
    7930](https://github.com/pandas-dev/pandas/issues/7930)）
- en: Bug in `DatetimeIndex` and `PeriodIndex` in-place addition and subtraction cause
    different result from normal one ([GH 6527](https://github.com/pandas-dev/pandas/issues/6527))
  id: totrans-883
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`DatetimeIndex`和`PeriodIndex`中的就地加法和减法引起与正常结果不同的错误（[GH 6527](https://github.com/pandas-dev/pandas/issues/6527)）
- en: Bug in adding and subtracting `PeriodIndex` with `PeriodIndex` raise `TypeError`
    ([GH 7741](https://github.com/pandas-dev/pandas/issues/7741))
  id: totrans-884
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在使用`PeriodIndex`添加和减去`PeriodIndex`时引发`TypeError`错误（[GH 7741](https://github.com/pandas-dev/pandas/issues/7741)）
- en: Bug in `combine_first` with `PeriodIndex` data raises `TypeError` ([GH 3367](https://github.com/pandas-dev/pandas/issues/3367))
  id: totrans-885
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`combine_first`中存在错误，带有`PeriodIndex`数据引发`TypeError`（[GH 3367](https://github.com/pandas-dev/pandas/issues/3367)）
- en: Bug in MultiIndex slicing with missing indexers ([GH 7866](https://github.com/pandas-dev/pandas/issues/7866))
  id: totrans-886
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了具有缺失索引器的MultiIndex切片中的错误（[GH 7866](https://github.com/pandas-dev/pandas/issues/7866)）
- en: Bug in MultiIndex slicing with various edge cases ([GH 8132](https://github.com/pandas-dev/pandas/issues/8132))
  id: totrans-887
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在各种边缘情况下的MultiIndex切片中存在错误（[GH 8132](https://github.com/pandas-dev/pandas/issues/8132)）
- en: Regression in MultiIndex indexing with a non-scalar type object ([GH 7914](https://github.com/pandas-dev/pandas/issues/7914))
  id: totrans-888
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用非标量类型对象进行 MultiIndex 索引时的回归 bug ([GH 7914](https://github.com/pandas-dev/pandas/issues/7914))
- en: Bug in `Timestamp` comparisons with `==` and `int64` dtype ([GH 8058](https://github.com/pandas-dev/pandas/issues/8058))
  id: totrans-889
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Timestamp` 比较中的一个 bug，使用 `==` 和 `int64` 数据类型 ([GH 8058](https://github.com/pandas-dev/pandas/issues/8058))'
- en: Bug in pickles contains `DateOffset` may raise `AttributeError` when `normalize`
    attribute is referred internally ([GH 7748](https://github.com/pandas-dev/pandas/issues/7748))
  id: totrans-890
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 包含 `DateOffset` 的 pickle 可能在内部引用 `normalize` 属性时引发 `AttributeError` ([GH 7748](https://github.com/pandas-dev/pandas/issues/7748))
- en: Bug in `Panel` when using `major_xs` and `copy=False` is passed (deprecation
    warning fails because of missing `warnings`) ([GH 8152](https://github.com/pandas-dev/pandas/issues/8152)).
  id: totrans-891
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 `major_xs` 且传递 `copy=False` 时的 `Panel` 中的 bug（由于缺少 `warnings` 而导致弃用警告失败）
    ([GH 8152](https://github.com/pandas-dev/pandas/issues/8152))
- en: Bug in pickle deserialization that failed for pre-0.14.1 containers with dup
    items trying to avoid ambiguity when matching block and manager items, when there’s
    only one block there’s no ambiguity ([GH 7794](https://github.com/pandas-dev/pandas/issues/7794))
  id: totrans-892
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: pickle 反序列化中的一个 bug，对于 pre-0.14.1 容器失败的情况，尝试避免匹配块和管理器项时的歧义，当只有一个块时没有歧义 ([GH
    7794](https://github.com/pandas-dev/pandas/issues/7794))
- en: Bug in putting a `PeriodIndex` into a `Series` would convert to `int64` dtype,
    rather than `object` of `Periods` ([GH 7932](https://github.com/pandas-dev/pandas/issues/7932))
  id: totrans-893
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将 `PeriodIndex` 放入 `Series` 中的一��� bug 会转换为 `int64` 数据类型，而不是 `Periods` 的 `object`
    ([GH 7932](https://github.com/pandas-dev/pandas/issues/7932))
- en: Bug in `HDFStore` iteration when passing a where ([GH 8014](https://github.com/pandas-dev/pandas/issues/8014))
  id: totrans-894
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在传递 where 参数时，`HDFStore` 迭代中的一个 bug ([GH 8014](https://github.com/pandas-dev/pandas/issues/8014))
- en: Bug in `DataFrameGroupby.transform` when transforming with a passed non-sorted
    key ([GH 8046](https://github.com/pandas-dev/pandas/issues/8046), [GH 8430](https://github.com/pandas-dev/pandas/issues/8430))
  id: totrans-895
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用传递的非排序键进行 `DataFrameGroupby.transform` 时的 bug ([GH 8046](https://github.com/pandas-dev/pandas/issues/8046),
    [GH 8430](https://github.com/pandas-dev/pandas/issues/8430))
- en: Bug in repeated timeseries line and area plot may result in `ValueError` or
    incorrect kind ([GH 7733](https://github.com/pandas-dev/pandas/issues/7733))
  id: totrans-896
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重复时间序列线和区域图绘制中的一个 bug 可能导致 `ValueError` 或不正确的类型 ([GH 7733](https://github.com/pandas-dev/pandas/issues/7733))
- en: Bug in inference in a `MultiIndex` with `datetime.date` inputs ([GH 7888](https://github.com/pandas-dev/pandas/issues/7888))
  id: totrans-897
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`MultiIndex` 推断中的一个 bug，使用 `datetime.date` 输入 ([GH 7888](https://github.com/pandas-dev/pandas/issues/7888))'
- en: Bug in `get` where an `IndexError` would not cause the default value to be returned
    ([GH 7725](https://github.com/pandas-dev/pandas/issues/7725))
  id: totrans-898
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `get` 中，`IndexError` 不会导致返回默认值的 bug ([GH 7725](https://github.com/pandas-dev/pandas/issues/7725))
- en: Bug in `offsets.apply`, `rollforward` and `rollback` may reset nanosecond ([GH
    7697](https://github.com/pandas-dev/pandas/issues/7697))
  id: totrans-899
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`offsets.apply`、`rollforward` 和 `rollback` 中的一个 bug 可能会重置纳秒 ([GH 7697](https://github.com/pandas-dev/pandas/issues/7697))'
- en: Bug in `offsets.apply`, `rollforward` and `rollback` may raise `AttributeError`
    if `Timestamp` has `dateutil` tzinfo ([GH 7697](https://github.com/pandas-dev/pandas/issues/7697))
  id: totrans-900
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`offsets.apply`、`rollforward` 和 `rollback` 中的一个 bug，如果 `Timestamp` 具有 `dateutil`
    tzinfo，则可能引发 `AttributeError` ([GH 7697](https://github.com/pandas-dev/pandas/issues/7697))'
- en: Bug in sorting a MultiIndex frame with a `Float64Index` ([GH 8017](https://github.com/pandas-dev/pandas/issues/8017))
  id: totrans-901
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 `Float64Index` 对 MultiIndex 框架进行排序中的一个 bug ([GH 8017](https://github.com/pandas-dev/pandas/issues/8017))
- en: Bug in inconsistent panel setitem with a rhs of a `DataFrame` for alignment
    ([GH 7763](https://github.com/pandas-dev/pandas/issues/7763))
  id: totrans-902
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不一致的面板设置项中的一个 bug，右手边是 `DataFrame` 用于对齐 ([GH 7763](https://github.com/pandas-dev/pandas/issues/7763))
- en: Bug in `is_superperiod` and `is_subperiod` cannot handle higher frequencies
    than `S` ([GH 7760](https://github.com/pandas-dev/pandas/issues/7760), [GH 7772](https://github.com/pandas-dev/pandas/issues/7772),
    [GH 7803](https://github.com/pandas-dev/pandas/issues/7803))
  id: totrans-903
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`is_superperiod` 和 `is_subperiod` 中的一个 bug 无法处理高于 `S` 的频率 ([GH 7760](https://github.com/pandas-dev/pandas/issues/7760),
    [GH 7772](https://github.com/pandas-dev/pandas/issues/7772), [GH 7803](https://github.com/pandas-dev/pandas/issues/7803))'
- en: Bug in 32-bit platforms with `Series.shift` ([GH 8129](https://github.com/pandas-dev/pandas/issues/8129))
  id: totrans-904
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 32 位平台上使用 `Series.shift` 中的 bug ([GH 8129](https://github.com/pandas-dev/pandas/issues/8129))
- en: Bug in `PeriodIndex.unique` returns int64 `np.ndarray` ([GH 7540](https://github.com/pandas-dev/pandas/issues/7540))
  id: totrans-905
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`PeriodIndex.unique` 返回 int64 `np.ndarray` 中的一个 bug ([GH 7540](https://github.com/pandas-dev/pandas/issues/7540))'
- en: Bug in `groupby.apply` with a non-affecting mutation in the function ([GH 8467](https://github.com/pandas-dev/pandas/issues/8467))
  id: totrans-906
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`groupby.apply` 中的一个 bug，函数中的一个不影响的变异 ([GH 8467](https://github.com/pandas-dev/pandas/issues/8467))'
- en: Bug in `DataFrame.reset_index` which has `MultiIndex` contains `PeriodIndex`
    or `DatetimeIndex` with tz raises `ValueError` ([GH 7746](https://github.com/pandas-dev/pandas/issues/7746),
    [GH 7793](https://github.com/pandas-dev/pandas/issues/7793))
  id: totrans-907
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当`MultiIndex`包含`PeriodIndex`或带有时区的`DatetimeIndex`时，`DataFrame.reset_index`存在错误引发`ValueError`（[GH
    7746](https://github.com/pandas-dev/pandas/issues/7746)，[GH 7793](https://github.com/pandas-dev/pandas/issues/7793)）
- en: Bug in `DataFrame.plot` with `subplots=True` may draw unnecessary minor xticks
    and yticks ([GH 7801](https://github.com/pandas-dev/pandas/issues/7801))
  id: totrans-908
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当`subplots=True`时，`DataFrame.plot`可能会绘制不必要的次要xticks和yticks（[GH 7801](https://github.com/pandas-dev/pandas/issues/7801)）
- en: Bug in `StataReader` which did not read variable labels in 117 files due to
    difference between Stata documentation and implementation ([GH 7816](https://github.com/pandas-dev/pandas/issues/7816))
  id: totrans-909
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`StataReader`中，由于Stata文档和实现之间的差异，117个文件中未读取变量标签（[GH 7816](https://github.com/pandas-dev/pandas/issues/7816)）'
- en: Bug in `StataReader` where strings were always converted to 244 characters-fixed
    width irrespective of underlying string size ([GH 7858](https://github.com/pandas-dev/pandas/issues/7858))
  id: totrans-910
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`StataReader`中，字符串总是转换为244个字符的固定宽度，而不考虑底层字符串大小（[GH 7858](https://github.com/pandas-dev/pandas/issues/7858)）'
- en: Bug in `DataFrame.plot` and `Series.plot` may ignore `rot` and `fontsize` keywords
    ([GH 7844](https://github.com/pandas-dev/pandas/issues/7844))
  id: totrans-911
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.plot`和`Series.plot`可能会忽略`rot`和`fontsize`关键字（[GH 7844](https://github.com/pandas-dev/pandas/issues/7844)）'
- en: Bug in `DatetimeIndex.value_counts` doesn’t preserve tz ([GH 7735](https://github.com/pandas-dev/pandas/issues/7735))
  id: totrans-912
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DatetimeIndex.value_counts`不保留时区（[GH 7735](https://github.com/pandas-dev/pandas/issues/7735)）'
- en: Bug in `PeriodIndex.value_counts` results in `Int64Index` ([GH 7735](https://github.com/pandas-dev/pandas/issues/7735))
  id: totrans-913
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`PeriodIndex.value_counts`导致`Int64Index`（[GH 7735](https://github.com/pandas-dev/pandas/issues/7735)）'
- en: Bug in `DataFrame.join` when doing left join on index and there are multiple
    matches ([GH 5391](https://github.com/pandas-dev/pandas/issues/5391))
  id: totrans-914
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在对索引进行左连接且存在多个匹配项时，`DataFrame.join`存在错误（[GH 5391](https://github.com/pandas-dev/pandas/issues/5391)）
- en: Bug in `GroupBy.transform()` where int groups with a transform that didn’t preserve
    the index were incorrectly truncated ([GH 7972](https://github.com/pandas-dev/pandas/issues/7972)).
  id: totrans-915
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`GroupBy.transform()`中，具有不保留索引的转换的整数组错误地被截断（[GH 7972](https://github.com/pandas-dev/pandas/issues/7972)）'
- en: Bug in `groupby` where callable objects without name attributes would take the
    wrong path, and produce a `DataFrame` instead of a `Series` ([GH 7929](https://github.com/pandas-dev/pandas/issues/7929))
  id: totrans-916
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`groupby`中，没有名称属性的可调用对象会走错路径，生成`DataFrame`而不是`Series`的错误（[GH 7929](https://github.com/pandas-dev/pandas/issues/7929)）'
- en: Bug in `groupby` error message when a DataFrame grouping column is duplicated
    ([GH 7511](https://github.com/pandas-dev/pandas/issues/7511))
  id: totrans-917
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当DataFrame分组列重复时，`groupby`错误消息中存在错误（[GH 7511](https://github.com/pandas-dev/pandas/issues/7511)）
- en: Bug in `read_html` where the `infer_types` argument forced coercion of date-likes
    incorrectly ([GH 7762](https://github.com/pandas-dev/pandas/issues/7762), [GH
    7032](https://github.com/pandas-dev/pandas/issues/7032)).
  id: totrans-918
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`read_html`中，`infer_types`参数强制错误地转换日期类型（[GH 7762](https://github.com/pandas-dev/pandas/issues/7762)，[GH
    7032](https://github.com/pandas-dev/pandas/issues/7032)）'
- en: Bug in `Series.str.cat` with an index which was filtered as to not include the
    first item ([GH 7857](https://github.com/pandas-dev/pandas/issues/7857))
  id: totrans-919
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 具有被过滤以不包括第一项的索引的`Series.str.cat`存在错误（[GH 7857](https://github.com/pandas-dev/pandas/issues/7857）
- en: Bug in `Timestamp` cannot parse `nanosecond` from string ([GH 7878](https://github.com/pandas-dev/pandas/issues/7878))
  id: totrans-920
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Timestamp`无法从字符串中解析`nanosecond`（[GH 7878](https://github.com/pandas-dev/pandas/issues/7878)）'
- en: Bug in `Timestamp` with string offset and `tz` results incorrect ([GH 7833](https://github.com/pandas-dev/pandas/issues/7833))
  id: totrans-921
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 字符串偏移和`tz`结果不正确时，`Timestamp`存在错误（[GH 7833](https://github.com/pandas-dev/pandas/issues/7833)）
- en: Bug in `tslib.tz_convert` and `tslib.tz_convert_single` may return different
    results ([GH 7798](https://github.com/pandas-dev/pandas/issues/7798))
  id: totrans-922
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`tslib.tz_convert`和`tslib.tz_convert_single`中可能返回不同结果的错误（[GH 7798](https://github.com/pandas-dev/pandas/issues/7798)）'
- en: Bug in `DatetimeIndex.intersection` of non-overlapping timestamps with tz raises
    `IndexError` ([GH 7880](https://github.com/pandas-dev/pandas/issues/7880))
  id: totrans-923
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DatetimeIndex.intersection`中，具有时区的非重叠时间戳引发`IndexError`（[GH 7880](https://github.com/pandas-dev/pandas/issues/7880)）'
- en: Bug in alignment with TimeOps and non-unique indexes ([GH 8363](https://github.com/pandas-dev/pandas/issues/8363))
  id: totrans-924
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与`TimeOps`和非唯一索引对齐时存在错误（[GH 8363](https://github.com/pandas-dev/pandas/issues/8363)）
- en: Bug in `GroupBy.filter()` where fast path vs. slow path made the filter return
    a non scalar value that appeared valid but wasn’t ([GH 7870](https://github.com/pandas-dev/pandas/issues/7870)).
  id: totrans-925
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`GroupBy.filter()`中存在的错误，快速路径与慢速路径使过滤器返回一个非标量值，看起来是有效的，但实际上不是（[GH 7870](https://github.com/pandas-dev/pandas/issues/7870)）。'
- en: Bug in `date_range()`/`DatetimeIndex()` when the timezone was inferred from
    input dates yet incorrect times were returned when crossing DST boundaries ([GH
    7835](https://github.com/pandas-dev/pandas/issues/7835), [GH 7901](https://github.com/pandas-dev/pandas/issues/7901)).
  id: totrans-926
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`date_range()`/`DatetimeIndex()`中存在的错误，当时区从输入日期推断出来时，穿过夏令时边界时返回不正确的时间（[GH 7835](https://github.com/pandas-dev/pandas/issues/7835)，[GH
    7901](https://github.com/pandas-dev/pandas/issues/7901)）。
- en: Bug in `to_excel()` where a negative sign was being prepended to positive infinity
    and was absent for negative infinity ([GH 7949](https://github.com/pandas-dev/pandas/issues/7949))
  id: totrans-927
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`to_excel()`中存在的错误，正无穷被加上了负号，而负无穷没有（[GH 7949](https://github.com/pandas-dev/pandas/issues/7949)）。
- en: Bug in area plot draws legend with incorrect `alpha` when `stacked=True` ([GH
    8027](https://github.com/pandas-dev/pandas/issues/8027))
  id: totrans-928
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在区域图中存在的错误，当`stacked=True`时，图例绘制的透明度不正确（[GH 8027](https://github.com/pandas-dev/pandas/issues/8027)）。
- en: '`Period` and `PeriodIndex` addition/subtraction with `np.timedelta64` results
    in incorrect internal representations ([GH 7740](https://github.com/pandas-dev/pandas/issues/7740))'
  id: totrans-929
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用`np.timedelta64`进行`Period`和`PeriodIndex`的加法/减法会导致内部表示错误（[GH 7740](https://github.com/pandas-dev/pandas/issues/7740)）。
- en: Bug in `Holiday` with no offset or observance ([GH 7987](https://github.com/pandas-dev/pandas/issues/7987))
  id: totrans-930
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`Holiday`中存在的错误，没有偏移或观察（[GH 7987](https://github.com/pandas-dev/pandas/issues/7987)）。
- en: Bug in `DataFrame.to_latex` formatting when columns or index is a `MultiIndex`
    ([GH 7982](https://github.com/pandas-dev/pandas/issues/7982)).
  id: totrans-931
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.to_latex`格式化存在的错误，当列或索引是`MultiIndex`时（[GH 7982](https://github.com/pandas-dev/pandas/issues/7982)）。'
- en: Bug in `DateOffset` around Daylight Savings Time produces unexpected results
    ([GH 5175](https://github.com/pandas-dev/pandas/issues/5175)).
  id: totrans-932
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在夏令时周围的`DateOffset`中存在的错误，产生意外的结果（[GH 5175](https://github.com/pandas-dev/pandas/issues/5175)）。
- en: Bug in `DataFrame.shift` where empty columns would throw `ZeroDivisionError`
    on numpy 1.7 ([GH 8019](https://github.com/pandas-dev/pandas/issues/8019))
  id: totrans-933
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`DataFrame.shift`中存在的错误，空列将在numpy 1.7上抛出`ZeroDivisionError`（[GH 8019](https://github.com/pandas-dev/pandas/issues/8019)）。
- en: Bug in installation where `html_encoding/*.html` wasn’t installed and therefore
    some tests were not running correctly ([GH 7927](https://github.com/pandas-dev/pandas/issues/7927)).
  id: totrans-934
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装中存在的错误，`html_encoding/*.html`未被安装，因此一些测试未能正确运行（[GH 7927](https://github.com/pandas-dev/pandas/issues/7927)）。
- en: Bug in `read_html` where `bytes` objects were not tested for in `_read` ([GH
    7927](https://github.com/pandas-dev/pandas/issues/7927)).
  id: totrans-935
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`read_html`中存在的错误，未在`_read`中测试`bytes`对象（[GH 7927](https://github.com/pandas-dev/pandas/issues/7927)）。
- en: Bug in `DataFrame.stack()` when one of the column levels was a datelike ([GH
    8039](https://github.com/pandas-dev/pandas/issues/8039))
  id: totrans-936
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`DataFrame.stack()`中存在的错误，当列级别之一是日期时（[GH 8039](https://github.com/pandas-dev/pandas/issues/8039)）。
- en: Bug in broadcasting numpy scalars with `DataFrame` ([GH 8116](https://github.com/pandas-dev/pandas/issues/8116))
  id: totrans-937
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在使用`DataFrame`广播numpy标量时存在的错误（[GH 8116](https://github.com/pandas-dev/pandas/issues/8116)）。
- en: Bug in `pivot_table` performed with nameless `index` and `columns` raises `KeyError`
    ([GH 8103](https://github.com/pandas-dev/pandas/issues/8103))
  id: totrans-938
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pivot_table`在使用无名称的`index`和`columns`时出现了`KeyError`错误（[GH 8103](https://github.com/pandas-dev/pandas/issues/8103)）。'
- en: Bug in `DataFrame.plot(kind='scatter')` draws points and errorbars with different
    colors when the color is specified by `c` keyword ([GH 8081](https://github.com/pandas-dev/pandas/issues/8081))
  id: totrans-939
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`DataFrame.plot(kind='scatter')`中存在的错误，当颜色由`c`关键字指定时，绘制点和误差条的颜色不同（[GH 8081](https://github.com/pandas-dev/pandas/issues/8081)）。
- en: Bug in `Float64Index` where `iat` and `at` were not testing and were failing
    ([GH 8092](https://github.com/pandas-dev/pandas/issues/8092)).
  id: totrans-940
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Float64Index`中存在的错误，`iat`和`at`未经过测试并且失败了（[GH 8092](https://github.com/pandas-dev/pandas/issues/8092)）。'
- en: Bug in `DataFrame.boxplot()` where y-limits were not set correctly when producing
    multiple axes ([GH 7528](https://github.com/pandas-dev/pandas/issues/7528), [GH
    5517](https://github.com/pandas-dev/pandas/issues/5517)).
  id: totrans-941
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`DataFrame.boxplot()`中存在的错误，当生成多个坐标轴时，y轴限制未正确设置（[GH 7528](https://github.com/pandas-dev/pandas/issues/7528)，[GH
    5517](https://github.com/pandas-dev/pandas/issues/5517)）。
- en: Bug in `read_csv` where line comments were not handled correctly given a custom
    line terminator or `delim_whitespace=True` ([GH 8122](https://github.com/pandas-dev/pandas/issues/8122)).
  id: totrans-942
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`read_csv`中存在的错误，当给定自定义行终止符或`delim_whitespace=True`时，行注释未能正确处理（[GH 8122](https://github.com/pandas-dev/pandas/issues/8122)）。'
- en: Bug in `read_html` where empty tables caused a `StopIteration` ([GH 7575](https://github.com/pandas-dev/pandas/issues/7575))
  id: totrans-943
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`read_html` 中的一个 bug，空表格导致 `StopIteration`（[GH 7575](https://github.com/pandas-dev/pandas/issues/7575)）'
- en: Bug in casting when setting a column in a same-dtype block ([GH 7704](https://github.com/pandas-dev/pandas/issues/7704))
  id: totrans-944
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在设置同一 dtype 块中的列时转换中的一个 bug（[GH 7704](https://github.com/pandas-dev/pandas/issues/7704)）
- en: Bug in accessing groups from a `GroupBy` when the original grouper was a tuple
    ([GH 8121](https://github.com/pandas-dev/pandas/issues/8121)).
  id: totrans-945
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从 `GroupBy` 中访问组时，原始分组器为元组时的一个 bug（[GH 8121](https://github.com/pandas-dev/pandas/issues/8121)）。
- en: Bug in `.at` that would accept integer indexers on a non-integer index and do
    fallback ([GH 7814](https://github.com/pandas-dev/pandas/issues/7814))
  id: totrans-946
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`.at` 中的一个 bug，会在非整数索引上接受整数索引器并执行回退（[GH 7814](https://github.com/pandas-dev/pandas/issues/7814)）'
- en: Bug with kde plot and NaNs ([GH 8182](https://github.com/pandas-dev/pandas/issues/8182))
  id: totrans-947
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: kde 绘图和 NaNs 中的一个 bug（[GH 8182](https://github.com/pandas-dev/pandas/issues/8182)）
- en: Bug in `GroupBy.count` with float32 data type were nan values were not excluded
    ([GH 8169](https://github.com/pandas-dev/pandas/issues/8169)).
  id: totrans-948
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`GroupBy.count` 中的一个 bug，float32 数据类型中 nan 值未被排除（[GH 8169](https://github.com/pandas-dev/pandas/issues/8169)）。'
- en: Bug with stacked barplots and NaNs ([GH 8175](https://github.com/pandas-dev/pandas/issues/8175)).
  id: totrans-949
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 堆叠条形图和 NaNs 中的一个 bug（[GH 8175](https://github.com/pandas-dev/pandas/issues/8175)）。
- en: Bug in resample with non evenly divisible offsets (e.g. ‘7s’) ([GH 8371](https://github.com/pandas-dev/pandas/issues/8371))
  id: totrans-950
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: resample 中的一个 bug，非均匀可除的偏移量（例如‘7s’）（[GH 8371](https://github.com/pandas-dev/pandas/issues/8371)）
- en: Bug in interpolation methods with the `limit` keyword when no values needed
    interpolating ([GH 7173](https://github.com/pandas-dev/pandas/issues/7173)).
  id: totrans-951
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 插值方法中的一个 bug，当不需要插值时，使用 `limit` 关键字时出��问题（[GH 7173](https://github.com/pandas-dev/pandas/issues/7173)）。
- en: Bug where `col_space` was ignored in `DataFrame.to_string()` when `header=False`
    ([GH 8230](https://github.com/pandas-dev/pandas/issues/8230)).
  id: totrans-952
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.to_string()` 中忽略了 `header=False` 时 `col_space` 的 bug（[GH 8230](https://github.com/pandas-dev/pandas/issues/8230)）。'
- en: Bug with `DatetimeIndex.asof` incorrectly matching partial strings and returning
    the wrong date ([GH 8245](https://github.com/pandas-dev/pandas/issues/8245)).
  id: totrans-953
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DatetimeIndex.asof` 中的一个 bug，错误匹配部分字符串并返回错误日期（[GH 8245](https://github.com/pandas-dev/pandas/issues/8245)）。'
- en: Bug in plotting methods modifying the global matplotlib rcParams ([GH 8242](https://github.com/pandas-dev/pandas/issues/8242)).
  id: totrans-954
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 绘图方法中的一个 bug，修改了全局 matplotlib rcParams（[GH 8242](https://github.com/pandas-dev/pandas/issues/8242)）。
- en: Bug in `DataFrame.__setitem__` that caused errors when setting a dataframe column
    to a sparse array ([GH 8131](https://github.com/pandas-dev/pandas/issues/8131))
  id: totrans-955
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.__setitem__` 中的一个 bug，将 dataframe 列设置为稀疏数组时出错（[GH 8131](https://github.com/pandas-dev/pandas/issues/8131)）'
- en: Bug where `Dataframe.boxplot()` failed when entire column was empty ([GH 8181](https://github.com/pandas-dev/pandas/issues/8181)).
  id: totrans-956
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当整个列为空时，`Dataframe.boxplot()` 失败的一个 bug（[GH 8181](https://github.com/pandas-dev/pandas/issues/8181)）。
- en: Bug with messed variables in `radviz` visualization ([GH 8199](https://github.com/pandas-dev/pandas/issues/8199)).
  id: totrans-957
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`radviz` 可视化中变量混乱的一个 bug（[GH 8199](https://github.com/pandas-dev/pandas/issues/8199)）。'
- en: Bug in interpolation methods with the `limit` keyword when no values needed
    interpolating ([GH 7173](https://github.com/pandas-dev/pandas/issues/7173)).
  id: totrans-958
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 插值方法中的一个 bug，当不需要插值时，使用 `limit` 关键字时出现问题（[GH 7173](https://github.com/pandas-dev/pandas/issues/7173)）。
- en: Bug where `col_space` was ignored in `DataFrame.to_string()` when `header=False`
    ([GH 8230](https://github.com/pandas-dev/pandas/issues/8230)).
  id: totrans-959
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.to_string()` 中忽略了 `header=False` 时 `col_space` 的 bug（[GH 8230](https://github.com/pandas-dev/pandas/issues/8230)）。'
- en: Bug in `to_clipboard` that would clip long column data ([GH 8305](https://github.com/pandas-dev/pandas/issues/8305))
  id: totrans-960
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`to_clipboard` 中的一个 bug，会截断长列数据（[GH 8305](https://github.com/pandas-dev/pandas/issues/8305)）'
- en: 'Bug in `DataFrame` terminal display: Setting max_column/max_rows to zero did
    not trigger auto-resizing of dfs to fit terminal width/height ([GH 7180](https://github.com/pandas-dev/pandas/issues/7180)).'
  id: totrans-961
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame` 终端显示中的一个 bug：将 max_column/max_rows 设置为零时，未触发自动调整 df 以适应终端宽度/高度（[GH
    7180](https://github.com/pandas-dev/pandas/issues/7180)）。'
- en: Bug in OLS where running with “cluster” and “nw_lags” parameters did not work
    correctly, but also did not throw an error ([GH 5884](https://github.com/pandas-dev/pandas/issues/5884)).
  id: totrans-962
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: OLS 中的一个 bug，使用“cluster”和“nw_lags”参数运行时无法正确工作，但也不会抛出错误（[GH 5884](https://github.com/pandas-dev/pandas/issues/5884)）。
- en: Bug in `DataFrame.dropna` that interpreted non-existent columns in the subset
    argument as the ‘last column’ ([GH 8303](https://github.com/pandas-dev/pandas/issues/8303))
  id: totrans-963
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.dropna` 中的一个 bug，将 subset 参数中不存在的列解释为“最后一列”（[GH 8303](https://github.com/pandas-dev/pandas/issues/8303)）'
- en: Bug in `Index.intersection` on non-monotonic non-unique indexes ([GH 8362](https://github.com/pandas-dev/pandas/issues/8362)).
  id: totrans-964
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在非单调非唯一索引上的 `Index.intersection` 中出现的错误 ([GH 8362](https://github.com/pandas-dev/pandas/issues/8362)).
- en: Bug in masked series assignment where mismatching types would break alignment
    ([GH 8387](https://github.com/pandas-dev/pandas/issues/8387))
  id: totrans-965
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 掩码系列赋值中的错误，类型不匹配会导致对齐中断 ([GH 8387](https://github.com/pandas-dev/pandas/issues/8387))
- en: Bug in `NDFrame.equals` gives false negatives with dtype=object ([GH 8437](https://github.com/pandas-dev/pandas/issues/8437))
  id: totrans-966
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`NDFrame.equals` 中的错误，dtype=object 时给出错误的负面结果 ([GH 8437](https://github.com/pandas-dev/pandas/issues/8437))'
- en: Bug in assignment with indexer where type diversity would break alignment ([GH
    8258](https://github.com/pandas-dev/pandas/issues/8258))
  id: totrans-967
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在索引器赋值中出现的错误，类型多样性会导致对齐中断 ([GH 8258](https://github.com/pandas-dev/pandas/issues/8258))
- en: Bug in `NDFrame.loc` indexing when row/column names were lost when target was
    a list/ndarray ([GH 6552](https://github.com/pandas-dev/pandas/issues/6552))
  id: totrans-968
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`NDFrame.loc` 索引中的错误，当行/列名称丢失时，如果目标是列表/ndarray ([GH 6552](https://github.com/pandas-dev/pandas/issues/6552))'
- en: Regression in `NDFrame.loc` indexing when rows/columns were converted to Float64Index
    if target was an empty list/ndarray ([GH 7774](https://github.com/pandas-dev/pandas/issues/7774))
  id: totrans-969
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`NDFrame.loc` 索引中的回归，当行/列转换为 Float64Index 时，如果目标为空列表/ndarray，则出现错误 ([GH 7774](https://github.com/pandas-dev/pandas/issues/7774))'
- en: Bug in `Series` that allows it to be indexed by a `DataFrame` which has unexpected
    results. Such indexing is no longer permitted ([GH 8444](https://github.com/pandas-dev/pandas/issues/8444))
  id: totrans-970
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Series` 中的错误，允许使用 `DataFrame` 对其进行索引，结果出乎意料。不再允许这种索引 ([GH 8444](https://github.com/pandas-dev/pandas/issues/8444))'
- en: Bug in item assignment of a `DataFrame` with MultiIndex columns where right-hand-side
    columns were not aligned ([GH 7655](https://github.com/pandas-dev/pandas/issues/7655))
  id: totrans-971
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在具有 MultiIndex 列的 `DataFrame` 的项目赋值中出现的错误，其中右侧列未对齐 ([GH 7655](https://github.com/pandas-dev/pandas/issues/7655))
- en: Suppress FutureWarning generated by NumPy when comparing object arrays containing
    NaN for equality ([GH 7065](https://github.com/pandas-dev/pandas/issues/7065))
  id: totrans-972
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 抑制 NumPy 生成的 FutureWarning，当包含 NaN 的对象数组进行相等比较时 ([GH 7065](https://github.com/pandas-dev/pandas/issues/7065))
- en: Bug in `DataFrame.eval()` where the dtype of the `not` operator (`~`) was not
    correctly inferred as `bool`.
  id: totrans-973
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.eval()` 中的一个错误，`not` 运算符 (`~`) 的 dtype 未能正确推断为 `bool`。'
- en: '## Contributors'
  id: totrans-974
  prefs: []
  type: TYPE_NORMAL
  zh: '## 贡献者'
- en: A total of 80 people contributed patches to this release. People with a “+”
    by their names contributed a patch for the first time.
  id: totrans-975
  prefs: []
  type: TYPE_NORMAL
  zh: 总共有 80 人为此版本贡献了补丁。名字后面带有“+”的人第一次贡献了补丁。
- en: Aaron Schumacher +
  id: totrans-976
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Aaron Schumacher +
- en: Adam Greenhall
  id: totrans-977
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Adam Greenhall
- en: Andy Hayden
  id: totrans-978
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Andy Hayden
- en: Anthony O’Brien +
  id: totrans-979
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Anthony O’Brien +
- en: Artemy Kolchinsky +
  id: totrans-980
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Artemy Kolchinsky +
- en: Ben Schiller +
  id: totrans-981
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Ben Schiller +
- en: Benedikt Sauer
  id: totrans-982
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Benedikt Sauer
- en: Benjamin Thyreau +
  id: totrans-983
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Benjamin Thyreau +
- en: BorisVerk +
  id: totrans-984
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: BorisVerk +
- en: Chris Reynolds +
  id: totrans-985
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Chris Reynolds +
- en: Chris Stoafer +
  id: totrans-986
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Chris Stoafer +
- en: DSM
  id: totrans-987
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: DSM
- en: Dav Clark +
  id: totrans-988
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Dav Clark +
- en: FragLegs +
  id: totrans-989
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: FragLegs +
- en: German Gomez-Herrero +
  id: totrans-990
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: German Gomez-Herrero +
- en: Hsiaoming Yang +
  id: totrans-991
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Hsiaoming Yang +
- en: Huan Li +
  id: totrans-992
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Huan Li +
- en: Hyungtae Kim +
  id: totrans-993
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Hyungtae Kim +
- en: Isaac Slavitt +
  id: totrans-994
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Isaac Slavitt +
- en: Jacob Schaer
  id: totrans-995
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Jacob Schaer
- en: Jacob Wasserman +
  id: totrans-996
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Jacob Wasserman +
- en: Jan Schulz
  id: totrans-997
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Jan Schulz
- en: Jeff Reback
  id: totrans-998
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Jeff Reback
- en: Jeff Tratner
  id: totrans-999
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Jeff Tratner
- en: Jesse Farnham +
  id: totrans-1000
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Jesse Farnham +
- en: Joe Bradish +
  id: totrans-1001
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Joe Bradish +
- en: Joerg Rittinger +
  id: totrans-1002
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Joerg Rittinger +
- en: John W. O’Brien
  id: totrans-1003
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: John W. O’Brien
- en: Joris Van den Bossche
  id: totrans-1004
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Joris Van den Bossche
- en: Kevin Sheppard
  id: totrans-1005
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Kevin Sheppard
- en: Kyle Meyer
  id: totrans-1006
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Kyle Meyer
- en: Max Chang +
  id: totrans-1007
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Max Chang +
- en: Michael Mueller
  id: totrans-1008
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Michael Mueller
- en: Michael W Schatzow +
  id: totrans-1009
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Michael W Schatzow +
- en: Mike Kelly
  id: totrans-1010
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Mike Kelly
- en: Mortada Mehyar
  id: totrans-1011
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Mortada Mehyar
- en: Nathan Sanders +
  id: totrans-1012
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Nathan Sanders +
- en: Nathan Typanski +
  id: totrans-1013
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Nathan Typanski +
- en: Paul Masurel +
  id: totrans-1014
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Paul Masurel +
- en: Phillip Cloud
  id: totrans-1015
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Phillip Cloud
- en: Pietro Battiston
  id: totrans-1016
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Pietro Battiston
- en: RenzoBertocchi +
  id: totrans-1017
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: RenzoBertocchi +
- en: Ross Petchler +
  id: totrans-1018
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Ross Petchler +
- en: Shahul Hameed +
  id: totrans-1019
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Shahul Hameed +
- en: Shashank Agarwal +
  id: totrans-1020
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Shashank Agarwal +
- en: Stephan Hoyer
  id: totrans-1021
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Stephan Hoyer
- en: Tom Augspurger
  id: totrans-1022
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Tom Augspurger
- en: TomAugspurger
  id: totrans-1023
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: TomAugspurger
- en: Tony Lorenzo +
  id: totrans-1024
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Tony Lorenzo +
- en: Wes Turner
  id: totrans-1025
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Wes Turner
- en: Wilfred Hughes +
  id: totrans-1026
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Wilfred Hughes +
- en: Yevgeniy Grechka +
  id: totrans-1027
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Yevgeniy Grechka +
- en: Yoshiki Vázquez Baeza +
  id: totrans-1028
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Yoshiki Vázquez Baeza +
- en: behzad nouri +
  id: totrans-1029
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: behzad nouri +
- en: benjamin
  id: totrans-1030
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: benjamin
- en: bjonen +
  id: totrans-1031
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: bjonen +
- en: dlovell +
  id: totrans-1032
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: dlovell +
- en: dsm054
  id: totrans-1033
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: dsm054
- en: hunterowens +
  id: totrans-1034
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: hunterowens +
- en: immerrr
  id: totrans-1035
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: immerrr
- en: ischwabacher
  id: totrans-1036
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ischwabacher
- en: jmorris0x0 +
  id: totrans-1037
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: jmorris0x0 +
- en: jnmclarty +
  id: totrans-1038
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: jnmclarty +
- en: jreback
  id: totrans-1039
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: jreback
- en: klonuo +
  id: totrans-1040
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: klonuo +
- en: lexual
  id: totrans-1041
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: lexual
- en: mcjcode +
  id: totrans-1042
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: mcjcode +
- en: mtrbean +
  id: totrans-1043
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: mtrbean +
- en: onesandzeroes
  id: totrans-1044
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: onesandzeroes
- en: rockg
  id: totrans-1045
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: rockg
- en: seth-p
  id: totrans-1046
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: seth-p
- en: sinhrks
  id: totrans-1047
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: sinhrks
- en: someben +
  id: totrans-1048
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: someben +
- en: stahlous +
  id: totrans-1049
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: stahlous +
- en: stas-sl +
  id: totrans-1050
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: stas-sl +
- en: thatneat +
  id: totrans-1051
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: thatneat +
- en: tom-alcorn +
  id: totrans-1052
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: tom-alcorn +
- en: unknown
  id: totrans-1053
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: unknown
- en: unutbu
  id: totrans-1054
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: unutbu
- en: zachcp +
  id: totrans-1055
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: zachcp +
