# ä½¿ç”¨ Ultralytics YOLOv8 è¿›è¡Œé€Ÿåº¦ä¼°ç®— ğŸš€

> åŸæ–‡ï¼š[`docs.ultralytics.com/guides/speed-estimation/`](https://docs.ultralytics.com/guides/speed-estimation/)

## ä»€ä¹ˆæ˜¯é€Ÿåº¦ä¼°ç®—ï¼Ÿ

[é€Ÿåº¦ä¼°ç®—](https://www.ultralytics.com/blog/ultralytics-yolov8-for-speed-estimation-in-computer-vision-projects)æ˜¯åœ¨ç‰¹å®šèƒŒæ™¯ä¸‹è®¡ç®—ç‰©ä½“ç§»åŠ¨é€Ÿç‡çš„è¿‡ç¨‹ï¼Œå¸¸ç”¨äºè®¡ç®—æœºè§†è§‰åº”ç”¨ä¸­ã€‚ä½¿ç”¨[Ultralytics YOLOv8](https://github.com/ultralytics/ultralytics/)ï¼Œæ‚¨å¯ä»¥é€šè¿‡ç‰©ä½“è·Ÿè¸ªç»“åˆè·ç¦»å’Œæ—¶é—´æ•°æ®è®¡ç®—ç‰©ä½“é€Ÿåº¦ï¼Œè¿™å¯¹äºäº¤é€šå’Œç›‘è§†ç­‰ä»»åŠ¡è‡³å…³é‡è¦ã€‚é€Ÿåº¦ä¼°ç®—çš„å‡†ç¡®æ€§ç›´æ¥å½±å“å„ç§åº”ç”¨ç¨‹åºçš„æ•ˆç‡å’Œå¯é æ€§ï¼Œæ˜¯æ™ºèƒ½ç³»ç»Ÿå’Œå®æ—¶å†³ç­–è¿‡ç¨‹ä¸­çš„å…³é”®ç»„æˆéƒ¨åˆ†ã€‚

[`www.youtube.com/embed/rCggzXRRSRo`](https://www.youtube.com/embed/rCggzXRRSRo)

**è§‚çœ‹ï¼š** ä½¿ç”¨ Ultralytics YOLOv8 è¿›è¡Œé€Ÿåº¦ä¼°ç®—

æŸ¥çœ‹æˆ‘ä»¬çš„åšå®¢

æ¬²æ·±å…¥äº†è§£é€Ÿåº¦ä¼°ç®—ï¼Œè¯·æŸ¥çœ‹æˆ‘ä»¬çš„åšå®¢æ–‡ç« ï¼š[Ultralytics YOLOv8 ç”¨äºè®¡ç®—æœºè§†è§‰é¡¹ç›®ä¸­çš„é€Ÿåº¦ä¼°ç®—](https://www.ultralytics.com/blog/ultralytics-yolov8-for-speed-estimation-in-computer-vision-projects)

## é€Ÿåº¦ä¼°ç®—çš„ä¼˜åŠ¿ï¼Ÿ

+   **é«˜æ•ˆçš„äº¤é€šæ§åˆ¶ï¼š** å‡†ç¡®çš„é€Ÿåº¦ä¼°ç®—æœ‰åŠ©äºç®¡ç†äº¤é€šæµé‡ï¼Œå¢å¼ºé“è·¯å®‰å…¨ï¼Œå‡å°‘æ‹¥å µã€‚

+   **ç²¾ç¡®çš„è‡ªä¸»å¯¼èˆªï¼š** åœ¨è‡ªåŠ¨é©¾é©¶ç­‰è‡ªä¸»ç³»ç»Ÿä¸­ï¼Œå¯é çš„é€Ÿåº¦ä¼°ç®—ç¡®ä¿è½¦è¾†å¯¼èˆªå®‰å…¨å’Œå‡†ç¡®ã€‚

+   **å¢å¼ºç›‘è§†å®‰å…¨æ€§ï¼š** åœ¨ç›‘è§†åˆ†æä¸­è¿›è¡Œé€Ÿåº¦ä¼°ç®—æœ‰åŠ©äºè¯†åˆ«å¼‚å¸¸è¡Œä¸ºæˆ–æ½œåœ¨å¨èƒï¼Œæå‡å®‰å…¨æªæ–½çš„æ•ˆæœã€‚

## ç°å®ä¸–ç•Œåº”ç”¨

| Transportation | Transportation |
| --- | --- |
| ![ä½¿ç”¨ Ultralytics YOLOv8 åœ¨é“è·¯ä¸Šè¿›è¡Œé€Ÿåº¦ä¼°ç®—](img/7443c79357e6d19107820f7bced00241.png) | ![ä½¿ç”¨ Ultralytics YOLOv8 åœ¨æ¡¥ä¸Šè¿›è¡Œé€Ÿåº¦ä¼°ç®—](img/b74c8f9b19ff47e0b87fc173a600c844.png) |
| ä½¿ç”¨ Ultralytics YOLOv8 åœ¨é“è·¯ä¸Šè¿›è¡Œé€Ÿåº¦ä¼°ç®— | ä½¿ç”¨ Ultralytics YOLOv8 åœ¨æ¡¥ä¸Šè¿›è¡Œé€Ÿåº¦ä¼°ç®— |

ä½¿ç”¨ YOLOv8 è¿›è¡Œé€Ÿåº¦ä¼°ç®—ç¤ºä¾‹

```py
import cv2

from ultralytics import YOLO, solutions

model = YOLO("yolov8n.pt")
names = model.model.names

cap = cv2.VideoCapture("path/to/video/file.mp4")
assert cap.isOpened(), "Error reading video file"
w, h, fps = (int(cap.get(x)) for x in (cv2.CAP_PROP_FRAME_WIDTH, cv2.CAP_PROP_FRAME_HEIGHT, cv2.CAP_PROP_FPS))

# Video writer
video_writer = cv2.VideoWriter("speed_estimation.avi", cv2.VideoWriter_fourcc(*"mp4v"), fps, (w, h))

line_pts = [(0, 360), (1280, 360)]

# Init speed-estimation obj
speed_obj = solutions.SpeedEstimator(
    reg_pts=line_pts,
    names=names,
    view_img=True,
)

while cap.isOpened():
    success, im0 = cap.read()
    if not success:
        print("Video frame is empty or video processing has been successfully completed.")
        break

    tracks = model.track(im0, persist=True, show=False)

    im0 = speed_obj.estimate_speed(im0, tracks)
    video_writer.write(im0)

cap.release()
video_writer.release()
cv2.destroyAllWindows() 
```

<details class="warning" open="open"><summary>é€Ÿåº¦æ˜¯ä¼°ç®—å€¼</summary>

é€Ÿåº¦å°†æ˜¯ä¸€ä¸ªä¼°ç®—å€¼ï¼Œå¯èƒ½å¹¶ä¸å®Œå…¨å‡†ç¡®ã€‚æ­¤å¤–ï¼Œä¼°ç®—ç»“æœå¯èƒ½å›  GPU é€Ÿåº¦è€Œå¼‚ã€‚</details>

### å‚æ•° `SpeedEstimator`

| Name | Type | Default | Description |
| --- | --- | --- | --- |
| `names` | `dict` | `None` | ç±»åå­—å…¸ã€‚ |
| `reg_pts` | `list` | `[(20, 400), (1260, 400)]` | é€Ÿåº¦ä¼°ç®—çš„åŒºåŸŸç‚¹åˆ—è¡¨ã€‚ |
| `view_img` | `bool` | `False` | æ˜¯å¦æ˜¾ç¤ºå¸¦æœ‰æ³¨é‡Šçš„å›¾åƒã€‚ |
| `line_thickness` | `int` | `2` | ç»˜åˆ¶æ¡†å’Œè½¨é“çº¿çš„çº¿æ¡ç²—ç»†ã€‚ |
| `region_thickness` | `int` | `5` | åŒºåŸŸçº¿çš„çº¿æ¡ç²—ç»†ã€‚ |
| `spdl_dist_thresh` | `int` | `10` | é€Ÿåº¦è®¡ç®—çš„è·ç¦»é˜ˆå€¼ã€‚ |

### å‚æ•° `model.track`

| åç§° | ç±»å‹ | é»˜è®¤ | æè¿° |
| --- | --- | --- | --- |
| `source` | `im0` | `None` | å›¾åƒæˆ–è§†é¢‘çš„æºç›®å½• |
| `persist` | `bool` | `False` | åœ¨å¸§é—´æŒç»­è·Ÿè¸ªè½¨è¿¹ |
| `tracker` | `str` | `botsort.yaml` | è·Ÿè¸ªæ–¹æ³• 'bytetrack' æˆ– 'botsort' |
| `conf` | `float` | `0.3` | ç½®ä¿¡åº¦é˜ˆå€¼ |
| `iou` | `float` | `0.5` | IOU é˜ˆå€¼ |
| `classes` | `list` | `None` | æ ¹æ®ç±»åˆ«ç­›é€‰ç»“æœï¼Œä¾‹å¦‚ classes=0 æˆ– classes=[0,2,3] |
| `verbose` | `bool` | `True` | æ˜¾ç¤ºå¯¹è±¡è·Ÿè¸ªç»“æœ |

## å¸¸è§é—®é¢˜

### å¦‚ä½•ä½¿ç”¨ Ultralytics YOLOv8 ä¼°ç®—å¯¹è±¡é€Ÿåº¦ï¼Ÿ

ä½¿ç”¨ Ultralytics YOLOv8 è¿›è¡Œå¯¹è±¡é€Ÿåº¦ä¼°ç®—æ¶‰åŠç»“åˆç‰©ä½“æ£€æµ‹å’Œè·Ÿè¸ªæŠ€æœ¯ã€‚é¦–å…ˆï¼Œæ‚¨éœ€è¦ä½¿ç”¨ YOLOv8 æ¨¡å‹åœ¨æ¯ä¸ªå¸§ä¸­æ£€æµ‹å¯¹è±¡ã€‚ç„¶åï¼Œè·Ÿè¸ªè¿™äº›å¯¹è±¡è·¨å¸§ä»¥è®¡ç®—å®ƒä»¬éšæ—¶é—´çš„ç§»åŠ¨ã€‚æœ€åï¼Œåˆ©ç”¨å¯¹è±¡åœ¨å¸§é—´ç§»åŠ¨çš„è·ç¦»å’Œå¸§ç‡æ¥ä¼°ç®—å…¶é€Ÿåº¦ã€‚

**ç¤ºä¾‹**ï¼š

```py
import cv2

from ultralytics import YOLO, solutions

model = YOLO("yolov8n.pt")
names = model.model.names

cap = cv2.VideoCapture("path/to/video/file.mp4")
w, h, fps = (int(cap.get(x)) for x in (cv2.CAP_PROP_FRAME_WIDTH, cv2.CAP_PROP_FRAME_HEIGHT, cv2.CAP_PROP_FPS))
video_writer = cv2.VideoWriter("speed_estimation.avi", cv2.VideoWriter_fourcc(*"mp4v"), fps, (w, h))

# Initialize SpeedEstimator
speed_obj = solutions.SpeedEstimator(
    reg_pts=[(0, 360), (1280, 360)],
    names=names,
    view_img=True,
)

while cap.isOpened():
    success, im0 = cap.read()
    if not success:
        break
    tracks = model.track(im0, persist=True, show=False)
    im0 = speed_obj.estimate_speed(im0, tracks)
    video_writer.write(im0)

cap.release()
video_writer.release()
cv2.destroyAllWindows() 
```

æ¬²äº†è§£æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…æˆ‘ä»¬çš„[å®˜æ–¹åšå®¢æ–‡ç« ](https://www.ultralytics.com/blog/ultralytics-yolov8-for-speed-estimation-in-computer-vision-projects)ã€‚

### åœ¨äº¤é€šç®¡ç†ä¸­ä½¿ç”¨ Ultralytics YOLOv8 è¿›è¡Œé€Ÿåº¦ä¼°ç®—æœ‰å“ªäº›å¥½å¤„ï¼Ÿ

ä½¿ç”¨ Ultralytics YOLOv8 è¿›è¡Œé€Ÿåº¦ä¼°ç®—åœ¨äº¤é€šç®¡ç†ä¸­å…·æœ‰æ˜¾è‘—ä¼˜åŠ¿ï¼š

+   **å¢å¼ºå®‰å…¨æ€§**ï¼šå‡†ç¡®ä¼°ç®—è½¦è¾†é€Ÿåº¦ï¼Œæ£€æµ‹è¶…é€Ÿï¼Œæå‡é“è·¯å®‰å…¨ã€‚

+   **å®æ—¶ç›‘æ§**ï¼šåˆ©ç”¨ YOLOv8 çš„å®æ—¶å¯¹è±¡æ£€æµ‹èƒ½åŠ›æœ‰æ•ˆç›‘æ§äº¤é€šæµé‡å’Œæ‹¥å µæƒ…å†µã€‚

+   **å¯æ‰©å±•æ€§**ï¼šåœ¨å„ç§ç¡¬ä»¶è®¾ç½®ä¸­éƒ¨ç½²æ¨¡å‹ï¼Œä»è¾¹ç¼˜è®¾å¤‡åˆ°æœåŠ¡å™¨ï¼Œç¡®ä¿å¤§è§„æ¨¡å®æ–½çš„çµæ´»å’Œå¯æ‰©å±•è§£å†³æ–¹æ¡ˆã€‚

æ¬²äº†è§£æ›´å¤šåº”ç”¨ç¨‹åºï¼Œè¯·å‚é˜…é€Ÿåº¦ä¼°ç®—çš„ä¼˜åŠ¿ã€‚

### YOLOv8 æ˜¯å¦å¯ä»¥ä¸å…¶ä»– AI æ¡†æ¶ï¼ˆå¦‚ TensorFlow æˆ– PyTorchï¼‰é›†æˆï¼Ÿ

æ˜¯çš„ï¼ŒYOLOv8 å¯ä»¥ä¸ TensorFlow å’Œ PyTorch ç­‰å…¶ä»– AI æ¡†æ¶é›†æˆã€‚Ultralytics æ”¯æŒå°† YOLOv8 æ¨¡å‹å¯¼å‡ºä¸º ONNXã€TensorRT å’Œ CoreML ç­‰å¤šç§æ ¼å¼ï¼Œç¡®ä¿ä¸å…¶ä»– ML æ¡†æ¶çš„å¹³æ»‘äº’æ“ä½œæ€§ã€‚

å°† YOLOv8 æ¨¡å‹å¯¼å‡ºä¸º ONNX æ ¼å¼ï¼š

```py
yolo  export  --weights  yolov8n.pt  --include  onnx 
```

åœ¨æˆ‘ä»¬çš„å¯¼å‡ºæŒ‡å—ä¸­äº†è§£æ›´å¤šå…³äºå¯¼å‡ºæ¨¡å‹çš„ä¿¡æ¯ã€‚

### ä½¿ç”¨ Ultralytics YOLOv8 è¿›è¡Œé€Ÿåº¦ä¼°ç®—çš„å‡†ç¡®æ€§å¦‚ä½•ï¼Ÿ

ä½¿ç”¨ Ultralytics YOLOv8 è¿›è¡Œé€Ÿåº¦ä¼°ç®—çš„å‡†ç¡®æ€§å–å†³äºå¤šç§å› ç´ ï¼ŒåŒ…æ‹¬ç‰©ä½“è·Ÿè¸ªçš„è´¨é‡ã€è§†é¢‘çš„åˆ†è¾¨ç‡å’Œå¸§ç‡ä»¥åŠç¯å¢ƒå˜é‡ã€‚è™½ç„¶é€Ÿåº¦ä¼°ç®—å™¨æä¾›å¯é çš„ä¼°ç®—ç»“æœï¼Œä½†ç”±äºå¸§å¤„ç†é€Ÿåº¦å’Œç‰©ä½“é®æŒ¡çš„å˜åŒ–ï¼Œå¯èƒ½ä¸æ˜¯ 100%å‡†ç¡®ã€‚

**æ³¨æ„**ï¼šåœ¨å¯èƒ½çš„æƒ…å†µä¸‹ï¼Œå§‹ç»ˆè€ƒè™‘è¯¯å·®èŒƒå›´ï¼Œå¹¶ä½¿ç”¨å®é™…æ•°æ®éªŒè¯ä¼°ç®—ç»“æœã€‚

æ¬²äº†è§£æ›´å¤šæé«˜ç²¾åº¦çš„æç¤ºï¼Œè¯·æŸ¥çœ‹ `SpeedEstimator` éƒ¨åˆ†çš„å‚æ•°ã€‚

### ä¸ºä»€ä¹ˆé€‰æ‹© Ultralytics YOLOv8 è€Œä¸æ˜¯ TensorFlow Object Detection API ç­‰å…¶ä»–ç‰©ä½“æ£€æµ‹æ¨¡å‹ï¼Ÿ

Ultralytics YOLOv8 ç›¸æ¯” TensorFlow ç›®æ ‡æ£€æµ‹ API ç­‰å…¶ä»–å¯¹è±¡æ£€æµ‹æ¨¡å‹å…·æœ‰å‡ ä¸ªä¼˜åŠ¿ï¼š

+   **å®æ—¶æ€§èƒ½**ï¼šYOLOv8 ç»è¿‡ä¼˜åŒ–ï¼Œå¯å®ç°å®æ—¶æ£€æµ‹ï¼Œæä¾›é«˜é€Ÿå’Œå‡†ç¡®æ€§ã€‚

+   **æ˜“ç”¨æ€§**ï¼šè®¾è®¡æœ‰ç”¨æˆ·å‹å¥½çš„ç•Œé¢ï¼ŒYOLOv8 ç®€åŒ–äº†æ¨¡å‹è®­ç»ƒå’Œéƒ¨ç½²ã€‚

+   **å¤šåŠŸèƒ½æ€§**ï¼šæ”¯æŒå¤šç§ä»»åŠ¡ï¼ŒåŒ…æ‹¬å¯¹è±¡æ£€æµ‹ã€åˆ†å‰²å’Œå§¿æ€ä¼°è®¡ã€‚

+   **ç¤¾åŒºä¸æ”¯æŒ**ï¼šYOLOv8 å¾—åˆ°æ´»è·ƒç¤¾åŒºå’Œè¯¦å°½æ–‡æ¡£çš„æ”¯æŒï¼Œç¡®ä¿å¼€å‘è€…æ‹¥æœ‰æ‰€éœ€èµ„æºã€‚

æ¬²äº†è§£æ›´å¤šå…³äº YOLOv8 çš„ä¼˜åŠ¿ï¼Œè¯·æŸ¥çœ‹æˆ‘ä»¬è¯¦ç»†çš„æ¨¡å‹é¡µé¢ã€‚
