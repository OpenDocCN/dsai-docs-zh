- en: What’s new in 2.1.1 (September 20, 2023)
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://pandas.pydata.org/docs/whatsnew/v2.1.1.html](https://pandas.pydata.org/docs/whatsnew/v2.1.1.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: These are the changes in pandas 2.1.1\. See [Release notes](index.html#release)
    for a full changelog including other versions of pandas.
  prefs: []
  type: TYPE_NORMAL
- en: '## Fixed regressions'
  prefs: []
  type: TYPE_NORMAL
- en: Fixed regression in [`concat()`](../reference/api/pandas.concat.html#pandas.concat
    "pandas.concat") when [`DataFrame`](../reference/api/pandas.DataFrame.html#pandas.DataFrame
    "pandas.DataFrame") ‘s have two different extension dtypes ([GH 54848](https://github.com/pandas-dev/pandas/issues/54848))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`merge()`](../reference/api/pandas.merge.html#pandas.merge
    "pandas.merge") when merging over a PyArrow string index ([GH 54894](https://github.com/pandas-dev/pandas/issues/54894))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`read_csv()`](../reference/api/pandas.read_csv.html#pandas.read_csv
    "pandas.read_csv") when `usecols` is given and `dtypes` is a dict for `engine="python"`
    ([GH 54868](https://github.com/pandas-dev/pandas/issues/54868))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`read_csv()`](../reference/api/pandas.read_csv.html#pandas.read_csv
    "pandas.read_csv") when `delim_whitespace` is True ([GH 54918](https://github.com/pandas-dev/pandas/issues/54918),
    [GH 54931](https://github.com/pandas-dev/pandas/issues/54931))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in `GroupBy.get_group()` raising for `axis=1` ([GH 54858](https://github.com/pandas-dev/pandas/issues/54858))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in `DataFrame.__setitem__()` raising `AssertionError` when
    setting a [`Series`](../reference/api/pandas.Series.html#pandas.Series "pandas.Series")
    with a partial [`MultiIndex`](../reference/api/pandas.MultiIndex.html#pandas.MultiIndex
    "pandas.MultiIndex") ([GH 54875](https://github.com/pandas-dev/pandas/issues/54875))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.filter()`](../reference/api/pandas.DataFrame.filter.html#pandas.DataFrame.filter
    "pandas.DataFrame.filter") not respecting the order of elements for `filter` ([GH
    54980](https://github.com/pandas-dev/pandas/issues/54980))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.to_sql()`](../reference/api/pandas.DataFrame.to_sql.html#pandas.DataFrame.to_sql
    "pandas.DataFrame.to_sql") not roundtripping datetime columns correctly for sqlite
    ([GH 54877](https://github.com/pandas-dev/pandas/issues/54877))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in `DataFrameGroupBy.agg()` when aggregating a DataFrame with
    duplicate column names using a dictionary ([GH 55006](https://github.com/pandas-dev/pandas/issues/55006))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`MultiIndex.append()`](../reference/api/pandas.MultiIndex.append.html#pandas.MultiIndex.append
    "pandas.MultiIndex.append") raising when appending overlapping [`IntervalIndex`](../reference/api/pandas.IntervalIndex.html#pandas.IntervalIndex
    "pandas.IntervalIndex") levels ([GH 54934](https://github.com/pandas-dev/pandas/issues/54934))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`Series.drop_duplicates()`](../reference/api/pandas.Series.drop_duplicates.html#pandas.Series.drop_duplicates
    "pandas.Series.drop_duplicates") for PyArrow strings ([GH 54904](https://github.com/pandas-dev/pandas/issues/54904))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`Series.interpolate()`](../reference/api/pandas.Series.interpolate.html#pandas.Series.interpolate
    "pandas.Series.interpolate") raising when `fill_value` was given ([GH 54920](https://github.com/pandas-dev/pandas/issues/54920))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`Series.value_counts()`](../reference/api/pandas.Series.value_counts.html#pandas.Series.value_counts
    "pandas.Series.value_counts") raising for numeric data if `bins` was specified
    ([GH 54857](https://github.com/pandas-dev/pandas/issues/54857))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in comparison operations for PyArrow backed columns not propagating
    exceptions correctly ([GH 54944](https://github.com/pandas-dev/pandas/issues/54944))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Fixed regression when comparing a [`Series`](../reference/api/pandas.Series.html#pandas.Series
    "pandas.Series") with `datetime64` dtype with `None` ([GH 54870](https://github.com/pandas-dev/pandas/issues/54870))  ##
    Bug fixes'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed bug for [`ArrowDtype`](../reference/api/pandas.ArrowDtype.html#pandas.ArrowDtype
    "pandas.ArrowDtype") raising `NotImplementedError` for fixed-size list ([GH 55000](https://github.com/pandas-dev/pandas/issues/55000))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed bug in [`DataFrame.stack()`](../reference/api/pandas.DataFrame.stack.html#pandas.DataFrame.stack
    "pandas.DataFrame.stack") with `future_stack=True` and columns a non-[`MultiIndex`](../reference/api/pandas.MultiIndex.html#pandas.MultiIndex
    "pandas.MultiIndex") consisting of tuples ([GH 54948](https://github.com/pandas-dev/pandas/issues/54948))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed bug in [`Series.dt.tz()`](../reference/api/pandas.Series.dt.tz.html#pandas.Series.dt.tz
    "pandas.Series.dt.tz") with [`ArrowDtype`](../reference/api/pandas.ArrowDtype.html#pandas.ArrowDtype
    "pandas.ArrowDtype") where a string was returned instead of a `tzinfo` object
    ([GH 55003](https://github.com/pandas-dev/pandas/issues/55003))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Fixed bug in [`Series.pct_change()`](../reference/api/pandas.Series.pct_change.html#pandas.Series.pct_change
    "pandas.Series.pct_change") and [`DataFrame.pct_change()`](../reference/api/pandas.DataFrame.pct_change.html#pandas.DataFrame.pct_change
    "pandas.DataFrame.pct_change") showing unnecessary `FutureWarning` ([GH 54981](https://github.com/pandas-dev/pandas/issues/54981))  ##
    Other'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Reverted the deprecation that disallowed [`Series.apply()`](../reference/api/pandas.Series.apply.html#pandas.Series.apply
    "pandas.Series.apply") returning a [`DataFrame`](../reference/api/pandas.DataFrame.html#pandas.DataFrame
    "pandas.DataFrame") when the passed-in callable returns a [`Series`](../reference/api/pandas.Series.html#pandas.Series
    "pandas.Series") object ([GH 52116](https://github.com/pandas-dev/pandas/issues/52116))  ##
    Contributors'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A total of 13 people contributed patches to this release. People with a “+”
    by their names contributed a patch for the first time.
  prefs: []
  type: TYPE_NORMAL
- en: Ben Greiner +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Joris Van den Bossche
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Kai Mühlbauer +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Luke Manley
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Lumberbot (aka Jack)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Mateusz Sokół
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Matthew Roeschke
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Pandas Development Team
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Patrick Hoefler
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Rajat Subhra Mukherjee
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Ralf Gommers
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Richard Shadrach
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Thomas Li  ## Fixed regressions'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`concat()`](../reference/api/pandas.concat.html#pandas.concat
    "pandas.concat") when [`DataFrame`](../reference/api/pandas.DataFrame.html#pandas.DataFrame
    "pandas.DataFrame") ‘s have two different extension dtypes ([GH 54848](https://github.com/pandas-dev/pandas/issues/54848))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`merge()`](../reference/api/pandas.merge.html#pandas.merge
    "pandas.merge") when merging over a PyArrow string index ([GH 54894](https://github.com/pandas-dev/pandas/issues/54894))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`read_csv()`](../reference/api/pandas.read_csv.html#pandas.read_csv
    "pandas.read_csv") when `usecols` is given and `dtypes` is a dict for `engine="python"`
    ([GH 54868](https://github.com/pandas-dev/pandas/issues/54868))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`read_csv()`](../reference/api/pandas.read_csv.html#pandas.read_csv
    "pandas.read_csv") when `delim_whitespace` is True ([GH 54918](https://github.com/pandas-dev/pandas/issues/54918),
    [GH 54931](https://github.com/pandas-dev/pandas/issues/54931))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in `GroupBy.get_group()` raising for `axis=1` ([GH 54858](https://github.com/pandas-dev/pandas/issues/54858))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in `DataFrame.__setitem__()` raising `AssertionError` when
    setting a [`Series`](../reference/api/pandas.Series.html#pandas.Series "pandas.Series")
    with a partial [`MultiIndex`](../reference/api/pandas.MultiIndex.html#pandas.MultiIndex
    "pandas.MultiIndex") ([GH 54875](https://github.com/pandas-dev/pandas/issues/54875))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.filter()`](../reference/api/pandas.DataFrame.filter.html#pandas.DataFrame.filter
    "pandas.DataFrame.filter") not respecting the order of elements for `filter` ([GH
    54980](https://github.com/pandas-dev/pandas/issues/54980))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.to_sql()`](../reference/api/pandas.DataFrame.to_sql.html#pandas.DataFrame.to_sql
    "pandas.DataFrame.to_sql") not roundtripping datetime columns correctly for sqlite
    ([GH 54877](https://github.com/pandas-dev/pandas/issues/54877))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in `DataFrameGroupBy.agg()` when aggregating a DataFrame with
    duplicate column names using a dictionary ([GH 55006](https://github.com/pandas-dev/pandas/issues/55006))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`MultiIndex.append()`](../reference/api/pandas.MultiIndex.append.html#pandas.MultiIndex.append
    "pandas.MultiIndex.append") raising when appending overlapping [`IntervalIndex`](../reference/api/pandas.IntervalIndex.html#pandas.IntervalIndex
    "pandas.IntervalIndex") levels ([GH 54934](https://github.com/pandas-dev/pandas/issues/54934))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`Series.drop_duplicates()`](../reference/api/pandas.Series.drop_duplicates.html#pandas.Series.drop_duplicates
    "pandas.Series.drop_duplicates") for PyArrow strings ([GH 54904](https://github.com/pandas-dev/pandas/issues/54904))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`Series.interpolate()`](../reference/api/pandas.Series.interpolate.html#pandas.Series.interpolate
    "pandas.Series.interpolate") raising when `fill_value` was given ([GH 54920](https://github.com/pandas-dev/pandas/issues/54920))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`Series.value_counts()`](../reference/api/pandas.Series.value_counts.html#pandas.Series.value_counts
    "pandas.Series.value_counts") raising for numeric data if `bins` was specified
    ([GH 54857](https://github.com/pandas-dev/pandas/issues/54857))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in comparison operations for PyArrow backed columns not propagating
    exceptions correctly ([GH 54944](https://github.com/pandas-dev/pandas/issues/54944))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression when comparing a [`Series`](../reference/api/pandas.Series.html#pandas.Series
    "pandas.Series") with `datetime64` dtype with `None` ([GH 54870](https://github.com/pandas-dev/pandas/issues/54870))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '## Bug fixes'
  prefs: []
  type: TYPE_NORMAL
- en: Fixed bug for [`ArrowDtype`](../reference/api/pandas.ArrowDtype.html#pandas.ArrowDtype
    "pandas.ArrowDtype") raising `NotImplementedError` for fixed-size list ([GH 55000](https://github.com/pandas-dev/pandas/issues/55000))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed bug in [`DataFrame.stack()`](../reference/api/pandas.DataFrame.stack.html#pandas.DataFrame.stack
    "pandas.DataFrame.stack") with `future_stack=True` and columns a non-[`MultiIndex`](../reference/api/pandas.MultiIndex.html#pandas.MultiIndex
    "pandas.MultiIndex") consisting of tuples ([GH 54948](https://github.com/pandas-dev/pandas/issues/54948))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed bug in [`Series.dt.tz()`](../reference/api/pandas.Series.dt.tz.html#pandas.Series.dt.tz
    "pandas.Series.dt.tz") with [`ArrowDtype`](../reference/api/pandas.ArrowDtype.html#pandas.ArrowDtype
    "pandas.ArrowDtype") where a string was returned instead of a `tzinfo` object
    ([GH 55003](https://github.com/pandas-dev/pandas/issues/55003))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed bug in [`Series.pct_change()`](../reference/api/pandas.Series.pct_change.html#pandas.Series.pct_change
    "pandas.Series.pct_change") and [`DataFrame.pct_change()`](../reference/api/pandas.DataFrame.pct_change.html#pandas.DataFrame.pct_change
    "pandas.DataFrame.pct_change") showing unnecessary `FutureWarning` ([GH 54981](https://github.com/pandas-dev/pandas/issues/54981))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '## Other'
  prefs: []
  type: TYPE_NORMAL
- en: Reverted the deprecation that disallowed [`Series.apply()`](../reference/api/pandas.Series.apply.html#pandas.Series.apply
    "pandas.Series.apply") returning a [`DataFrame`](../reference/api/pandas.DataFrame.html#pandas.DataFrame
    "pandas.DataFrame") when the passed-in callable returns a [`Series`](../reference/api/pandas.Series.html#pandas.Series
    "pandas.Series") object ([GH 52116](https://github.com/pandas-dev/pandas/issues/52116))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '## Contributors'
  prefs: []
  type: TYPE_NORMAL
- en: A total of 13 people contributed patches to this release. People with a “+”
    by their names contributed a patch for the first time.
  prefs: []
  type: TYPE_NORMAL
- en: Ben Greiner +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Joris Van den Bossche
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Kai Mühlbauer +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Luke Manley
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Lumberbot (aka Jack)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Mateusz Sokół
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Matthew Roeschke
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Pandas Development Team
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Patrick Hoefler
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Rajat Subhra Mukherjee
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Ralf Gommers
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Richard Shadrach
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Thomas Li
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
