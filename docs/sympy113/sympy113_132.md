# çŸ¢é‡ç§¯åˆ†çš„åº”ç”¨

> åŽŸæ–‡ï¼š[`docs.sympy.org/latest/modules/vector/vector_integration.html`](https://docs.sympy.org/latest/modules/vector/vector_integration.html)

è¦åœ¨åŒºåŸŸä¸Šç§¯åˆ†ä¸€ä¸ªæ ‡é‡æˆ–çŸ¢é‡åœºï¼Œæˆ‘ä»¬å¿…é¡»é¦–å…ˆå®šä¹‰ä¸€ä¸ªåŒºåŸŸã€‚SymPy æä¾›äº†ä¸‰ç§å®šä¹‰åŒºåŸŸçš„æ–¹æ³•ï¼š

1.  ä½¿ç”¨å¸¦æœ‰`ParametricRegion`çš„å‚æ•°æ–¹ç¨‹ã€‚

1.  ä½¿ç”¨å¸¦æœ‰`ImplicitRegion`çš„éšå¼æ–¹ç¨‹ã€‚

1.  ä½¿ç”¨å‡ ä½•æ¨¡å—çš„å¯¹è±¡ã€‚

`vector_integrate()` å‡½æ•°ç”¨äºŽåœ¨ä»»ä½•ç±»åž‹çš„åŒºåŸŸä¸Šç§¯åˆ†æ ‡é‡æˆ–çŸ¢é‡åœºã€‚å®ƒæ ¹æ®å¯¹è±¡çš„æ€§è´¨è‡ªåŠ¨ç¡®å®šç§¯åˆ†çš„ç±»åž‹ï¼ˆçº¿ã€é¢æˆ–ä½“ï¼‰ã€‚

æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªåæ ‡ç³»å¹¶ä¸ºç¤ºä¾‹åšå¿…è¦çš„å¯¼å…¥ã€‚

```py
>>> from sympy import sin, cos, exp, pi, symbols
>>> from sympy.vector import CoordSys3D, ParametricRegion, ImplicitRegion, vector_integrate
>>> from sympy.abc import r, x, y, z, theta, phi
>>> C = CoordSys3D('C') 
```

## å‘¨é•¿ã€è¡¨é¢ç§¯å’Œä½“ç§¯çš„è®¡ç®—

è¦è®¡ç®—åœ†çš„å‘¨é•¿ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰å®ƒã€‚è®©æˆ‘ä»¬ä½¿ç”¨å…¶å‚æ•°æ–¹ç¨‹å®šä¹‰å®ƒã€‚

```py
>>> param_circle = ParametricRegion((4*cos(theta), 4*sin(theta)), (theta, 0, 2*pi)) 
```

æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶éšå¼æ–¹ç¨‹å®šä¹‰ä¸€ä¸ªåœ†ã€‚

```py
>>> implicit_circle = ImplicitRegion((x, y), x**2 + y**2 - 4) 
```

å›¾å½¢çš„å‘¨é•¿ç­‰äºŽå®ƒåœ¨å•ä½æ ‡é‡åœºä¸Šçš„ç§¯åˆ†çš„ç»å¯¹å€¼ã€‚

```py
>>> vector_integrate(1, param_circle)
8*pi
>>> vector_integrate(1, implicit_circle)
4*pi 
```

å‡è®¾ç”¨æˆ·æƒ³è¦è®¡ç®—ä¸‰è§’å½¢çš„å‘¨é•¿ã€‚ç¡®å®šä¸‰è§’å½¢çš„å‚æ•°è¡¨ç¤ºå¯èƒ½å¾ˆå›°éš¾ã€‚ç›¸åï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨å‡ ä½•æ¨¡å—ä¸­ `Polygon` ç±»çš„å¯¹è±¡ã€‚

```py
>>> from sympy.geometry import Point, Polygon
>>> triangle = Polygon(Point(1, 2), (3, 5), (1,6))
>>> vector_integrate(1, triangle)
sqrt(5) + sqrt(13) + 4 
```

è¦å®šä¹‰ä¸€ä¸ªå®žå¿ƒçƒï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸‰ä¸ªå‚æ•°ï¼ˆrï¼Œtheta å’Œ phiï¼‰ã€‚å¯¹äºŽ`ParametricRegion`å¯¹è±¡æ¥è¯´ï¼Œé™åˆ¶çš„é¡ºåºå†³å®šç§¯åˆ†çš„ç¬¦å·ã€‚

```py
>>> solidsphere = ParametricRegion((r*sin(phi)*cos(theta),r*sin(phi)*sin(theta), r*cos(phi)),
...                             (phi, 0, pi), (theta, 0, 2*pi), (r, 0, 3))
>>> vector_integrate(1, solidsphere)
36*pi 
```

## ç‰©ä½“è´¨é‡çš„è®¡ç®—

è€ƒè™‘ä¸€ä¸ªä¸‰è§’å½¢ç‰‡æ®µ ð‘…ï¼Œå…¶é¡¶ç‚¹ä¸º (0,0)ï¼Œ(0, 5)ï¼Œ(5,0)ï¼Œå¯†åº¦ä¸º \(\rho(x, y) = xy\:kg/mÂ²\)ã€‚æ‰¾åˆ°æ€»è´¨é‡ã€‚

```py
>>> triangle = ParametricRegion((x, y), (x, 0, 5), (y, 0, 5 - x))
>>> vector_integrate(C.x*C.y, triangle)
625/24 
```

æ‰¾åˆ°ä»¥ z è½´ä¸ºä¸­å¿ƒçš„åœ†æŸ±ä½“çš„è´¨é‡ï¼Œå…¶é«˜åº¦ä¸º hï¼ŒåŠå¾„ä¸º aï¼Œå¯†åº¦ä¸º \(\rho = xÂ² + yÂ²\:kg/mÂ²\)ã€‚

```py
>>> a, h = symbols('a h', positive=True)
>>> cylinder = ParametricRegion((r*cos(theta), r*sin(theta), z),
...                     (theta, 0, 2*pi), (z, 0, h), (r, 0, a))
>>> vector_integrate(C.x**2 + C.y**2, cylinder)
pi*a**4*h/2 
```

## é€šé‡çš„è®¡ç®—

1\. è€ƒè™‘ç©ºé—´ä¸­å­˜åœ¨ä¸€ä¸ªæ’å®šå‘é‡åœº \(E(x, y, z) = a\mathbf{\hat{k}}\)ã€‚åŠå¾„ä¸º r çš„åŠçƒä½äºŽ x-y å¹³é¢ä¸Šã€‚è¯¥åœºé€šè¿‡çƒä½“çš„é€šé‡æ˜¯å¤šå°‘ï¼Ÿ

```py
>>> semisphere = ParametricRegion((r*sin(phi)*cos(theta), r*sin(phi)*sin(theta), r*cos(phi)),\
...                             (phi, 0, pi/2), (theta, 0, 2*pi))
>>> flux = vector_integrate(a*C.k, semisphere)
>>> flux
pi*a*r**2 
```

2\. è€ƒè™‘ç©ºé—´ä¸­å­˜åœ¨å‘é‡åœº \(E(x, y, z) = xÂ² \mathbf{\hat{k}}\) åœ¨ x-y å¹³é¢ä¸Šæ–¹ï¼Œå¹¶ä¸”åœ¨ x-y å¹³é¢ä¸‹æ–¹å­˜åœ¨ä¸€ä¸ªåœº \(E(x, y, z) = yÂ² \mathbf{\hat{k}}\)ã€‚è¯¥å‘é‡åœºç©¿è¿‡è¾¹é•¿ä¸º L ä¸”ä¸­å¿ƒåœ¨åŽŸç‚¹çš„ç«‹æ–¹ä½“çš„é€šé‡æ˜¯å¤šå°‘ï¼Ÿ

è¯¥åœºæ˜¯æ²¿ç€ z è½´å¹³è¡Œçš„ï¼Œå› æ­¤åªæœ‰ç®±å­çš„é¡¶éƒ¨å’Œåº•éƒ¨ä¼šå¯¹é€šé‡æœ‰è´¡çŒ®ã€‚

```py
>>> L = symbols('L', positive=True)
>>> top_face = ParametricRegion((x, y, L/2), (x, -L/2, L/2), (y, -L/2, L/2))
>>> bottom_face = ParametricRegion((x, y, -L/2), (x, -L/2, L/2), (y, -L/2, L/2))
>>> flux = vector_integrate(C.x**2*C.k, top_face) + vector_integrate(C.y**2*C.k, bottom_face)
>>> flux
L**4/6 
```

## éªŒè¯æ–¯æ‰˜å…‹æ–¯å®šç†

å‚è§[æ–¯æ‰˜å…‹æ–¯å®šç†](https://en.wikipedia.org/wiki/Stokes%27_theorem)

ç¤ºä¾‹ 1

```py
>>> from sympy.vector import curl
>>> curve = ParametricRegion((cos(theta), sin(theta)), (theta, 0, pi/2))
>>> surface = ParametricRegion((r*cos(theta), r*sin(theta)), (r, 0, 1), (theta, 0, pi/2))
>>> F = C.y*C.i + C.z*C.k + C.x*C.k
>>>
>>> vector_integrate(F, curve)
-pi/4
>>> vector_integrate(curl(F), surface)
-pi/4 
```

ç¤ºä¾‹ 2

```py
>>> circle = ParametricRegion((cos(theta), sin(theta), 1), (theta, 0, 2*pi))
>>> cone = ParametricRegion((r*cos(theta), r*sin(theta), r), (r, 0, 1), (theta, 0, 2*pi))
>>> cone = ParametricRegion((r*cos(theta), r*sin(theta), r), (r, 0, 1), (theta, 0, 2*pi))
>>> f = (-C.y**3/3 + sin(C.x))*C.i + (C.x**3/3 + cos(C.y))*C.j + C.x*C.y*C.z*C.k
>>> vector_integrate(f,  circle)
pi/2
>>> vector_integrate(curl(f),  cone)
pi/2 
```

## éªŒè¯æ•£åº¦å®šç†

å‚è§[æ•£åº¦å®šç†](https://en.wikipedia.org/wiki/Divergence_theorem)

ç¤ºä¾‹ 1

```py
>>> from sympy.vector import divergence
>>> sphere = ParametricRegion((4*sin(phi)*cos(theta),4*sin(phi)*sin(theta), 4*cos(phi)),
...                         (phi, 0, pi), (theta, 0, 2*pi))
>>> solidsphere = ParametricRegion((r*sin(phi)*cos(theta),r*sin(phi)*sin(theta), r*cos(phi)),
...     (r, 0, 4),(phi, 0, pi), (theta, 0, 2*pi))
>>> field = C.x**3*C.i + C.y**3*C.j + C.z**3*C.k
>>> vector_integrate(field, sphere)
12288*pi/5
>>> vector_integrate(divergence(field), solidsphere)
12288*pi/5 
```

ç¤ºä¾‹ 2

```py
>>> cube = ParametricRegion((x, y, z), (x, 0, 1), (y, 0, 1), (z, 0, 1))
>>> field = 2*C.x*C.y*C.i + 3*C.x*C.y*C.j + C.z*exp(C.x + C.y)*C.k
>>> vector_integrate(divergence(field), cube)
-E + 7/2 + E*(-1 + E) 
```
