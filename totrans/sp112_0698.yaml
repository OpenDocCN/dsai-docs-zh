- en: scipy.sparse.diags
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://docs.scipy.org/doc/scipy-1.12.0/reference/generated/scipy.sparse.diags.html#scipy.sparse.diags](https://docs.scipy.org/doc/scipy-1.12.0/reference/generated/scipy.sparse.diags.html#scipy.sparse.diags)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: Construct a sparse matrix from diagonals.
  prefs: []
  type: TYPE_NORMAL
- en: Warning
  prefs: []
  type: TYPE_NORMAL
- en: This function returns a sparse matrix – not a sparse array. You are encouraged
    to use `diags_array` to take advantage of the sparse array functionality.
  prefs: []
  type: TYPE_NORMAL
- en: 'Parameters:'
  prefs: []
  type: TYPE_NORMAL
- en: '**diagonals**sequence of array_like'
  prefs: []
  type: TYPE_NORMAL
- en: Sequence of arrays containing the matrix diagonals, corresponding to *offsets*.
  prefs: []
  type: TYPE_NORMAL
- en: '**offsets**sequence of int or an int, optional'
  prefs: []
  type: TYPE_NORMAL
- en: 'Diagonals to set:'
  prefs: []
  type: TYPE_NORMAL
- en: k = 0 the main diagonal (default)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: k > 0 the kth upper diagonal
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: k < 0 the kth lower diagonal
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**shape**tuple of int, optional'
  prefs: []
  type: TYPE_NORMAL
- en: Shape of the result. If omitted, a square matrix large enough to contain the
    diagonals is returned.
  prefs: []
  type: TYPE_NORMAL
- en: '**format**{“dia”, “csr”, “csc”, “lil”, …}, optional'
  prefs: []
  type: TYPE_NORMAL
- en: Matrix format of the result. By default (format=None) an appropriate sparse
    matrix format is returned. This choice is subject to change.
  prefs: []
  type: TYPE_NORMAL
- en: '**dtype**dtype, optional'
  prefs: []
  type: TYPE_NORMAL
- en: Data type of the matrix.
  prefs: []
  type: TYPE_NORMAL
- en: See also
  prefs: []
  type: TYPE_NORMAL
- en: '[`spdiags`](scipy.sparse.spdiags.html#scipy.sparse.spdiags "scipy.sparse.spdiags")'
  prefs: []
  type: TYPE_NORMAL
- en: construct matrix from diagonals
  prefs: []
  type: TYPE_NORMAL
- en: '[`diags_array`](scipy.sparse.diags_array.html#scipy.sparse.diags_array "scipy.sparse.diags_array")'
  prefs: []
  type: TYPE_NORMAL
- en: construct sparse array instead of sparse matrix
  prefs: []
  type: TYPE_NORMAL
- en: Notes
  prefs: []
  type: TYPE_NORMAL
- en: This function differs from [`spdiags`](scipy.sparse.spdiags.html#scipy.sparse.spdiags
    "scipy.sparse.spdiags") in the way it handles off-diagonals.
  prefs: []
  type: TYPE_NORMAL
- en: 'The result from [`diags`](#scipy.sparse.diags "scipy.sparse.diags") is the
    sparse equivalent of:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: Repeated diagonal offsets are disallowed.
  prefs: []
  type: TYPE_NORMAL
- en: New in version 0.11.
  prefs: []
  type: TYPE_NORMAL
- en: Examples
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'Broadcasting of scalars is supported (but shape needs to be specified):'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: 'If only one diagonal is wanted (as in [`numpy.diag`](https://numpy.org/devdocs/reference/generated/numpy.diag.html#numpy.diag
    "(in NumPy v2.0.dev0)")), the following works as well:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
