- en: What’s new in 2.2.2 (April 10, 2024)
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://pandas.pydata.org/docs/whatsnew/v2.2.2.html](https://pandas.pydata.org/docs/whatsnew/v2.2.2.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: These are the changes in pandas 2.2.2\. See [Release notes](index.html#release)
    for a full changelog including other versions of pandas.
  prefs: []
  type: TYPE_NORMAL
- en: '## Pandas 2.2.2 is now compatible with numpy 2.0'
  prefs: []
  type: TYPE_NORMAL
- en: Pandas 2.2.2 is the first version of pandas that is generally compatible with
    the upcoming numpy 2.0 release, and wheels for pandas 2.2.2 will work with both
    numpy 1.x and 2.x.
  prefs: []
  type: TYPE_NORMAL
- en: One major caveat is that arrays created with numpy 2.0’s new `StringDtype` will
    convert to `object` dtyped arrays upon [`Series`](../reference/api/pandas.Series.html#pandas.Series
    "pandas.Series")/[`DataFrame`](../reference/api/pandas.DataFrame.html#pandas.DataFrame
    "pandas.DataFrame") creation. Full support for numpy 2.0’s StringDtype is expected
    to land in pandas 3.0.
  prefs: []
  type: TYPE_NORMAL
- en: 'As usual please report any bugs discovered to our [issue tracker](https://github.com/pandas-dev/pandas/issues/new/choose)  ##
    Fixed regressions'
  prefs: []
  type: TYPE_NORMAL
- en: '[`DataFrame.__dataframe__()`](../reference/api/pandas.DataFrame.__dataframe__.html#pandas.DataFrame.__dataframe__
    "pandas.DataFrame.__dataframe__") was producing incorrect data buffers when the
    a column’s type was a pandas nullable on with missing values ([GH 56702](https://github.com/pandas-dev/pandas/issues/56702))'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[`DataFrame.__dataframe__()`](../reference/api/pandas.DataFrame.__dataframe__.html#pandas.DataFrame.__dataframe__
    "pandas.DataFrame.__dataframe__") was producing incorrect data buffers when the
    a column’s type was a pyarrow nullable on with missing values ([GH 57664](https://github.com/pandas-dev/pandas/issues/57664))'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Avoid issuing a spurious `DeprecationWarning` when a custom [`DataFrame`](../reference/api/pandas.DataFrame.html#pandas.DataFrame
    "pandas.DataFrame") or [`Series`](../reference/api/pandas.Series.html#pandas.Series
    "pandas.Series") subclass method is called ([GH 57553](https://github.com/pandas-dev/pandas/issues/57553))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Fixed regression in precision of [`to_datetime()`](../reference/api/pandas.to_datetime.html#pandas.to_datetime
    "pandas.to_datetime") with string and `unit` input ([GH 57051](https://github.com/pandas-dev/pandas/issues/57051))  ##
    Bug fixes'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[`DataFrame.__dataframe__()`](../reference/api/pandas.DataFrame.__dataframe__.html#pandas.DataFrame.__dataframe__
    "pandas.DataFrame.__dataframe__") was producing incorrect data buffers when the
    column’s type was nullable boolean ([GH 55332](https://github.com/pandas-dev/pandas/issues/55332))'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[`DataFrame.__dataframe__()`](../reference/api/pandas.DataFrame.__dataframe__.html#pandas.DataFrame.__dataframe__
    "pandas.DataFrame.__dataframe__") was showing bytemask instead of bitmask for
    `''string[pyarrow]''` validity buffer ([GH 57762](https://github.com/pandas-dev/pandas/issues/57762))'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[`DataFrame.__dataframe__()`](../reference/api/pandas.DataFrame.__dataframe__.html#pandas.DataFrame.__dataframe__
    "pandas.DataFrame.__dataframe__") was showing non-null validity buffer (instead
    of `None`) `''string[pyarrow]''` without missing values ([GH 57761](https://github.com/pandas-dev/pandas/issues/57761))'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[`DataFrame.to_sql()`](../reference/api/pandas.DataFrame.to_sql.html#pandas.DataFrame.to_sql
    "pandas.DataFrame.to_sql") was failing to find the right table when using the
    schema argument ([GH 57539](https://github.com/pandas-dev/pandas/issues/57539))  ##
    Other  ## Contributors'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A total of 20 people contributed patches to this release. People with a “+”
    by their names contributed a patch for the first time.
  prefs: []
  type: TYPE_NORMAL
- en: Clément Robert
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Elliott Sales de Andrade
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Lumberbot (aka Jack)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Marc Garcia
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Marco Edward Gorelli
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Marco Gorelli
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Mateusz Sokół
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Matthew Roeschke
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Natalia Mokeeva
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Pandas Development Team
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Sebastian Berg
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Shabab Karim +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Thomas Baumann
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Thomas Li
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Trinh Quoc Anh +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: William Ayd
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Yuki Kitayama +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Zhengbo Wang
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: dependabot[bot]
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'jbrockmendel  ## Pandas 2.2.2 is now compatible with numpy 2.0'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Pandas 2.2.2 is the first version of pandas that is generally compatible with
    the upcoming numpy 2.0 release, and wheels for pandas 2.2.2 will work with both
    numpy 1.x and 2.x.
  prefs: []
  type: TYPE_NORMAL
- en: One major caveat is that arrays created with numpy 2.0’s new `StringDtype` will
    convert to `object` dtyped arrays upon [`Series`](../reference/api/pandas.Series.html#pandas.Series
    "pandas.Series")/[`DataFrame`](../reference/api/pandas.DataFrame.html#pandas.DataFrame
    "pandas.DataFrame") creation. Full support for numpy 2.0’s StringDtype is expected
    to land in pandas 3.0.
  prefs: []
  type: TYPE_NORMAL
- en: As usual please report any bugs discovered to our [issue tracker](https://github.com/pandas-dev/pandas/issues/new/choose)
  prefs: []
  type: TYPE_NORMAL
- en: '## Fixed regressions'
  prefs: []
  type: TYPE_NORMAL
- en: '[`DataFrame.__dataframe__()`](../reference/api/pandas.DataFrame.__dataframe__.html#pandas.DataFrame.__dataframe__
    "pandas.DataFrame.__dataframe__") was producing incorrect data buffers when the
    a column’s type was a pandas nullable on with missing values ([GH 56702](https://github.com/pandas-dev/pandas/issues/56702))'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[`DataFrame.__dataframe__()`](../reference/api/pandas.DataFrame.__dataframe__.html#pandas.DataFrame.__dataframe__
    "pandas.DataFrame.__dataframe__") was producing incorrect data buffers when the
    a column’s type was a pyarrow nullable on with missing values ([GH 57664](https://github.com/pandas-dev/pandas/issues/57664))'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Avoid issuing a spurious `DeprecationWarning` when a custom [`DataFrame`](../reference/api/pandas.DataFrame.html#pandas.DataFrame
    "pandas.DataFrame") or [`Series`](../reference/api/pandas.Series.html#pandas.Series
    "pandas.Series") subclass method is called ([GH 57553](https://github.com/pandas-dev/pandas/issues/57553))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in precision of [`to_datetime()`](../reference/api/pandas.to_datetime.html#pandas.to_datetime
    "pandas.to_datetime") with string and `unit` input ([GH 57051](https://github.com/pandas-dev/pandas/issues/57051))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '## Bug fixes'
  prefs: []
  type: TYPE_NORMAL
- en: '[`DataFrame.__dataframe__()`](../reference/api/pandas.DataFrame.__dataframe__.html#pandas.DataFrame.__dataframe__
    "pandas.DataFrame.__dataframe__") was producing incorrect data buffers when the
    column’s type was nullable boolean ([GH 55332](https://github.com/pandas-dev/pandas/issues/55332))'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[`DataFrame.__dataframe__()`](../reference/api/pandas.DataFrame.__dataframe__.html#pandas.DataFrame.__dataframe__
    "pandas.DataFrame.__dataframe__") was showing bytemask instead of bitmask for
    `''string[pyarrow]''` validity buffer ([GH 57762](https://github.com/pandas-dev/pandas/issues/57762))'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[`DataFrame.__dataframe__()`](../reference/api/pandas.DataFrame.__dataframe__.html#pandas.DataFrame.__dataframe__
    "pandas.DataFrame.__dataframe__") was showing non-null validity buffer (instead
    of `None`) `''string[pyarrow]''` without missing values ([GH 57761](https://github.com/pandas-dev/pandas/issues/57761))'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[`DataFrame.to_sql()`](../reference/api/pandas.DataFrame.to_sql.html#pandas.DataFrame.to_sql
    "pandas.DataFrame.to_sql") was failing to find the right table when using the
    schema argument ([GH 57539](https://github.com/pandas-dev/pandas/issues/57539))'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '## Other'
  prefs: []
  type: TYPE_NORMAL
- en: '## Contributors'
  prefs: []
  type: TYPE_NORMAL
- en: A total of 20 people contributed patches to this release. People with a “+”
    by their names contributed a patch for the first time.
  prefs: []
  type: TYPE_NORMAL
- en: Clément Robert
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Elliott Sales de Andrade
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Lumberbot (aka Jack)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Marc Garcia
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Marco Edward Gorelli
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Marco Gorelli
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Mateusz Sokół
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Matthew Roeschke
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Natalia Mokeeva
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Pandas Development Team
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Sebastian Berg
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Shabab Karim +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Thomas Baumann
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Thomas Li
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Trinh Quoc Anh +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: William Ayd
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Yuki Kitayama +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Zhengbo Wang
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: dependabot[bot]
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: jbrockmendel
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
