- en: What’s new in 2.0.2 (May 29, 2023)
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://pandas.pydata.org/docs/whatsnew/v2.0.2.html](https://pandas.pydata.org/docs/whatsnew/v2.0.2.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: These are the changes in pandas 2.0.2\. See [Release notes](index.html#release)
    for a full changelog including other versions of pandas.
  prefs: []
  type: TYPE_NORMAL
- en: '## Fixed regressions'
  prefs: []
  type: TYPE_NORMAL
- en: Fixed performance regression in `GroupBy.apply()` ([GH 53195](https://github.com/pandas-dev/pandas/issues/53195))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`merge()`](../reference/api/pandas.merge.html#pandas.merge
    "pandas.merge") on Windows when dtype is `np.intc` ([GH 52451](https://github.com/pandas-dev/pandas/issues/52451))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`read_sql()`](../reference/api/pandas.read_sql.html#pandas.read_sql
    "pandas.read_sql") dropping columns with duplicated column names ([GH 53117](https://github.com/pandas-dev/pandas/issues/53117))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.loc()`](../reference/api/pandas.DataFrame.loc.html#pandas.DataFrame.loc
    "pandas.DataFrame.loc") losing [`MultiIndex`](../reference/api/pandas.MultiIndex.html#pandas.MultiIndex
    "pandas.MultiIndex") name when enlarging object ([GH 53053](https://github.com/pandas-dev/pandas/issues/53053))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.to_string()`](../reference/api/pandas.DataFrame.to_string.html#pandas.DataFrame.to_string
    "pandas.DataFrame.to_string") printing a backslash at the end of the first row
    of data, instead of headers, when the DataFrame doesn’t fit the line width ([GH
    53054](https://github.com/pandas-dev/pandas/issues/53054))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Fixed regression in `MultiIndex.join()` returning levels in wrong order ([GH
    53093](https://github.com/pandas-dev/pandas/issues/53093))  ## Bug fixes'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in [`arrays.ArrowExtensionArray`](../reference/api/pandas.arrays.ArrowExtensionArray.html#pandas.arrays.ArrowExtensionArray
    "pandas.arrays.ArrowExtensionArray") incorrectly assigning `dict` instead of `list`
    for `.type` with `pyarrow.map_` and raising a `NotImplementedError` with `pyarrow.struct`
    ([GH 53328](https://github.com/pandas-dev/pandas/issues/53328))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in [`api.interchange.from_dataframe()`](../reference/api/pandas.api.interchange.from_dataframe.html#pandas.api.interchange.from_dataframe
    "pandas.api.interchange.from_dataframe") was raising `IndexError` on empty categorical
    data ([GH 53077](https://github.com/pandas-dev/pandas/issues/53077))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in [`api.interchange.from_dataframe()`](../reference/api/pandas.api.interchange.from_dataframe.html#pandas.api.interchange.from_dataframe
    "pandas.api.interchange.from_dataframe") was returning [`DataFrame`](../reference/api/pandas.DataFrame.html#pandas.DataFrame
    "pandas.DataFrame")’s of incorrect sizes when called on slices ([GH 52824](https://github.com/pandas-dev/pandas/issues/52824))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in [`api.interchange.from_dataframe()`](../reference/api/pandas.api.interchange.from_dataframe.html#pandas.api.interchange.from_dataframe
    "pandas.api.interchange.from_dataframe") was unnecessarily raising on bitmasks
    ([GH 49888](https://github.com/pandas-dev/pandas/issues/49888))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in [`merge()`](../reference/api/pandas.merge.html#pandas.merge "pandas.merge")
    when merging on datetime columns on different resolutions ([GH 53200](https://github.com/pandas-dev/pandas/issues/53200))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in [`read_csv()`](../reference/api/pandas.read_csv.html#pandas.read_csv
    "pandas.read_csv") raising `OverflowError` for `engine="pyarrow"` and `parse_dates`
    set ([GH 53295](https://github.com/pandas-dev/pandas/issues/53295))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in [`to_datetime()`](../reference/api/pandas.to_datetime.html#pandas.to_datetime
    "pandas.to_datetime") was inferring format to contain `"%H"` instead of `"%I"`
    if date contained “AM” / “PM” tokens ([GH 53147](https://github.com/pandas-dev/pandas/issues/53147))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in [`to_timedelta()`](../reference/api/pandas.to_timedelta.html#pandas.to_timedelta
    "pandas.to_timedelta") was raising `ValueError` with `pandas.NA` ([GH 52909](https://github.com/pandas-dev/pandas/issues/52909))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in `DataFrame.__getitem__()` not preserving dtypes for [`MultiIndex`](../reference/api/pandas.MultiIndex.html#pandas.MultiIndex
    "pandas.MultiIndex") partial keys ([GH 51895](https://github.com/pandas-dev/pandas/issues/51895))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in [`DataFrame.convert_dtypes()`](../reference/api/pandas.DataFrame.convert_dtypes.html#pandas.DataFrame.convert_dtypes
    "pandas.DataFrame.convert_dtypes") ignores `convert_*` keywords when set to False
    `dtype_backend="pyarrow"` ([GH 52872](https://github.com/pandas-dev/pandas/issues/52872))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in [`DataFrame.convert_dtypes()`](../reference/api/pandas.DataFrame.convert_dtypes.html#pandas.DataFrame.convert_dtypes
    "pandas.DataFrame.convert_dtypes") losing timezone for tz-aware dtypes and `dtype_backend="pyarrow"`
    ([GH 53382](https://github.com/pandas-dev/pandas/issues/53382))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in [`DataFrame.sort_values()`](../reference/api/pandas.DataFrame.sort_values.html#pandas.DataFrame.sort_values
    "pandas.DataFrame.sort_values") raising for PyArrow `dictionary` dtype ([GH 53232](https://github.com/pandas-dev/pandas/issues/53232))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in [`Series.describe()`](../reference/api/pandas.Series.describe.html#pandas.Series.describe
    "pandas.Series.describe") treating pyarrow-backed timestamps and timedeltas as
    categorical data ([GH 53001](https://github.com/pandas-dev/pandas/issues/53001))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in [`Series.rename()`](../reference/api/pandas.Series.rename.html#pandas.Series.rename
    "pandas.Series.rename") not making a lazy copy when Copy-on-Write is enabled when
    a scalar is passed to it ([GH 52450](https://github.com/pandas-dev/pandas/issues/52450))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Bug in `pd.array()` raising for `NumPy` array and `pa.large_string` or `pa.large_binary`
    ([GH 52590](https://github.com/pandas-dev/pandas/issues/52590))  ## Other'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Raised a better error message when calling [`Series.dt.to_pydatetime()`](../reference/api/pandas.Series.dt.to_pydatetime.html#pandas.Series.dt.to_pydatetime
    "pandas.Series.dt.to_pydatetime") with [`ArrowDtype`](../reference/api/pandas.ArrowDtype.html#pandas.ArrowDtype
    "pandas.ArrowDtype") with `pyarrow.date32` or `pyarrow.date64` type ([GH 52812](https://github.com/pandas-dev/pandas/issues/52812))  ##
    Contributors'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A total of 18 people contributed patches to this release. People with a “+”
    by their names contributed a patch for the first time.
  prefs: []
  type: TYPE_NORMAL
- en: Gianluca Ficarelli +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Guillaume Lemaitre
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Joris Van den Bossche
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Julian Badillo +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Luke Manley
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Lumberbot (aka Jack) +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Marc Garcia
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Marco Edward Gorelli
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: MarcoGorelli
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Matt Richards
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Matthew Roeschke
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: MeeseeksMachine
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Pandas Development Team
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Patrick Hoefler
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Simon Høxbro Hansen +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Thomas Li
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Yao Xiao +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'dependabot[bot]  ## Fixed regressions'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed performance regression in `GroupBy.apply()` ([GH 53195](https://github.com/pandas-dev/pandas/issues/53195))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`merge()`](../reference/api/pandas.merge.html#pandas.merge
    "pandas.merge") on Windows when dtype is `np.intc` ([GH 52451](https://github.com/pandas-dev/pandas/issues/52451))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`read_sql()`](../reference/api/pandas.read_sql.html#pandas.read_sql
    "pandas.read_sql") dropping columns with duplicated column names ([GH 53117](https://github.com/pandas-dev/pandas/issues/53117))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.loc()`](../reference/api/pandas.DataFrame.loc.html#pandas.DataFrame.loc
    "pandas.DataFrame.loc") losing [`MultiIndex`](../reference/api/pandas.MultiIndex.html#pandas.MultiIndex
    "pandas.MultiIndex") name when enlarging object ([GH 53053](https://github.com/pandas-dev/pandas/issues/53053))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.to_string()`](../reference/api/pandas.DataFrame.to_string.html#pandas.DataFrame.to_string
    "pandas.DataFrame.to_string") printing a backslash at the end of the first row
    of data, instead of headers, when the DataFrame doesn’t fit the line width ([GH
    53054](https://github.com/pandas-dev/pandas/issues/53054))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in `MultiIndex.join()` returning levels in wrong order ([GH
    53093](https://github.com/pandas-dev/pandas/issues/53093))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '## Bug fixes'
  prefs: []
  type: TYPE_NORMAL
- en: Bug in [`arrays.ArrowExtensionArray`](../reference/api/pandas.arrays.ArrowExtensionArray.html#pandas.arrays.ArrowExtensionArray
    "pandas.arrays.ArrowExtensionArray") incorrectly assigning `dict` instead of `list`
    for `.type` with `pyarrow.map_` and raising a `NotImplementedError` with `pyarrow.struct`
    ([GH 53328](https://github.com/pandas-dev/pandas/issues/53328))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in [`api.interchange.from_dataframe()`](../reference/api/pandas.api.interchange.from_dataframe.html#pandas.api.interchange.from_dataframe
    "pandas.api.interchange.from_dataframe") was raising `IndexError` on empty categorical
    data ([GH 53077](https://github.com/pandas-dev/pandas/issues/53077))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in [`api.interchange.from_dataframe()`](../reference/api/pandas.api.interchange.from_dataframe.html#pandas.api.interchange.from_dataframe
    "pandas.api.interchange.from_dataframe") was returning [`DataFrame`](../reference/api/pandas.DataFrame.html#pandas.DataFrame
    "pandas.DataFrame")’s of incorrect sizes when called on slices ([GH 52824](https://github.com/pandas-dev/pandas/issues/52824))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in [`api.interchange.from_dataframe()`](../reference/api/pandas.api.interchange.from_dataframe.html#pandas.api.interchange.from_dataframe
    "pandas.api.interchange.from_dataframe") was unnecessarily raising on bitmasks
    ([GH 49888](https://github.com/pandas-dev/pandas/issues/49888))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in [`merge()`](../reference/api/pandas.merge.html#pandas.merge "pandas.merge")
    when merging on datetime columns on different resolutions ([GH 53200](https://github.com/pandas-dev/pandas/issues/53200))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in [`read_csv()`](../reference/api/pandas.read_csv.html#pandas.read_csv
    "pandas.read_csv") raising `OverflowError` for `engine="pyarrow"` and `parse_dates`
    set ([GH 53295](https://github.com/pandas-dev/pandas/issues/53295))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in [`to_datetime()`](../reference/api/pandas.to_datetime.html#pandas.to_datetime
    "pandas.to_datetime") was inferring format to contain `"%H"` instead of `"%I"`
    if date contained “AM” / “PM” tokens ([GH 53147](https://github.com/pandas-dev/pandas/issues/53147))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in [`to_timedelta()`](../reference/api/pandas.to_timedelta.html#pandas.to_timedelta
    "pandas.to_timedelta") was raising `ValueError` with `pandas.NA` ([GH 52909](https://github.com/pandas-dev/pandas/issues/52909))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in `DataFrame.__getitem__()` not preserving dtypes for [`MultiIndex`](../reference/api/pandas.MultiIndex.html#pandas.MultiIndex
    "pandas.MultiIndex") partial keys ([GH 51895](https://github.com/pandas-dev/pandas/issues/51895))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in [`DataFrame.convert_dtypes()`](../reference/api/pandas.DataFrame.convert_dtypes.html#pandas.DataFrame.convert_dtypes
    "pandas.DataFrame.convert_dtypes") ignores `convert_*` keywords when set to False
    `dtype_backend="pyarrow"` ([GH 52872](https://github.com/pandas-dev/pandas/issues/52872))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in [`DataFrame.convert_dtypes()`](../reference/api/pandas.DataFrame.convert_dtypes.html#pandas.DataFrame.convert_dtypes
    "pandas.DataFrame.convert_dtypes") losing timezone for tz-aware dtypes and `dtype_backend="pyarrow"`
    ([GH 53382](https://github.com/pandas-dev/pandas/issues/53382))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in [`DataFrame.sort_values()`](../reference/api/pandas.DataFrame.sort_values.html#pandas.DataFrame.sort_values
    "pandas.DataFrame.sort_values") raising for PyArrow `dictionary` dtype ([GH 53232](https://github.com/pandas-dev/pandas/issues/53232))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in [`Series.describe()`](../reference/api/pandas.Series.describe.html#pandas.Series.describe
    "pandas.Series.describe") treating pyarrow-backed timestamps and timedeltas as
    categorical data ([GH 53001](https://github.com/pandas-dev/pandas/issues/53001))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in [`Series.rename()`](../reference/api/pandas.Series.rename.html#pandas.Series.rename
    "pandas.Series.rename") not making a lazy copy when Copy-on-Write is enabled when
    a scalar is passed to it ([GH 52450](https://github.com/pandas-dev/pandas/issues/52450))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bug in `pd.array()` raising for `NumPy` array and `pa.large_string` or `pa.large_binary`
    ([GH 52590](https://github.com/pandas-dev/pandas/issues/52590))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '## Other'
  prefs: []
  type: TYPE_NORMAL
- en: Raised a better error message when calling [`Series.dt.to_pydatetime()`](../reference/api/pandas.Series.dt.to_pydatetime.html#pandas.Series.dt.to_pydatetime
    "pandas.Series.dt.to_pydatetime") with [`ArrowDtype`](../reference/api/pandas.ArrowDtype.html#pandas.ArrowDtype
    "pandas.ArrowDtype") with `pyarrow.date32` or `pyarrow.date64` type ([GH 52812](https://github.com/pandas-dev/pandas/issues/52812))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '## Contributors'
  prefs: []
  type: TYPE_NORMAL
- en: A total of 18 people contributed patches to this release. People with a “+”
    by their names contributed a patch for the first time.
  prefs: []
  type: TYPE_NORMAL
- en: Gianluca Ficarelli +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Guillaume Lemaitre
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Joris Van den Bossche
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Julian Badillo +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Luke Manley
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Lumberbot (aka Jack) +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Marc Garcia
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Marco Edward Gorelli
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: MarcoGorelli
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Matt Richards
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Matthew Roeschke
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: MeeseeksMachine
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Pandas Development Team
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Patrick Hoefler
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Simon Høxbro Hansen +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Thomas Li
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Yao Xiao +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: dependabot[bot]
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
