- en: Version 0.16.0 (March 22, 2015)
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 版本 0.16.0（2015年3月22日）
- en: 原文：[https://pandas.pydata.org/docs/whatsnew/v0.16.0.html](https://pandas.pydata.org/docs/whatsnew/v0.16.0.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://pandas.pydata.org/docs/whatsnew/v0.16.0.html](https://pandas.pydata.org/docs/whatsnew/v0.16.0.html)
- en: This is a major release from 0.15.2 and includes a small number of API changes,
    several new features, enhancements, and performance improvements along with a
    large number of bug fixes. We recommend that all users upgrade to this version.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 这是从 0.15.2 版本的一个重大发布，包括少量 API 变更，几个新特性，增强功能和性能改进以及大量错误修复。我们建议所有用户升级到此版本。
- en: 'Highlights include:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 亮点包括：
- en: '`DataFrame.assign` method, see [here](#whatsnew-0160-enhancements-assign)'
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.assign` 方法，请参阅[这里](#whatsnew-0160-enhancements-assign)'
- en: '`Series.to_coo/from_coo` methods to interact with `scipy.sparse`, see [here](#whatsnew-0160-enhancements-sparse)'
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Series.to_coo/from_coo` 方法用于与 `scipy.sparse` 交互，请参阅[这里](#whatsnew-0160-enhancements-sparse)'
- en: Backwards incompatible change to `Timedelta` to conform the `.seconds` attribute
    with `datetime.timedelta`, see [here](#whatsnew-0160-api-breaking-timedelta)
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对 `Timedelta` 的向后不兼容更改，使 `.seconds` 属性符合 `datetime.timedelta`，请参阅[这里](#whatsnew-0160-api-breaking-timedelta)
- en: Changes to the `.loc` slicing API to conform with the behavior of `.ix` see
    [here](#whatsnew-0160-api-breaking-indexing)
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对 `.loc` 切片 API 的更改以符合 `.ix` 的行为，请参阅[这里](#whatsnew-0160-api-breaking-indexing)
- en: Changes to the default for ordering in the `Categorical` constructor, see [here](#whatsnew-0160-api-breaking-categorical)
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Categorical` 构造函数中排序的默认更改，请参阅[这里](#whatsnew-0160-api-breaking-categorical)'
- en: Enhancement to the `.str` accessor to make string operations easier, see [here](#whatsnew-0160-enhancements-string)
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对 `.str` 访问器的增强，使字符串操作更加方便，请参阅[这里](#whatsnew-0160-enhancements-string)
- en: The `pandas.tools.rplot`, `pandas.sandbox.qtpandas` and `pandas.rpy` modules
    are deprecated. We refer users to external packages like [seaborn](http://stanford.edu/~mwaskom/software/seaborn/),
    [pandas-qt](https://github.com/datalyze-solutions/pandas-qt) and [rpy2](http://rpy2.bitbucket.org/)
    for similar or equivalent functionality, see [here](#whatsnew-0160-deprecations)
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pandas.tools.rplot`，`pandas.sandbox.qtpandas` 和 `pandas.rpy` 模块已弃用。我们建议用户使用外部包，如
    [seaborn](http://stanford.edu/~mwaskom/software/seaborn/)，[pandas-qt](https://github.com/datalyze-solutions/pandas-qt)
    和 [rpy2](http://rpy2.bitbucket.org/) 来获得类似或等效的功能，请参阅[这里](#whatsnew-0160-deprecations)'
- en: Check the [API Changes](#whatsnew-0160-api) and [deprecations](#whatsnew-0160-deprecations)
    before updating.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 在更新之前，请查看 [API 变更](#whatsnew-0160-api) 和 [弃用内容](#whatsnew-0160-deprecations)。
- en: What’s new in v0.16.0
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: v0.16.0 中的新内容
- en: '[New features](#new-features)'
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[新特性](#new-features)'
- en: '[DataFrame assign](#dataframe-assign)'
  id: totrans-14
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[DataFrame 分配](#dataframe-assign)'
- en: '[Interaction with scipy.sparse](#interaction-with-scipy-sparse)'
  id: totrans-15
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[与 scipy.sparse 的交互](#interaction-with-scipy-sparse)'
- en: '[String methods enhancements](#string-methods-enhancements)'
  id: totrans-16
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[字符串方法增强](#string-methods-enhancements)'
- en: '[Other enhancements](#other-enhancements)'
  id: totrans-17
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[其他增强](#other-enhancements)'
- en: '[Backwards incompatible API changes](#backwards-incompatible-api-changes)'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[向后不兼容的 API 变更](#backwards-incompatible-api-changes)'
- en: '[Changes in timedelta](#changes-in-timedelta)'
  id: totrans-19
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[时间增量的变更](#changes-in-timedelta)'
- en: '[Indexing changes](#indexing-changes)'
  id: totrans-20
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[索引变更](#indexing-changes)'
- en: '[Categorical changes](#categorical-changes)'
  id: totrans-21
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[分类变更](#categorical-changes)'
- en: '[Other API changes](#other-api-changes)'
  id: totrans-22
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[其他 API 变更](#other-api-changes)'
- en: '[Deprecations](#deprecations)'
  id: totrans-23
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[弃用内容](#deprecations)'
- en: '[Removal of prior version deprecations/changes](#removal-of-prior-version-deprecations-changes)'
  id: totrans-24
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[删除之前版本的弃用/更改内容](#removal-of-prior-version-deprecations-changes)'
- en: '[Performance improvements](#performance-improvements)'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[性能改进](#performance-improvements)'
- en: '[Bug fixes](#bug-fixes)'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[错误修复](#bug-fixes)'
- en: '[Contributors](#contributors)'
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[贡献者](#contributors)'
- en: '## New features'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: '## 新特性'
- en: '### DataFrame assign'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: '### DataFrame 分配'
- en: Inspired by [dplyr’s](https://dplyr.tidyverse.org/articles/dplyr.html#mutating-operations)
    `mutate` verb, DataFrame has a new [`assign()`](../reference/api/pandas.DataFrame.assign.html#pandas.DataFrame.assign
    "pandas.DataFrame.assign") method. The function signature for `assign` is simply
    `**kwargs`. The keys are the column names for the new fields, and the values are
    either a value to be inserted (for example, a `Series` or NumPy array), or a function
    of one argument to be called on the `DataFrame`. The new values are inserted,
    and the entire DataFrame (with all original and new columns) is returned.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 受 [dplyr](https://dplyr.tidyverse.org/articles/dplyr.html#mutating-operations)
    的 `mutate` 动词启发，DataFrame 新增了一个 [`assign()`](../reference/api/pandas.DataFrame.assign.html#pandas.DataFrame.assign
    "pandas.DataFrame.assign") 方法。`assign` 的函数签名简单地是 `**kwargs`。键是新字段的列名，值可以是要插入的值（例如，一个
    `Series` 或 NumPy 数组），或者是要在 `DataFrame` 上调用的带一个参数的函数。新值被插入，整个 DataFrame（包括所有原始列和新列）被返回。
- en: '[PRE0]'
  id: totrans-31
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Above was an example of inserting a precomputed value. We can also pass in a
    function to be evaluated.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 上面是插入预计算值的一个示例。我们还可以传入一个要评估的函数。
- en: '[PRE1]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: The power of `assign` comes when used in chains of operations. For example,
    we can limit the DataFrame to just those with a Sepal Length greater than 5, calculate
    the ratio, and plot
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: '`assign` 方法的强大之处在于它在操作链中的使用。例如，我们可以将 DataFrame 限制为仅包含萼片长度大于 5 的部分，计算比率并绘制图表。'
- en: '[PRE2]'
  id: totrans-35
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '[![../_images/whatsnew_assign.png](../Images/5df5e5018f70674fce1c86f0c2698e8b.png)](../_images/whatsnew_assign.png)'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: '[![../_images/whatsnew_assign.png](../Images/5df5e5018f70674fce1c86f0c2698e8b.png)](../_images/whatsnew_assign.png)'
- en: 'See the [documentation](../user_guide/dsintro.html#dsintro-chained-assignment)
    for more. ([GH 9229](https://github.com/pandas-dev/pandas/issues/9229))  ### Interaction
    with scipy.sparse'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: '更多信息请参见[文档](../user_guide/dsintro.html#dsintro-chained-assignment)（[GH 9229](https://github.com/pandas-dev/pandas/issues/9229)）  ###
    与 scipy.sparse 的交互'
- en: 'Added `SparseSeries.to_coo()` and `SparseSeries.from_coo()` methods ([GH 8048](https://github.com/pandas-dev/pandas/issues/8048))
    for converting to and from `scipy.sparse.coo_matrix` instances (see [here](../user_guide/sparse.html#sparse-scipysparse)).
    For example, given a SparseSeries with MultiIndex we can convert to a `scipy.sparse.coo_matrix`
    by specifying the row and column labels as index levels:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 添加了 `SparseSeries.to_coo()` 和 `SparseSeries.from_coo()` 方法 ([GH 8048](https://github.com/pandas-dev/pandas/issues/8048))
    以便将其转换为和从 `scipy.sparse.coo_matrix` 实例（参见 [此处](../user_guide/sparse.html#sparse-scipysparse)）。例如，给定具有多索引的
    SparseSeries，我们可以通过指定行和列标签作为索引级别将其转换为 `scipy.sparse.coo_matrix`：
- en: '[PRE3]'
  id: totrans-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'The from_coo method is a convenience method for creating a `SparseSeries` from
    a `scipy.sparse.coo_matrix`:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: from_coo 方法是从 `scipy.sparse.coo_matrix` 创建 `SparseSeries` 的方便方法：
- en: '[PRE4]  ### String methods enhancements'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE4]  ### 字符串方法增强'
- en: Following new methods are accessible via `.str` accessor to apply the function
    to each values. This is intended to make it more consistent with standard methods
    on strings. ([GH 9282](https://github.com/pandas-dev/pandas/issues/9282), [GH
    9352](https://github.com/pandas-dev/pandas/issues/9352), [GH 9386](https://github.com/pandas-dev/pandas/issues/9386),
    [GH 9387](https://github.com/pandas-dev/pandas/issues/9387), [GH 9439](https://github.com/pandas-dev/pandas/issues/9439))
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 下列新方法可通过 `.str` 访问器来应用于每个值。这旨在使其与字符串上的标准方法更一致。 ([GH 9282](https://github.com/pandas-dev/pandas/issues/9282),
    [GH 9352](https://github.com/pandas-dev/pandas/issues/9352), [GH 9386](https://github.com/pandas-dev/pandas/issues/9386),
    [GH 9387](https://github.com/pandas-dev/pandas/issues/9387), [GH 9439](https://github.com/pandas-dev/pandas/issues/9439))
- en: '|  |  | Methods |  |  |'
  id: totrans-43
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '|  |  | 方法 |  |  |'
- en: '| --- | --- | --- | --- | --- |'
  id: totrans-44
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| --- | --- | --- | --- | --- |'
- en: '| `isalnum()` | `isalpha()` | `isdigit()` | `isdigit()` | `isspace()` |'
  id: totrans-45
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `isalnum()` | `isalpha()` | `isdigit()` | `isdigit()` | `isspace()` |'
- en: '| `islower()` | `isupper()` | `istitle()` | `isnumeric()` | `isdecimal()` |'
  id: totrans-46
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `islower()` | `isupper()` | `istitle()` | `isnumeric()` | `isdecimal()` |'
- en: '| `find()` | `rfind()` | `ljust()` | `rjust()` | `zfill()` |'
  id: totrans-47
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `find()` | `rfind()` | `ljust()` | `rjust()` | `zfill()` |'
- en: '[PRE5]'
  id: totrans-48
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '[`Series.str.pad()`](../reference/api/pandas.Series.str.pad.html#pandas.Series.str.pad
    "pandas.Series.str.pad") and [`Series.str.center()`](../reference/api/pandas.Series.str.center.html#pandas.Series.str.center
    "pandas.Series.str.center") now accept `fillchar` option to specify filling character
    ([GH 9352](https://github.com/pandas-dev/pandas/issues/9352))'
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`Series.str.pad()`](../reference/api/pandas.Series.str.pad.html#pandas.Series.str.pad
    "pandas.Series.str.pad") 和 [`Series.str.center()`](../reference/api/pandas.Series.str.center.html#pandas.Series.str.center
    "pandas.Series.str.center") 现在接受 `fillchar` 选项来指定填充字符 ([GH 9352](https://github.com/pandas-dev/pandas/issues/9352))'
- en: '[PRE6]'
  id: totrans-50
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Added [`Series.str.slice_replace()`](../reference/api/pandas.Series.str.slice_replace.html#pandas.Series.str.slice_replace
    "pandas.Series.str.slice_replace"), which previously raised `NotImplementedError`
    ([GH 8888](https://github.com/pandas-dev/pandas/issues/8888))
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了 [`Series.str.slice_replace()`](../reference/api/pandas.Series.str.slice_replace.html#pandas.Series.str.slice_replace
    "pandas.Series.str.slice_replace")，它以前引发了 `NotImplementedError` ([GH 8888](https://github.com/pandas-dev/pandas/issues/8888))
- en: '[PRE7]  ### Other enhancements'
  id: totrans-52
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[PRE7]  ### 其他增强'
- en: 'Reindex now supports `method=''nearest''` for frames or series with a monotonic
    increasing or decreasing index ([GH 9258](https://github.com/pandas-dev/pandas/issues/9258)):'
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '现在 reindex 支持 `method=''nearest''`，用于具有单调递增或递减索引的帧或系列（[GH 9258](https://github.com/pandas-dev/pandas/issues/9258)）:'
- en: '[PRE8]'
  id: totrans-54
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: This method is also exposed by the lower level `Index.get_indexer` and `Index.get_loc`
    methods.
  id: totrans-55
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这种方法也可以通过更低级别的 `Index.get_indexer` 和 `Index.get_loc` 方法暴露出来。
- en: The `read_excel()` function’s [sheetname](../user_guide/io.html#io-excel-specifying-sheets)
    argument now accepts a list and `None`, to get multiple or all sheets respectively.
    If more than one sheet is specified, a dictionary is returned. ([GH 9450](https://github.com/pandas-dev/pandas/issues/9450))
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`read_excel()` 函数的 [sheetname](../user_guide/io.html#io-excel-specifying-sheets)
    参数现在接受一个列表和 `None`，以分别获取多个或所有工作表。如果指定了多个工作表，则返回一个字典。（[GH 9450](https://github.com/pandas-dev/pandas/issues/9450)）'
- en: '[PRE9]'
  id: totrans-57
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Allow Stata files to be read incrementally with an iterator; support for long
    strings in Stata files. See the docs [here](../user_guide/io.html#io-stata-reader)
    ([GH 9493](https://github.com/pandas-dev/pandas/issues/9493):).
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许使用迭代器逐步读取 Stata 文件；支持 Stata 文件中的长字符串。请参阅[此处](../user_guide/io.html#io-stata-reader)文档。（[GH
    9493](https://github.com/pandas-dev/pandas/issues/9493)）
- en: Paths beginning with ~ will now be expanded to begin with the user’s home directory
    ([GH 9066](https://github.com/pandas-dev/pandas/issues/9066))
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 以 ~ 开头的路径现在将扩展为以用户的主目录开头。（[GH 9066](https://github.com/pandas-dev/pandas/issues/9066)）
- en: Added time interval selection in `get_data_yahoo` ([GH 9071](https://github.com/pandas-dev/pandas/issues/9071))
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `get_data_yahoo` 中添加了时间间隔选择。（[GH 9071](https://github.com/pandas-dev/pandas/issues/9071)）
- en: Added `Timestamp.to_datetime64()` to complement `Timedelta.to_timedelta64()`
    ([GH 9255](https://github.com/pandas-dev/pandas/issues/9255))
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了 `Timestamp.to_datetime64()` 来补充 `Timedelta.to_timedelta64()`。（[GH 9255](https://github.com/pandas-dev/pandas/issues/9255)）
- en: '`tseries.frequencies.to_offset()` now accepts `Timedelta` as input ([GH 9064](https://github.com/pandas-dev/pandas/issues/9064))'
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`tseries.frequencies.to_offset()` 现在接受 `Timedelta` 作为输入。（[GH 9064](https://github.com/pandas-dev/pandas/issues/9064)）'
- en: Lag parameter was added to the autocorrelation method of `Series`, defaults
    to lag-1 autocorrelation ([GH 9192](https://github.com/pandas-dev/pandas/issues/9192))
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `Series` 的自相关方法中添加了滞后参数，默认为滞后 1 自相关。（[GH 9192](https://github.com/pandas-dev/pandas/issues/9192)）
- en: '`Timedelta` will now accept `nanoseconds` keyword in constructor ([GH 9273](https://github.com/pandas-dev/pandas/issues/9273))'
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Timedelta` 现在在构造函数中接受 `nanoseconds` 关键字。（[GH 9273](https://github.com/pandas-dev/pandas/issues/9273)）'
- en: SQL code now safely escapes table and column names ([GH 8986](https://github.com/pandas-dev/pandas/issues/8986))
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SQL 代码现在安全地转义表名和列名。（[GH 8986](https://github.com/pandas-dev/pandas/issues/8986)）
- en: Added auto-complete for `Series.str.<tab>`, `Series.dt.<tab>` and `Series.cat.<tab>`
    ([GH 9322](https://github.com/pandas-dev/pandas/issues/9322))
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为 `Series.str.<tab>`、`Series.dt.<tab>` 和 `Series.cat.<tab>` 添加了自动完成功能。（[GH 9322](https://github.com/pandas-dev/pandas/issues/9322)）
- en: '`Index.get_indexer` now supports `method=''pad''` and `method=''backfill''`
    even for any target array, not just monotonic targets. These methods also work
    for monotonic decreasing as well as monotonic increasing indexes ([GH 9258](https://github.com/pandas-dev/pandas/issues/9258)).'
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Index.get_indexer` 现在支持 `method=''pad''` 和 `method=''backfill''`，即使对于任何目标数组，而不仅仅是单调的目标。这些方法也适用于单调减少以及单调增加的索引。（[GH
    9258](https://github.com/pandas-dev/pandas/issues/9258)）'
- en: '`Index.asof` now works on all index types ([GH 9258](https://github.com/pandas-dev/pandas/issues/9258)).'
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Index.asof` 现在适用于所有索引类型。（[GH 9258](https://github.com/pandas-dev/pandas/issues/9258)）'
- en: A `verbose` argument has been augmented in `io.read_excel()`, defaults to False.
    Set to True to print sheet names as they are parsed. ([GH 9450](https://github.com/pandas-dev/pandas/issues/9450))
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `io.read_excel()` 中增加了一个 `verbose` 参数，默认为 False。设置为 True 以在解析时打印工作表名称。（[GH
    9450](https://github.com/pandas-dev/pandas/issues/9450)）
- en: Added `days_in_month` (compatibility alias `daysinmonth`) property to `Timestamp`,
    `DatetimeIndex`, `Period`, `PeriodIndex`, and `Series.dt` ([GH 9572](https://github.com/pandas-dev/pandas/issues/9572))
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为 `Timestamp`、`DatetimeIndex`、`Period`、`PeriodIndex` 和 `Series.dt` 添加了 `days_in_month`（兼容别名
    `daysinmonth`）属性。（[GH 9572](https://github.com/pandas-dev/pandas/issues/9572)）
- en: Added `decimal` option in `to_csv` to provide formatting for non-‘.’ decimal
    separators ([GH 781](https://github.com/pandas-dev/pandas/issues/781))
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `to_csv` 中添加了 `decimal` 选项，以提供非 '。' 小数分隔符的格式化。（[GH 781](https://github.com/pandas-dev/pandas/issues/781)）
- en: Added `normalize` option for `Timestamp` to normalized to midnight ([GH 8794](https://github.com/pandas-dev/pandas/issues/8794))
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为 `Timestamp` 添加了 `normalize` 选项，以将其规范化为午夜。（[GH 8794](https://github.com/pandas-dev/pandas/issues/8794)）
- en: 'Added example for `DataFrame` import to R using HDF5 file and `rhdf5` library.
    See the documentation for more ([GH 9636](https://github.com/pandas-dev/pandas/issues/9636)).  ##
    Backwards incompatible API changes'
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了使用 HDF5 文件和 `rhdf5` 库导入 `DataFrame` 的示例。有关更多信息，请参阅文档。（[GH 9636](https://github.com/pandas-dev/pandas/issues/9636)）##
    不兼容的 API 更改
- en: '### Changes in timedelta'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: '### timedelta 的变化'
- en: In v0.15.0 a new scalar type `Timedelta` was introduced, that is a sub-class
    of `datetime.timedelta`. Mentioned [here](v0.15.0.html#whatsnew-0150-timedeltaindex)
    was a notice of an API change w.r.t. the `.seconds` accessor. The intent was to
    provide a user-friendly set of accessors that give the ‘natural’ value for that
    unit, e.g. if you had a `Timedelta('1 day, 10:11:12')`, then `.seconds` would
    return 12\. However, this is at odds with the definition of `datetime.timedelta`,
    which defines `.seconds` as `10 * 3600 + 11 * 60 + 12 == 36672`.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 在v0.15.0中，引入了一个新的标量类型`Timedelta`，它是`datetime.timedelta`的子类。在[v0.15.0.html#whatsnew-0150-timedeltaindex](v0.15.0.html#whatsnew-0150-timedeltaindex)中提到了一个关于`.seconds`访问器的API更改的通知。旨在提供一组用户友好的访问器，以给出该单位的‘自然’值，例如如果你有一个`Timedelta('1
    day, 10:11:12')`，那么`.seconds`将返回12。然而，这与`datetime.timedelta`的定义相矛盾，后者将`.seconds`定义为`10
    * 3600 + 11 * 60 + 12 == 36672`。
- en: So in v0.16.0, we are restoring the API to match that of `datetime.timedelta`.
    Further, the component values are still available through the `.components` accessor.
    This affects the `.seconds` and `.microseconds` accessors, and removes the `.hours`,
    `.minutes`, `.milliseconds` accessors. These changes affect `TimedeltaIndex` and
    the Series `.dt` accessor as well. ([GH 9185](https://github.com/pandas-dev/pandas/issues/9185),
    [GH 9139](https://github.com/pandas-dev/pandas/issues/9139))
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，在v0.16.0中，我们恢复了API，以匹配`datetime.timedelta`的API。此外，组件值仍可通过`.components`访问器获得。这影响了`.seconds`和`.microseconds`访问器，并删除了`.hours`、`.minutes`和`.milliseconds`访问器。这些更改也影响了`TimedeltaIndex`和Series的`.dt`访问器。([GH
    9185](https://github.com/pandas-dev/pandas/issues/9185), [GH 9139](https://github.com/pandas-dev/pandas/issues/9139))
- en: Previous behavior
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 旧行为
- en: '[PRE10]'
  id: totrans-78
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: New behavior
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 新行为
- en: '[PRE11]'
  id: totrans-80
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Using `.components` allows the full component access
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`.components`允许完全组件访问
- en: '[PRE12]  ### Indexing changes'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE12]  ### 索引变更'
- en: 'The behavior of a small sub-set of edge cases for using `.loc` have changed
    ([GH 8613](https://github.com/pandas-dev/pandas/issues/8613)). Furthermore we
    have improved the content of the error messages that are raised:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`.loc`的一小部分边缘案例的行为已更改([GH 8613](https://github.com/pandas-dev/pandas/issues/8613))。此外，我们已改进了引发的错误消息的内容：
- en: Slicing with `.loc` where the start and/or stop bound is not found in the index
    is now allowed; this previously would raise a `KeyError`. This makes the behavior
    the same as `.ix` in this case. This change is only for slicing, not when indexing
    with a single label.
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在允许在索引中找不到开始和/或停止边界的情况下使用`.loc`进行切片；以前会引发`KeyError`。这使得在这种情况下行为与`.ix`相同。此更改仅适用于切片，而不是在单个标签上进行索引。
- en: '[PRE13]'
  id: totrans-85
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Previous behavior
  id: totrans-86
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 旧行为
- en: '[PRE14]'
  id: totrans-87
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: New behavior
  id: totrans-88
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 新行为
- en: '[PRE15]'
  id: totrans-89
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Allow slicing with float-like values on an integer index for `.ix`. Previously
    this was only enabled for `.loc`:'
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于`.ix`，现在允许在整数索引上使用类似浮点数的值进行切片。以前只有`.loc`才能这样做：
- en: Previous behavior
  id: totrans-91
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 旧行为
- en: '[PRE16]'
  id: totrans-92
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE16]'
- en: New behavior
  id: totrans-93
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 新行为
- en: '[PRE17]'
  id: totrans-94
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE17]'
- en: Provide a useful exception for indexing with an invalid type for that index
    when using `.loc`. For example trying to use `.loc` on an index of type `DatetimeIndex`
    or `PeriodIndex` or `TimedeltaIndex`, with an integer (or a float).
  id: totrans-95
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '当使用`.loc`进行索引时，对于索引类型为`DatetimeIndex`、`PeriodIndex`或`TimedeltaIndex`的情况，如果使用了整数（或浮点数）索引，则会提供一个有用的异常。 '
- en: Previous behavior
  id: totrans-96
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 旧行为
- en: '[PRE18]'
  id: totrans-97
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE18]'
- en: New behavior
  id: totrans-98
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 新行为
- en: '[PRE19]  ### Categorical changes'
  id: totrans-99
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[PRE19]  ### 分类变更'
- en: In prior versions, `Categoricals` that had an unspecified ordering (meaning
    no `ordered` keyword was passed) were defaulted as `ordered` Categoricals. Going
    forward, the `ordered` keyword in the `Categorical` constructor will default to
    `False`. Ordering must now be explicit.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 在先前的版本中，未指定排序（即未传递`ordered`关键字）的`Categoricals`默认为`ordered` Categoricals。从现在开始，`Categorical`构造函数中的`ordered`关键字将默认为`False`。现在必须明确指定排序。
- en: Furthermore, previously you *could* change the `ordered` attribute of a Categorical
    by just setting the attribute, e.g. `cat.ordered=True`; This is now deprecated
    and you should use `cat.as_ordered()` or `cat.as_unordered()`. These will by default
    return a **new** object and not modify the existing object. ([GH 9347](https://github.com/pandas-dev/pandas/issues/9347),
    [GH 9190](https://github.com/pandas-dev/pandas/issues/9190))
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，以前你可以通过设置属性来更改分类变量的`ordered`属性，例如`cat.ordered=True`；现在这已被弃用，你应该使用`cat.as_ordered()`或`cat.as_unordered()`。这些默认会返回一个**新的**对象，而不会修改现有对象。([GH
    9347](https://github.com/pandas-dev/pandas/issues/9347), [GH 9190](https://github.com/pandas-dev/pandas/issues/9190))
- en: Previous behavior
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 旧行为
- en: '[PRE20]'
  id: totrans-103
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: New behavior
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 新行为
- en: '[PRE21]'
  id: totrans-105
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: For ease of creation of series of categorical data, we have added the ability
    to pass keywords when calling `.astype()`. These are passed directly to the constructor.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 为了更容易创建分类数据系列，我们添加了在调用`.astype()`时传递关键字的功能。这些关键字直接传递给构造函数。
- en: '[PRE22]  ### Other API changes'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE22]  ### 其他API更改'
- en: '`Index.duplicated` now returns `np.array(dtype=bool)` rather than `Index(dtype=object)`
    containing `bool` values. ([GH 8875](https://github.com/pandas-dev/pandas/issues/8875))'
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Index.duplicated`现在返回`np.array(dtype=bool)`而不是包含`bool`值的`Index(dtype=object)`。([GH
    8875](https://github.com/pandas-dev/pandas/issues/8875))'
- en: '`DataFrame.to_json` now returns accurate type serialisation for each column
    for frames of mixed dtype ([GH 9037](https://github.com/pandas-dev/pandas/issues/9037))'
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.to_json`现在为混合数据类型的每列返回准确的类型序列化([GH 9037](https://github.com/pandas-dev/pandas/issues/9037))'
- en: 'Previously data was coerced to a common dtype before serialisation, which for
    example resulted in integers being serialised to floats:'
  id: totrans-110
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 以前，在序列化之前，数据被强制转换为一个公共数据类型，例如整数被序列化为浮点数：
- en: '[PRE23]'
  id: totrans-111
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'Now each column is serialised using its correct dtype:'
  id: totrans-112
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 现在每列都使用其正确的数据类型进行序列化：
- en: '[PRE24]'
  id: totrans-113
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE24]'
- en: '`DatetimeIndex`, `PeriodIndex` and `TimedeltaIndex.summary` now output the
    same format. ([GH 9116](https://github.com/pandas-dev/pandas/issues/9116))'
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DatetimeIndex`、`PeriodIndex`和`TimedeltaIndex.summary`现在输出相同的格式。([GH 9116](https://github.com/pandas-dev/pandas/issues/9116))'
- en: '`TimedeltaIndex.freqstr` now output the same string format as `DatetimeIndex`.
    ([GH 9116](https://github.com/pandas-dev/pandas/issues/9116))'
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`TimedeltaIndex.freqstr`现在输出与`DatetimeIndex`相同的字符串格式。([GH 9116](https://github.com/pandas-dev/pandas/issues/9116))'
- en: Bar and horizontal bar plots no longer add a dashed line along the info axis.
    The prior style can be achieved with matplotlib’s `axhline` or `axvline` methods
    ([GH 9088](https://github.com/pandas-dev/pandas/issues/9088)).
  id: totrans-116
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 条形图和水平条形图不再沿着信息轴添加虚线。以前的样式可以通过matplotlib的`axhline`或`axvline`方法实现([GH 9088](https://github.com/pandas-dev/pandas/issues/9088))。
- en: '`Series` accessors `.dt`, `.cat` and `.str` now raise `AttributeError` instead
    of `TypeError` if the series does not contain the appropriate type of data ([GH
    9617](https://github.com/pandas-dev/pandas/issues/9617)). This follows Python’s
    built-in exception hierarchy more closely and ensures that tests like `hasattr(s,
    ''cat'')` are consistent on both Python 2 and 3.'
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果`Series`访问器`.dt`、`.cat`和`.str`不包含适当类型的数据，则现在会引发`AttributeError`而不是`TypeError`([GH
    9617](https://github.com/pandas-dev/pandas/issues/9617))。这更贴近Python内置的异常层次结构，并确保像`hasattr(s,
    'cat')`这样的测试在Python 2和3上保持一致。
- en: '`Series` now supports bitwise operation for integral types ([GH 9016](https://github.com/pandas-dev/pandas/issues/9016)).
    Previously even if the input dtypes were integral, the output dtype was coerced
    to `bool`.'
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Series`现在支持整数类型的按位操作([GH 9016](https://github.com/pandas-dev/pandas/issues/9016))。以前，即使输入的数据类型是整数，输出的数据类型也会被强制转换为`bool`。'
- en: Previous behavior
  id: totrans-119
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 以前的行为
- en: '[PRE25]'
  id: totrans-120
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE25]'
- en: New behavior. If the input dtypes are integral, the output dtype is also integral
    and the output values are the result of the bitwise operation.
  id: totrans-121
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 新行为。如果输入的数据类型是整数，则输出的数据类型也是整数，输出值是按位操作的结果。
- en: '[PRE26]'
  id: totrans-122
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE26]'
- en: During division involving a `Series` or `DataFrame`, `0/0` and `0//0` now give
    `np.nan` instead of `np.inf`. ([GH 9144](https://github.com/pandas-dev/pandas/issues/9144),
    [GH 8445](https://github.com/pandas-dev/pandas/issues/8445))
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在涉及`Series`或`DataFrame`的除法中，`0/0`和`0//0`现在会给出`np.nan`而不是`np.inf`。([GH 9144](https://github.com/pandas-dev/pandas/issues/9144),
    [GH 8445](https://github.com/pandas-dev/pandas/issues/8445))
- en: Previous behavior
  id: totrans-124
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 以前的行为
- en: '[PRE27]'
  id: totrans-125
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE27]'
- en: New behavior
  id: totrans-126
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 新行为
- en: '[PRE28]'
  id: totrans-127
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE28]'
- en: '`Series.values_counts` and `Series.describe` for categorical data will now
    put `NaN` entries at the end. ([GH 9443](https://github.com/pandas-dev/pandas/issues/9443))'
  id: totrans-128
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于分类数据，`Series.values_counts`和`Series.describe`现在将`NaN`条目放在最后。([GH 9443](https://github.com/pandas-dev/pandas/issues/9443))
- en: '`Series.describe` for categorical data will now give counts and frequencies
    of 0, not `NaN`, for unused categories ([GH 9443](https://github.com/pandas-dev/pandas/issues/9443))'
  id: totrans-129
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于分类数据，`Series.describe`现在将未使用的类别的计数和频率显示为0，而不是`NaN`。([GH 9443](https://github.com/pandas-dev/pandas/issues/9443))
- en: Due to a bug fix, looking up a partial string label with `DatetimeIndex.asof`
    now includes values that match the string, even if they are after the start of
    the partial string label ([GH 9258](https://github.com/pandas-dev/pandas/issues/9258)).
  id: totrans-130
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 由于一个错误修复，使用`DatetimeIndex.asof`查找部分字符串标签现在包括与字符串匹配的值，即使它���在部分字符串标签的开始之后([GH
    9258](https://github.com/pandas-dev/pandas/issues/9258))。
- en: 'Old behavior:'
  id: totrans-131
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 旧行为：
- en: '[PRE29]'
  id: totrans-132
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'Fixed behavior:'
  id: totrans-133
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 修正的行为：
- en: '[PRE30]'
  id: totrans-134
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'To reproduce the old behavior, simply add more precision to the label (e.g.,
    use `2000-02-01` instead of `2000-02`).  ### Deprecations'
  id: totrans-135
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '要复制旧行为，只需为标签添加更多精度(例如，使用`2000-02-01`而不是`2000-02`)。  ### 弃用'
- en: The `rplot` trellis plotting interface is deprecated and will be removed in
    a future version. We refer to external packages like [seaborn](http://stanford.edu/~mwaskom/software/seaborn/)
    for similar but more refined functionality ([GH 3445](https://github.com/pandas-dev/pandas/issues/3445)).
    The documentation includes some examples how to convert your existing code from
    `rplot` to seaborn [here](https://pandas.pydata.org/pandas-docs/version/0.18.1/visualization.html#trellis-plotting-interface).
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`rplot` trellis绘图接口已被弃用，并将在将来的版本中移除。我们建议使用外部包如[seaborn](http://stanford.edu/~mwaskom/software/seaborn/)来获得类似但更精细的功能（[GH
    3445](https://github.com/pandas-dev/pandas/issues/3445)）。文档中包含一些示例，说明如何将现有代码从`rplot`转换为seaborn
    [here](https://pandas.pydata.org/pandas-docs/version/0.18.1/visualization.html#trellis-plotting-interface)。'
- en: The `pandas.sandbox.qtpandas` interface is deprecated and will be removed in
    a future version. We refer users to the external package [pandas-qt](https://github.com/datalyze-solutions/pandas-qt).
    ([GH 9615](https://github.com/pandas-dev/pandas/issues/9615))
  id: totrans-137
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pandas.sandbox.qtpandas`接口已被弃用，并将在将来的版本中移除。我们建议用户使用外部包[pandas-qt](https://github.com/datalyze-solutions/pandas-qt)（[GH
    9615](https://github.com/pandas-dev/pandas/issues/9615))'
- en: The `pandas.rpy` interface is deprecated and will be removed in a future version.
    Similar functionality can be accessed through the [rpy2](http://rpy2.bitbucket.org/)
    project ([GH 9602](https://github.com/pandas-dev/pandas/issues/9602))
  id: totrans-138
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pandas.rpy`接口已被弃用，并将在将来的版本中移除。类似功能可以通过[rpy2](http://rpy2.bitbucket.org/)项目访问（[GH
    9602](https://github.com/pandas-dev/pandas/issues/9602)）'
- en: Adding `DatetimeIndex/PeriodIndex` to another `DatetimeIndex/PeriodIndex` is
    being deprecated as a set-operation. This will be changed to a `TypeError` in
    a future version. `.union()` should be used for the union set operation. ([GH
    9094](https://github.com/pandas-dev/pandas/issues/9094))
  id: totrans-139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将`DatetimeIndex/PeriodIndex`添加到另一个`DatetimeIndex/PeriodIndex`被弃用为集合操作。这将在将来的版本中更改为`TypeError`。应该使用`.union()`进行并集操作（[GH
    9094](https://github.com/pandas-dev/pandas/issues/9094)）
- en: 'Subtracting `DatetimeIndex/PeriodIndex` from another `DatetimeIndex/PeriodIndex`
    is being deprecated as a set-operation. This will be changed to an actual numeric
    subtraction yielding a `TimeDeltaIndex` in a future version. `.difference()` should
    be used for the differencing set operation. ([GH 9094](https://github.com/pandas-dev/pandas/issues/9094))  ###
    Removal of prior version deprecations/changes'
  id: totrans-140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从另一个`DatetimeIndex/PeriodIndex`中减去`DatetimeIndex/PeriodIndex`被弃用为集合操作。这将在将来的版本中更改为实际的数值减法，产生一个`TimeDeltaIndex`。应该使用`.difference()`进行差分集合操作（[GH
    9094](https://github.com/pandas-dev/pandas/issues/9094)）### 移除之前版本的弃用/更改
- en: '`DataFrame.pivot_table` and `crosstab`’s `rows` and `cols` keyword arguments
    were removed in favor of `index` and `columns` ([GH 6581](https://github.com/pandas-dev/pandas/issues/6581))'
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.pivot_table`和`crosstab`的`rows`和`cols`关键字参数已被移除，改为使用`index`和`columns`（[GH
    6581](https://github.com/pandas-dev/pandas/issues/6581)）'
- en: '`DataFrame.to_excel` and `DataFrame.to_csv` `cols` keyword argument was removed
    in favor of `columns` ([GH 6581](https://github.com/pandas-dev/pandas/issues/6581))'
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.to_excel`和`DataFrame.to_csv`的`cols`关键字参数已被移除，改为使用`columns`（[GH 6581](https://github.com/pandas-dev/pandas/issues/6581)）'
- en: Removed `convert_dummies` in favor of `get_dummies` ([GH 6581](https://github.com/pandas-dev/pandas/issues/6581))
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除了`convert_dummies`，改用`get_dummies`（[GH 6581](https://github.com/pandas-dev/pandas/issues/6581)）
- en: 'Removed `value_range` in favor of `describe` ([GH 6581](https://github.com/pandas-dev/pandas/issues/6581))  ##
    Performance improvements'
  id: totrans-144
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除了`value_range`，改用`describe`（[GH 6581](https://github.com/pandas-dev/pandas/issues/6581)）##
    性能改进
- en: Fixed a performance regression for `.loc` indexing with an array or list-like
    ([GH 9126](https://github.com/pandas-dev/pandas/issues/9126):).
  id: totrans-145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了使用数组或类似列表进行`.loc`索引的性能回归（[GH 9126](https://github.com/pandas-dev/pandas/issues/9126)）
- en: '`DataFrame.to_json` 30x performance improvement for mixed dtype frames. ([GH
    9037](https://github.com/pandas-dev/pandas/issues/9037))'
  id: totrans-146
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.to_json`混合dtype框架的性能提升30倍（[GH 9037](https://github.com/pandas-dev/pandas/issues/9037)）'
- en: Performance improvements in `MultiIndex.duplicated` by working with labels instead
    of values ([GH 9125](https://github.com/pandas-dev/pandas/issues/9125))
  id: totrans-147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过使用标签而不是值，提高了`MultiIndex.duplicated`的性能（[GH 9125](https://github.com/pandas-dev/pandas/issues/9125)）
- en: Improved the speed of `nunique` by calling `unique` instead of `value_counts`
    ([GH 9129](https://github.com/pandas-dev/pandas/issues/9129), [GH 7771](https://github.com/pandas-dev/pandas/issues/7771))
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过调用`unique`而不是`value_counts`来提高`nunique`的速度（[GH 9129](https://github.com/pandas-dev/pandas/issues/9129)，[GH
    7771](https://github.com/pandas-dev/pandas/issues/7771)）
- en: Performance improvement of up to 10x in `DataFrame.count` and `DataFrame.dropna`
    by taking advantage of homogeneous/heterogeneous dtypes appropriately ([GH 9136](https://github.com/pandas-dev/pandas/issues/9136))
  id: totrans-149
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过适当利用同质/异质dtypes，`DataFrame.count`和`DataFrame.dropna`的性能提高了最多10倍（[GH 9136](https://github.com/pandas-dev/pandas/issues/9136)）
- en: Performance improvement of up to 20x in `DataFrame.count` when using a `MultiIndex`
    and the `level` keyword argument ([GH 9163](https://github.com/pandas-dev/pandas/issues/9163))
  id: totrans-150
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在使用`MultiIndex`和`level`关键字参数时，`DataFrame.count`的性能提高了最多20倍（[GH 9163](https://github.com/pandas-dev/pandas/issues/9163)）
- en: Performance and memory usage improvements in `merge` when key space exceeds
    `int64` bounds ([GH 9151](https://github.com/pandas-dev/pandas/issues/9151))
  id: totrans-151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当键空间超过`int64`边界时，在`merge`中的性能和内存使用改进（[GH 9151](https://github.com/pandas-dev/pandas/issues/9151)）
- en: Performance improvements in multi-key `groupby` ([GH 9429](https://github.com/pandas-dev/pandas/issues/9429))
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 多键`groupby`中的性能改进（[GH 9429](https://github.com/pandas-dev/pandas/issues/9429)）
- en: Performance improvements in `MultiIndex.sortlevel` ([GH 9445](https://github.com/pandas-dev/pandas/issues/9445))
  id: totrans-153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`MultiIndex.sortlevel`中的性能改进（[GH 9445](https://github.com/pandas-dev/pandas/issues/9445)）'
- en: Performance and memory usage improvements in `DataFrame.duplicated` ([GH 9398](https://github.com/pandas-dev/pandas/issues/9398))
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`DataFrame.duplicated`中的性能和内存使用改进（[GH 9398](https://github.com/pandas-dev/pandas/issues/9398)）
- en: Cythonized `Period` ([GH 9440](https://github.com/pandas-dev/pandas/issues/9440))
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Cython化了`Period`（[GH 9440](https://github.com/pandas-dev/pandas/issues/9440)）
- en: 'Decreased memory usage on `to_hdf` ([GH 9648](https://github.com/pandas-dev/pandas/issues/9648))  ##
    Bug fixes'
  id: totrans-156
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`to_hdf`中减少了内存使用量（[GH 9648](https://github.com/pandas-dev/pandas/issues/9648)）##
    Bug 修复
- en: Changed `.to_html` to remove leading/trailing spaces in table body ([GH 4987](https://github.com/pandas-dev/pandas/issues/4987))
  id: totrans-157
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更改了`.to_html`以删除表体中的前导/尾随空格（[GH 4987](https://github.com/pandas-dev/pandas/issues/4987)）
- en: Fixed issue using `read_csv` on s3 with Python 3 ([GH 9452](https://github.com/pandas-dev/pandas/issues/9452))
  id: totrans-158
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在Python 3上使用`read_csv`在s3上存在问题（[GH 9452](https://github.com/pandas-dev/pandas/issues/9452)）
- en: Fixed compatibility issue in `DatetimeIndex` affecting architectures where `numpy.int_`
    defaults to `numpy.int32` ([GH 8943](https://github.com/pandas-dev/pandas/issues/8943))
  id: totrans-159
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了`DatetimeIndex`中的兼容性问题，影响了`numpy.int_`默认为`numpy.int32`的架构（[GH 8943](https://github.com/pandas-dev/pandas/issues/8943)）
- en: Bug in Panel indexing with an object-like ([GH 9140](https://github.com/pandas-dev/pandas/issues/9140))
  id: totrans-160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在具有对象类似特性的Panel索引中存在错误（[GH 9140](https://github.com/pandas-dev/pandas/issues/9140)）
- en: Bug in the returned `Series.dt.components` index was reset to the default index
    ([GH 9247](https://github.com/pandas-dev/pandas/issues/9247))
  id: totrans-161
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 返回的`Series.dt.components`索引中的错误已重置为默认索引（[GH 9247](https://github.com/pandas-dev/pandas/issues/9247)）
- en: Bug in `Categorical.__getitem__/__setitem__` with listlike input getting incorrect
    results from indexer coercion ([GH 9469](https://github.com/pandas-dev/pandas/issues/9469))
  id: totrans-162
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用列表输入时，在`Categorical.__getitem__/__setitem__`中出现错误，从索引器强制转换中获得不正确的结果（[GH 9469](https://github.com/pandas-dev/pandas/issues/9469)）
- en: Bug in partial setting with a DatetimeIndex ([GH 9478](https://github.com/pandas-dev/pandas/issues/9478))
  id: totrans-163
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在具有DatetimeIndex的部分设置中存在错误（[GH 9478](https://github.com/pandas-dev/pandas/issues/9478)）
- en: Bug in groupby for integer and datetime64 columns when applying an aggregator
    that caused the value to be changed when the number was sufficiently large ([GH
    9311](https://github.com/pandas-dev/pandas/issues/9311), [GH 6620](https://github.com/pandas-dev/pandas/issues/6620))
  id: totrans-164
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在应用导致值在数字足够大时发生更改的聚合器时，对整数和datetime64列进行groupby时存在错误（[GH 9311](https://github.com/pandas-dev/pandas/issues/9311)，[GH
    6620](https://github.com/pandas-dev/pandas/issues/6620)）
- en: Fixed bug in `to_sql` when mapping a `Timestamp` object column (datetime column
    with timezone info) to the appropriate sqlalchemy type ([GH 9085](https://github.com/pandas-dev/pandas/issues/9085)).
  id: totrans-165
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在将`Timestamp`对象列（带有时区信息的datetime列）映射到适当的sqlalchemy类型时，修复了`to_sql`中的错误（[GH 9085](https://github.com/pandas-dev/pandas/issues/9085)）。
- en: Fixed bug in `to_sql` `dtype` argument not accepting an instantiated SQLAlchemy
    type ([GH 9083](https://github.com/pandas-dev/pandas/issues/9083)).
  id: totrans-166
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了`to_sql`中`dtype`参数不接受实例化的SQLAlchemy类型的错误（[GH 9083](https://github.com/pandas-dev/pandas/issues/9083)）。
- en: Bug in `.loc` partial setting with a `np.datetime64` ([GH 9516](https://github.com/pandas-dev/pandas/issues/9516))
  id: totrans-167
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在使用`np.datetime64`进行`.loc`部分设置时存在错误（[GH 9516](https://github.com/pandas-dev/pandas/issues/9516)）
- en: Incorrect dtypes inferred on datetimelike looking `Series` & on `.xs` slices
    ([GH 9477](https://github.com/pandas-dev/pandas/issues/9477))
  id: totrans-168
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在看起来是`Series`和`.xs`切片上推断的不正确的dtypes（[GH 9477](https://github.com/pandas-dev/pandas/issues/9477)）
- en: Items in `Categorical.unique()` (and `s.unique()` if `s` is of dtype `category`)
    now appear in the order in which they are originally found, not in sorted order
    ([GH 9331](https://github.com/pandas-dev/pandas/issues/9331)). This is now consistent
    with the behavior for other dtypes in pandas.
  id: totrans-169
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在`Categorical.unique()`中的项目（如果`s`的dtype为`category`，则为`s.unique()`）现在按照最初找到它们的顺序出现，而不是按排序顺序（[GH
    9331](https://github.com/pandas-dev/pandas/issues/9331)）。这现在与pandas中其他dtype的行为一致。
- en: Fixed bug on big endian platforms which produced incorrect results in `StataReader`
    ([GH 8688](https://github.com/pandas-dev/pandas/issues/8688)).
  id: totrans-170
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了在大端平台上产生`StataReader`中不正确结果的错误（[GH 8688](https://github.com/pandas-dev/pandas/issues/8688)）。
- en: Bug in `MultiIndex.has_duplicates` when having many levels causes an indexer
    overflow ([GH 9075](https://github.com/pandas-dev/pandas/issues/9075), [GH 5873](https://github.com/pandas-dev/pandas/issues/5873))
  id: totrans-171
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了`MultiIndex.has_duplicates`中当有许多级别时导致索引器溢出的错误（[GH 9075](https://github.com/pandas-dev/pandas/issues/9075)，[GH
    5873](https://github.com/pandas-dev/pandas/issues/5873)）。
- en: Bug in `pivot` and `unstack` where `nan` values would break index alignment
    ([GH 4862](https://github.com/pandas-dev/pandas/issues/4862), [GH 7401](https://github.com/pandas-dev/pandas/issues/7401),
    [GH 7403](https://github.com/pandas-dev/pandas/issues/7403), [GH 7405](https://github.com/pandas-dev/pandas/issues/7405),
    [GH 7466](https://github.com/pandas-dev/pandas/issues/7466), [GH 9497](https://github.com/pandas-dev/pandas/issues/9497))
  id: totrans-172
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了`pivot`和`unstack`中`nan`值会破坏索引对齐的错误（[GH 4862](https://github.com/pandas-dev/pandas/issues/4862)，[GH
    7401](https://github.com/pandas-dev/pandas/issues/7401)，[GH 7403](https://github.com/pandas-dev/pandas/issues/7403)，[GH
    7405](https://github.com/pandas-dev/pandas/issues/7405)，[GH 7466](https://github.com/pandas-dev/pandas/issues/7466)，[GH
    9497](https://github.com/pandas-dev/pandas/issues/9497)）。
- en: Bug in left `join` on MultiIndex with `sort=True` or null values ([GH 9210](https://github.com/pandas-dev/pandas/issues/9210)).
  id: totrans-173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了在具有`sort=True`或空值的MultiIndex上进行左连接时的错误（[GH 9210](https://github.com/pandas-dev/pandas/issues/9210)）。
- en: Bug in `MultiIndex` where inserting new keys would fail ([GH 9250](https://github.com/pandas-dev/pandas/issues/9250)).
  id: totrans-174
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了在插入新键时`MultiIndex`会失败的错误（[GH 9250](https://github.com/pandas-dev/pandas/issues/9250)）。
- en: Bug in `groupby` when key space exceeds `int64` bounds ([GH 9096](https://github.com/pandas-dev/pandas/issues/9096)).
  id: totrans-175
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了`groupby`中键空间超过`int64`边界时的错误（[GH 9096](https://github.com/pandas-dev/pandas/issues/9096)）。
- en: Bug in `unstack` with `TimedeltaIndex` or `DatetimeIndex` and nulls ([GH 9491](https://github.com/pandas-dev/pandas/issues/9491)).
  id: totrans-176
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了在`TimedeltaIndex`或`DatetimeIndex`和空值上使用`unstack`的错误（[GH 9491](https://github.com/pandas-dev/pandas/issues/9491)）。
- en: Bug in `rank` where comparing floats with tolerance will cause inconsistent
    behaviour ([GH 8365](https://github.com/pandas-dev/pandas/issues/8365)).
  id: totrans-177
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了`rank`中使用容差比较浮点数会导致不一致行为的错误（[GH 8365](https://github.com/pandas-dev/pandas/issues/8365)）。
- en: Fixed character encoding bug in `read_stata` and `StataReader` when loading
    data from a URL ([GH 9231](https://github.com/pandas-dev/pandas/issues/9231)).
  id: totrans-178
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了从URL加载数据时`read_stata`和`StataReader`中的字符编码错误（[GH 9231](https://github.com/pandas-dev/pandas/issues/9231)）。
- en: Bug in adding `offsets.Nano` to other offsets raises `TypeError` ([GH 9284](https://github.com/pandas-dev/pandas/issues/9284))
  id: totrans-179
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加`offsets.Nano`到其他偏移时引发`TypeError`的错误已修复（[GH 9284](https://github.com/pandas-dev/pandas/issues/9284)）。
- en: Bug in `DatetimeIndex` iteration, related to ([GH 8890](https://github.com/pandas-dev/pandas/issues/8890)),
    fixed in ([GH 9100](https://github.com/pandas-dev/pandas/issues/9100))
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了`DatetimeIndex`迭代中的错误，相关的（[GH 8890](https://github.com/pandas-dev/pandas/issues/8890)），在（[GH
    9100](https://github.com/pandas-dev/pandas/issues/9100)）中修复。
- en: Bugs in `resample` around DST transitions. This required fixing offset classes
    so they behave correctly on DST transitions. ([GH 5172](https://github.com/pandas-dev/pandas/issues/5172),
    [GH 8744](https://github.com/pandas-dev/pandas/issues/8744), [GH 8653](https://github.com/pandas-dev/pandas/issues/8653),
    [GH 9173](https://github.com/pandas-dev/pandas/issues/9173), [GH 9468](https://github.com/pandas-dev/pandas/issues/9468)).
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了`resample`在夏令时转换周围的错误。这需要修复偏移类，以便它们在夏令时转换时表现正确（[GH 5172](https://github.com/pandas-dev/pandas/issues/5172)，[GH
    8744](https://github.com/pandas-dev/pandas/issues/8744)，[GH 8653](https://github.com/pandas-dev/pandas/issues/8653)，[GH
    9173](https://github.com/pandas-dev/pandas/issues/9173)，[GH 9468](https://github.com/pandas-dev/pandas/issues/9468)）。
- en: Bug in binary operator method (eg `.mul()`) alignment with integer levels ([GH
    9463](https://github.com/pandas-dev/pandas/issues/9463)).
  id: totrans-182
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了二进制运算符方法（例如`.mul()`）与整数级别对齐的错误（[GH 9463](https://github.com/pandas-dev/pandas/issues/9463)）。
- en: Bug in boxplot, scatter and hexbin plot may show an unnecessary warning ([GH
    8877](https://github.com/pandas-dev/pandas/issues/8877))
  id: totrans-183
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了boxplot、scatter和hexbin plot可能显示不必要警告的错误（[GH 8877](https://github.com/pandas-dev/pandas/issues/8877)）。
- en: Bug in subplot with `layout` kw may show unnecessary warning ([GH 9464](https://github.com/pandas-dev/pandas/issues/9464))
  id: totrans-184
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在具有`layout`关键字的subplot中存在的错误可能会显示不必要的警告（[GH 9464](https://github.com/pandas-dev/pandas/issues/9464)）
- en: Bug in using grouper functions that need passed through arguments (e.g. axis),
    when using wrapped function (e.g. `fillna`), ([GH 9221](https://github.com/pandas-dev/pandas/issues/9221))
  id: totrans-185
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在使用需要传递参数（例如轴）的分组器函数时出现的错误，当使用包装函数（例如`fillna`）时，（[GH 9221](https://github.com/pandas-dev/pandas/issues/9221)）
- en: '`DataFrame` now properly supports simultaneous `copy` and `dtype` arguments
    in constructor ([GH 9099](https://github.com/pandas-dev/pandas/issues/9099))'
  id: totrans-186
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame`现在在构造函数中正确支持同时`copy`和`dtype`参数（[GH 9099](https://github.com/pandas-dev/pandas/issues/9099)）'
- en: Bug in `read_csv` when using skiprows on a file with CR line endings with the
    c engine. ([GH 9079](https://github.com/pandas-dev/pandas/issues/9079))
  id: totrans-187
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当使用c引擎读取带有CR换行的文件时，在`read_csv`中使用skiprows时出现的错误（[GH 9079](https://github.com/pandas-dev/pandas/issues/9079)）
- en: '`isnull` now detects `NaT` in `PeriodIndex` ([GH 9129](https://github.com/pandas-dev/pandas/issues/9129))'
  id: totrans-188
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`isnull`现在在`PeriodIndex`中检测到`NaT`（[GH 9129](https://github.com/pandas-dev/pandas/issues/9129)）'
- en: Bug in groupby `.nth()` with a multiple column groupby ([GH 8979](https://github.com/pandas-dev/pandas/issues/8979))
  id: totrans-189
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在多列groupby中存在的`nth()`错误（[GH 8979](https://github.com/pandas-dev/pandas/issues/8979)）
- en: Bug in `DataFrame.where` and `Series.where` coerce numerics to string incorrectly
    ([GH 9280](https://github.com/pandas-dev/pandas/issues/9280))
  id: totrans-190
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`DataFrame.where`和`Series.where`中存在的错误，错误地将数值转换为字符串（[GH 9280](https://github.com/pandas-dev/pandas/issues/9280)）
- en: Bug in `DataFrame.where` and `Series.where` raise `ValueError` when string list-like
    is passed. ([GH 9280](https://github.com/pandas-dev/pandas/issues/9280))
  id: totrans-191
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`DataFrame.where`和`Series.where`中存在的错误，当传递字符串列表时引发`ValueError`（[GH 9280](https://github.com/pandas-dev/pandas/issues/9280)）
- en: Accessing `Series.str` methods on with non-string values now raises `TypeError`
    instead of producing incorrect results ([GH 9184](https://github.com/pandas-dev/pandas/issues/9184))
  id: totrans-192
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在，在非字符串值上使用`Series.str`方法将引发`TypeError`而不是产生错误的结果（[GH 9184](https://github.com/pandas-dev/pandas/issues/9184)）
- en: Bug in `DatetimeIndex.__contains__` when index has duplicates and is not monotonic
    increasing ([GH 9512](https://github.com/pandas-dev/pandas/issues/9512))
  id: totrans-193
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当索引具有重复项且不是单调递增时，在`DatetimeIndex.__contains__`中出现的错误（[GH 9512](https://github.com/pandas-dev/pandas/issues/9512)）
- en: Fixed division by zero error for `Series.kurt()` when all values are equal ([GH
    9197](https://github.com/pandas-dev/pandas/issues/9197))
  id: totrans-194
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了`Series.kurt()`在所有值相等时出现的除零错误（[GH 9197](https://github.com/pandas-dev/pandas/issues/9197)）
- en: Fixed issue in the `xlsxwriter` engine where it added a default ‘General’ format
    to cells if no other format was applied. This prevented other row or column formatting
    being applied. ([GH 9167](https://github.com/pandas-dev/pandas/issues/9167))
  id: totrans-195
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了`xlsxwriter`引擎中的问题，在没有应用其他格式时，将默认的“General”格式添加到单元格中。这会阻止应用其他行或列格式。 （[GH
    9167](https://github.com/pandas-dev/pandas/issues/9167)）
- en: Fixes issue with `index_col=False` when `usecols` is also specified in `read_csv`.
    ([GH 9082](https://github.com/pandas-dev/pandas/issues/9082))
  id: totrans-196
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`read_csv`中指定`index_col=False`时存在的问题，当也指定了`usecols`时（[GH 9082](https://github.com/pandas-dev/pandas/issues/9082)）
- en: Bug where `wide_to_long` would modify the input stub names list ([GH 9204](https://github.com/pandas-dev/pandas/issues/9204))
  id: totrans-197
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`wide_to_long`中存在的错误会修改输入的存根名称列表（[GH 9204](https://github.com/pandas-dev/pandas/issues/9204)）
- en: Bug in `to_sql` not storing float64 values using double precision. ([GH 9009](https://github.com/pandas-dev/pandas/issues/9009))
  id: totrans-198
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`to_sql`中存在的问题，不以双精度存储float64值。 （[GH 9009](https://github.com/pandas-dev/pandas/issues/9009)）
- en: '`SparseSeries` and `SparsePanel` now accept zero argument constructors (same
    as their non-sparse counterparts) ([GH 9272](https://github.com/pandas-dev/pandas/issues/9272)).'
  id: totrans-199
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`SparseSeries`和`SparsePanel`现在接受零参数构造函数（与它们的非稀疏对应物相同）（[GH 9272](https://github.com/pandas-dev/pandas/issues/9272)）。'
- en: Regression in merging `Categorical` and `object` dtypes ([GH 9426](https://github.com/pandas-dev/pandas/issues/9426))
  id: totrans-200
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 合并`Categorical`和`object` dtype时出现的回归错误（[GH 9426](https://github.com/pandas-dev/pandas/issues/9426)）
- en: Bug in `read_csv` with buffer overflows with certain malformed input files ([GH
    9205](https://github.com/pandas-dev/pandas/issues/9205))
  id: totrans-201
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在使用特定格式不正确的输入文件时，`read_csv`中存在缓冲区溢出的错误（[GH 9205](https://github.com/pandas-dev/pandas/issues/9205)）
- en: Bug in groupby MultiIndex with missing pair ([GH 9049](https://github.com/pandas-dev/pandas/issues/9049),
    [GH 9344](https://github.com/pandas-dev/pandas/issues/9344))
  id: totrans-202
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在带有缺失对的groupby MultiIndex中存在的错误（[GH 9049](https://github.com/pandas-dev/pandas/issues/9049)，[GH
    9344](https://github.com/pandas-dev/pandas/issues/9344)）
- en: Fixed bug in `Series.groupby` where grouping on `MultiIndex` levels would ignore
    the sort argument ([GH 9444](https://github.com/pandas-dev/pandas/issues/9444))
  id: totrans-203
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了`Series.groupby`中的一个 bug，即在`MultiIndex`级别进行分组会忽略`sort`参数（[GH 9444](https://github.com/pandas-dev/pandas/issues/9444)）
- en: Fix bug in `DataFrame.Groupby` where `sort=False` is ignored in the case of
    Categorical columns. ([GH 8868](https://github.com/pandas-dev/pandas/issues/8868))
  id: totrans-204
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个 bug，在 Categorical 列的情况下，`DataFrame.Groupby`中的`sort=False`被忽略。 （[GH 8868](https://github.com/pandas-dev/pandas/issues/8868)）
- en: Fixed bug with reading CSV files from Amazon S3 on python 3 raising a TypeError
    ([GH 9452](https://github.com/pandas-dev/pandas/issues/9452))
  id: totrans-205
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了一个 bug，即在 Python 3 上从 Amazon S3 读取 CSV 文件会引发 TypeError（[GH 9452](https://github.com/pandas-dev/pandas/issues/9452)）
- en: Bug in the Google BigQuery reader where the ‘jobComplete’ key may be present
    but False in the query results ([GH 8728](https://github.com/pandas-dev/pandas/issues/8728))
  id: totrans-206
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 Google BigQuery 读取器中的一个 bug，在查询结果中可能存在‘jobComplete’键，但其值为 False（[GH 8728](https://github.com/pandas-dev/pandas/issues/8728)）
- en: Bug in `Series.values_counts` with excluding `NaN` for categorical type `Series`
    with `dropna=True` ([GH 9443](https://github.com/pandas-dev/pandas/issues/9443))
  id: totrans-207
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了`Series.values_counts`中的一个 bug，即对于`dropna=True`的分类类型`Series`排除了`NaN`（[GH
    9443](https://github.com/pandas-dev/pandas/issues/9443)）
- en: Fixed missing numeric_only option for `DataFrame.std/var/sem` ([GH 9201](https://github.com/pandas-dev/pandas/issues/9201))
  id: totrans-208
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了`DataFrame.std/var/sem`中缺少的`numeric_only`选项（[GH 9201](https://github.com/pandas-dev/pandas/issues/9201)）
- en: Support constructing `Panel` or `Panel4D` with scalar data ([GH 8285](https://github.com/pandas-dev/pandas/issues/8285))
  id: totrans-209
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 支持使用标量数据构造`Panel`或`Panel4D`（[GH 8285](https://github.com/pandas-dev/pandas/issues/8285)）
- en: '`Series` text representation disconnected from `max_rows`/`max_columns` ([GH
    7508](https://github.com/pandas-dev/pandas/issues/7508)).'
  id: totrans-210
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Series` 文本表示与 `max_rows`/`max_columns` 脱节（[GH 7508](https://github.com/pandas-dev/pandas/issues/7508)）。'
- en: '`Series` number formatting inconsistent when truncated ([GH 8532](https://github.com/pandas-dev/pandas/issues/8532)).'
  id: totrans-211
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Series` 数字格式不一致，当被截断时（[GH 8532](https://github.com/pandas-dev/pandas/issues/8532)）。'
- en: Previous behavior
  id: totrans-212
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 以前的行为
- en: '[PRE31]'
  id: totrans-213
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE31]'
- en: New behavior
  id: totrans-214
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 新行为
- en: '[PRE32]'
  id: totrans-215
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE32]'
- en: A Spurious `SettingWithCopy` Warning was generated when setting a new item in
    a frame in some cases ([GH 8730](https://github.com/pandas-dev/pandas/issues/8730))
  id: totrans-216
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在某些情况下，当在框架中设置新项目时，会生成虚假的`SettingWithCopy`警告（[GH 8730](https://github.com/pandas-dev/pandas/issues/8730)）
- en: The following would previously report a `SettingWithCopy` Warning.
  id: totrans-217
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 以前会报出`SettingWithCopy`警告。
- en: '[PRE33]  ## Contributors'
  id: totrans-218
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[PRE33]  ## 贡献者'
- en: A total of 60 people contributed patches to this release. People with a “+”
    by their names contributed a patch for the first time.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 这个版本有总共 60 个人贡献了补丁。带有“+”符号的人是首次贡献补丁。
- en: Aaron Toth +
  id: totrans-220
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Aaron Toth +
- en: Alan Du +
  id: totrans-221
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Alan Du +
- en: Alessandro Amici +
  id: totrans-222
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Alessandro Amici +
- en: Artemy Kolchinsky
  id: totrans-223
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Artemy Kolchinsky
- en: Ashwini Chaudhary +
  id: totrans-224
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Ashwini Chaudhary +
- en: Ben Schiller
  id: totrans-225
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Ben Schiller
- en: Bill Letson
  id: totrans-226
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Bill Letson
- en: Brandon Bradley +
  id: totrans-227
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Brandon Bradley +
- en: Chau Hoang +
  id: totrans-228
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Chau Hoang +
- en: Chris Reynolds
  id: totrans-229
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Chris Reynolds
- en: Chris Whelan +
  id: totrans-230
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Chris Whelan +
- en: Christer van der Meeren +
  id: totrans-231
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Christer van der Meeren +
- en: David Cottrell +
  id: totrans-232
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: David Cottrell +
- en: David Stephens
  id: totrans-233
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: David Stephens
- en: Ehsan Azarnasab +
  id: totrans-234
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Ehsan Azarnasab +
- en: Garrett-R +
  id: totrans-235
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Garrett-R +
- en: Guillaume Gay
  id: totrans-236
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Guillaume Gay
- en: Jake Torcasso +
  id: totrans-237
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Jake Torcasso +
- en: Jason Sexauer
  id: totrans-238
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Jason Sexauer
- en: Jeff Reback
  id: totrans-239
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Jeff Reback
- en: John McNamara
  id: totrans-240
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: John McNamara
- en: Joris Van den Bossche
  id: totrans-241
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Joris Van den Bossche
- en: Joschka zur Jacobsmühlen +
  id: totrans-242
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Joschka zur Jacobsmühlen +
- en: Juarez Bochi +
  id: totrans-243
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Juarez Bochi +
- en: Junya Hayashi +
  id: totrans-244
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Junya Hayashi +
- en: K.-Michael Aye
  id: totrans-245
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: K.-Michael Aye
- en: Kerby Shedden +
  id: totrans-246
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Kerby Shedden +
- en: Kevin Sheppard
  id: totrans-247
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Kevin Sheppard
- en: Kieran O’Mahony
  id: totrans-248
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Kieran O’Mahony
- en: Kodi Arfer +
  id: totrans-249
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Kodi Arfer +
- en: Matti Airas +
  id: totrans-250
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Matti Airas +
- en: Min RK +
  id: totrans-251
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Min RK +
- en: Mortada Mehyar
  id: totrans-252
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Mortada Mehyar
- en: Robert +
  id: totrans-253
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Robert +
- en: Scott E Lasley
  id: totrans-254
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Scott E Lasley
- en: Scott Lasley +
  id: totrans-255
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Scott Lasley +
- en: Sergio Pascual +
  id: totrans-256
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Sergio Pascual +
- en: Skipper Seabold
  id: totrans-257
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Skipper Seabold
- en: Stephan Hoyer
  id: totrans-258
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Stephan Hoyer
- en: Thomas Grainger
  id: totrans-259
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Thomas Grainger
- en: Tom Augspurger
  id: totrans-260
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Tom Augspurger
- en: TomAugspurger
  id: totrans-261
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: TomAugspurger
- en: Vladimir Filimonov +
  id: totrans-262
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Vladimir Filimonov +
- en: Vyomkesh Tripathi +
  id: totrans-263
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Vyomkesh Tripathi +
- en: Will Holmgren
  id: totrans-264
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Will Holmgren
- en: Yulong Yang +
  id: totrans-265
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Yulong Yang +
- en: behzad nouri
  id: totrans-266
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: behzad nouri
- en: bertrandhaut +
  id: totrans-267
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: bertrandhaut +
- en: bjonen
  id: totrans-268
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: bjonen
- en: cel4 +
  id: totrans-269
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: cel4 +
- en: clham
  id: totrans-270
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: clham
- en: hsperr +
  id: totrans-271
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: hsperr +
- en: ischwabacher
  id: totrans-272
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ischwabacher
- en: jnmclarty
  id: totrans-273
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: jnmclarty
- en: josham +
  id: totrans-274
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: josham +
- en: jreback
  id: totrans-275
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: jreback
- en: omtinez +
  id: totrans-276
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: omtinez +
- en: roch +
  id: totrans-277
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: roch +
- en: sinhrks
  id: totrans-278
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: sinhrks
- en: 'unutbu  ## New features'
  id: totrans-279
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'unutbu  ## 新特性'
- en: '### DataFrame assign'
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: '### DataFrame 分配'
- en: Inspired by [dplyr’s](https://dplyr.tidyverse.org/articles/dplyr.html#mutating-operations)
    `mutate` verb, DataFrame has a new [`assign()`](../reference/api/pandas.DataFrame.assign.html#pandas.DataFrame.assign
    "pandas.DataFrame.assign") method. The function signature for `assign` is simply
    `**kwargs`. The keys are the column names for the new fields, and the values are
    either a value to be inserted (for example, a `Series` or NumPy array), or a function
    of one argument to be called on the `DataFrame`. The new values are inserted,
    and the entire DataFrame (with all original and new columns) is returned.
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: 受[dplyr](https://dplyr.tidyverse.org/articles/dplyr.html#mutating-operations)
    `mutate`动词的启发，DataFrame具有新的[`assign()`](../reference/api/pandas.DataFrame.assign.html#pandas.DataFrame.assign
    "pandas.DataFrame.assign")方法。`assign`的函数签名只是`**kwargs`。键是新字段的列名，值可以是要插入的值（例如，一个`Series`或NumPy数组），或者是要在`DataFrame`上调用的一个参数的函数。新值被插入，整个DataFrame（包括所有原始和新列）被返回。
- en: '[PRE34]'
  id: totrans-282
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: Above was an example of inserting a precomputed value. We can also pass in a
    function to be evaluated.
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: 上面是插入预先计算值的示例。我们也可以传入一个要评估的函数。
- en: '[PRE35]'
  id: totrans-284
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: The power of `assign` comes when used in chains of operations. For example,
    we can limit the DataFrame to just those with a Sepal Length greater than 5, calculate
    the ratio, and plot
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 当`assign`在操作链中使用时，其威力就显现出来了。例如，我们可以将DataFrame限制为仅包含萼片长度大于5的数据，计算比率，并绘制图表。
- en: '[PRE36]'
  id: totrans-286
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: '[![../_images/whatsnew_assign.png](../Images/5df5e5018f70674fce1c86f0c2698e8b.png)](../_images/whatsnew_assign.png)'
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: '[![../_images/whatsnew_assign.png](../Images/5df5e5018f70674fce1c86f0c2698e8b.png)](../_images/whatsnew_assign.png)'
- en: 'See the [documentation](../user_guide/dsintro.html#dsintro-chained-assignment)
    for more. ([GH 9229](https://github.com/pandas-dev/pandas/issues/9229))  ### Interaction
    with scipy.sparse'
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: '查看[文档](../user_guide/dsintro.html#dsintro-chained-assignment)以获取更多信息。([GH 9229](https://github.com/pandas-dev/pandas/issues/9229))  ###
    与scipy.sparse的交互'
- en: 'Added `SparseSeries.to_coo()` and `SparseSeries.from_coo()` methods ([GH 8048](https://github.com/pandas-dev/pandas/issues/8048))
    for converting to and from `scipy.sparse.coo_matrix` instances (see [here](../user_guide/sparse.html#sparse-scipysparse)).
    For example, given a SparseSeries with MultiIndex we can convert to a `scipy.sparse.coo_matrix`
    by specifying the row and column labels as index levels:'
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: 添加了`SparseSeries.to_coo()`和`SparseSeries.from_coo()`方法（[GH 8048](https://github.com/pandas-dev/pandas/issues/8048)），用于在`scipy.sparse.coo_matrix`实例之间进行转换（参见[这里](../user_guide/sparse.html#sparse-scipysparse)）。例如，给定一个具有MultiIndex的SparseSeries，我们可以通过指定行和列标签作为索引级别将其转换为`scipy.sparse.coo_matrix`：
- en: '[PRE37]'
  id: totrans-290
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: 'The from_coo method is a convenience method for creating a `SparseSeries` from
    a `scipy.sparse.coo_matrix`:'
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: '`from_coo`方法是一个方便的方法，用于从`scipy.sparse.coo_matrix`创建`SparseSeries`：'
- en: '[PRE38]  ### String methods enhancements'
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE38]  ### 字符串方法增强'
- en: Following new methods are accessible via `.str` accessor to apply the function
    to each values. This is intended to make it more consistent with standard methods
    on strings. ([GH 9282](https://github.com/pandas-dev/pandas/issues/9282), [GH
    9352](https://github.com/pandas-dev/pandas/issues/9352), [GH 9386](https://github.com/pandas-dev/pandas/issues/9386),
    [GH 9387](https://github.com/pandas-dev/pandas/issues/9387), [GH 9439](https://github.com/pandas-dev/pandas/issues/9439))
  id: totrans-293
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 以下新方法可通过`.str`访问器访问，以将该函数应用于每个值。这旨在使其与字符串上的标准方法更一致。([GH 9282](https://github.com/pandas-dev/pandas/issues/9282),
    [GH 9352](https://github.com/pandas-dev/pandas/issues/9352), [GH 9386](https://github.com/pandas-dev/pandas/issues/9386),
    [GH 9387](https://github.com/pandas-dev/pandas/issues/9387), [GH 9439](https://github.com/pandas-dev/pandas/issues/9439))
- en: '|  |  | Methods |  |  |'
  id: totrans-294
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '|  |  | 方法 |  |  |'
- en: '| --- | --- | --- | --- | --- |'
  id: totrans-295
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| --- | --- | --- | --- | --- |'
- en: '| `isalnum()` | `isalpha()` | `isdigit()` | `isdigit()` | `isspace()` |'
  id: totrans-296
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `isalnum()` | `isalpha()` | `isdigit()` | `isdigit()` | `isspace()` |'
- en: '| `islower()` | `isupper()` | `istitle()` | `isnumeric()` | `isdecimal()` |'
  id: totrans-297
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `islower()` | `isupper()` | `istitle()` | `isnumeric()` | `isdecimal()` |'
- en: '| `find()` | `rfind()` | `ljust()` | `rjust()` | `zfill()` |'
  id: totrans-298
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `find()` | `rfind()` | `ljust()` | `rjust()` | `zfill()` |'
- en: '[PRE39]'
  id: totrans-299
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE39]'
- en: '[`Series.str.pad()`](../reference/api/pandas.Series.str.pad.html#pandas.Series.str.pad
    "pandas.Series.str.pad") and [`Series.str.center()`](../reference/api/pandas.Series.str.center.html#pandas.Series.str.center
    "pandas.Series.str.center") now accept `fillchar` option to specify filling character
    ([GH 9352](https://github.com/pandas-dev/pandas/issues/9352))'
  id: totrans-300
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`Series.str.pad()`](../reference/api/pandas.Series.str.pad.html#pandas.Series.str.pad
    "pandas.Series.str.pad")和[`Series.str.center()`](../reference/api/pandas.Series.str.center.html#pandas.Series.str.center
    "pandas.Series.str.center")现在接受`fillchar`选项来指定填充字符（[GH 9352](https://github.com/pandas-dev/pandas/issues/9352)）'
- en: '[PRE40]'
  id: totrans-301
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE40]'
- en: Added [`Series.str.slice_replace()`](../reference/api/pandas.Series.str.slice_replace.html#pandas.Series.str.slice_replace
    "pandas.Series.str.slice_replace"), which previously raised `NotImplementedError`
    ([GH 8888](https://github.com/pandas-dev/pandas/issues/8888))
  id: totrans-302
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了 [`Series.str.slice_replace()`](../reference/api/pandas.Series.str.slice_replace.html#pandas.Series.str.slice_replace
    "pandas.Series.str.slice_replace")，之前会引发 `NotImplementedError` ([GH 8888](https://github.com/pandas-dev/pandas/issues/8888))
- en: '[PRE41]  ### Other enhancements'
  id: totrans-303
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[PRE41]  ### 其他增强功能'
- en: 'Reindex now supports `method=''nearest''` for frames or series with a monotonic
    increasing or decreasing index ([GH 9258](https://github.com/pandas-dev/pandas/issues/9258)):'
  id: totrans-304
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Reindex 现在支持 `method=''nearest''`，用于具有单调递增或递减索引的框架或系列 ([GH 9258](https://github.com/pandas-dev/pandas/issues/9258)):'
- en: '[PRE42]'
  id: totrans-305
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE42]'
- en: This method is also exposed by the lower level `Index.get_indexer` and `Index.get_loc`
    methods.
  id: totrans-306
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这个方法也被更低级别的 `Index.get_indexer` 和 `Index.get_loc` 方法暴露出来。
- en: The `read_excel()` function’s [sheetname](../user_guide/io.html#io-excel-specifying-sheets)
    argument now accepts a list and `None`, to get multiple or all sheets respectively.
    If more than one sheet is specified, a dictionary is returned. ([GH 9450](https://github.com/pandas-dev/pandas/issues/9450))
  id: totrans-307
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`read_excel()` 函数的 [sheetname](../user_guide/io.html#io-excel-specifying-sheets)
    参数现在接受一个列表和 `None`，分别获取多个或所有工作表。如果指定了多个工作表，则返回一个字典。 ([GH 9450](https://github.com/pandas-dev/pandas/issues/9450))'
- en: '[PRE43]'
  id: totrans-308
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE43]'
- en: Allow Stata files to be read incrementally with an iterator; support for long
    strings in Stata files. See the docs [here](../user_guide/io.html#io-stata-reader)
    ([GH 9493](https://github.com/pandas-dev/pandas/issues/9493):).
  id: totrans-309
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许使用迭代器逐步读取 Stata 文件；支持 Stata 文件中的长字符串。查看文档[这里](../user_guide/io.html#io-stata-reader)（[GH
    9493](https://github.com/pandas-dev/pandas/issues/9493):）。
- en: Paths beginning with ~ will now be expanded to begin with the user’s home directory
    ([GH 9066](https://github.com/pandas-dev/pandas/issues/9066))
  id: totrans-310
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 以 ~ 开头的路径现在会扩展为以用户的主目录开头（[GH 9066](https://github.com/pandas-dev/pandas/issues/9066))
- en: Added time interval selection in `get_data_yahoo` ([GH 9071](https://github.com/pandas-dev/pandas/issues/9071))
  id: totrans-311
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `get_data_yahoo` 中添加了时间间隔选择功能（[GH 9071](https://github.com/pandas-dev/pandas/issues/9071))
- en: Added `Timestamp.to_datetime64()` to complement `Timedelta.to_timedelta64()`
    ([GH 9255](https://github.com/pandas-dev/pandas/issues/9255))
  id: totrans-312
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了 `Timestamp.to_datetime64()` 来补充 `Timedelta.to_timedelta64()` ([GH 9255](https://github.com/pandas-dev/pandas/issues/9255))
- en: '`tseries.frequencies.to_offset()` now accepts `Timedelta` as input ([GH 9064](https://github.com/pandas-dev/pandas/issues/9064))'
  id: totrans-313
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`tseries.frequencies.to_offset()` 现在接受 `Timedelta` 作为输入（[GH 9064](https://github.com/pandas-dev/pandas/issues/9064))'
- en: Lag parameter was added to the autocorrelation method of `Series`, defaults
    to lag-1 autocorrelation ([GH 9192](https://github.com/pandas-dev/pandas/issues/9192))
  id: totrans-314
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `Series` 的自相关方法中添加了滞后参数，默认为滞后-1自相关 ([GH 9192](https://github.com/pandas-dev/pandas/issues/9192))
- en: '`Timedelta` will now accept `nanoseconds` keyword in constructor ([GH 9273](https://github.com/pandas-dev/pandas/issues/9273))'
  id: totrans-315
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Timedelta` 现在在构造函数中接受 `nanoseconds` 关键字（[GH 9273](https://github.com/pandas-dev/pandas/issues/9273))'
- en: SQL code now safely escapes table and column names ([GH 8986](https://github.com/pandas-dev/pandas/issues/8986))
  id: totrans-316
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SQL 代码现在安全地转义表名和列名（[GH 8986](https://github.com/pandas-dev/pandas/issues/8986))
- en: Added auto-complete for `Series.str.<tab>`, `Series.dt.<tab>` and `Series.cat.<tab>`
    ([GH 9322](https://github.com/pandas-dev/pandas/issues/9322))
  id: totrans-317
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为 `Series.str.<tab>`，`Series.dt.<tab>` 和 `Series.cat.<tab>` 添加了自动补全功能（[GH 9322](https://github.com/pandas-dev/pandas/issues/9322))
- en: '`Index.get_indexer` now supports `method=''pad''` and `method=''backfill''`
    even for any target array, not just monotonic targets. These methods also work
    for monotonic decreasing as well as monotonic increasing indexes ([GH 9258](https://github.com/pandas-dev/pandas/issues/9258)).'
  id: totrans-318
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Index.get_indexer` 现在支持 `method=''pad''` 和 `method=''backfill''`，即使对于任何目标数组，而不仅仅是单调的目标。这些方法也适用于单调递减以及单调递增的索引
    ([GH 9258](https://github.com/pandas-dev/pandas/issues/9258)).'
- en: '`Index.asof` now works on all index types ([GH 9258](https://github.com/pandas-dev/pandas/issues/9258)).'
  id: totrans-319
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Index.asof` 现在适用于所有索引类型 ([GH 9258](https://github.com/pandas-dev/pandas/issues/9258)).'
- en: A `verbose` argument has been augmented in `io.read_excel()`, defaults to False.
    Set to True to print sheet names as they are parsed. ([GH 9450](https://github.com/pandas-dev/pandas/issues/9450))
  id: totrans-320
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `io.read_excel()` 中增加了一个 `verbose` 参数，默认为 False。设置为 True 以在解析时打印工作表名称。 ([GH
    9450](https://github.com/pandas-dev/pandas/issues/9450))
- en: Added `days_in_month` (compatibility alias `daysinmonth`) property to `Timestamp`,
    `DatetimeIndex`, `Period`, `PeriodIndex`, and `Series.dt` ([GH 9572](https://github.com/pandas-dev/pandas/issues/9572))
  id: totrans-321
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`Timestamp`，`DatetimeIndex`，`Period`，`PeriodIndex`和`Series.dt`中添加了`days_in_month`（兼容别名`daysinmonth`）属性（[GH
    9572](https://github.com/pandas-dev/pandas/issues/9572))
- en: Added `decimal` option in `to_csv` to provide formatting for non-‘.’ decimal
    separators ([GH 781](https://github.com/pandas-dev/pandas/issues/781))
  id: totrans-322
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `to_csv` 中添加了 `decimal` 选项，为非“.”小数分隔符提供格式设置。([GH 781](https://github.com/pandas-dev/pandas/issues/781))
- en: Added `normalize` option for `Timestamp` to normalized to midnight ([GH 8794](https://github.com/pandas-dev/pandas/issues/8794))
  id: totrans-323
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为 `Timestamp` 添加了 `normalize` 选项，以将时间标准化为午夜。([GH 8794](https://github.com/pandas-dev/pandas/issues/8794))
- en: 'Added example for `DataFrame` import to R using HDF5 file and `rhdf5` library.
    See the documentation for more ([GH 9636](https://github.com/pandas-dev/pandas/issues/9636)).  ###
    DataFrame assign'
  id: totrans-324
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了使用 HDF5 文件和 `rhdf5` 库导入 `DataFrame` 的示例。更多详细信息请参阅文档（[GH 9636](https://github.com/pandas-dev/pandas/issues/9636)）。###
    DataFrame assign
- en: Inspired by [dplyr’s](https://dplyr.tidyverse.org/articles/dplyr.html#mutating-operations)
    `mutate` verb, DataFrame has a new [`assign()`](../reference/api/pandas.DataFrame.assign.html#pandas.DataFrame.assign
    "pandas.DataFrame.assign") method. The function signature for `assign` is simply
    `**kwargs`. The keys are the column names for the new fields, and the values are
    either a value to be inserted (for example, a `Series` or NumPy array), or a function
    of one argument to be called on the `DataFrame`. The new values are inserted,
    and the entire DataFrame (with all original and new columns) is returned.
  id: totrans-325
  prefs: []
  type: TYPE_NORMAL
  zh: 受 [dplyr](https://dplyr.tidyverse.org/articles/dplyr.html#mutating-operations)
    `mutate` 动词的启发，DataFrame 有一个新的 [`assign()`](../reference/api/pandas.DataFrame.assign.html#pandas.DataFrame.assign
    "pandas.DataFrame.assign") 方法。`assign` 的函数签名简单为 `**kwargs`。键是新字段的列名，值要么是要插入的值（例如，一个
    `Series` 或 NumPy 数组），要么是要在 `DataFrame` 上调用的一个参数的函数。新值被插入，并返回整个 DataFrame（包括所有原始和新列）。
- en: '[PRE44]'
  id: totrans-326
  prefs: []
  type: TYPE_PRE
  zh: '[PRE44]'
- en: Above was an example of inserting a precomputed value. We can also pass in a
    function to be evaluated.
  id: totrans-327
  prefs: []
  type: TYPE_NORMAL
  zh: 上面是一个插入预计算值的示例。我们也可以传入一个要评估的函数。
- en: '[PRE45]'
  id: totrans-328
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: The power of `assign` comes when used in chains of operations. For example,
    we can limit the DataFrame to just those with a Sepal Length greater than 5, calculate
    the ratio, and plot
  id: totrans-329
  prefs: []
  type: TYPE_NORMAL
  zh: '`assign` 的强大之处在于在操作链中使用时。例如，我们可以将 DataFrame 限制为仅包含 Sepal Length 大于 5 的数据，计算比率，并绘制图表。'
- en: '[PRE46]'
  id: totrans-330
  prefs: []
  type: TYPE_PRE
  zh: '[PRE46]'
- en: '[![../_images/whatsnew_assign.png](../Images/5df5e5018f70674fce1c86f0c2698e8b.png)](../_images/whatsnew_assign.png)'
  id: totrans-331
  prefs: []
  type: TYPE_NORMAL
  zh: '[![../_images/whatsnew_assign.png](../Images/5df5e5018f70674fce1c86f0c2698e8b.png)](../_images/whatsnew_assign.png)'
- en: See the [documentation](../user_guide/dsintro.html#dsintro-chained-assignment)
    for more. ([GH 9229](https://github.com/pandas-dev/pandas/issues/9229))
  id: totrans-332
  prefs: []
  type: TYPE_NORMAL
  zh: 更多详细信息请参阅[文档](../user_guide/dsintro.html#dsintro-chained-assignment)。（[GH 9229](https://github.com/pandas-dev/pandas/issues/9229)）
- en: '### Interaction with scipy.sparse'
  id: totrans-333
  prefs: []
  type: TYPE_NORMAL
  zh: '### 与 scipy.sparse 的交互'
- en: 'Added `SparseSeries.to_coo()` and `SparseSeries.from_coo()` methods ([GH 8048](https://github.com/pandas-dev/pandas/issues/8048))
    for converting to and from `scipy.sparse.coo_matrix` instances (see [here](../user_guide/sparse.html#sparse-scipysparse)).
    For example, given a SparseSeries with MultiIndex we can convert to a `scipy.sparse.coo_matrix`
    by specifying the row and column labels as index levels:'
  id: totrans-334
  prefs: []
  type: TYPE_NORMAL
  zh: 添加了 `SparseSeries.to_coo()` 和 `SparseSeries.from_coo()` 方法，用于将数据转换为和从 `scipy.sparse.coo_matrix`
    实例（参见[这里](../user_guide/sparse.html#sparse-scipysparse)）。例如，给定一个带有 MultiIndex
    的 SparseSeries，我们可以通过指定行和列标签作为索引级别来将其转换为 `scipy.sparse.coo_matrix`：
- en: '[PRE47]'
  id: totrans-335
  prefs: []
  type: TYPE_PRE
  zh: '[PRE47]'
- en: 'The from_coo method is a convenience method for creating a `SparseSeries` from
    a `scipy.sparse.coo_matrix`:'
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: '`from_coo` 方法是一个方便的方法，用于从 `scipy.sparse.coo_matrix` 创建一个 `SparseSeries`：'
- en: '[PRE48]'
  id: totrans-337
  prefs: []
  type: TYPE_PRE
  zh: '[PRE48]'
- en: '### String methods enhancements'
  id: totrans-338
  prefs: []
  type: TYPE_NORMAL
  zh: '### 字符串方法增强'
- en: Following new methods are accessible via `.str` accessor to apply the function
    to each values. This is intended to make it more consistent with standard methods
    on strings. ([GH 9282](https://github.com/pandas-dev/pandas/issues/9282), [GH
    9352](https://github.com/pandas-dev/pandas/issues/9352), [GH 9386](https://github.com/pandas-dev/pandas/issues/9386),
    [GH 9387](https://github.com/pandas-dev/pandas/issues/9387), [GH 9439](https://github.com/pandas-dev/pandas/issues/9439))
  id: totrans-339
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过 `.str` 访问器可以访问以下新方法，以将函数应用于每个值。这旨在使其与字符串上的标准方法更一致。([GH 9282](https://github.com/pandas-dev/pandas/issues/9282),
    [GH 9352](https://github.com/pandas-dev/pandas/issues/9352), [GH 9386](https://github.com/pandas-dev/pandas/issues/9386),
    [GH 9387](https://github.com/pandas-dev/pandas/issues/9387), [GH 9439](https://github.com/pandas-dev/pandas/issues/9439))
- en: '|  |  | Methods |  |  |'
  id: totrans-340
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '|  |  | 方法 |  |  |'
- en: '| --- | --- | --- | --- | --- |'
  id: totrans-341
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| --- | --- | --- | --- | --- |'
- en: '| `isalnum()` | `isalpha()` | `isdigit()` | `isdigit()` | `isspace()` |'
  id: totrans-342
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `isalnum()` | `isalpha()` | `isdigit()` | `isdigit()` | `isspace()` |'
- en: '| `islower()` | `isupper()` | `istitle()` | `isnumeric()` | `isdecimal()` |'
  id: totrans-343
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `islower()` | `isupper()` | `istitle()` | `isnumeric()` | `isdecimal()` |'
- en: '| `find()` | `rfind()` | `ljust()` | `rjust()` | `zfill()` |'
  id: totrans-344
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `find()` | `rfind()` | `ljust()` | `rjust()` | `zfill()` |'
- en: '[PRE49]'
  id: totrans-345
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE49]'
- en: '[`Series.str.pad()`](../reference/api/pandas.Series.str.pad.html#pandas.Series.str.pad
    "pandas.Series.str.pad") and [`Series.str.center()`](../reference/api/pandas.Series.str.center.html#pandas.Series.str.center
    "pandas.Series.str.center") now accept `fillchar` option to specify filling character
    ([GH 9352](https://github.com/pandas-dev/pandas/issues/9352))'
  id: totrans-346
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[`Series.str.pad()`](../reference/api/pandas.Series.str.pad.html#pandas.Series.str.pad
    "pandas.Series.str.pad") 和 [`Series.str.center()`](../reference/api/pandas.Series.str.center.html#pandas.Series.str.center
    "pandas.Series.str.center") 现在接受 `fillchar` 选项来指定填充字符 ([GH 9352](https://github.com/pandas-dev/pandas/issues/9352))'
- en: '[PRE50]'
  id: totrans-347
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE50]'
- en: Added [`Series.str.slice_replace()`](../reference/api/pandas.Series.str.slice_replace.html#pandas.Series.str.slice_replace
    "pandas.Series.str.slice_replace"), which previously raised `NotImplementedError`
    ([GH 8888](https://github.com/pandas-dev/pandas/issues/8888))
  id: totrans-348
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了 [`Series.str.slice_replace()`](../reference/api/pandas.Series.str.slice_replace.html#pandas.Series.str.slice_replace
    "pandas.Series.str.slice_replace")，之前会引发 `NotImplementedError` ([GH 8888](https://github.com/pandas-dev/pandas/issues/8888))
- en: '[PRE51]'
  id: totrans-349
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE51]'
- en: '### Other enhancements'
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: '### 其他增强'
- en: 'Reindex now supports `method=''nearest''` for frames or series with a monotonic
    increasing or decreasing index ([GH 9258](https://github.com/pandas-dev/pandas/issues/9258)):'
  id: totrans-351
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '现在 `reindex` 支持 `method=''nearest''`，用于具有单调递增或递减索引的数据帧或系列 ([GH 9258](https://github.com/pandas-dev/pandas/issues/9258)):'
- en: '[PRE52]'
  id: totrans-352
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE52]'
- en: This method is also exposed by the lower level `Index.get_indexer` and `Index.get_loc`
    methods.
  id: totrans-353
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这个方法也被更低级别的 `Index.get_indexer` 和 `Index.get_loc` 方法所暴露。
- en: The `read_excel()` function’s [sheetname](../user_guide/io.html#io-excel-specifying-sheets)
    argument now accepts a list and `None`, to get multiple or all sheets respectively.
    If more than one sheet is specified, a dictionary is returned. ([GH 9450](https://github.com/pandas-dev/pandas/issues/9450))
  id: totrans-354
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`read_excel()` 函数的 [sheetname](../user_guide/io.html#io-excel-specifying-sheets)
    参数现在接受列表和 `None`，分别用于获取多个或所有工作表。如果指定了多个工作表，将返回一个字典。([GH 9450](https://github.com/pandas-dev/pandas/issues/9450))'
- en: '[PRE53]'
  id: totrans-355
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE53]'
- en: Allow Stata files to be read incrementally with an iterator; support for long
    strings in Stata files. See the docs [here](../user_guide/io.html#io-stata-reader)
    ([GH 9493](https://github.com/pandas-dev/pandas/issues/9493):).
  id: totrans-356
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许使用迭代器逐步读取 Stata 文件；支持 Stata 文件中的长字符串。请查看文档 [这里](../user_guide/io.html#io-stata-reader)
    ([GH 9493](https://github.com/pandas-dev/pandas/issues/9493):).
- en: Paths beginning with ~ will now be expanded to begin with the user’s home directory
    ([GH 9066](https://github.com/pandas-dev/pandas/issues/9066))
  id: totrans-357
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 以 ~ 开头的路径现在将扩展为以用户的主目录开头 ([GH 9066](https://github.com/pandas-dev/pandas/issues/9066))
- en: Added time interval selection in `get_data_yahoo` ([GH 9071](https://github.com/pandas-dev/pandas/issues/9071))
  id: totrans-358
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `get_data_yahoo` 中添加了时间间隔选择 ([GH 9071](https://github.com/pandas-dev/pandas/issues/9071))
- en: Added `Timestamp.to_datetime64()` to complement `Timedelta.to_timedelta64()`
    ([GH 9255](https://github.com/pandas-dev/pandas/issues/9255))
  id: totrans-359
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了 `Timestamp.to_datetime64()` 来补充 `Timedelta.to_timedelta64()` ([GH 9255](https://github.com/pandas-dev/pandas/issues/9255))
- en: '`tseries.frequencies.to_offset()` now accepts `Timedelta` as input ([GH 9064](https://github.com/pandas-dev/pandas/issues/9064))'
  id: totrans-360
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`tseries.frequencies.to_offset()` 现在接受 `Timedelta` 作为输入 ([GH 9064](https://github.com/pandas-dev/pandas/issues/9064))'
- en: Lag parameter was added to the autocorrelation method of `Series`, defaults
    to lag-1 autocorrelation ([GH 9192](https://github.com/pandas-dev/pandas/issues/9192))
  id: totrans-361
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Series` 的自相关方法现在添加了滞后参数，默认为滞后-1自相关 ([GH 9192](https://github.com/pandas-dev/pandas/issues/9192))'
- en: '`Timedelta` will now accept `nanoseconds` keyword in constructor ([GH 9273](https://github.com/pandas-dev/pandas/issues/9273))'
  id: totrans-362
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Timedelta` 现在将在构造函数中接受 `nanoseconds` 关键字 ([GH 9273](https://github.com/pandas-dev/pandas/issues/9273))'
- en: SQL code now safely escapes table and column names ([GH 8986](https://github.com/pandas-dev/pandas/issues/8986))
  id: totrans-363
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SQL 代码现在安全地转义表名和列名 ([GH 8986](https://github.com/pandas-dev/pandas/issues/8986))
- en: Added auto-complete for `Series.str.<tab>`, `Series.dt.<tab>` and `Series.cat.<tab>`
    ([GH 9322](https://github.com/pandas-dev/pandas/issues/9322))
  id: totrans-364
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为 `Series.str.<tab>`, `Series.dt.<tab>` 和 `Series.cat.<tab>` 添加了自动补全功能 ([GH
    9322](https://github.com/pandas-dev/pandas/issues/9322))
- en: '`Index.get_indexer` now supports `method=''pad''` and `method=''backfill''`
    even for any target array, not just monotonic targets. These methods also work
    for monotonic decreasing as well as monotonic increasing indexes ([GH 9258](https://github.com/pandas-dev/pandas/issues/9258)).'
  id: totrans-365
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Index.get_indexer` 现在支持 `method=''pad''` 和 `method=''backfill''`，即使对于任何目标数组，而不仅仅是单调目标。这些方法也适用于单调递减以及单调递增的索引
    ([GH 9258](https://github.com/pandas-dev/pandas/issues/9258)).'
- en: '`Index.asof` now works on all index types ([GH 9258](https://github.com/pandas-dev/pandas/issues/9258)).'
  id: totrans-366
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Index.asof` 现在适用于所有索引类型 ([GH 9258](https://github.com/pandas-dev/pandas/issues/9258)).'
- en: A `verbose` argument has been augmented in `io.read_excel()`, defaults to False.
    Set to True to print sheet names as they are parsed. ([GH 9450](https://github.com/pandas-dev/pandas/issues/9450))
  id: totrans-367
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `io.read_excel()` 中增加了一个 `verbose` 参数，默认为 False。设置为 True 以在解析时打印工作表名称。 ([GH
    9450](https://github.com/pandas-dev/pandas/issues/9450))
- en: Added `days_in_month` (compatibility alias `daysinmonth`) property to `Timestamp`,
    `DatetimeIndex`, `Period`, `PeriodIndex`, and `Series.dt` ([GH 9572](https://github.com/pandas-dev/pandas/issues/9572))
  id: totrans-368
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 向 `Timestamp`、`DatetimeIndex`、`Period`、`PeriodIndex` 和 `Series.dt` 添加了 `days_in_month`（兼容别名
    `daysinmonth`）属性 ([GH 9572](https://github.com/pandas-dev/pandas/issues/9572))
- en: Added `decimal` option in `to_csv` to provide formatting for non-‘.’ decimal
    separators ([GH 781](https://github.com/pandas-dev/pandas/issues/781))
  id: totrans-369
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `to_csv` 中添加了 `decimal` 选项，以提供非“.”小数分隔符的格式 ([GH 781](https://github.com/pandas-dev/pandas/issues/781))
- en: Added `normalize` option for `Timestamp` to normalized to midnight ([GH 8794](https://github.com/pandas-dev/pandas/issues/8794))
  id: totrans-370
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为 `Timestamp` 添加了 `normalize` 选项以标准化到午夜 ([GH 8794](https://github.com/pandas-dev/pandas/issues/8794))
- en: Added example for `DataFrame` import to R using HDF5 file and `rhdf5` library.
    See the documentation for more ([GH 9636](https://github.com/pandas-dev/pandas/issues/9636)).
  id: totrans-371
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了使用 HDF5 文件和 `rhdf5` 库将 `DataFrame` 导入到 R 的示例。有关更多信息，请参见文档 ([GH 9636](https://github.com/pandas-dev/pandas/issues/9636))。
- en: '## Backwards incompatible API changes'
  id: totrans-372
  prefs: []
  type: TYPE_NORMAL
  zh: '## 不兼容的后向 API 更改'
- en: '### Changes in timedelta'
  id: totrans-373
  prefs: []
  type: TYPE_NORMAL
  zh: '### timedelta 的更改'
- en: In v0.15.0 a new scalar type `Timedelta` was introduced, that is a sub-class
    of `datetime.timedelta`. Mentioned [here](v0.15.0.html#whatsnew-0150-timedeltaindex)
    was a notice of an API change w.r.t. the `.seconds` accessor. The intent was to
    provide a user-friendly set of accessors that give the ‘natural’ value for that
    unit, e.g. if you had a `Timedelta('1 day, 10:11:12')`, then `.seconds` would
    return 12\. However, this is at odds with the definition of `datetime.timedelta`,
    which defines `.seconds` as `10 * 3600 + 11 * 60 + 12 == 36672`.
  id: totrans-374
  prefs: []
  type: TYPE_NORMAL
  zh: 在 v0.15.0 中引入了一个新的标量类型 `Timedelta`，它是 `datetime.timedelta` 的子类。提到了一个关于 `.seconds`
    访问器的 API 更改的通知。意图是提供一组用户友好的访问器，以给出该单位的“自然”值，例如，如果你有一个 `Timedelta('1 day, 10:11:12')`，那么
    `.seconds` 将返回 12。然而，这与 `datetime.timedelta` 的定义相矛盾，它将 `.seconds` 定义为 `10 * 3600
    + 11 * 60 + 12 == 36672`。
- en: So in v0.16.0, we are restoring the API to match that of `datetime.timedelta`.
    Further, the component values are still available through the `.components` accessor.
    This affects the `.seconds` and `.microseconds` accessors, and removes the `.hours`,
    `.minutes`, `.milliseconds` accessors. These changes affect `TimedeltaIndex` and
    the Series `.dt` accessor as well. ([GH 9185](https://github.com/pandas-dev/pandas/issues/9185),
    [GH 9139](https://github.com/pandas-dev/pandas/issues/9139))
  id: totrans-375
  prefs: []
  type: TYPE_NORMAL
  zh: 因此在 v0.16.0 中，我们恢复了 API 以匹配 `datetime.timedelta` 的行为。此外，组件值仍然可以通过 `.components`
    访问器获取。这影响了 `.seconds` 和 `.microseconds` 访问器，并删除了 `.hours`、`.minutes`、`.milliseconds`
    访问器。这些更改也影响了 `TimedeltaIndex` 和 Series 的 `.dt` 访问器。 ([GH 9185](https://github.com/pandas-dev/pandas/issues/9185),
    [GH 9139](https://github.com/pandas-dev/pandas/issues/9139))
- en: Previous behavior
  id: totrans-376
  prefs: []
  type: TYPE_NORMAL
  zh: 之前的行为
- en: '[PRE54]'
  id: totrans-377
  prefs: []
  type: TYPE_PRE
  zh: '[PRE54]'
- en: New behavior
  id: totrans-378
  prefs: []
  type: TYPE_NORMAL
  zh: 新行为
- en: '[PRE55]'
  id: totrans-379
  prefs: []
  type: TYPE_PRE
  zh: '[PRE55]'
- en: Using `.components` allows the full component access
  id: totrans-380
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 `.components` 允许完全访问组件
- en: '[PRE56]  ### Indexing changes'
  id: totrans-381
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE56]  ### 索引变更'
- en: 'The behavior of a small sub-set of edge cases for using `.loc` have changed
    ([GH 8613](https://github.com/pandas-dev/pandas/issues/8613)). Furthermore we
    have improved the content of the error messages that are raised:'
  id: totrans-382
  prefs: []
  type: TYPE_NORMAL
  zh: '`.loc` 使用的一小部分边缘情况的行为已更改 ([GH 8613](https://github.com/pandas-dev/pandas/issues/8613))。此外，我们改进了引发的错误消息的内容：'
- en: Slicing with `.loc` where the start and/or stop bound is not found in the index
    is now allowed; this previously would raise a `KeyError`. This makes the behavior
    the same as `.ix` in this case. This change is only for slicing, not when indexing
    with a single label.
  id: totrans-383
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许使用 `.loc` 进行切片，其中起始和/或停止边界未在索引中找到；这之前会引发 `KeyError`。这使得在这种情况下的行为与 `.ix` 相同。此更改仅用于切片，而不是在单个标签上进行索引时。
- en: '[PRE57]'
  id: totrans-384
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE57]'
- en: Previous behavior
  id: totrans-385
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 之前的行为
- en: '[PRE58]'
  id: totrans-386
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE58]'
- en: New behavior
  id: totrans-387
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 新行为
- en: '[PRE59]'
  id: totrans-388
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE59]'
- en: 'Allow slicing with float-like values on an integer index for `.ix`. Previously
    this was only enabled for `.loc`:'
  id: totrans-389
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许在整数索引上使用浮点值进行 `.ix` 的切片。之前只有在 `.loc` 中启用此功能：
- en: Previous behavior
  id: totrans-390
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 之前的行为
- en: '[PRE60]'
  id: totrans-391
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE60]'
- en: New behavior
  id: totrans-392
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 新行为
- en: '[PRE61]'
  id: totrans-393
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE61]'
- en: Provide a useful exception for indexing with an invalid type for that index
    when using `.loc`. For example trying to use `.loc` on an index of type `DatetimeIndex`
    or `PeriodIndex` or `TimedeltaIndex`, with an integer (or a float).
  id: totrans-394
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当使用 `.loc` 时，为索引类型无效的类型提供有用的异常。例如，尝试在类型为 `DatetimeIndex` 或 `PeriodIndex` 或 `TimedeltaIndex`
    的索引上使用 `.loc`，并且使用整数（或浮点数）。
- en: Previous behavior
  id: totrans-395
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 之前的行为
- en: '[PRE62]'
  id: totrans-396
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE62]'
- en: New behavior
  id: totrans-397
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 新行为
- en: '[PRE63]  ### Categorical changes'
  id: totrans-398
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[PRE63]  ### 分类更改'
- en: In prior versions, `Categoricals` that had an unspecified ordering (meaning
    no `ordered` keyword was passed) were defaulted as `ordered` Categoricals. Going
    forward, the `ordered` keyword in the `Categorical` constructor will default to
    `False`. Ordering must now be explicit.
  id: totrans-399
  prefs: []
  type: TYPE_NORMAL
  zh: 在先前的版本中，未指定排序（即未传递`ordered`关键字）的`Categoricals`默认为有序`Categoricals`。从现在开始，`Categorical`构造函数中的`ordered`关键字将默认为`False`。现在必须明确指定排序。
- en: Furthermore, previously you *could* change the `ordered` attribute of a Categorical
    by just setting the attribute, e.g. `cat.ordered=True`; This is now deprecated
    and you should use `cat.as_ordered()` or `cat.as_unordered()`. These will by default
    return a **new** object and not modify the existing object. ([GH 9347](https://github.com/pandas-dev/pandas/issues/9347),
    [GH 9190](https://github.com/pandas-dev/pandas/issues/9190))
  id: totrans-400
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，以前您*可以*通过设置属性来更改分类的`ordered`属性，例如`cat.ordered=True`；现在已弃用，您应该使用`cat.as_ordered()`或`cat.as_unordered()`。这些默认会返回一个**新**对象，而不是修改现有对象（[GH
    9347](https://github.com/pandas-dev/pandas/issues/9347)，[GH 9190](https://github.com/pandas-dev/pandas/issues/9190)）。
- en: Previous behavior
  id: totrans-401
  prefs: []
  type: TYPE_NORMAL
  zh: 先前的行为
- en: '[PRE64]'
  id: totrans-402
  prefs: []
  type: TYPE_PRE
  zh: '[PRE64]'
- en: New behavior
  id: totrans-403
  prefs: []
  type: TYPE_NORMAL
  zh: 新行为
- en: '[PRE65]'
  id: totrans-404
  prefs: []
  type: TYPE_PRE
  zh: '[PRE65]'
- en: For ease of creation of series of categorical data, we have added the ability
    to pass keywords when calling `.astype()`. These are passed directly to the constructor.
  id: totrans-405
  prefs: []
  type: TYPE_NORMAL
  zh: 为了更方便地创建分类数据系列，我们添加了在调用`.astype()`时传递关键字的功能。这些关键字直接传递给构造函数。
- en: '[PRE66]  ### Other API changes'
  id: totrans-406
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE66]  ### 其他API更改'
- en: '`Index.duplicated` now returns `np.array(dtype=bool)` rather than `Index(dtype=object)`
    containing `bool` values. ([GH 8875](https://github.com/pandas-dev/pandas/issues/8875))'
  id: totrans-407
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Index.duplicated`现在返回`np.array(dtype=bool)`而不是包含`bool`值的`Index(dtype=object)`（[GH
    8875](https://github.com/pandas-dev/pandas/issues/8875)）。'
- en: '`DataFrame.to_json` now returns accurate type serialisation for each column
    for frames of mixed dtype ([GH 9037](https://github.com/pandas-dev/pandas/issues/9037))'
  id: totrans-408
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.to_json`现在为混合数据类型��数据框的每列返回准确的类型序列化（[GH 9037](https://github.com/pandas-dev/pandas/issues/9037)）。'
- en: 'Previously data was coerced to a common dtype before serialisation, which for
    example resulted in integers being serialised to floats:'
  id: totrans-409
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 以前在序列化之前会将数据强制转换为公共数据类型，例如导致整数被序列化为浮点数：
- en: '[PRE67]'
  id: totrans-410
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE67]'
- en: 'Now each column is serialised using its correct dtype:'
  id: totrans-411
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 现在每列都使用其正确的数据类型进行序列化：
- en: '[PRE68]'
  id: totrans-412
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE68]'
- en: '`DatetimeIndex`, `PeriodIndex` and `TimedeltaIndex.summary` now output the
    same format. ([GH 9116](https://github.com/pandas-dev/pandas/issues/9116))'
  id: totrans-413
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DatetimeIndex`、`PeriodIndex`和`TimedeltaIndex.summary`现在输出相同的格式（[GH 9116](https://github.com/pandas-dev/pandas/issues/9116)）。'
- en: '`TimedeltaIndex.freqstr` now output the same string format as `DatetimeIndex`.
    ([GH 9116](https://github.com/pandas-dev/pandas/issues/9116))'
  id: totrans-414
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`TimedeltaIndex.freqstr`现在输出与`DatetimeIndex`相同的字符串格式。'
- en: Bar and horizontal bar plots no longer add a dashed line along the info axis.
    The prior style can be achieved with matplotlib’s `axhline` or `axvline` methods
    ([GH 9088](https://github.com/pandas-dev/pandas/issues/9088)).
  id: totrans-415
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 条形图和水平条形图不再沿着信息轴添加虚线。以前的样式可以通过matplotlib的`axhline`或`axvline`方法实现（[GH 9088](https://github.com/pandas-dev/pandas/issues/9088)）。
- en: '`Series` accessors `.dt`, `.cat` and `.str` now raise `AttributeError` instead
    of `TypeError` if the series does not contain the appropriate type of data ([GH
    9617](https://github.com/pandas-dev/pandas/issues/9617)). This follows Python’s
    built-in exception hierarchy more closely and ensures that tests like `hasattr(s,
    ''cat'')` are consistent on both Python 2 and 3.'
  id: totrans-416
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Series` 访问器`.dt`、`.cat`和`.str`现在如果系列不包含适当类型的数据，会引发`AttributeError`而不是`TypeError`（[GH
    9617](https://github.com/pandas-dev/pandas/issues/9617)）。这更贴近Python内置的异常层次结构，并确保像`hasattr(s,
    ''cat'')`这样的测试在Python 2和3上保持一致。'
- en: '`Series` now supports bitwise operation for integral types ([GH 9016](https://github.com/pandas-dev/pandas/issues/9016)).
    Previously even if the input dtypes were integral, the output dtype was coerced
    to `bool`.'
  id: totrans-417
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Series` 现在支持整数类型的位运算（[GH 9016](https://github.com/pandas-dev/pandas/issues/9016)）。之前，即使输入的数据类型是整数，输出的数据类型也会被强制转换为`bool`。'
- en: Previous behavior
  id: totrans-418
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 先前的行为
- en: '[PRE69]'
  id: totrans-419
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE69]'
- en: New behavior. If the input dtypes are integral, the output dtype is also integral
    and the output values are the result of the bitwise operation.
  id: totrans-420
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 新行为。如果输入的数据类型是整数，则输出的数据类型也是整数，输出值是位运算的结果。
- en: '[PRE70]'
  id: totrans-421
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE70]'
- en: During division involving a `Series` or `DataFrame`, `0/0` and `0//0` now give
    `np.nan` instead of `np.inf`. ([GH 9144](https://github.com/pandas-dev/pandas/issues/9144),
    [GH 8445](https://github.com/pandas-dev/pandas/issues/8445))
  id: totrans-422
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在涉及`Series`或`DataFrame`的除法运算中，`0/0`和`0//0`现在会返回`np.nan`而不是`np.inf`（[GH 9144](https://github.com/pandas-dev/pandas/issues/9144)，[GH
    8445](https://github.com/pandas-dev/pandas/issues/8445)）。
- en: Previous behavior
  id: totrans-423
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 先前的行为
- en: '[PRE71]'
  id: totrans-424
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE71]'
- en: New behavior
  id: totrans-425
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 新行为
- en: '[PRE72]'
  id: totrans-426
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE72]'
- en: '`Series.values_counts` and `Series.describe` for categorical data will now
    put `NaN` entries at the end. ([GH 9443](https://github.com/pandas-dev/pandas/issues/9443))'
  id: totrans-427
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于分类数据，`Series.values_counts`和`Series.describe`现在将把`NaN`条目放在最后。([GH 9443](https://github.com/pandas-dev/pandas/issues/9443))
- en: '`Series.describe` for categorical data will now give counts and frequencies
    of 0, not `NaN`, for unused categories ([GH 9443](https://github.com/pandas-dev/pandas/issues/9443))'
  id: totrans-428
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于分类数据，`Series.describe`现在将给出未使用类别的计数和频率为0，而不是`NaN`。([GH 9443](https://github.com/pandas-dev/pandas/issues/9443))
- en: Due to a bug fix, looking up a partial string label with `DatetimeIndex.asof`
    now includes values that match the string, even if they are after the start of
    the partial string label ([GH 9258](https://github.com/pandas-dev/pandas/issues/9258)).
  id: totrans-429
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 由于错误修复，使用`DatetimeIndex.asof`查找部分字符串标签现在包括与字符串匹配的值，即使它们在部分字符串标签的开始之后。([GH 9258](https://github.com/pandas-dev/pandas/issues/9258))
- en: 'Old behavior:'
  id: totrans-430
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '旧行为:'
- en: '[PRE73]'
  id: totrans-431
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE73]'
- en: 'Fixed behavior:'
  id: totrans-432
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 修正的行为：
- en: '[PRE74]'
  id: totrans-433
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE74]'
- en: 'To reproduce the old behavior, simply add more precision to the label (e.g.,
    use `2000-02-01` instead of `2000-02`).  ### Deprecations'
  id: totrans-434
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '要复制旧行为，只需将标签更精确（例如，使用`2000-02-01`而不是`2000-02`)。  ### 弃用'
- en: The `rplot` trellis plotting interface is deprecated and will be removed in
    a future version. We refer to external packages like [seaborn](http://stanford.edu/~mwaskom/software/seaborn/)
    for similar but more refined functionality ([GH 3445](https://github.com/pandas-dev/pandas/issues/3445)).
    The documentation includes some examples how to convert your existing code from
    `rplot` to seaborn [here](https://pandas.pydata.org/pandas-docs/version/0.18.1/visualization.html#trellis-plotting-interface).
  id: totrans-435
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`rplot` trellis绘图界面已被弃用，并将在将来的版本中删除。我们建议使用外部包如[seaborn](http://stanford.edu/~mwaskom/software/seaborn/)来获得类似但更精细的功能。([GH
    3445](https://github.com/pandas-dev/pandas/issues/3445)) 文档中包含一些示例，说明如何将现有代码从`rplot`转换为seaborn
    [here](https://pandas.pydata.org/pandas-docs/version/0.18.1/visualization.html#trellis-plotting-interface)。'
- en: The `pandas.sandbox.qtpandas` interface is deprecated and will be removed in
    a future version. We refer users to the external package [pandas-qt](https://github.com/datalyze-solutions/pandas-qt).
    ([GH 9615](https://github.com/pandas-dev/pandas/issues/9615))
  id: totrans-436
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pandas.sandbox.qtpandas`接口已被弃用，并将在将来的版本中删除。我们建议用户使用外部包[pandas-qt](https://github.com/datalyze-solutions/pandas-qt)。([GH
    9615](https://github.com/pandas-dev/pandas/issues/9615))'
- en: The `pandas.rpy` interface is deprecated and will be removed in a future version.
    Similar functionality can be accessed through the [rpy2](http://rpy2.bitbucket.org/)
    project ([GH 9602](https://github.com/pandas-dev/pandas/issues/9602))
  id: totrans-437
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pandas.rpy`接口已被弃用，并将在将来的版本中删除。类似功能可以通过[rpy2](http://rpy2.bitbucket.org/)项目访问。([GH
    9602](https://github.com/pandas-dev/pandas/issues/9602))'
- en: Adding `DatetimeIndex/PeriodIndex` to another `DatetimeIndex/PeriodIndex` is
    being deprecated as a set-operation. This will be changed to a `TypeError` in
    a future version. `.union()` should be used for the union set operation. ([GH
    9094](https://github.com/pandas-dev/pandas/issues/9094))
  id: totrans-438
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将`DatetimeIndex/PeriodIndex`添加到另一个`DatetimeIndex/PeriodIndex`正在被弃用为一个集合操作。这将在将来的版本中更改为`TypeError`。应该使用`.union()`进行并集操作。([GH
    9094](https://github.com/pandas-dev/pandas/issues/9094))
- en: 'Subtracting `DatetimeIndex/PeriodIndex` from another `DatetimeIndex/PeriodIndex`
    is being deprecated as a set-operation. This will be changed to an actual numeric
    subtraction yielding a `TimeDeltaIndex` in a future version. `.difference()` should
    be used for the differencing set operation. ([GH 9094](https://github.com/pandas-dev/pandas/issues/9094))  ###
    Removal of prior version deprecations/changes'
  id: totrans-439
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '从另一个`DatetimeIndex/PeriodIndex`减去`DatetimeIndex/PeriodIndex`正在被弃用为一个集合操作。这将在将来的版本中更改为实际的数值减法，产生一个`TimeDeltaIndex`。应该使用`.difference()`进行差集操作。([GH
    9094](https://github.com/pandas-dev/pandas/issues/9094))  ### 删除之前版本的弃用/更改'
- en: '`DataFrame.pivot_table` and `crosstab`’s `rows` and `cols` keyword arguments
    were removed in favor of `index` and `columns` ([GH 6581](https://github.com/pandas-dev/pandas/issues/6581))'
  id: totrans-440
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.pivot_table`和`crosstab`的`rows`和`cols`关键字参数已被删除，改为使用`index`和`columns`。([GH
    6581](https://github.com/pandas-dev/pandas/issues/6581))'
- en: '`DataFrame.to_excel` and `DataFrame.to_csv` `cols` keyword argument was removed
    in favor of `columns` ([GH 6581](https://github.com/pandas-dev/pandas/issues/6581))'
  id: totrans-441
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.to_excel`和`DataFrame.to_csv`的`cols`关键字参数已被删除，改为使用`columns`。([GH
    6581](https://github.com/pandas-dev/pandas/issues/6581))'
- en: Removed `convert_dummies` in favor of `get_dummies` ([GH 6581](https://github.com/pandas-dev/pandas/issues/6581))
  id: totrans-442
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 删除`convert_dummies`，改用`get_dummies`。([GH 6581](https://github.com/pandas-dev/pandas/issues/6581))
- en: 'Removed `value_range` in favor of `describe` ([GH 6581](https://github.com/pandas-dev/pandas/issues/6581))  ###
    Changes in timedelta'
  id: totrans-443
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '移除了`value_range`，改用`describe`（[GH 6581](https://github.com/pandas-dev/pandas/issues/6581)）
    ### 时间增量的变化'
- en: In v0.15.0 a new scalar type `Timedelta` was introduced, that is a sub-class
    of `datetime.timedelta`. Mentioned [here](v0.15.0.html#whatsnew-0150-timedeltaindex)
    was a notice of an API change w.r.t. the `.seconds` accessor. The intent was to
    provide a user-friendly set of accessors that give the ‘natural’ value for that
    unit, e.g. if you had a `Timedelta('1 day, 10:11:12')`, then `.seconds` would
    return 12\. However, this is at odds with the definition of `datetime.timedelta`,
    which defines `.seconds` as `10 * 3600 + 11 * 60 + 12 == 36672`.
  id: totrans-444
  prefs: []
  type: TYPE_NORMAL
  zh: 在 v0.15.0 中引入了一个新的标量类型`Timedelta`，它是`datetime.timedelta`的子类。提到的[这里](v0.15.0.html#whatsnew-0150-timedeltaindex)是关于`.seconds`访问器的API更改的通知。其目的是提供一组用户友好的访问器，以给出该单位的“自然”值，例如如果你有一个`Timedelta('1
    day, 10:11:12')`，那么`.seconds`将返回12。然而，这与`datetime.timedelta`的定义相矛盾，它将`.seconds`定义为`10
    * 3600 + 11 * 60 + 12 == 36672`。
- en: So in v0.16.0, we are restoring the API to match that of `datetime.timedelta`.
    Further, the component values are still available through the `.components` accessor.
    This affects the `.seconds` and `.microseconds` accessors, and removes the `.hours`,
    `.minutes`, `.milliseconds` accessors. These changes affect `TimedeltaIndex` and
    the Series `.dt` accessor as well. ([GH 9185](https://github.com/pandas-dev/pandas/issues/9185),
    [GH 9139](https://github.com/pandas-dev/pandas/issues/9139))
  id: totrans-445
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，在 v0.16.0 中，我们恢复了API以匹配`datetime.timedelta`。此外，组件值仍可通过`.components`访问器获得。这影响了`.seconds`和`.microseconds`访问器，并删除了`.hours`、`.minutes`、`.milliseconds`访问器。这些更改也影响了`TimedeltaIndex`和
    Series `.dt` 访问器。([GH 9185](https://github.com/pandas-dev/pandas/issues/9185),
    [GH 9139](https://github.com/pandas-dev/pandas/issues/9139))
- en: Previous behavior
  id: totrans-446
  prefs: []
  type: TYPE_NORMAL
  zh: 先前的行为
- en: '[PRE75]'
  id: totrans-447
  prefs: []
  type: TYPE_PRE
  zh: '[PRE75]'
- en: New behavior
  id: totrans-448
  prefs: []
  type: TYPE_NORMAL
  zh: 新行为
- en: '[PRE76]'
  id: totrans-449
  prefs: []
  type: TYPE_PRE
  zh: '[PRE76]'
- en: Using `.components` allows the full component access
  id: totrans-450
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`.components`允许完全组件访问
- en: '[PRE77]'
  id: totrans-451
  prefs: []
  type: TYPE_PRE
  zh: '[PRE77]'
- en: '### Indexing changes'
  id: totrans-452
  prefs: []
  type: TYPE_NORMAL
  zh: '### 索引变化'
- en: 'The behavior of a small sub-set of edge cases for using `.loc` have changed
    ([GH 8613](https://github.com/pandas-dev/pandas/issues/8613)). Furthermore we
    have improved the content of the error messages that are raised:'
  id: totrans-453
  prefs: []
  type: TYPE_NORMAL
  zh: 一小部分使用`.loc`的边缘情况的行为已更改([GH 8613](https://github.com/pandas-dev/pandas/issues/8613))。此外，我们已改进了引发的错误消息的内容：
- en: Slicing with `.loc` where the start and/or stop bound is not found in the index
    is now allowed; this previously would raise a `KeyError`. This makes the behavior
    the same as `.ix` in this case. This change is only for slicing, not when indexing
    with a single label.
  id: totrans-454
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许在索引中找不到开始和/或停止边界时使用`.loc`进行切片；以前会引发`KeyError`。这使得在这种情况下的行为与`.ix`相同。此更改仅适用于切片，而不适用于使用单个标签进行索引。
- en: '[PRE78]'
  id: totrans-455
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE78]'
- en: Previous behavior
  id: totrans-456
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 先前的行为
- en: '[PRE79]'
  id: totrans-457
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE79]'
- en: New behavior
  id: totrans-458
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 新行为
- en: '[PRE80]'
  id: totrans-459
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE80]'
- en: 'Allow slicing with float-like values on an integer index for `.ix`. Previously
    this was only enabled for `.loc`:'
  id: totrans-460
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许在整数索引上使用类似浮点的值对`.ix`进行切片。以前只能对`.loc`启用此功能：
- en: Previous behavior
  id: totrans-461
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 先前的行为
- en: '[PRE81]'
  id: totrans-462
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE81]'
- en: New behavior
  id: totrans-463
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 新行为
- en: '[PRE82]'
  id: totrans-464
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE82]'
- en: Provide a useful exception for indexing with an invalid type for that index
    when using `.loc`. For example trying to use `.loc` on an index of type `DatetimeIndex`
    or `PeriodIndex` or `TimedeltaIndex`, with an integer (or a float).
  id: totrans-465
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '在使用`.loc`时，如果对具有无效类型的索引进行索引，将提供有用的异常。例如，在类型为`DatetimeIndex`或`PeriodIndex`或`TimedeltaIndex`的索引上使用整数（或浮点数）进行`.loc`。 '
- en: Previous behavior
  id: totrans-466
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 先前的行为
- en: '[PRE83]'
  id: totrans-467
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE83]'
- en: New behavior
  id: totrans-468
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 新行为
- en: '[PRE84]'
  id: totrans-469
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE84]'
- en: '### Categorical changes'
  id: totrans-470
  prefs: []
  type: TYPE_NORMAL
  zh: '### 分类变化'
- en: In prior versions, `Categoricals` that had an unspecified ordering (meaning
    no `ordered` keyword was passed) were defaulted as `ordered` Categoricals. Going
    forward, the `ordered` keyword in the `Categorical` constructor will default to
    `False`. Ordering must now be explicit.
  id: totrans-471
  prefs: []
  type: TYPE_NORMAL
  zh: 在以前的版本中，未指定排序的`Categoricals`（即未传递`ordered`关键字）默认为有序的`Categoricals`。从现在开始，`Categorical`构造函数中的`ordered`关键字将默认为`False`。排序现在必须是显式的。
- en: Furthermore, previously you *could* change the `ordered` attribute of a Categorical
    by just setting the attribute, e.g. `cat.ordered=True`; This is now deprecated
    and you should use `cat.as_ordered()` or `cat.as_unordered()`. These will by default
    return a **new** object and not modify the existing object. ([GH 9347](https://github.com/pandas-dev/pandas/issues/9347),
    [GH 9190](https://github.com/pandas-dev/pandas/issues/9190))
  id: totrans-472
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，以前你*可以*通过设置属性来更改分类的`ordered`属性，例如`cat.ordered=True`；现在已经弃用，你应该使用`cat.as_ordered()`或`cat.as_unordered()`。这些默认会返回一个**新的**对象，而不是修改现有的对象。([GH
    9347](https://github.com/pandas-dev/pandas/issues/9347), [GH 9190](https://github.com/pandas-dev/pandas/issues/9190))
- en: Previous behavior
  id: totrans-473
  prefs: []
  type: TYPE_NORMAL
  zh: 先前的行为
- en: '[PRE85]'
  id: totrans-474
  prefs: []
  type: TYPE_PRE
  zh: '[PRE85]'
- en: New behavior
  id: totrans-475
  prefs: []
  type: TYPE_NORMAL
  zh: 新行为
- en: '[PRE86]'
  id: totrans-476
  prefs: []
  type: TYPE_PRE
  zh: '[PRE86]'
- en: For ease of creation of series of categorical data, we have added the ability
    to pass keywords when calling `.astype()`. These are passed directly to the constructor.
  id: totrans-477
  prefs: []
  type: TYPE_NORMAL
  zh: 为了更轻松地创建分类数据系列，我们添加了在调用 `.astype()` 时传递关键字的功能。这些关键字直接传递给构造函数。
- en: '[PRE87]'
  id: totrans-478
  prefs: []
  type: TYPE_PRE
  zh: '[PRE87]'
- en: '### Other API changes'
  id: totrans-479
  prefs: []
  type: TYPE_NORMAL
  zh: '### 其他 API 变更'
- en: '`Index.duplicated` now returns `np.array(dtype=bool)` rather than `Index(dtype=object)`
    containing `bool` values. ([GH 8875](https://github.com/pandas-dev/pandas/issues/8875))'
  id: totrans-480
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Index.duplicated` 现在返回 `np.array(dtype=bool)` 而不是包含 `bool` 值的 `Index(dtype=object)`。
    ([GH 8875](https://github.com/pandas-dev/pandas/issues/8875))'
- en: '`DataFrame.to_json` now returns accurate type serialisation for each column
    for frames of mixed dtype ([GH 9037](https://github.com/pandas-dev/pandas/issues/9037))'
  id: totrans-481
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.to_json` 现在为混合 dtype 的帧的每列返回准确的类型序列化 ([GH 9037](https://github.com/pandas-dev/pandas/issues/9037))。'
- en: 'Previously data was coerced to a common dtype before serialisation, which for
    example resulted in integers being serialised to floats:'
  id: totrans-482
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 先前的数据在序列化之前被强制转换为公共 dtype，例如整数被序列化为浮点数：
- en: '[PRE88]'
  id: totrans-483
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE88]'
- en: 'Now each column is serialised using its correct dtype:'
  id: totrans-484
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 现在每列都使用其正确的 dtype 进行序列化：
- en: '[PRE89]'
  id: totrans-485
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE89]'
- en: '`DatetimeIndex`, `PeriodIndex` and `TimedeltaIndex.summary` now output the
    same format. ([GH 9116](https://github.com/pandas-dev/pandas/issues/9116))'
  id: totrans-486
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DatetimeIndex`、`PeriodIndex` 和 `TimedeltaIndex.summary` 现在输出相同的格式。 ([GH 9116](https://github.com/pandas-dev/pandas/issues/9116))'
- en: '`TimedeltaIndex.freqstr` now output the same string format as `DatetimeIndex`.
    ([GH 9116](https://github.com/pandas-dev/pandas/issues/9116))'
  id: totrans-487
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`TimedeltaIndex.freqstr` 现在输出与 `DatetimeIndex` 相同的字符串格式。 ([GH 9116](https://github.com/pandas-dev/pandas/issues/9116))'
- en: Bar and horizontal bar plots no longer add a dashed line along the info axis.
    The prior style can be achieved with matplotlib’s `axhline` or `axvline` methods
    ([GH 9088](https://github.com/pandas-dev/pandas/issues/9088)).
  id: totrans-488
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 条形图和水平条形图不再沿信息轴添加虚线。可以使用 matplotlib 的 `axhline` 或 `axvline` 方法实现先前的样式 ([GH 9088](https://github.com/pandas-dev/pandas/issues/9088))。
- en: '`Series` accessors `.dt`, `.cat` and `.str` now raise `AttributeError` instead
    of `TypeError` if the series does not contain the appropriate type of data ([GH
    9617](https://github.com/pandas-dev/pandas/issues/9617)). This follows Python’s
    built-in exception hierarchy more closely and ensures that tests like `hasattr(s,
    ''cat'')` are consistent on both Python 2 and 3.'
  id: totrans-489
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果系列不包含适当类型的数据，`Series` 访问器 `.dt`、`.cat` 和 `.str` 现在会引发 `AttributeError` 而不是
    `TypeError` ([GH 9617](https://github.com/pandas-dev/pandas/issues/9617))。这更接近于
    Python 的内置异常层次结构，并确保诸如 `hasattr(s, 'cat')` 的测试在 Python 2 和 3 上保持一致。
- en: '`Series` now supports bitwise operation for integral types ([GH 9016](https://github.com/pandas-dev/pandas/issues/9016)).
    Previously even if the input dtypes were integral, the output dtype was coerced
    to `bool`.'
  id: totrans-490
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Series` 现在支持整数类型的位操作 ([GH 9016](https://github.com/pandas-dev/pandas/issues/9016))。即使输入的
    dtype 是整数，先前的行为也会强制输出的 dtype 转换为 `bool`。'
- en: Previous behavior
  id: totrans-491
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 先前的行为
- en: '[PRE90]'
  id: totrans-492
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE90]'
- en: New behavior. If the input dtypes are integral, the output dtype is also integral
    and the output values are the result of the bitwise operation.
  id: totrans-493
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 新行为。如果输入的 dtype 是整数，则输出的 dtype 也是整数，输出值是位操作的结果。
- en: '[PRE91]'
  id: totrans-494
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE91]'
- en: During division involving a `Series` or `DataFrame`, `0/0` and `0//0` now give
    `np.nan` instead of `np.inf`. ([GH 9144](https://github.com/pandas-dev/pandas/issues/9144),
    [GH 8445](https://github.com/pandas-dev/pandas/issues/8445))
  id: totrans-495
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在涉及 `Series` 或 `DataFrame` 的除法中，`0/0` 和 `0//0` 现在会返回 `np.nan` 而不是 `np.inf`。
    ([GH 9144](https://github.com/pandas-dev/pandas/issues/9144), [GH 8445](https://github.com/pandas-dev/pandas/issues/8445))。
- en: Previous behavior
  id: totrans-496
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 先前的行为
- en: '[PRE92]'
  id: totrans-497
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE92]'
- en: New behavior
  id: totrans-498
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 新行为
- en: '[PRE93]'
  id: totrans-499
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE93]'
- en: '`Series.values_counts` and `Series.describe` for categorical data will now
    put `NaN` entries at the end. ([GH 9443](https://github.com/pandas-dev/pandas/issues/9443))'
  id: totrans-500
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于分类数据，`Series.values_counts` 和 `Series.describe` 现在将 `NaN` 条目放在末尾。 ([GH 9443](https://github.com/pandas-dev/pandas/issues/9443))
- en: '`Series.describe` for categorical data will now give counts and frequencies
    of 0, not `NaN`, for unused categories ([GH 9443](https://github.com/pandas-dev/pandas/issues/9443))'
  id: totrans-501
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于分类数据，`Series.describe` 现在将为未使用的类别提供计数和频率为 0，而不是 `NaN` ([GH 9443](https://github.com/pandas-dev/pandas/issues/9443))。
- en: Due to a bug fix, looking up a partial string label with `DatetimeIndex.asof`
    now includes values that match the string, even if they are after the start of
    the partial string label ([GH 9258](https://github.com/pandas-dev/pandas/issues/9258)).
  id: totrans-502
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 由于 bug 修复，使用 `DatetimeIndex.asof` 查找部分字符串标签现在包括与字符串匹配的值，即使它们在部分字符串标签的起始位置之后
    ([GH 9258](https://github.com/pandas-dev/pandas/issues/9258))。
- en: 'Old behavior:'
  id: totrans-503
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 旧行为：
- en: '[PRE94]'
  id: totrans-504
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE94]'
- en: 'Fixed behavior:'
  id: totrans-505
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 修复行为：
- en: '[PRE95]'
  id: totrans-506
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE95]'
- en: To reproduce the old behavior, simply add more precision to the label (e.g.,
    use `2000-02-01` instead of `2000-02`).
  id: totrans-507
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 要重现旧行为，只需在标签上增加更多精度（例如，使用 `2000-02-01` 而不是 `2000-02`）。
- en: '### Deprecations'
  id: totrans-508
  prefs: []
  type: TYPE_NORMAL
  zh: '### 废弃内容'
- en: The `rplot` trellis plotting interface is deprecated and will be removed in
    a future version. We refer to external packages like [seaborn](http://stanford.edu/~mwaskom/software/seaborn/)
    for similar but more refined functionality ([GH 3445](https://github.com/pandas-dev/pandas/issues/3445)).
    The documentation includes some examples how to convert your existing code from
    `rplot` to seaborn [here](https://pandas.pydata.org/pandas-docs/version/0.18.1/visualization.html#trellis-plotting-interface).
  id: totrans-509
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`rplot` trellis 绘图接口已被弃用，并将在未来版本中移除。我们建议使用外部包如 [seaborn](http://stanford.edu/~mwaskom/software/seaborn/)
    来获得类似但更精细的功能 ([GH 3445](https://github.com/pandas-dev/pandas/issues/3445))。文档中包含一些示例，说明如何将现有代码从
    `rplot` 转换为 seaborn [这里](https://pandas.pydata.org/pandas-docs/version/0.18.1/visualization.html#trellis-plotting-interface)。'
- en: The `pandas.sandbox.qtpandas` interface is deprecated and will be removed in
    a future version. We refer users to the external package [pandas-qt](https://github.com/datalyze-solutions/pandas-qt).
    ([GH 9615](https://github.com/pandas-dev/pandas/issues/9615))
  id: totrans-510
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pandas.sandbox.qtpandas` 接口已被弃用，并将在未来版本中移除。我们建议用户使用外部包 [pandas-qt](https://github.com/datalyze-solutions/pandas-qt)。
    ([GH 9615](https://github.com/pandas-dev/pandas/issues/9615))'
- en: The `pandas.rpy` interface is deprecated and will be removed in a future version.
    Similar functionality can be accessed through the [rpy2](http://rpy2.bitbucket.org/)
    project ([GH 9602](https://github.com/pandas-dev/pandas/issues/9602))
  id: totrans-511
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pandas.rpy` 接口已被弃用，并将在未来版本中移除。类似功能可以通过 [rpy2](http://rpy2.bitbucket.org/)
    项目访问（[GH 9602](https://github.com/pandas-dev/pandas/issues/9602)）'
- en: Adding `DatetimeIndex/PeriodIndex` to another `DatetimeIndex/PeriodIndex` is
    being deprecated as a set-operation. This will be changed to a `TypeError` in
    a future version. `.union()` should be used for the union set operation. ([GH
    9094](https://github.com/pandas-dev/pandas/issues/9094))
  id: totrans-512
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将 `DatetimeIndex/PeriodIndex` 添加到另一个 `DatetimeIndex/PeriodIndex` 中正在被弃用作为一个集合操作。这将在未来版本中更改为
    `TypeError`。应该使用 `.union()` 进行并集操作。 ([GH 9094](https://github.com/pandas-dev/pandas/issues/9094))
- en: Subtracting `DatetimeIndex/PeriodIndex` from another `DatetimeIndex/PeriodIndex`
    is being deprecated as a set-operation. This will be changed to an actual numeric
    subtraction yielding a `TimeDeltaIndex` in a future version. `.difference()` should
    be used for the differencing set operation. ([GH 9094](https://github.com/pandas-dev/pandas/issues/9094))
  id: totrans-513
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从另一个 `DatetimeIndex/PeriodIndex` 中减去 `DatetimeIndex/PeriodIndex` 正在被弃用作为一个集合操作。这将在未来版本中更改为实际的数值减法，产生一个
    `TimeDeltaIndex`。应该使用 `.difference()` 进行差集操作。 ([GH 9094](https://github.com/pandas-dev/pandas/issues/9094))
- en: '### Removal of prior version deprecations/changes'
  id: totrans-514
  prefs: []
  type: TYPE_NORMAL
  zh: '### 移除之前版本的弃用/更改'
- en: '`DataFrame.pivot_table` and `crosstab`’s `rows` and `cols` keyword arguments
    were removed in favor of `index` and `columns` ([GH 6581](https://github.com/pandas-dev/pandas/issues/6581))'
  id: totrans-515
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.pivot_table` 和 `crosstab` 的 `rows` 和 `cols` 关键字参数已被移除，改为使用 `index`
    和 `columns` ([GH 6581](https://github.com/pandas-dev/pandas/issues/6581))'
- en: '`DataFrame.to_excel` and `DataFrame.to_csv` `cols` keyword argument was removed
    in favor of `columns` ([GH 6581](https://github.com/pandas-dev/pandas/issues/6581))'
  id: totrans-516
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.to_excel` 和 `DataFrame.to_csv` 的 `cols` 关键字参数已被移除，改为使用 `columns`
    ([GH 6581](https://github.com/pandas-dev/pandas/issues/6581))'
- en: Removed `convert_dummies` in favor of `get_dummies` ([GH 6581](https://github.com/pandas-dev/pandas/issues/6581))
  id: totrans-517
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除 `convert_dummies`，改为使用 `get_dummies` ([GH 6581](https://github.com/pandas-dev/pandas/issues/6581))
- en: Removed `value_range` in favor of `describe` ([GH 6581](https://github.com/pandas-dev/pandas/issues/6581))
  id: totrans-518
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除 `value_range`，改为使用 `describe` ([GH 6581](https://github.com/pandas-dev/pandas/issues/6581))
- en: '## Performance improvements'
  id: totrans-519
  prefs: []
  type: TYPE_NORMAL
  zh: '## 性能改进'
- en: Fixed a performance regression for `.loc` indexing with an array or list-like
    ([GH 9126](https://github.com/pandas-dev/pandas/issues/9126):).
  id: totrans-520
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了使用数组或类似列表进行 `.loc` 索引的性能回归 ([GH 9126](https://github.com/pandas-dev/pandas/issues/9126):)。
- en: '`DataFrame.to_json` 30x performance improvement for mixed dtype frames. ([GH
    9037](https://github.com/pandas-dev/pandas/issues/9037))'
  id: totrans-521
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.to_json` 混合数据类型框架的性能提升30倍。 ([GH 9037](https://github.com/pandas-dev/pandas/issues/9037))'
- en: Performance improvements in `MultiIndex.duplicated` by working with labels instead
    of values ([GH 9125](https://github.com/pandas-dev/pandas/issues/9125))
  id: totrans-522
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过使用标签而不是值来处理 `MultiIndex.duplicated`，提高了性能 ([GH 9125](https://github.com/pandas-dev/pandas/issues/9125))
- en: Improved the speed of `nunique` by calling `unique` instead of `value_counts`
    ([GH 9129](https://github.com/pandas-dev/pandas/issues/9129), [GH 7771](https://github.com/pandas-dev/pandas/issues/7771))
  id: totrans-523
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过调用 `unique` 而不是 `value_counts` 来提高 `nunique` 的速度 ([GH 9129](https://github.com/pandas-dev/pandas/issues/9129),
    [GH 7771](https://github.com/pandas-dev/pandas/issues/7771))
- en: Performance improvement of up to 10x in `DataFrame.count` and `DataFrame.dropna`
    by taking advantage of homogeneous/heterogeneous dtypes appropriately ([GH 9136](https://github.com/pandas-dev/pandas/issues/9136))
  id: totrans-524
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过适当利用同质/异质数据类型，`DataFrame.count` 和 `DataFrame.dropna` 的性能提升高达10倍（[GH 9136](https://github.com/pandas-dev/pandas/issues/9136)）
- en: Performance improvement of up to 20x in `DataFrame.count` when using a `MultiIndex`
    and the `level` keyword argument ([GH 9163](https://github.com/pandas-dev/pandas/issues/9163))
  id: totrans-525
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过使用`MultiIndex`和`level`关键字参数，在`DataFrame.count`中的性能提升高达20倍（[GH 9163](https://github.com/pandas-dev/pandas/issues/9163)）
- en: Performance and memory usage improvements in `merge` when key space exceeds
    `int64` bounds ([GH 9151](https://github.com/pandas-dev/pandas/issues/9151))
  id: totrans-526
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`merge`中当键空间超过`int64`边界时提高了性能和内存使用效率（[GH 9151](https://github.com/pandas-dev/pandas/issues/9151)）
- en: Performance improvements in multi-key `groupby` ([GH 9429](https://github.com/pandas-dev/pandas/issues/9429))
  id: totrans-527
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在多键`groupby`中提高了性能（[GH 9429](https://github.com/pandas-dev/pandas/issues/9429)）
- en: Performance improvements in `MultiIndex.sortlevel` ([GH 9445](https://github.com/pandas-dev/pandas/issues/9445))
  id: totrans-528
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`MultiIndex.sortlevel`中提高了性能（[GH 9445](https://github.com/pandas-dev/pandas/issues/9445)）
- en: Performance and memory usage improvements in `DataFrame.duplicated` ([GH 9398](https://github.com/pandas-dev/pandas/issues/9398))
  id: totrans-529
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`DataFrame.duplicated`中提高了性能和内存使用效率（[GH 9398](https://github.com/pandas-dev/pandas/issues/9398)）
- en: Cythonized `Period` ([GH 9440](https://github.com/pandas-dev/pandas/issues/9440))
  id: totrans-530
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 优化了`Period`的Cython化（[GH 9440](https://github.com/pandas-dev/pandas/issues/9440)）
- en: Decreased memory usage on `to_hdf` ([GH 9648](https://github.com/pandas-dev/pandas/issues/9648))
  id: totrans-531
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`to_hdf`上减少了内存使用（[GH 9648](https://github.com/pandas-dev/pandas/issues/9648)）
- en: '## Bug fixes'
  id: totrans-532
  prefs: []
  type: TYPE_NORMAL
  zh: '## Bug 修复'
- en: Changed `.to_html` to remove leading/trailing spaces in table body ([GH 4987](https://github.com/pandas-dev/pandas/issues/4987))
  id: totrans-533
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更改了`.to_html`以删除表体中的前导/尾随空格（[GH 4987](https://github.com/pandas-dev/pandas/issues/4987)）
- en: Fixed issue using `read_csv` on s3 with Python 3 ([GH 9452](https://github.com/pandas-dev/pandas/issues/9452))
  id: totrans-534
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了在Python 3上使用`read_csv`读取s3时出现的问题（[GH 9452](https://github.com/pandas-dev/pandas/issues/9452)）
- en: Fixed compatibility issue in `DatetimeIndex` affecting architectures where `numpy.int_`
    defaults to `numpy.int32` ([GH 8943](https://github.com/pandas-dev/pandas/issues/8943))
  id: totrans-535
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了影响`numpy.int_`默认为`numpy.int32`的架构中`DatetimeIndex`的兼容性问题（[GH 8943](https://github.com/pandas-dev/pandas/issues/8943)）
- en: Bug in Panel indexing with an object-like ([GH 9140](https://github.com/pandas-dev/pandas/issues/9140))
  id: totrans-536
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用类似对象的Panel索引的错误（[GH 9140](https://github.com/pandas-dev/pandas/issues/9140)）
- en: Bug in the returned `Series.dt.components` index was reset to the default index
    ([GH 9247](https://github.com/pandas-dev/pandas/issues/9247))
  id: totrans-537
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 返回的`Series.dt.components`索引重置为默认索引的错误（[GH 9247](https://github.com/pandas-dev/pandas/issues/9247)）
- en: Bug in `Categorical.__getitem__/__setitem__` with listlike input getting incorrect
    results from indexer coercion ([GH 9469](https://github.com/pandas-dev/pandas/issues/9469))
  id: totrans-538
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了`Categorical.__getitem__/__setitem__`中使用类似列表的输入导致索引器强制转换得到不正确结果的错误（[GH 9469](https://github.com/pandas-dev/pandas/issues/9469)）
- en: Bug in partial setting with a DatetimeIndex ([GH 9478](https://github.com/pandas-dev/pandas/issues/9478))
  id: totrans-539
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 部分设置中使用DatetimeIndex的错误（[GH 9478](https://github.com/pandas-dev/pandas/issues/9478)）
- en: Bug in groupby for integer and datetime64 columns when applying an aggregator
    that caused the value to be changed when the number was sufficiently large ([GH
    9311](https://github.com/pandas-dev/pandas/issues/9311), [GH 6620](https://github.com/pandas-dev/pandas/issues/6620))
  id: totrans-540
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在应用聚合器时，整数和datetime64列的groupby出现错误，当数字足够大时导致值发生变化（[GH 9311](https://github.com/pandas-dev/pandas/issues/9311),
    [GH 6620](https://github.com/pandas-dev/pandas/issues/6620)）
- en: Fixed bug in `to_sql` when mapping a `Timestamp` object column (datetime column
    with timezone info) to the appropriate sqlalchemy type ([GH 9085](https://github.com/pandas-dev/pandas/issues/9085)).
  id: totrans-541
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了`to_sql`中将`Timestamp`对象列（带有时区信息的日期时间列）映射到适当的SQLAlchemy类型的错误（[GH 9085](https://github.com/pandas-dev/pandas/issues/9085)）
- en: Fixed bug in `to_sql` `dtype` argument not accepting an instantiated SQLAlchemy
    type ([GH 9083](https://github.com/pandas-dev/pandas/issues/9083)).
  id: totrans-542
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了`to_sql`中`dtype`参数不接受实例化的SQLAlchemy类型的错误（[GH 9083](https://github.com/pandas-dev/pandas/issues/9083)）
- en: Bug in `.loc` partial setting with a `np.datetime64` ([GH 9516](https://github.com/pandas-dev/pandas/issues/9516))
  id: totrans-543
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用`np.datetime64`进行`.loc`部分设置的错误（[GH 9516](https://github.com/pandas-dev/pandas/issues/9516)）
- en: Incorrect dtypes inferred on datetimelike looking `Series` & on `.xs` slices
    ([GH 9477](https://github.com/pandas-dev/pandas/issues/9477))
  id: totrans-544
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在看起来类似日期时间的`Series`和`.xs`切片上推断的不正确的数据类型（[GH 9477](https://github.com/pandas-dev/pandas/issues/9477)）
- en: Items in `Categorical.unique()` (and `s.unique()` if `s` is of dtype `category`)
    now appear in the order in which they are originally found, not in sorted order
    ([GH 9331](https://github.com/pandas-dev/pandas/issues/9331)). This is now consistent
    with the behavior for other dtypes in pandas.
  id: totrans-545
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Categorical.unique()` 中的项目（如果`s`的类型为`category`，则为`s.unique()`）现在按照最初发现它们的顺序显示，而不是按排序顺序显示（[GH
    9331](https://github.com/pandas-dev/pandas/issues/9331)）。这现在与 pandas 中其他类型的行为一致。'
- en: Fixed bug on big endian platforms which produced incorrect results in `StataReader`
    ([GH 8688](https://github.com/pandas-dev/pandas/issues/8688)).
  id: totrans-546
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了在大端平台上产生`StataReader` 中不正确结果的错误（[GH 8688](https://github.com/pandas-dev/pandas/issues/8688)）
- en: Bug in `MultiIndex.has_duplicates` when having many levels causes an indexer
    overflow ([GH 9075](https://github.com/pandas-dev/pandas/issues/9075), [GH 5873](https://github.com/pandas-dev/pandas/issues/5873))
  id: totrans-547
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当具有许多级别时，`MultiIndex.has_duplicates` 中的错误会导致索引器溢出（[GH 9075](https://github.com/pandas-dev/pandas/issues/9075)，[GH
    5873](https://github.com/pandas-dev/pandas/issues/5873)）
- en: Bug in `pivot` and `unstack` where `nan` values would break index alignment
    ([GH 4862](https://github.com/pandas-dev/pandas/issues/4862), [GH 7401](https://github.com/pandas-dev/pandas/issues/7401),
    [GH 7403](https://github.com/pandas-dev/pandas/issues/7403), [GH 7405](https://github.com/pandas-dev/pandas/issues/7405),
    [GH 7466](https://github.com/pandas-dev/pandas/issues/7466), [GH 9497](https://github.com/pandas-dev/pandas/issues/9497))
  id: totrans-548
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`pivot` 和`unstack` 中，`nan` 值会破坏索引对齐（[GH 4862](https://github.com/pandas-dev/pandas/issues/4862)，[GH
    7401](https://github.com/pandas-dev/pandas/issues/7401)，[GH 7403](https://github.com/pandas-dev/pandas/issues/7403)，[GH
    7405](https://github.com/pandas-dev/pandas/issues/7405)，[GH 7466](https://github.com/pandas-dev/pandas/issues/7466)，[GH
    9497](https://github.com/pandas-dev/pandas/issues/9497)）
- en: Bug in left `join` on MultiIndex with `sort=True` or null values ([GH 9210](https://github.com/pandas-dev/pandas/issues/9210)).
  id: totrans-549
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在具有`sort=True`或空值的 MultiIndex 上进行左连接中存在错误（[GH 9210](https://github.com/pandas-dev/pandas/issues/9210)）
- en: Bug in `MultiIndex` where inserting new keys would fail ([GH 9250](https://github.com/pandas-dev/pandas/issues/9250)).
  id: totrans-550
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`MultiIndex` 中插入新键时会失败的错误（[GH 9250](https://github.com/pandas-dev/pandas/issues/9250)）
- en: Bug in `groupby` when key space exceeds `int64` bounds ([GH 9096](https://github.com/pandas-dev/pandas/issues/9096)).
  id: totrans-551
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当键空间超过`int64`边界时，`groupby` 中存在错误（[GH 9096](https://github.com/pandas-dev/pandas/issues/9096)）
- en: Bug in `unstack` with `TimedeltaIndex` or `DatetimeIndex` and nulls ([GH 9491](https://github.com/pandas-dev/pandas/issues/9491)).
  id: totrans-552
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在具有`TimedeltaIndex`或`DatetimeIndex`和空值的`unstack` 中存在错误（[GH 9491](https://github.com/pandas-dev/pandas/issues/9491)）
- en: Bug in `rank` where comparing floats with tolerance will cause inconsistent
    behaviour ([GH 8365](https://github.com/pandas-dev/pandas/issues/8365)).
  id: totrans-553
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`rank` 中，使用容差比较浮点数会导致不一致的行为（[GH 8365](https://github.com/pandas-dev/pandas/issues/8365)）
- en: Fixed character encoding bug in `read_stata` and `StataReader` when loading
    data from a URL ([GH 9231](https://github.com/pandas-dev/pandas/issues/9231)).
  id: totrans-554
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了从 URL 加载数据时，在`read_stata` 和`StataReader` 中的字符编码错误（[GH 9231](https://github.com/pandas-dev/pandas/issues/9231)）
- en: Bug in adding `offsets.Nano` to other offsets raises `TypeError` ([GH 9284](https://github.com/pandas-dev/pandas/issues/9284))
  id: totrans-555
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将`offsets.Nano` 添加到其他偏移量会引发`TypeError` 的错误已修复（[GH 9284](https://github.com/pandas-dev/pandas/issues/9284))
- en: Bug in `DatetimeIndex` iteration, related to ([GH 8890](https://github.com/pandas-dev/pandas/issues/8890)),
    fixed in ([GH 9100](https://github.com/pandas-dev/pandas/issues/9100))
  id: totrans-556
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DatetimeIndex` 迭代中存在错误，与（[GH 8890](https://github.com/pandas-dev/pandas/issues/8890)）相关，已在（[GH
    9100](https://github.com/pandas-dev/pandas/issues/9100)）中修复'
- en: Bugs in `resample` around DST transitions. This required fixing offset classes
    so they behave correctly on DST transitions. ([GH 5172](https://github.com/pandas-dev/pandas/issues/5172),
    [GH 8744](https://github.com/pandas-dev/pandas/issues/8744), [GH 8653](https://github.com/pandas-dev/pandas/issues/8653),
    [GH 9173](https://github.com/pandas-dev/pandas/issues/9173), [GH 9468](https://github.com/pandas-dev/pandas/issues/9468)).
  id: totrans-557
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 DST 转换周围的`resample` 中存在错误。这需要修复偏移类，以便它们在 DST 转换时表现正确（[GH 5172](https://github.com/pandas-dev/pandas/issues/5172)，[GH
    8744](https://github.com/pandas-dev/pandas/issues/8744)，[GH 8653](https://github.com/pandas-dev/pandas/issues/8653)，[GH
    9173](https://github.com/pandas-dev/pandas/issues/9173)，[GH 9468](https://github.com/pandas-dev/pandas/issues/9468)）
- en: Bug in binary operator method (eg `.mul()`) alignment with integer levels ([GH
    9463](https://github.com/pandas-dev/pandas/issues/9463)).
  id: totrans-558
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 二进制运算符方法（例如`.mul()`）与整数级别对齐时存在错误（[GH 9463](https://github.com/pandas-dev/pandas/issues/9463)）
- en: Bug in boxplot, scatter and hexbin plot may show an unnecessary warning ([GH
    8877](https://github.com/pandas-dev/pandas/issues/8877))
  id: totrans-559
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 盒形图、散点图和六边形图中的错误可能会显示不必要的警告（[GH 8877](https://github.com/pandas-dev/pandas/issues/8877)）
- en: Bug in subplot with `layout` kw may show unnecessary warning ([GH 9464](https://github.com/pandas-dev/pandas/issues/9464))
  id: totrans-560
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: subplot中使用`layout` kw可能会显示不必要的警告的错误（[GH 9464](https://github.com/pandas-dev/pandas/issues/9464)）
- en: Bug in using grouper functions that need passed through arguments (e.g. axis),
    when using wrapped function (e.g. `fillna`), ([GH 9221](https://github.com/pandas-dev/pandas/issues/9221))
  id: totrans-561
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了使用需要传递参数的分组函数时出现的错误（例如轴），当使用包装函数（例如`fillna`）时，（[GH 9221](https://github.com/pandas-dev/pandas/issues/9221)）
- en: '`DataFrame` now properly supports simultaneous `copy` and `dtype` arguments
    in constructor ([GH 9099](https://github.com/pandas-dev/pandas/issues/9099))'
  id: totrans-562
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame`现在在构造函数中正确支持同时使用`copy`和`dtype`参数（[GH 9099](https://github.com/pandas-dev/pandas/issues/9099)）'
- en: Bug in `read_csv` when using skiprows on a file with CR line endings with the
    c engine. ([GH 9079](https://github.com/pandas-dev/pandas/issues/9079))
  id: totrans-563
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在使用c引擎时，`read_csv`在具有CR行结束的文件上使用skiprows时的错误。 ([GH 9079](https://github.com/pandas-dev/pandas/issues/9079))
- en: '`isnull` now detects `NaT` in `PeriodIndex` ([GH 9129](https://github.com/pandas-dev/pandas/issues/9129))'
  id: totrans-564
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`isnull`现在可以检测`PeriodIndex`中的`NaT`（[GH 9129](https://github.com/pandas-dev/pandas/issues/9129)）'
- en: Bug in groupby `.nth()` with a multiple column groupby ([GH 8979](https://github.com/pandas-dev/pandas/issues/8979))
  id: totrans-565
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在具有多列groupby的groupby `.nth()`中的错误（[GH 8979](https://github.com/pandas-dev/pandas/issues/8979)）
- en: Bug in `DataFrame.where` and `Series.where` coerce numerics to string incorrectly
    ([GH 9280](https://github.com/pandas-dev/pandas/issues/9280))
  id: totrans-566
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DataFrame.where`和`Series.where`错误地将数值转换为字符串（[GH 9280](https://github.com/pandas-dev/pandas/issues/9280)）'
- en: Bug in `DataFrame.where` and `Series.where` raise `ValueError` when string list-like
    is passed. ([GH 9280](https://github.com/pandas-dev/pandas/issues/9280))
  id: totrans-567
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当传递字符串列表时，`DataFrame.where`和`Series.where`会引发`ValueError`的错误。 ([GH 9280](https://github.com/pandas-dev/pandas/issues/9280))
- en: Accessing `Series.str` methods on with non-string values now raises `TypeError`
    instead of producing incorrect results ([GH 9184](https://github.com/pandas-dev/pandas/issues/9184))
  id: totrans-568
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在非字符串值上访问`Series.str`方法现在会引发`TypeError`而不是产生不正确的结果（[GH 9184](https://github.com/pandas-dev/pandas/issues/9184)）
- en: Bug in `DatetimeIndex.__contains__` when index has duplicates and is not monotonic
    increasing ([GH 9512](https://github.com/pandas-dev/pandas/issues/9512))
  id: totrans-569
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当索引具有重复项且不是单调递增时，`DatetimeIndex.__contains__`中的错误（[GH 9512](https://github.com/pandas-dev/pandas/issues/9512)）
- en: Fixed division by zero error for `Series.kurt()` when all values are equal ([GH
    9197](https://github.com/pandas-dev/pandas/issues/9197))
  id: totrans-570
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了`Series.kurt()`在所有值相等时出现的除零错误（[GH 9197](https://github.com/pandas-dev/pandas/issues/9197)）
- en: Fixed issue in the `xlsxwriter` engine where it added a default ‘General’ format
    to cells if no other format was applied. This prevented other row or column formatting
    being applied. ([GH 9167](https://github.com/pandas-dev/pandas/issues/9167))
  id: totrans-571
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了`xlsxwriter`引擎中的问题，当未应用其他格式时，它会向单元格添加默认的“General”格式。 这会阻止应用其他行或列格式。 ([GH
    9167](https://github.com/pandas-dev/pandas/issues/9167))
- en: Fixes issue with `index_col=False` when `usecols` is also specified in `read_csv`.
    ([GH 9082](https://github.com/pandas-dev/pandas/issues/9082))
  id: totrans-572
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了在`read_csv`中`index_col=False`时，同时指定`usecols`时的问题。 ([GH 9082](https://github.com/pandas-dev/pandas/issues/9082))
- en: Bug where `wide_to_long` would modify the input stub names list ([GH 9204](https://github.com/pandas-dev/pandas/issues/9204))
  id: totrans-573
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`wide_to_long`会修改输入存根名称列表的错误（[GH 9204](https://github.com/pandas-dev/pandas/issues/9204)）'
- en: Bug in `to_sql` not storing float64 values using double precision. ([GH 9009](https://github.com/pandas-dev/pandas/issues/9009))
  id: totrans-574
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了`to_sql`中未使用双精度存储float64值的错误。 ([GH 9009](https://github.com/pandas-dev/pandas/issues/9009))
- en: '`SparseSeries` and `SparsePanel` now accept zero argument constructors (same
    as their non-sparse counterparts) ([GH 9272](https://github.com/pandas-dev/pandas/issues/9272)).'
  id: totrans-575
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`SparseSeries`和`SparsePanel`现在接受零参数构造函数（与它们的非稀疏对应物相同）（[GH 9272](https://github.com/pandas-dev/pandas/issues/9272)）'
- en: Regression in merging `Categorical` and `object` dtypes ([GH 9426](https://github.com/pandas-dev/pandas/issues/9426))
  id: totrans-576
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 合并`Categorical`和`object`数据类型时的回归错误（[GH 9426](https://github.com/pandas-dev/pandas/issues/9426)）
- en: Bug in `read_csv` with buffer overflows with certain malformed input files ([GH
    9205](https://github.com/pandas-dev/pandas/issues/9205))
  id: totrans-577
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在某些格式不正确的输入文件中，`read_csv`中的缓冲区溢出错误。 ([GH 9205](https://github.com/pandas-dev/pandas/issues/9205))
- en: Bug in groupby MultiIndex with missing pair ([GH 9049](https://github.com/pandas-dev/pandas/issues/9049),
    [GH 9344](https://github.com/pandas-dev/pandas/issues/9344))
  id: totrans-578
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在具有缺失对的groupby MultiIndex中的错误（[GH 9049](https://github.com/pandas-dev/pandas/issues/9049)，[GH
    9344](https://github.com/pandas-dev/pandas/issues/9344)）
- en: Fixed bug in `Series.groupby` where grouping on `MultiIndex` levels would ignore
    the sort argument ([GH 9444](https://github.com/pandas-dev/pandas/issues/9444))
  id: totrans-579
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了`Series.groupby`中的 bug，当在`MultiIndex`级别上进行分组时，会忽略排序参数 ([GH 9444](https://github.com/pandas-dev/pandas/issues/9444))
- en: Fix bug in `DataFrame.Groupby` where `sort=False` is ignored in the case of
    Categorical columns. ([GH 8868](https://github.com/pandas-dev/pandas/issues/8868))
  id: totrans-580
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了`DataFrame.Groupby`中的 bug，在分类列的情况下，`sort=False`被忽略。 ([GH 8868](https://github.com/pandas-dev/pandas/issues/8868))
- en: Fixed bug with reading CSV files from Amazon S3 on python 3 raising a TypeError
    ([GH 9452](https://github.com/pandas-dev/pandas/issues/9452))
  id: totrans-581
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了在 python 3 上从 Amazon S3 读取 CSV 文件时引发 TypeError 的 bug ([GH 9452](https://github.com/pandas-dev/pandas/issues/9452))
- en: Bug in the Google BigQuery reader where the ‘jobComplete’ key may be present
    but False in the query results ([GH 8728](https://github.com/pandas-dev/pandas/issues/8728))
  id: totrans-582
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Google BigQuery 读取器中的一个 bug，查询结果中可能存在‘jobComplete’键，但值为 False ([GH 8728](https://github.com/pandas-dev/pandas/issues/8728))
- en: Bug in `Series.values_counts` with excluding `NaN` for categorical type `Series`
    with `dropna=True` ([GH 9443](https://github.com/pandas-dev/pandas/issues/9443))
  id: totrans-583
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Series.values_counts`中的 bug，对于`dropna=True`的分类类型`Series`排除`NaN` ([GH 9443](https://github.com/pandas-dev/pandas/issues/9443))'
- en: Fixed missing numeric_only option for `DataFrame.std/var/sem` ([GH 9201](https://github.com/pandas-dev/pandas/issues/9201))
  id: totrans-584
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复了`DataFrame.std/var/sem`中缺失的`numeric_only`选项 ([GH 9201](https://github.com/pandas-dev/pandas/issues/9201))
- en: Support constructing `Panel` or `Panel4D` with scalar data ([GH 8285](https://github.com/pandas-dev/pandas/issues/8285))
  id: totrans-585
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 支持使用标量数据构建`Panel`或`Panel4D` ([GH 8285](https://github.com/pandas-dev/pandas/issues/8285))
- en: '`Series` text representation disconnected from `max_rows`/`max_columns` ([GH
    7508](https://github.com/pandas-dev/pandas/issues/7508)).'
  id: totrans-586
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Series`文本表示与`max_rows`/`max_columns`脱节 ([GH 7508](https://github.com/pandas-dev/pandas/issues/7508)).'
- en: '`Series` number formatting inconsistent when truncated ([GH 8532](https://github.com/pandas-dev/pandas/issues/8532)).'
  id: totrans-587
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当截断时，`Series`数字格式不一致 ([GH 8532](https://github.com/pandas-dev/pandas/issues/8532)).
- en: Previous behavior
  id: totrans-588
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 以前的行��
- en: '[PRE96]'
  id: totrans-589
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE96]'
- en: New behavior
  id: totrans-590
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 新行为
- en: '[PRE97]'
  id: totrans-591
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE97]'
- en: A Spurious `SettingWithCopy` Warning was generated when setting a new item in
    a frame in some cases ([GH 8730](https://github.com/pandas-dev/pandas/issues/8730))
  id: totrans-592
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在某些情况下，在框架中设置新项时会生成一个虚假的`SettingWithCopy`警告 ([GH 8730](https://github.com/pandas-dev/pandas/issues/8730))
- en: The following would previously report a `SettingWithCopy` Warning.
  id: totrans-593
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 以前会报告`SettingWithCopy`警告。
- en: '[PRE98]'
  id: totrans-594
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE98]'
- en: '## Contributors'
  id: totrans-595
  prefs: []
  type: TYPE_NORMAL
  zh: '## 贡献者'
- en: A total of 60 people contributed patches to this release. People with a “+”
    by their names contributed a patch for the first time.
  id: totrans-596
  prefs: []
  type: TYPE_NORMAL
  zh: 总共有 60 人为这个版本贡献了补丁。名字后面带有“+”的人第一次贡献了补丁。
- en: Aaron Toth +
  id: totrans-597
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Aaron Toth +
- en: Alan Du +
  id: totrans-598
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Alan Du +
- en: Alessandro Amici +
  id: totrans-599
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Alessandro Amici +
- en: Artemy Kolchinsky
  id: totrans-600
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Artemy Kolchinsky
- en: Ashwini Chaudhary +
  id: totrans-601
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Ashwini Chaudhary +
- en: Ben Schiller
  id: totrans-602
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Ben Schiller
- en: Bill Letson
  id: totrans-603
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Bill Letson
- en: Brandon Bradley +
  id: totrans-604
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Brandon Bradley + '
- en: Chau Hoang +
  id: totrans-605
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Chau Hoang +
- en: Chris Reynolds
  id: totrans-606
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Chris Reynolds
- en: Chris Whelan +
  id: totrans-607
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Chris Whelan +
- en: Christer van der Meeren +
  id: totrans-608
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Christer van der Meeren +
- en: David Cottrell +
  id: totrans-609
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: David Cottrell +
- en: David Stephens
  id: totrans-610
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: David Stephens
- en: Ehsan Azarnasab +
  id: totrans-611
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Ehsan Azarnasab +
- en: Garrett-R +
  id: totrans-612
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Garrett-R +
- en: Guillaume Gay
  id: totrans-613
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Guillaume Gay
- en: Jake Torcasso +
  id: totrans-614
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Jake Torcasso +
- en: Jason Sexauer
  id: totrans-615
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Jason Sexauer
- en: Jeff Reback
  id: totrans-616
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Jeff Reback
- en: John McNamara
  id: totrans-617
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: John McNamara
- en: Joris Van den Bossche
  id: totrans-618
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Joris Van den Bossche
- en: Joschka zur Jacobsmühlen +
  id: totrans-619
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Joschka zur Jacobsmühlen +
- en: Juarez Bochi +
  id: totrans-620
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Juarez Bochi +
- en: Junya Hayashi +
  id: totrans-621
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Junya Hayashi +
- en: K.-Michael Aye
  id: totrans-622
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: K.-Michael Aye
- en: Kerby Shedden +
  id: totrans-623
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Kerby Shedden +
- en: Kevin Sheppard
  id: totrans-624
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Kevin Sheppard
- en: Kieran O’Mahony
  id: totrans-625
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Kieran O’Mahony
- en: Kodi Arfer +
  id: totrans-626
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Kodi Arfer +
- en: Matti Airas +
  id: totrans-627
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Matti Airas +
- en: Min RK +
  id: totrans-628
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Min RK +
- en: Mortada Mehyar
  id: totrans-629
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Mortada Mehyar
- en: Robert +
  id: totrans-630
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Robert +
- en: Scott E Lasley
  id: totrans-631
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Scott E Lasley
- en: Scott Lasley +
  id: totrans-632
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Scott Lasley +
- en: Sergio Pascual +
  id: totrans-633
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Sergio Pascual +
- en: Skipper Seabold
  id: totrans-634
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Skipper Seabold
- en: Stephan Hoyer
  id: totrans-635
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Stephan Hoyer
- en: Thomas Grainger
  id: totrans-636
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Thomas Grainger
- en: Tom Augspurger
  id: totrans-637
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Tom Augspurger
- en: TomAugspurger
  id: totrans-638
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: TomAugspurger
- en: Vladimir Filimonov +
  id: totrans-639
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Vladimir Filimonov +
- en: Vyomkesh Tripathi +
  id: totrans-640
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Vyomkesh Tripathi +
- en: Will Holmgren
  id: totrans-641
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Will Holmgren
- en: Yulong Yang +
  id: totrans-642
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Yulong Yang +
- en: behzad nouri
  id: totrans-643
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: behzad nouri
- en: bertrandhaut +
  id: totrans-644
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: bertrandhaut +
- en: bjonen
  id: totrans-645
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: bjonen
- en: cel4 +
  id: totrans-646
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: cel4 +
- en: clham
  id: totrans-647
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: clham
- en: hsperr +
  id: totrans-648
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: hsperr +
- en: ischwabacher
  id: totrans-649
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ischwabacher
- en: jnmclarty
  id: totrans-650
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: jnmclarty
- en: josham +
  id: totrans-651
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: josham +
- en: jreback
  id: totrans-652
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: jreback
- en: omtinez +
  id: totrans-653
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: omtinez +
- en: roch +
  id: totrans-654
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: roch +
- en: sinhrks
  id: totrans-655
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: sinhrks
- en: unutbu
  id: totrans-656
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: unutbu
