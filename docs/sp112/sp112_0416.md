# Orthogonal distance regression (scipy.odr)

> Original text：[https://docs.scipy.org/doc/scipy-1.12.0/reference/odr.html](https://docs.scipy.org/doc/scipy-1.12.0/reference/odr.html)

## Package Content

| [`Data`](generated/scipy.odr.Data.html#scipy.odr.Data "scipy.odr.Data")(x[, y, we, wd, fix, meta]) | 要拟合的数据。 |
| --- | --- |
| [`RealData`](generated/scipy.odr.RealData.html#scipy.odr.RealData "scipy.odr.RealData")(x[, y, sx, sy, covx, covy, fix, meta]) | 数据，带有实际标准偏差和/或协方差作为加权。 |
| [`Model`](generated/scipy.odr.Model.html#scipy.odr.Model "scipy.odr.Model")(fcn[, fjacb, fjacd, extra_args, ...]) | 存储关于您希望拟合的函数的信息的 Model 类。 |
| [`ODR`](generated/scipy.odr.ODR.html#scipy.odr.ODR "scipy.odr.ODR")(data, model[, beta0, delta0, ifixb, ...]) | ODR 类汇总所有信息并协调主拟合例程的运行。 |
| [`Output`](generated/scipy.odr.Output.html#scipy.odr.Output "scipy.odr.Output")(output) | Output 类存储 ODR 运行的输出。 |
| [`odr`](generated/odr-function.html#scipy.odr.odr "scipy.odr.odr")(fcn, beta0, y, x[, we, wd, fjacb, ...]) | ODR 的底层函数。 |
| [`OdrWarning`](generated/scipy.odr.OdrWarning.html#scipy.odr.OdrWarning "scipy.odr.OdrWarning") | 警告指示传递到 ODR 的数据在传递到 'odr' 时可能会引起问题，用户应该注意。 |
| [`OdrError`](generated/scipy.odr.OdrError.html#scipy.odr.OdrError "scipy.odr.OdrError") | 拟合中出现错误的异常。 |
| [`OdrStop`](generated/scipy.odr.OdrStop.html#scipy.odr.OdrStop "scipy.odr.OdrStop") | 停止拟合的异常。 |
| [`polynomial`](generated/scipy.odr.polynomial.html#scipy.odr.polynomial "scipy.odr.polynomial")(order) | 通用多项式模型的工厂函数。 |
| [`exponential`](generated/scipy.odr.exponential.html#scipy.odr.exponential "scipy.odr.exponential") | 指数模型 |
| [`multilinear`](generated/scipy.odr.multilinear.html#scipy.odr.multilinear "scipy.odr.multilinear") | 任意维度线性模型 |
| [`unilinear`](generated/scipy.odr.unilinear.html#scipy.odr.unilinear "scipy.odr.unilinear") | 单变量线性模型 |
| [`quadratic`](generated/scipy.odr.quadratic.html#scipy.odr.quadratic "scipy.odr.quadratic") | 二次模型 |

## Usage information

### Introduction

为什么要使用正交距离回归（ODR）？有时解释变量（即“自变量”）存在测量误差，而不仅仅是响应变量（即“因变量”）。普通最小二乘（OLS）拟合程序将解释变量的数据视为固定的，即不受任何误差的影响。此外，OLS程序要求响应变量是解释变量的显式函数；有时使方程显式化是不切实际的和/或会引入误差。ODR可以轻松处理这两种情况，甚至可以在问题仅需OLS的情况下简化处理。

ODRPACK是一个用于执行可能非线性拟合函数的FORTRAN-77库。它使用修改的信赖域Levenberg-Marquardt类型算法[[1]](#r12d0b3321264-1)来估计函数参数。拟合函数由操作NumPy数组的Python函数提供。所需的导数也可以由Python函数提供，或者可以通过数值方法估计。ODRPACK可以进行显式或隐式ODR拟合，或者可以进行OLS拟合。输入和输出变量可以是多维的。可以提供权重以考虑观测值的不同方差，甚至可以考虑变量维度之间的协方差。

[`scipy.odr`](#module-scipy.odr "scipy.odr") 包提供了对ODRPACK的面向对象接口，除了低级别的 [`odr`](generated/odr-function.html#scipy.odr.odr "scipy.odr.odr") 函数。

有关ODRPACK的更多背景信息，请参阅[ODRPACK用户指南](https://docs.scipy.org/doc/external/odrpack_guide.pdf)，推荐阅读。

### 基本用法

1.  定义要拟合的函数。

    ```py
    def f(B, x):
      '''Linear function y = m*x + b'''
        # B is a vector of the parameters.
        # x is an array of the current x values.
        # x is in the same format as the x passed to Data or RealData.
        #
        # Return an array in the same format as y passed to Data or RealData.
        return B[0]*x + B[1] 
    ```

1.  创建模型。

    ```py
    linear = Model(f) 
    ```

1.  创建Data或RealData实例。

    ```py
    mydata = Data(x, y, wd=1./power(sx,2), we=1./power(sy,2)) 
    ```

    或者，当实际协方差已知时：

    ```py
    mydata = RealData(x, y, sx=sx, sy=sy) 
    ```

1.  使用您的数据、模型和初始参数估计来实例化ODR。

    ```py
    myodr = ODR(mydata, linear, beta0=[1., 2.]) 
    ```

1.  运行拟合。

    ```py
    myoutput = myodr.run() 
    ```

1.  检查输出。

    ```py
    myoutput.pprint() 
    ```

### 参考文献

[[1](#id1)]

P. T. Boggs 和 J. E. Rogers，在《测量误差模型的统计分析及其应用：1989年6月10日至16日举行的AMS-IMS-SIAM联合暑期研究会议会议录》中，"Orthogonal Distance Regression"一文中讨论了“正交距离回归”，出自《当代数学》，第112卷，第186页，1990年。
