- en: Sparse Tools
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://docs.sympy.org/latest/modules/matrices/sparsetools.html](https://docs.sympy.org/latest/modules/matrices/sparsetools.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: Converts a sparse matrix to Compressed Sparse Row (CSR) format.
  prefs: []
  type: TYPE_NORMAL
- en: 'Parameters:'
  prefs: []
  type: TYPE_NORMAL
- en: '**A** : contains non-zero elements sorted by key (row, column)'
  prefs: []
  type: TYPE_NORMAL
- en: '**JA** : JA[i] is the column corresponding to A[i]'
  prefs: []
  type: TYPE_NORMAL
- en: '**IA** : IA[i] contains the index in A for the first non-zero element'
  prefs: []
  type: TYPE_NORMAL
- en: of row[i]. Thus IA[i+1] - IA[i] gives number of non-zero elements row[i]. The
    length of IA is always 1 more than the number of rows in the matrix.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Examples
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: Converts a CSR representation to DOK representation.
  prefs: []
  type: TYPE_NORMAL
- en: Examples
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: 'Returns a SparseMatrix from the given dictionary describing the diagonals of
    the matrix. The keys are positive for upper diagonals and negative for those below
    the main diagonal. The values may be:'
  prefs: []
  type: TYPE_NORMAL
- en: expressions or single-argument functions,
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: lists or tuples of values,
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: matrices
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Unless dimensions are given, the size of the returned matrix will be large enough
    to contain the largest non-zero value provided.
  prefs: []
  type: TYPE_NORMAL
- en: Kwargs
  prefs: []
  type: TYPE_NORMAL
- en: rowsrows of the resulting matrix; computed if
  prefs: []
  type: TYPE_NORMAL
- en: not given.
  prefs: []
  type: TYPE_NORMAL
- en: colscolumns of the resulting matrix; computed if
  prefs: []
  type: TYPE_NORMAL
- en: not given.
  prefs: []
  type: TYPE_NORMAL
- en: Examples
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: 'If explicit values are given in tuples, the matrix will autosize to contain
    all values, otherwise a single value is filled onto the entire diagonal:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: 'A function accepting a single argument can be used to fill the diagonal as
    a function of diagonal index (which starts at 0). The size (or shape) of the matrix
    must be given to obtain more than a 1x1 matrix:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: 'The diagonal of matrices placed on a diagonal will coincide with the indicated
    diagonal:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: 'Errors are raised if the designated size will not hold all values an integral
    number of times. Here, the rows are designated as odd (but an even number is required
    to hold the off-diagonal 2x2 ones):'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE10]'
  prefs: []
  type: TYPE_PRE
- en: 'And here, an even number of rows is given…but the square matrix has an even
    number of columns, too. As we saw in the previous example, an odd number is required:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  prefs: []
  type: TYPE_PRE
- en: 'A way around having to count rows is to enclosing matrix elements in a tuple
    and indicate the desired number of them to the right:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE12]'
  prefs: []
  type: TYPE_PRE
- en: 'An error will be raised if more than one value is written to a given entry.
    Here, the ones overlap with the main diagonal if they are placed on the first
    diagonal:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE13]'
  prefs: []
  type: TYPE_PRE
- en: 'By placing a 0 at the bottom left of the 2x2 matrix of ones, the collision
    is avoided:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE14]'
  prefs: []
  type: TYPE_PRE
