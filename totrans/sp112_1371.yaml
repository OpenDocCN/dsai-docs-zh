- en: scipy.stats.logrank
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://docs.scipy.org/doc/scipy-1.12.0/reference/generated/scipy.stats.logrank.html#scipy.stats.logrank](https://docs.scipy.org/doc/scipy-1.12.0/reference/generated/scipy.stats.logrank.html#scipy.stats.logrank)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: Compare the survival distributions of two samples via the logrank test.
  prefs: []
  type: TYPE_NORMAL
- en: 'Parameters:'
  prefs: []
  type: TYPE_NORMAL
- en: '**x, y**array_like or CensoredData'
  prefs: []
  type: TYPE_NORMAL
- en: Samples to compare based on their empirical survival functions.
  prefs: []
  type: TYPE_NORMAL
- en: '**alternative**{‘two-sided’, ‘less’, ‘greater’}, optional'
  prefs: []
  type: TYPE_NORMAL
- en: Defines the alternative hypothesis.
  prefs: []
  type: TYPE_NORMAL
- en: The null hypothesis is that the survival distributions of the two groups, say
    *X* and *Y*, are identical.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following alternative hypotheses [[4]](#rdb7ee857e622-4) are available
    (default is ‘two-sided’):'
  prefs: []
  type: TYPE_NORMAL
- en: '‘two-sided’: the survival distributions of the two groups are not identical.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '‘less’: survival of group *X* is favored: the group *X* failure rate function
    is less than the group *Y* failure rate function at some times.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '‘greater’: survival of group *Y* is favored: the group *X* failure rate function
    is greater than the group *Y* failure rate function at some times.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Returns:'
  prefs: []
  type: TYPE_NORMAL
- en: '**res***LogRankResult*'
  prefs: []
  type: TYPE_NORMAL
- en: 'An object containing attributes:'
  prefs: []
  type: TYPE_NORMAL
- en: statisticfloat ndarray
  prefs: []
  type: TYPE_NORMAL
- en: The computed statistic (defined below). Its magnitude is the square root of
    the magnitude returned by most other logrank test implementations.
  prefs: []
  type: TYPE_NORMAL
- en: pvaluefloat ndarray
  prefs: []
  type: TYPE_NORMAL
- en: The computed p-value of the test.
  prefs: []
  type: TYPE_NORMAL
- en: See also
  prefs: []
  type: TYPE_NORMAL
- en: '[`scipy.stats.ecdf`](scipy.stats.ecdf.html#scipy.stats.ecdf "scipy.stats.ecdf")'
  prefs: []
  type: TYPE_NORMAL
- en: Notes
  prefs: []
  type: TYPE_NORMAL
- en: The logrank test [[1]](#rdb7ee857e622-1) compares the observed number of events
    to the expected number of events under the null hypothesis that the two samples
    were drawn from the same distribution. The statistic is
  prefs: []
  type: TYPE_NORMAL
- en: \[Z_i = \frac{\sum_{j=1}^J(O_{i,j}-E_{i,j})}{\sqrt{\sum_{j=1}^J V_{i,j}}} \rightarrow
    \mathcal{N}(0,1)\]
  prefs: []
  type: TYPE_NORMAL
- en: where
  prefs: []
  type: TYPE_NORMAL
- en: \[E_{i,j} = O_j \frac{N_{i,j}}{N_j}, \qquad V_{i,j} = E_{i,j} \left(\frac{N_j-O_j}{N_j}\right)
    \left(\frac{N_j-N_{i,j}}{N_j-1}\right),\]
  prefs: []
  type: TYPE_NORMAL
- en: \(i\) denotes the group (i.e. it may assume values \(x\) or \(y\), or it may
    be omitted to refer to the combined sample) \(j\) denotes the time (at which an
    event occurred), \(N\) is the number of subjects at risk just before an event
    occurred, and \(O\) is the observed number of events at that time.
  prefs: []
  type: TYPE_NORMAL
- en: The `statistic` \(Z_x\) returned by [`logrank`](#scipy.stats.logrank "scipy.stats.logrank")
    is the (signed) square root of the statistic returned by many other implementations.
    Under the null hypothesis, \(Z_x**2\) is asymptotically distributed according
    to the chi-squared distribution with one degree of freedom. Consequently, \(Z_x\)
    is asymptotically distributed according to the standard normal distribution. The
    advantage of using \(Z_x\) is that the sign information (i.e. whether the observed
    number of events tends to be less than or greater than the number expected under
    the null hypothesis) is preserved, allowing [`scipy.stats.logrank`](#scipy.stats.logrank
    "scipy.stats.logrank") to offer one-sided alternative hypotheses.
  prefs: []
  type: TYPE_NORMAL
- en: References
  prefs: []
  type: TYPE_NORMAL
- en: '[[1](#id2)]'
  prefs: []
  type: TYPE_NORMAL
- en: 'Mantel N. “Evaluation of survival data and two new rank order statistics arising
    in its consideration.” Cancer Chemotherapy Reports, 50(3):163-170, PMID: 5910392,
    1966'
  prefs: []
  type: TYPE_NORMAL
- en: '[[2](#id8)]'
  prefs: []
  type: TYPE_NORMAL
- en: Bland, Altman, “The logrank test”, BMJ, 328:1073, [DOI:10.1136/bmj.328.7447.1073](https://doi.org/10.1136/bmj.328.7447.1073),
    2004
  prefs: []
  type: TYPE_NORMAL
- en: '[3]'
  prefs: []
  type: TYPE_NORMAL
- en: “Logrank test”, Wikipedia, [https://en.wikipedia.org/wiki/Logrank_test](https://en.wikipedia.org/wiki/Logrank_test)
  prefs: []
  type: TYPE_NORMAL
- en: '[[4](#id1)]'
  prefs: []
  type: TYPE_NORMAL
- en: 'Brown, Mark. “On the choice of variance for the log rank test.” Biometrika
    71.1 (1984): 65-74.'
  prefs: []
  type: TYPE_NORMAL
- en: '[5]'
  prefs: []
  type: TYPE_NORMAL
- en: 'Klein, John P., and Melvin L. Moeschberger. Survival analysis: techniques for
    censored and truncated data. Vol. 1230\. New York: Springer, 2003.'
  prefs: []
  type: TYPE_NORMAL
- en: Examples
  prefs: []
  type: TYPE_NORMAL
- en: 'Reference [[2]](#rdb7ee857e622-2) compared the survival times of patients with
    two different types of recurrent malignant gliomas. The samples below record the
    time (number of weeks) for which each patient participated in the study. The [`scipy.stats.CensoredData`](scipy.stats.CensoredData.html#scipy.stats.CensoredData
    "scipy.stats.CensoredData") class is used because the data is right-censored:
    the uncensored observations correspond with observed deaths whereas the censored
    observations correspond with the patient leaving the study for another reason.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: We can calculate and visualize the empirical survival functions of both groups
    as follows.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: '![../../_images/scipy-stats-logrank-1_00_00.png](../Images/093aebac3064a9070a374998596dafbd.png)'
  prefs: []
  type: TYPE_IMG
- en: Visual inspection of the empirical survival functions suggests that the survival
    times tend to be different between the two groups. To formally assess whether
    the difference is significant at the 1% level, we use the logrank test.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: The p-value is less than 1%, so we can consider the data to be evidence against
    the null hypothesis in favor of the alternative that there is a difference between
    the two survival functions.
  prefs: []
  type: TYPE_NORMAL
