# 向量与参考框架

> 原文链接：[`docs.sympy.org/latest/modules/physics/vector/vectors.html`](https://docs.sympy.org/latest/modules/physics/vector/vectors.html)

在`sympy.physics.vector`中，向量和参考框架是动态系统的“基础”。本文档将从数学角度描述它们，并说明如何在此模块的代码中使用它们。

## Vector

向量是具有大小（或长度）和方向的几何对象。在纸上，三维空间中的向量通常表示为：

<svg class="align-center" width="350" height="175" id="svg3229" version="1.1" inkscape:version="0.48.1 r9760" sodipodi:docname="New document 9"><metadata id="metadata3234"><rdf><work rdf:about=""><format>image/svg+xml</format></work></rdf></metadata> <g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(0,-877.36218)"><text xml:space="preserve" style="font-size:15px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:currentColor;fill-opacity:1;stroke:none;font-family:Sans" x="11.638955" y="119.71496" id="text3247" sodipodi:linespacing="125%" transform="translate(0,877.36218)"><tspan sodipodi:role="line" id="tspan3249" x="11.638955" y="119.71496">页面上的向量</tspan></text> <text xml:space="preserve" style="font-size:15px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:currentColor;fill-opacity:1;stroke:none;font-family:Sans" x="163.36105" y="989.17932" id="text3251" sodipodi:linespacing="125%"><tspan sodipodi:role="line" id="tspan3253" x="163.36105" y="989.17932">页面外的向量</tspan></text> <text sodipodi:linespacing="125%" id="text3283" y="990.84198" x="268.11163" style="font-size:15px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:currentColor;fill-opacity:1;stroke:none;font-family:Sans" xml:space="preserve"><tspan y="990.84198" x="268.11163" id="tspan3285" sodipodi:role="line">页面内的向量</tspan></text></g></svg>

## 向量代数

向量代数是首要讨论的主题。

如果两个向量具有相同的大小和方向，则它们被称为相等。

### Vector Operations

可以对向量进行多种代数操作：向量之间的加法，标量乘法和向量乘法。

向量加法是基于平行四边形法则。

<svg class="align-center" width="200" height="200" id="svg3712" version="1.1" inkscape:version="0.48.1 r9760" sodipodi:docname="New document 12"><metadata id="metadata3717"><rdf><work rdf:about=""><format>image/svg+xml</format></work></rdf></metadata> <g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(0,-852.36218)"><text xml:space="preserve" style="font-size:14px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="35.239567" y="72.024727" id="text3750" sodipodi:linespacing="125%" transform="translate(0,852.36218)"><tspan sodipodi:role="line" id="tspan3752" x="35.239567" y="72.024727">a</tspan></text> <text xml:space="preserve" style="font-size:14px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="97.37249" y="55.641422" id="text3754" sodipodi:linespacing="125%" transform="translate(0,852.36218)"><tspan sodipodi:role="line" id="tspan3756" x="97.37249" y="55.641422">b</tspan></text> <text xml:space="preserve" style="font-size:14px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="69.242661" y="129.52087" id="text3762" sodipodi:linespacing="125%" transform="translate(0,852.36218)"><tspan sodipodi:role="line" id="tspan3764" x="69.242661" y="129.52087">b</tspan></text> <text xml:space="preserve" style="font-size:14px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="139.10355" y="106.95518" id="text3766" sodipodi:linespacing="125%" transform="translate(0,852.36218)"><tspan sodipodi:role="line" id="tspan3768" x="139.10355" y="106.95518">a</tspan></text> <text xml:space="preserve" style="font-size:14px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="69.860893" y="101.08192" id="text3770" sodipodi:linespacing="125%" transform="translate(0,852.36218)"><tspan sodipodi:role="line" id="tspan3772" x="69.860893" y="101.08192">a+b</tspan></text></g></svg>

向量加法也是可交换的：

\[\begin{split}\mathbf{a} + \mathbf{b} &= \mathbf{b} + \mathbf{a} \\ (\mathbf{a} + \mathbf{b}) + \mathbf{c} &= \mathbf{a} + (\mathbf{b} + \mathbf{c})\end{split}\]

标量乘法是向量与标量的乘积；结果是一个方向相同但大小按标量缩放的向量。注意，乘以-1 相当于围绕垂直于向量平面的任意轴旋转向量 180 度。

<svg class="align-center" width="200" height="150" id="svg3154" version="1.1" inkscape:version="0.48.1 r9760" sodipodi:docname="New document 5"><metadata id="metadata3159"><rdf><work rdf:about=""><format>image/svg+xml</format></work></rdf></metadata> <g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(0,-902.36218)"><text xml:space="preserve" style="font-size:20px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="47.700001" y="25.200001" id="text3192" sodipodi:linespacing="125%" transform="translate(0,902.36218)"><tspan sodipodi:role="line" id="tspan3194" x="47.700001" y="25.200001" style="font-size:15px">a</tspan></text> <text xml:space="preserve" style="font-size:20px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="90.899994" y="944.36218" id="text3196" sodipodi:linespacing="125%"><tspan sodipodi:role="line" id="tspan3198" x="90.899994" y="944.36218" style="font-size:15px">2a</tspan></text> <text xml:space="preserve" style="font-size:20px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="61.199997" y="1016.6622" id="text3200" sodipodi:linespacing="125%"><tspan sodipodi:role="line" id="tspan3202" x="61.199997" y="1016.6622" style="font-size:15px">-a</tspan></text></g></svg>

单位向量简单地说是其大小等于 1 的向量。对于任意向量\(\mathbf{v}\)，我们可以定义一个单位向量：

\[\mathbf{\hat{n}_v} = \frac{\mathbf{v}}{\Vert \mathbf{v} \Vert}\]

注意，每个向量都可以写成标量和单位向量的乘积。

在`sympy.physics.vector`中实现了三种向量积：点积、叉积和外积。

点积运算将两个向量映射到一个标量。它的定义如下：

\[\begin{split}\mathbf{a} \cdot \mathbf{b} = \Vert \mathbf{a} \Vert \Vert \mathbf{b} \Vert \cos(\theta)\\\end{split}\]

其中\(\theta\)为\(\mathbf{a}\)和\(\mathbf{b}\)之间的角度。

两个单位向量的点积代表了共同方向的大小；对于其他向量，它是共同方向的大小和两个向量大小的乘积。两个垂直向量的点积为零。下图显示了一些示例：

<svg class="align-center" width="450" height="250" id="svg3967" version="1.1" inkscape:version="0.48.1 r9760" sodipodi:docname="New document 17"><metadata id="metadata3972"><rdf><work rdf:about=""><format>image/svg+xml</format></work></rdf></metadata> <g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(0,-802.36218)"><text xml:space="preserve" style="font-size:14px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="76.546394" y="173.45361" id="text3985" sodipodi:linespacing="125%" transform="translate(0,802.36218)"><tspan sodipodi:role="line" id="tspan3987" x="76.546394" y="173.45361">a</tspan></text> <text xml:space="preserve" style="font-size:14px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="40.592785" y="121.26289" id="text3989" sodipodi:linespacing="125%" transform="translate(0,802.36218)"><tspan sodipodi:role="line" id="tspan3991" x="40.592785" y="121.26289">b</tspan></text> <text xml:space="preserve" style="font-size:14px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="208.18298" y="172.29381" id="text3993" sodipodi:linespacing="125%" transform="translate(0,802.36218)"><tspan sodipodi:role="line" id="tspan3995" x="208.18298" y="172.29381">a</tspan></text> <text xml:space="preserve" style="font-size:14px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="210.50258" y="133.44072" id="text3997" sodipodi:linespacing="125%" transform="translate(0,802.36218)"><tspan sodipodi:role="line" id="tspan3999" x="210.50258" y="133.44072">a</tspan></text> <text xml:space="preserve" style="font-size:14px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="403.02835" y="172.8737" id="text4001" sodipodi:linespacing="125%" transform="translate(0,802.36218)"><tspan sodipodi:role="line" id="tspan4003" x="403.02835" y="172.8737">a</tspan></text> <text xml:space="preserve" style="font-size:14px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="339.81958" y="131.70103" id="text4005" sodipodi:linespacing="125%" transform="translate(0,802.36218)"><tspan sodipodi:role="line" id="tspan4007" x="339.81958" y="131.70103">c</tspan></text> <text xml:space="preserve" style="font-size:14px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="345.03867" y="167.07474" id="text4009" sodipodi:linespacing="125%" transform="translate(0,802.36218)"><tspan sodipodi:role="line" id="tspan4011" x="345.03867" y="167.07474">45°</tspan></text> <text xml:space="preserve" style="font-size:14px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="40.592785" y="214.04639" id="text4013" sodipodi:linespacing="125%" transform="translate(0,802.36218)"><tspan sodipodi:role="line" id="tspan4015" x="40.592785" y="214.04639">a ⋅ b = 0</tspan></text> <text xml:space="preserve" style="font-size:14px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="180.92784" y="1016.9884" id="text4017" sodipodi:linespacing="125%"><tspan sodipodi:role="line" id="tspan4019" x="180.92784" y="1016.9884">a ⋅ a = 1</tspan></text> <text xml:space="preserve" style="font-size:14px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="328.80154" y="1017.5684" id="text4021" sodipodi:linespacing="125%"><tspan sodipodi:role="line" id="tspan4023" x="328.80154" y="1017.5684">a ⋅ c = 1/sqrt(2)</tspan></text></g></svg>

点乘是交换的：

\[\mathbf{a} \cdot \mathbf{b} = \mathbf{b} \cdot \mathbf{a}\]

两个向量的叉乘向量乘法操作返回一个向量：

\[\mathbf{a} \times \mathbf{b} = \mathbf{c}\]

向量 \(\mathbf{c}\) 具有以下特性：它的方向与 \(\mathbf{a}\) 和 \(\mathbf{b}\) 垂直，其大小定义为 \(\Vert \mathbf{c} \Vert = \Vert \mathbf{a} \Vert \Vert \mathbf{b} \Vert \sin(\theta)\)（其中 \(\theta\) 是 \(\mathbf{a}\) 和 \(\mathbf{b}\) 之间的角度），并且其方向由右手法则定义在 \(\Vert \mathbf{a} \Vert \Vert \mathbf{b} \Vert\) 之间。下图显示如下：

<svg class="align-center" width="700" height="350" id="svg3807" version="1.1" inkscape:version="0.48.1 r9760" sodipodi:docname="vec_cross.svg"><metadata id="metadata3812"><rdf><work rdf:about=""><format>image/svg+xml</format></work></rdf></metadata> <g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(0,-702.36218)"><text xml:space="preserve" style="font-size:14px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="518.38611" y="236.31256" id="text3831" sodipodi:linespacing="125%" transform="translate(0,702.36218)"><tspan sodipodi:role="line" id="tspan3833" x="518.38611" y="236.31256">a x a = 0</tspan></text> <text xml:space="preserve" style="font-size:14px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="104.39224" y="234.16753" id="text3835" sodipodi:linespacing="125%" transform="translate(0,702.36218)"><tspan sodipodi:role="line" id="tspan3837" x="104.39224" y="234.16753">a</tspan></text> <text xml:space="preserve" style="font-size:14px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="351.07251" y="215.57712" id="text3839" sodipodi:linespacing="125%" transform="translate(0,702.36218)"><tspan sodipodi:role="line" id="tspan3841" x="351.07251" y="215.57712">a</tspan></text> <text xml:space="preserve" style="font-size:14px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="200.91931" y="212.71706" id="text3843" sodipodi:linespacing="125%" transform="translate(0,702.36218)"><tspan sodipodi:role="line" id="tspan3845" x="200.91931" y="212.71706">b</tspan></text> <text xml:space="preserve" style="font-size:14px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="429.72421" y="918.6543" id="text3847" sodipodi:linespacing="125%"><tspan sodipodi:role="line" id="tspan3849" x="429.72421" y="918.6543">d</tspan></text> <text xml:space="preserve" style="font-size:14px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="158.01839" y="129.06027" id="text3851" sodipodi:linespacing="125%" transform="translate(0,702.36218)"><tspan sodipodi:role="line" id="tspan3853" x="158.01839" y="129.06027">c</tspan></text> <text xml:space="preserve" style="font-size:14px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="416.13892" y="816.4071" id="text3855" sodipodi:linespacing="125%"><tspan sodipodi:role="line" x="416.13892" y="816.4071" id="tspan3859">c / sqrt(2)</tspan></text> <text xml:space="preserve" style="font-size:14px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="388.96835" y="911.50415" id="text3881" sodipodi:linespacing="125%" inkscape:transform-center-x="-11.405762" inkscape:transform-center-y="-5.2944336"><tspan sodipodi:role="line" id="tspan3883" x="388.96835" y="911.50415">45°</tspan></text></g></svg>

叉乘具有以下属性：

它不是交换的：

\[\begin{split}\mathbf{a} \times \mathbf{b} &\neq \mathbf{b} \times \mathbf{a} \\ \mathbf{a} \times \mathbf{b} &= - \mathbf{b} \times \mathbf{a}\end{split}\]

并非可结合的：

\[(\mathbf{a} \times \mathbf{b} ) \times \mathbf{c} \neq \mathbf{a} \times (\mathbf{b} \times \mathbf{c})\]

两个平行向量的叉积为零。

两个向量的外积不在此讨论，而是在惯性部分（使用的地方）。其他有用的向量性质和关系包括：

\[\begin{split}\alpha (\mathbf{a} + \mathbf{b}) &= \alpha \mathbf{a} + \alpha \mathbf{b}\\ \mathbf{a} \cdot (\mathbf{b} + \mathbf{c}) &= \mathbf{a} \cdot \mathbf{b} + \mathbf{a} \cdot \mathbf{c}\\ \mathbf{a} \times (\mathbf{b} + \mathbf{c}) &= \mathbf{a} \times \mathbf{b} + \mathbf{a} \times \mathbf{b}\\ (\mathbf{a} \times \mathbf{b}) \cdot \mathbf{c} & \textrm{ 给出标量三重积。}\\ \mathbf{a} \times (\mathbf{b} \cdot \mathbf{c}) & \textrm{ 不起作用，因为不能对向量和标量进行叉乘。}\\ (\mathbf{a} \times \mathbf{b}) \cdot \mathbf{c} &= \mathbf{a} \cdot (\mathbf{b} \times \mathbf{c})\\ (\mathbf{a} \times \mathbf{b}) \cdot \mathbf{c} &= (\mathbf{b} \times \mathbf{c}) \cdot \mathbf{a} = (\mathbf{c} \times \mathbf{a}) \cdot \mathbf{b}\\ (\mathbf{a} \times \mathbf{b}) \times \mathbf{c} &= \mathbf{b}(\mathbf{a} \cdot \mathbf{c}) - \mathbf{a}(\mathbf{b} \cdot \mathbf{c})\\ \mathbf{a} \times (\mathbf{b} \times \mathbf{c}) &= \mathbf{b}(\mathbf{a} \cdot \mathbf{c}) - \mathbf{c}(\mathbf{a} \cdot \mathbf{b})\\\end{split}\]

### 替代表示

如果我们有三个非共面的单位向量 \(\mathbf{\hat{n}_x},\mathbf{\hat{n}_y},\mathbf{\hat{n}_z}\)，我们可以将任意向量 \(\mathbf{a}\) 表示为 \(\mathbf{a} = a_x \mathbf{\hat{n}_x} + a_y \mathbf{\hat{n}_y} + a_z \mathbf{\hat{n}_z}\)。在这种情况下，\(\mathbf{\hat{n}_x},\mathbf{\hat{n}_y},\mathbf{\hat{n}_z}\) 被称为基底。\(a_x, a_y, a_z\) 被称为测量数。通常单位向量是相互垂直的，这时我们可以称它们为正交基，通常是右手的。

现在我们可以通过以下方式测试两个向量的相等性。对于向量：

\[\begin{split}\mathbf{a} &= a_x \mathbf{\hat{n}_x} + a_y \mathbf{\hat{n}_y} + a_z \mathbf{\hat{n}_z}\\ \mathbf{b} &= b_x \mathbf{\hat{n}_x} + b_y \mathbf{\hat{n}_y} + b_z \mathbf{\hat{n}_z}\\\end{split}\]

我们可以在以下情况下宣称相等：\(a_x = b_x, a_y = b_y, a_z = b_z\)。

同样的两个向量的向量加法表示为：

\[\mathbf{a} + \mathbf{b} = (a_x + b_x)\mathbf{\hat{n}_x} + (a_y + b_y) \mathbf{\hat{n}_y} + (a_z + b_z) \mathbf{\hat{n}_z}\]

现在定义乘法运算如下：

\[\begin{split}\alpha \mathbf{b} &= \alpha b_x \mathbf{\hat{n}_x} + \alpha b_y \mathbf{\hat{n}_y} + \alpha b_z \mathbf{\hat{n}_z}\\ \mathbf{a} \cdot \mathbf{b} &= a_x b_x + a_y b_y + a_z b_z\\ \mathbf{a} \times \mathbf{b} &= \textrm{det }\begin{bmatrix} \mathbf{\hat{n}_x} & \mathbf{\hat{n}_y} & \mathbf{\hat{n}_z} \\ a_x & a_y & a_z \\ b_x & b_y & b_z \end{bmatrix}\\ (\mathbf{a} \times \mathbf{b}) \cdot \mathbf{c} &= \textrm{det }\begin{bmatrix} a_x & a_y & a_z \\ b_x & b_y & b_z \\ c_x & c_y & c_z \end{bmatrix}\\\end{split}\]

要在给定的基础上写出一个向量，我们可以这样做：

\[\begin{split}\mathbf{a} = (\mathbf{a}\cdot\mathbf{\hat{n}_x})\mathbf{\hat{n}_x} + (\mathbf{a}\cdot\mathbf{\hat{n}_y})\mathbf{\hat{n}_y} + (\mathbf{a}\cdot\mathbf{\hat{n}_z})\mathbf{\hat{n}_z}\\\end{split}\]

### Examples

Some numeric examples of these operations follow:

\[\begin{split}\mathbf{a} &= \mathbf{\hat{n}_x} + 5 \mathbf{\hat{n}_y}\\ \mathbf{b} &= \mathbf{\hat{n}_y} + \alpha \mathbf{\hat{n}_z}\\ \mathbf{a} + \mathbf{b} &= \mathbf{\hat{n}_x} + 6 \mathbf{\hat{n}_y} + \alpha \mathbf{\hat{n}_z}\\ \mathbf{a} \cdot \mathbf{b} &= 5\\ \mathbf{a} \cdot \mathbf{\hat{n}_y} &= 5\\ \mathbf{a} \cdot \mathbf{\hat{n}_z} &= 0\\ \mathbf{a} \times \mathbf{b} &= 5 \alpha \mathbf{\hat{n}_x} - \alpha \mathbf{\hat{n}_y} + \mathbf{\hat{n}_z}\\ \mathbf{b} \times \mathbf{a} &= -5 \alpha \mathbf{\hat{n}_x} + \alpha \mathbf{\hat{n}_y} - \mathbf{\hat{n}_z}\\\end{split}\]

## Vector Calculus

处理带有移动物体的向量微积分，我们必须引入参考框架的概念。一个经典的例子是火车沿着轨道运行，你和朋友都在里面。如果你和朋友都坐着，那么你们之间的相对速度为零。从火车外部的观察者来看，你们两个都会有速度。

我们现在将更严格地应用这一定义。一个参考框架是我们选择从中观察向量量的虚拟“平台”。如果我们有一个参考框架\(\mathbf{N}\)，向量\(\mathbf{a}\)在框架\(\mathbf{N}\)中被认为是固定的，如果从\(\mathbf{N}\)观察时它的任何特性都不会改变。我们通常会为每个参考框架分配一个固定的正交基向量集；\(\mathbf{N}\)将具有\(\mathbf{\hat{n}_x}, \mathbf{\hat{n}_y},\mathbf{\hat{n}_z}\)作为其基向量。

### Derivatives of Vectors

一个在参考框架中不固定的向量，因此在从该框架观察时具有不同的特性。微积分是研究变化的学科，为了处理不同参考框架中固定和不固定向量的特殊性，我们需要在定义上更加明确。

<svg class="align-center" width="450" height="290" id="svg4068" version="1.1" inkscape:version="0.48.1 r9760" sodipodi:docname="vec_fix_notfix.svg"><metadata id="metadata4073"><rdf><work rdf:about=""><format>image/svg+xml</format></work></rdf></metadata> <g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(0,-752.36218)"><text xml:space="preserve" style="font-size:15px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="252.31055" y="151.38632" id="text3075" sodipodi:linespacing="125%" transform="translate(0,752.36218)"><tspan sodipodi:role="line" id="tspan3077" x="252.31055" y="151.38632" style="font-size:25px">A</tspan></text> <text xml:space="preserve" style="font-size:25px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="191.31238" y="75.970428" id="text3079" sodipodi:linespacing="125%" transform="translate(0,752.36218)"><tspan sodipodi:role="line" id="tspan3081" x="191.31238" y="75.970428">B</tspan></text> <text xml:space="preserve" style="font-size:20px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="113.12384" y="44.362293" id="text3083" sodipodi:linespacing="125%" transform="translate(0,752.36218)"><tspan sodipodi:role="line" id="tspan3085" x="113.12384" y="44.362293">f</tspan></text> <text xml:space="preserve" style="font-size:20px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="55.452866" y="89.279114" id="text3091" sodipodi:linespacing="125%" transform="translate(0,752.36218)"><tspan sodipodi:role="line" id="tspan3093" x="55.452866" y="89.279114">e</tspan></text> <text xml:space="preserve" style="font-size:20px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="46.580406" y="178.00369" id="text3099" sodipodi:linespacing="125%" transform="translate(0,752.36218)"><tspan sodipodi:role="line" id="tspan3101" x="46.580406" y="178.00369">d</tspan></text> <text xml:space="preserve" style="font-size:20px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="65.43438" y="227.35675" id="text3103" sodipodi:linespacing="125%" transform="translate(0,752.36218)"><tspan sodipodi:role="line" id="tspan3105" x="65.43438" y="227.35675">c</tspan></text> <text xml:space="preserve" style="font-size:20px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="336.59888" y="882.12189" id="text3107" sodipodi:linespacing="125%"><tspan sodipodi:role="line" x="336.59888" y="907.12189" id="tspan3111">c x</tspan><tspan sodipodi:role="line" x="336.59888" y="932.12189" id="tspan3113">d x</tspan><tspan sodipodi:role="line" x="336.59888" y="957.12189" id="tspan3115">e</tspan> <tspan sodipodi:role="line" x="336.59888" y="982.12189" id="tspan3117">f</tspan></text> <text xml:space="preserve" style="font-size:20px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="331.60812" y="849.40472" id="text3131" sodipodi:linespacing="125%"><tspan sodipodi:role="line" id="tspan3133" x="331.60812" y="849.40472">修复在:</tspan></text> <text xml:space="preserve" style="font-size:25px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="380.96118" y="956.98328" id="text3334" sodipodi:linespacing="125%"><tspan sodipodi:role="line" id="tspan3336" x="380.96118" y="956.98328" style="font-size:20px">x</tspan><tspan sodipodi:role="line" x="380.96118" y="988.23328" id="tspan3338" style="font-size:20px">x</tspan></text> <text xml:space="preserve" style="font-size:25px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="353.23474" y="130.31422" id="text3340" sodipodi:linespacing="125%" transform="translate(0,752.36218)"><tspan sodipodi:role="line" id="tspan3342" x="353.23474" y="130.31422">A</tspan></text> <text xml:space="preserve" style="font-size:25px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="383.17929" y="128.65065" id="text3344" sodipodi:linespacing="125%" transform="translate(0,752.36218)"><tspan sodipodi:role="line" id="tspan3346" x="383.17929" y="128.65065">B</tspan></text></g></svg>

在上图中，我们有向量 \(\mathbf{c,d,e,f}\)。如果我们对 \(\mathbf{e}\) 求关于 \(\theta\) 的导数：

\[\frac{d \mathbf{e}}{d \theta}\]

目前尚不清楚导数是什么。如果你是从框架 \(\mathbf{A}\) 观察的话，导数显然不为零。如果你是从框架 \(\mathbf{B}\) 观察的话，导数为零。因此，我们将引入框架作为导数符号的一部分：

\[\begin{split}\frac{^{\mathbf{A}} d \mathbf{e}}{d \theta} &\neq 0 \textrm{，在参考框架 } \mathbf{A} \textrm{ 中，} \mathbf{e} \textrm{ 对 } \theta \textrm{ 的导数不为零。}\\ \frac{^{\mathbf{B}} d \mathbf{e}}{d \theta} &= 0 \textrm{，在参考框架 } \mathbf{B} \textrm{ 中，} \mathbf{e} \textrm{ 对 } \theta \textrm{ 的导数为零。}\\ \frac{^{\mathbf{A}} d \mathbf{c}}{d \theta} &= 0 \textrm{，在参考框架 } \mathbf{A} \textrm{ 中，} \mathbf{c} \textrm{ 对 } \theta \textrm{ 的导数为零。}\\ \frac{^{\mathbf{B}} d \mathbf{c}}{d \theta} &\neq 0 \textrm{，在参考框架 } \mathbf{B} \textrm{ 中，} \mathbf{c} \textrm{ 对 } \theta \textrm{ 的导数不为零。}\\\end{split}\]

下面是特定参考框架中向量导数的一些额外性质：

\[\begin{split}\frac{^{\mathbf{A}} d}{dt}(\mathbf{a} + \mathbf{b}) &= \frac{^{\mathbf{A}} d\mathbf{a}}{dt} + \frac{^{\mathbf{A}} d\mathbf{b}}{dt}\\ \frac{^{\mathbf{A}} d}{dt}\gamma \mathbf{a} &= \frac{ d \gamma}{dt}\mathbf{a} + \gamma\frac{^{\mathbf{A}} d\mathbf{a}}{dt}\\ \frac{^{\mathbf{A}} d}{dt}(\mathbf{a} \times \mathbf{b}) &= \frac{^{\mathbf{A}} d\mathbf{a}}{dt} \times \mathbf{b} + \mathbf{a} \times \frac{^{\mathbf{A}} d\mathbf{b}}{dt}\\\end{split}\]

### 关联基向量集合

现在我们需要定义两个不同参考框架之间的关系；或者如何将一个框架的基向量与另一个框架的基向量相关联。我们可以使用方向余弦矩阵（DCM）来实现这一点。方向余弦矩阵将一个框架的基向量与另一个框架的基向量相关联，如下所示：

\[\begin{split}\begin{bmatrix} \mathbf{\hat{a}_x} \\ \mathbf{\hat{a}_y} \\ \mathbf{\hat{a}_z} \\ \end{bmatrix} = \begin{bmatrix} ^{\mathbf{A}} \mathbf{C}^{\mathbf{B}} \end{bmatrix} \begin{bmatrix} \mathbf{\hat{b}_x} \\ \mathbf{\hat{b}_y} \\ \mathbf{\hat{b}_z} \\ \end{bmatrix}\end{split}\]

当两个框架（比如 \(\mathbf{A}\) 和 \(\mathbf{B}\)）最初对齐时，其中一个框架的所有基向量围绕与一个基向量对齐的轴旋转，我们称这些框架通过简单旋转相关联。下图展示了这一点：

<svg class="align-center" width="250" height="250" id="svg3601" version="1.1" inkscape:version="0.48.1 r9760" sodipodi:docname="New document 10"><metadata id="metadata3606"><rdf><work rdf:about=""><format>image/svg+xml</format></work></rdf></metadata> <g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(0,-802.36218)"><text xml:space="preserve" style="font-size:20px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="34.67466" y="151.96918" id="text3615" sodipodi:linespacing="125%" transform="translate(0,802.36218)"><tspan sodipodi:role="line" id="tspan3617" x="34.67466" y="151.96918">A</tspan></text> <text xml:space="preserve" style="font-size:20px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="121.14726" y="126.71233" id="text3619" sodipodi:linespacing="125%" transform="translate(0,802.36218)"><tspan sodipodi:role="line" id="tspan3621" x="121.14726" y="126.71233">B</tspan></text> <text xml:space="preserve" style="font-size:20px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="107.87672" y="963.74915" id="text3631" sodipodi:linespacing="125%"><tspan sodipodi:role="line" id="tspan3633" x="107.87672" y="963.74915" style="font-size:14px">θ</tspan></text> <text sodipodi:linespacing="125%" id="text3635" y="985.15326" x="48.801373" style="font-size:20px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" xml:space="preserve"><tspan style="font-size:14px" y="985.15326" x="48.801373" id="tspan3637" sodipodi:role="line">θ</tspan></text> <text xml:space="preserve" style="font-size:16px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="81.763702" y="24.828768" id="text3639" sodipodi:linespacing="125%" transform="translate(0,802.36218)"><tspan sodipodi:role="line" id="tspan3641" x="81.763702" y="24.828768">a<tspan style="font-size:65.00091553%;baseline-shift:sub" id="tspan3661">z</tspan></tspan><tspan sodipodi:role="line" x="81.763702" y="44.828766" id="tspan3643">b<tspan style="font-size:65%;baseline-shift:sub" id="tspan3663">z</tspan></tspan></text> <text xml:space="preserve" style="font-size:16px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="13.270548" y="201.62671" id="text3649" sodipodi:linespacing="125%" transform="translate(0,802.36218)"><tspan sodipodi:role="line" id="tspan3651" x="13.270548" y="201.62671">a<tspan style="font-size:65%;baseline-shift:sub" id="tspan3653">x</tspan></tspan></text> <text xml:space="preserve" style="font-size:16px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="59.503422" y="1010.4102" id="text3655" sodipodi:linespacing="125%"><tspan sodipodi:role="line" id="tspan3657" x="59.503422" y="1010.4102">b<tspan style="font-size:65.00091553%;baseline-shift:sub" id="tspan3659">x</tspan></tspan></text> <text xml:space="preserve" style="font-size:16px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="157.10616" y="170.37671" id="text3665" sodipodi:linespacing="125%" transform="translate(0,802.36218)"><tspan sodipodi:role="line" id="tspan3667" x="157.10616" y="170.37671">a<tspan style="font-size:65%;baseline-shift:sub" id="tspan3669">y</tspan></tspan></text> <text xml:space="preserve" style="font-size:16px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="158.8185" y="139.98288" id="text3671" sodipodi:linespacing="125%" transform="translate(0,802.36218)"><tspan sodipodi:role="line" id="tspan3673" x="158.8185" y="139.98288">b<tspan style="font-size:65%;baseline-shift:sub" id="tspan3675">y</tspan></tspan></text></g></svg>

上述旋转是绕 Z 轴简单旋转，角度为 \(\theta\)。请注意，在旋转后，基向量 \(\mathbf{\hat{a}_z}\) 和 \(\mathbf{\hat{b}_z}\) 仍然对齐。

这个旋转可以由以下方向余弦矩阵来表征：

\[\begin{split}^{\mathbf{A}}\mathbf{C}^{\mathbf{B}} = \begin{bmatrix} \cos(\theta) & - \sin(\theta) & 0\\ \sin(\theta) & \cos(\theta) & 0\\ 0 & 0 & 1\\ \end{bmatrix}\end{split}\]

简单的绕 X 和 Y 轴的旋转由以下方式定义：

\[ \begin{align}\begin{aligned}\begin{split}\textrm{绕 x 轴旋转的 DCM: } \begin{bmatrix} 1 & 0 & 0\\ 0 & \cos(\theta) & -\sin(\theta)\\ 0 & \sin(\theta) & \cos(\theta) \end{bmatrix}\end{split}\\\begin{split}\textrm{绕 y 轴旋转的 DCM: } \begin{bmatrix} \cos(\theta) & 0 & \sin(\theta)\\ 0 & 1 & 0\\ -\sin(\theta) & 0 & \cos(\theta)\\ \end{bmatrix}\end{split}\end{aligned}\end{align} \]

正方向的旋转通过右手规则定义。

方向余弦矩阵还涉及到基向量组之间点积的定义。如果我们有两个带有关联基向量的参考坐标系，它们的方向余弦矩阵可以定义为：

\[\begin{split}\begin{bmatrix} C_{xx} & C_{xy} & C_{xz}\\ C_{yx} & C_{yy} & C_{yz}\\ C_{zx} & C_{zy} & C_{zz}\\ \end{bmatrix} = \begin{bmatrix} \mathbf{\hat{a}_x}\cdot\mathbf{\hat{b}_x} & \mathbf{\hat{a}_x}\cdot\mathbf{\hat{b}_y} & \mathbf{\hat{a}_x}\cdot\mathbf{\hat{b}_z}\\ \mathbf{\hat{a}_y}\cdot\mathbf{\hat{b}_x} & \mathbf{\hat{a}_y}\cdot\mathbf{\hat{b}_y} & \mathbf{\hat{a}_y}\cdot\mathbf{\hat{b}_z}\\ \mathbf{\hat{a}_z}\cdot\mathbf{\hat{b}_x} & \mathbf{\hat{a}_z}\cdot\mathbf{\hat{b}_y} & \mathbf{\hat{a}_z}\cdot\mathbf{\hat{b}_z}\\ \end{bmatrix}\end{split}\]

此外，方向余弦矩阵是正交的，即：

\[\begin{split}^{\mathbf{A}}\mathbf{C}^{\mathbf{B}} = (^{\mathbf{B}}\mathbf{C}^{\mathbf{A}})^{-1}\\ = (^{\mathbf{B}}\mathbf{C}^{\mathbf{A}})^T\\\end{split}\]

如果我们有参考坐标系 \(\mathbf{A}\) 和 \(\mathbf{B}\)，在这个例子中经历了简单的绕 Z 轴旋转，旋转角度为 \(\theta\)，我们将会有两组基向量。然后我们可以定义两个向量：\(\mathbf{a} = \mathbf{\hat{a}_x} + \mathbf{\hat{a}_y} + \mathbf{\hat{a}_z}\) 和 \(\mathbf{b} = \mathbf{\hat{b}_x} + \mathbf{\hat{b}_y} + \mathbf{\hat{b}_z}\)。如果我们希望在 \(\mathbf{A}\) 坐标系中表达 \(\mathbf{b}\)，我们执行以下操作：

\[\begin{split}\mathbf{b} &= \mathbf{\hat{b}_x} + \mathbf{\hat{b}_y} + \mathbf{\hat{b}_z}\\ \mathbf{b} &= \begin{bmatrix}\mathbf{\hat{a}_x}\cdot (\mathbf{\hat{b}_x} + \mathbf{\hat{b}_y} + \mathbf{\hat{b}_z})\end{bmatrix} \mathbf{\hat{a}_x} + \begin{bmatrix}\mathbf{\hat{a}_y}\cdot (\mathbf{\hat{b}_x} + \mathbf{\hat{b}_y} + \mathbf{\hat{b}_z})\end{bmatrix} \mathbf{\hat{a}_y} + \begin{bmatrix}\mathbf{\hat{a}_z}\cdot (\mathbf{\hat{b}_x} + \mathbf{\hat{b}_y} + \mathbf{\hat{b}_z})\end{bmatrix} \mathbf{\hat{a}_z}\\ \mathbf{b} &= (\cos(\theta) - \sin(\theta))\mathbf{\hat{a}_x} + (\sin(\theta) + \cos(\theta))\mathbf{\hat{a}_y} + \mathbf{\hat{a}_z}\end{split}\]

如果我们希望在**B**中表示\(\mathbf{a}\)，我们可以这样做：

\[\begin{split}\mathbf{a} &= \mathbf{\hat{a}_x} + \mathbf{\hat{a}_y} + \mathbf{\hat{a}_z}\\ \mathbf{a} &= \begin{bmatrix}\mathbf{\hat{b}_x}\cdot (\mathbf{\hat{a}_x} + \mathbf{\hat{a}_y} + \mathbf{\hat{a}_z})\end{bmatrix} \mathbf{\hat{b}_x} + \begin{bmatrix}\mathbf{\hat{b}_y}\cdot (\mathbf{\hat{a}_x} + \mathbf{\hat{a}_y} + \mathbf{\hat{a}_z})\end{bmatrix} \mathbf{\hat{b}_y} + \begin{bmatrix}\mathbf{\hat{b}_z}\cdot (\mathbf{\hat{a}_x} + \mathbf{\hat{a}_y} + \mathbf{\hat{a}_z})\end{bmatrix} \mathbf{\hat{b}_z}\\ \mathbf{a} &= (\cos(\theta) + \sin(\theta))\mathbf{\hat{b}_x} + (-\sin(\theta)+\cos(\theta))\mathbf{\hat{b}_y} + \mathbf{\hat{b}_z}\end{split}\]

### 多个参考系下的导数

如果我们有参考系**A**和**B**，我们将会有两组基向量。然后我们可以定义两个向量：\(\mathbf{a} = a_x\mathbf{\hat{a}_x} + a_y\mathbf{\hat{a}_y} + a_z\mathbf{\hat{a}_z}\) 和 \(\mathbf{b} = b_x\mathbf{\hat{b}_x} + b_y\mathbf{\hat{b}_y} + b_z\mathbf{\hat{b}_z}\)。如果我们想要在参考系**A**中对\(\mathbf{b}\)进行导数运算，我们必须首先在**A**中表示它，然后对测量数字进行导数运算：

\[\frac{^{\mathbf{A}} d\mathbf{b}}{dx} = \frac{d (\mathbf{b}\cdot \mathbf{\hat{a}_x} )}{dx} \mathbf{\hat{a}_x} + \frac{d (\mathbf{b}\cdot \mathbf{\hat{a}_y} )}{dx} \mathbf{\hat{a}_y} + \frac{d (\mathbf{b}\cdot \mathbf{\hat{a}_z} )}{dx} \mathbf{\hat{a}_z} +\]

### 向量微积分的示例

一个矢量微积分的例子：

<svg class="align-center" width="340" height="490" id="svg3312" version="1.1" inkscape:version="0.48.1 r9760" sodipodi:docname="New document 13"><metadata id="metadata3317"><rdf><work rdf:about=""><format>image/svg+xml</format></work></rdf></metadata> <g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(0,-552.36218)"><text xml:space="preserve" style="font-size:20px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="115" y="977.36218" id="text3368" sodipodi:linespacing="125%"><tspan sodipodi:role="line" id="tspan3370" x="115" y="977.36218" style="font-size:30px">A</tspan></text> <text xml:space="preserve" style="font-size:15px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="218.33334" y="966.52887" id="text3372" sodipodi:linespacing="125%"><tspan sodipodi:role="line" id="tspan3374" x="218.33334" y="966.52887" style="font-size:30px">B</tspan></text> <text xml:space="preserve" style="font-size:15px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="32.5" y="291.66666" id="text3380" sodipodi:linespacing="125%" transform="translate(0,552.36218)"><tspan sodipodi:role="line" id="tspan3382" x="32.5" y="291.66666" style="font-size:20px">l</tspan></text> <text xml:space="preserve" style="font-size:15px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="207.5" y="70.833336" id="text3388" sodipodi:linespacing="125%" transform="translate(0,552.36218)"><tspan sodipodi:role="line" id="tspan3390" x="207.5" y="70.833336">x</tspan></text> <text xml:space="preserve" style="font-size:15px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="113.33333" y="380" id="text3392" sodipodi:linespacing="125%" transform="translate(0,552.36218)"><tspan sodipodi:role="line" id="tspan3394" x="113.33333" y="380">a<tspan style="font-size:65%;baseline-shift:sub" id="tspan3414">x</tspan></tspan></text> <text xml:space="preserve" style="font-size:15px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="84.166664" y="345.83334" id="text3396" sodipodi:linespacing="125%" transform="translate(0,552.36218)"><tspan sodipodi:role="line" id="tspan3398" x="84.166664" y="345.83334">a<tspan style="font-size:65%;baseline-shift:sub" id="tspan3412">y</tspan></tspan></text> <text xml:space="preserve" style="font-size:15px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="318.33334" y="375" id="text3400" sodipodi:linespacing="125%" transform="translate(0,552.36218)"><tspan sodipodi:role="line" id="tspan3402" x="318.33334" y="375">b<tspan style="font-size:65%;baseline-shift:sub" id="tspan3418">x</tspan></tspan></text> <text xml:space="preserve" style="font-size:15px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="288.33334" y="342.5" id="text3404" sodipodi:linespacing="125%" transform="translate(0,552.36218)"><tspan sodipodi:role="line" id="tspan3406" x="288.33334" y="342.5">b<tspan style="font-size:65%;baseline-shift:sub" id="tspan3422">y</tspan></tspan></text> <text xml:space="preserve" style="font-size:15px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="216.66667" y="257.5" id="text3408" sodipodi:linespacing="125%" transform="translate(0,552.36218)"><tspan sodipodi:role="line" id="tspan3410" x="216.66667" y="257.5">c</tspan></text> <text xml:space="preserve" style="font-size:15px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:CurrentColor;fill-opacity:1;stroke:none;font-family:Sans" x="262.5" y="659.86218" id="text3436" sodipodi:linespacing="125%"><tspan sodipodi:role="line" id="tspan3438" x="262.5" y="659.86218">θ</tspan></text></g></svg>

在本例中，我们有两个物体，每个物体都有一个附加的参考框架。我们将\(\theta\)和\(x\)视为时间的函数。我们希望知道向量\(\mathbf{c}\)在\(\mathbf{A}\)和\(\mathbf{B}\)框架中的时间导数。

首先，我们需要定义\(\mathbf{c}\)；\(\mathbf{c}=x\mathbf{\hat{b}_x}+l\mathbf{\hat{b}_y}\)。这在\(\mathbf{B}\)框架中提供了一个定义。现在我们可以执行以下操作：

\[\begin{split}\frac{^{\mathbf{B}} d \mathbf{c}}{dt} &= \frac{dx}{dt} \mathbf{\hat{b}_x} + \frac{dl}{dt} \mathbf{\hat{b}_y}\\ &= \dot{x} \mathbf{\hat{b}_x}\end{split}\]

要在\(\mathbf{A}\)框架中进行导数运算，我们必须首先将这两个框架联系起来：

\[\begin{split}^{\mathbf{A}} \mathbf{C} ^{\mathbf{B}} = \begin{bmatrix} \cos(\theta) & 0 & \sin(\theta)\\ 0 & 1 & 0\\ -\sin(\theta) & 0 & \cos(\theta)\\ \end{bmatrix}\end{split}\]

现在我们可以执行以下操作：

\[\begin{split}\frac{^{\mathbf{A}} d \mathbf{c}}{dt} &= \frac{d (\mathbf{c} \cdot \mathbf{\hat{a}_x})}{dt} \mathbf{\hat{a}_x} + \frac{d (\mathbf{c} \cdot \mathbf{\hat{a}_y})}{dt} \mathbf{\hat{a}_y} + \frac{d (\mathbf{c} \cdot \mathbf{\hat{a}_z})}{dt} \mathbf{\hat{a}_z}\\ &= \frac{d (\cos(\theta) x)}{dt} \mathbf{\hat{a}_x} + \frac{d (l)}{dt} \mathbf{\hat{a}_y} + \frac{d (-\sin(\theta) x)}{dt} \mathbf{\hat{a}_z}\\ &= (-\dot{\theta}\sin(\theta)x + \cos(\theta)\dot{x}) \mathbf{\hat{a}_x} + (\dot{\theta}\cos(\theta)x + \sin(\theta)\dot{x}) \mathbf{\hat{a}_z}\end{split}\]

注意，这是\(\mathbf{A}\)框架中\(\mathbf{c}\)的时间导数，并以\(\mathbf{A}\)框架表达。然而，我们也可以在\(\mathbf{B}\)框架中表达它，并且表达式仍然有效：

\[\begin{split}\frac{^{\mathbf{A}} d \mathbf{c}}{dt} &= (-\dot{\theta}\sin(\theta)x + \cos(\theta)\dot{x}) \mathbf{\hat{a}_x} + (\dot{\theta}\cos(\theta)x + \sin(\theta)\dot{x}) \mathbf{\hat{a}_z}\\ &= \dot{x}\mathbf{\hat{b}_x} - \theta x \mathbf{\hat{b}_z}\\\end{split}\]

注意两种表达形式在复杂度上的差异。它们是等价的，但其中一种要简单得多。这是一个非常重要的概念，因为在更复杂的形式中定义向量可能会大大减慢动力学方程的制定并增加其长度，有时甚至无法在屏幕上显示。

## 使用向量和参考框架

在所有相关数学关系被定义之后，我们才引入代码。这是由于向量的形成方式。在开始任何问题之前，必须定义一个参考框架（记得首先导入`sympy.physics.vector`）：

```py
>>> from sympy.physics.vector import *
>>> N = ReferenceFrame('N') 
```

现在我们已经创建了一个参考框架\(\mathbf{N}\)。要访问任何基向量，首先需要创建一个参考框架。现在我们已经创建了表示\(\mathbf{N}\)的对象，我们可以访问它的基向量：

```py
>>> N.x
N.x
>>> N.y
N.y
>>> N.z
N.z 
```

### 物理向量中的向量代数

现在我们可以对这些向量进行基本的代数运算。

```py
>>> N.x == N.x
True
>>> N.x == N.y
False
>>> N.x + N.y
N.x + N.y
>>> 2 * N.x + N.y
2*N.x + N.y 
```

记住，不要将标量数量添加到向量中（`N.x + 5`）；这将引发错误。在此时，我们将在我们的向量中使用 SymPy 的符号。在处理符号时，请记住参考 SymPy 的陷阱和问题。

```py
>>> from sympy import Symbol, symbols
>>> x = Symbol('x')
>>> x * N.x
x*N.x
>>> x*(N.x + N.y)
x*N.x + x*N.y 
```

在`sympy.physics.vector`中，已经实现了多个接口来进行矢量乘法，包括操作符级别、方法级别和函数级别。矢量点乘可以如下工作：

```py
>>> N.x.dot(N.x)
1
>>> N.x.dot(N.y)
0
>>> dot(N.x, N.x)
1
>>> dot(N.x, N.y)
0 
```

“官方”接口是函数接口；这是所有示例中将使用的内容。这是为了避免混淆，使属性和方法彼此紧邻，并且在操作符操作优先级的情况下。在`sympy.physics.vector`中用于矢量乘法的操作符没有正确的操作顺序；这可能导致错误。在使用操作符表示矢量乘法时，需要注意括号。

叉乘是另一种将讨论的矢量乘法。它提供了与点乘类似的接口，并伴随着相同的警告。

```py
>>> N.x.cross(N.x)
0
>>> N.x.cross(N.z)
- N.y
>>> cross(N.x, N.y)
N.z
>>> cross(N.x, (N.y + N.z))
- N.y + N.z 
```

向量还可以进行两种额外的操作：将向量归一化为长度 1，以及获取其大小。操作如下进行：

```py
>>> (N.x + N.y).normalize()
sqrt(2)/2*N.x + sqrt(2)/2*N.y
>>> (N.x + N.y).magnitude()
sqrt(2) 
```

向量通常以矩阵形式表达，特别是在数值计算中。由于矩阵形式不包含向量所定义的参考框架的任何信息，因此必须提供参考框架以从向量中提取测量数。有一个方便的函数可以实现这一点：

```py
>>> (x * N.x + 2 * x * N.y + 3 * x * N.z).to_matrix(N)
Matrix([
 [  x],
 [2*x],
 [3*x]]) 
```

### 物理向量中的矢量微积分

我们已经介绍了我们的第一个参考框架。如果我们愿意，我们可以在该框架中立即进行微分：

```py
>>> (x * N.x + N.y).diff(x, N)
N.x 
```

SymPy 有一个`diff`函数，但它目前无法与`sympy.physics.vector`中的向量一起使用，请使用`Vector`的`diff`方法。原因在于，在对`Vector`进行微分时，除了对什么进行微分外，还必须指定参考坐标系；SymPy 的`diff`函数不适合这种情况。

更有趣的情况出现在多个参考框架中。如果我们引入第二个参考框架\(\mathbf{A}\)，我们现在有了两个框架。请注意，此时我们可以添加\(\mathbf{N}\)和\(\mathbf{A}\)的分量，但不能执行矢量乘法，因为尚未定义两个框架之间的关系。

```py
>>> A = ReferenceFrame('A')
>>> A.x + N.x
N.x + A.x 
```

如果我们想进行矢量乘法，首先必须定义一个方向。`ReferenceFrame`的`orient`方法提供了这个功能。

```py
>>> A.orient(N, 'Axis', [x, N.y]) 
```

通过简单的绕 Y 轴旋转的方式，将\(\mathbf{A}\)框架相对于\(\mathbf{N}\)框架进行定位，旋转量为 x。这两个框架之间的方向余弦矩阵可以随时通过`dcm`方法查看：`A.dcm(N)`给出了方向余弦矩阵 \(^{\mathbf{A}} \mathbf{C} ^{\mathbf{N}}\)。

其他更复杂的旋转类型包括体旋转、空间旋转、四元数和任意轴旋转。体和空间旋转等效于连续进行三个简单旋转，每个旋转围绕新框架中的基向量。以下是一个例子：

```py
>>> N = ReferenceFrame('N')
>>> Bp = ReferenceFrame('Bp')
>>> Bpp = ReferenceFrame('Bpp')
>>> B = ReferenceFrame('B')
>>> q1,q2,q3 = symbols('q1 q2 q3')
>>> Bpp.orient(N,'Axis', [q1, N.x])
>>> Bp.orient(Bpp,'Axis', [q2, Bpp.y])
>>> B.orient(Bp,'Axis', [q3, Bp.z])
>>> N.dcm(B)
Matrix([
[                          cos(q2)*cos(q3),                           -sin(q3)*cos(q2),          sin(q2)],
[sin(q1)*sin(q2)*cos(q3) + sin(q3)*cos(q1), -sin(q1)*sin(q2)*sin(q3) + cos(q1)*cos(q3), -sin(q1)*cos(q2)],
[sin(q1)*sin(q3) - sin(q2)*cos(q1)*cos(q3),  sin(q1)*cos(q3) + sin(q2)*sin(q3)*cos(q1),  cos(q1)*cos(q2)]])
>>> B.orient(N,'Body',[q1,q2,q3],'XYZ')
>>> N.dcm(B)
Matrix([
[                          cos(q2)*cos(q3),                           -sin(q3)*cos(q2),          sin(q2)],
[sin(q1)*sin(q2)*cos(q3) + sin(q3)*cos(q1), -sin(q1)*sin(q2)*sin(q3) + cos(q1)*cos(q3), -sin(q1)*cos(q2)],
[sin(q1)*sin(q3) - sin(q2)*cos(q1)*cos(q3),  sin(q1)*cos(q3) + sin(q2)*sin(q3)*cos(q1),  cos(q1)*cos(q2)]]) 
```

空间方向与体方向类似，但是应用于从框架到体。体和空间旋转可以涉及两个或三个轴：‘XYZ’适用，‘YZX’、‘ZXZ’、‘YXY’等也适用。关键在于每个简单旋转是围绕不同轴进行的，与前一个不同；‘ZZX’不能完全定向一个三维空间的基向量集。

有时，创建一个新的参考框架并在一步中相对于现有框架进行定向会更方便。`orientnew`方法允许此功能，并且本质上包装了`orient`方法。在`orient`中可以做的所有事情，在`orientnew`中也可以做到。

```py
>>> C = N.orientnew('C', 'Axis', [q1, N.x]) 
```

四元数（或欧拉参数）使用 4 个值来描述框架的方向。这些内容以及任意轴旋转可以在`orient`和`orientnew`方法的帮助下找到，或者在参考文献[[Kane1983]](../mechanics/reference.html#kane1983)中了解。

最后，在开始多框架计算操作之前，我们将介绍另一个`sympy.physics.vector`工具：`dynamicsymbols`。`dynamicsymbols`是在 SymPy 中创建时间未定义函数的快捷方式。这样一个‘dynamicsymbol’的导数如下所示。

```py
>>> from sympy import diff
>>> q1, q2, q3 = dynamicsymbols('q1 q2 q3')
>>> diff(q1, Symbol('t'))
Derivative(q1(t), t) 
```

上面的‘dynamicsymbol’打印结果不太清晰；我们还将在这里介绍其他一些工具。在非交互式会话中，我们可以使用`vprint`代替 print。

```py
>>> q1
q1(t)
>>> q1d = diff(q1, Symbol('t'))
>>> vprint(q1)
q1
>>> vprint(q1d)
q1' 
```

对于交互式会话，请使用`init_vprinting`。SymPy 的`vprint`、`vpprint`、`latex`和`vlatex`也存在类似的模拟。

```py
>>> from sympy.physics.vector import init_vprinting
>>> init_vprinting(pretty_print=False)
>>> q1
q1
>>> q1d
q1' 
```

在`sympy.physics.vector`中，任何时间变化的量都应使用‘dynamicsymbol’来表示，无论是坐标、变化的位置还是力量。‘dynamicsymbol’的主要用途是用于速度和坐标（在文档的运动学部分将有更多讨论）。

现在我们将用一个‘dynamicsymbol’定义我们新框架的方向，并且可以轻松地进行导数和时间导数。以下是一些例子。

```py
>>> N = ReferenceFrame('N')
>>> B = N.orientnew('B', 'Axis', [q1, N.x])
>>> (B.y*q2 + B.z).diff(q2, N)
B.y
>>> (B.y*q2 + B.z).dt(N)
(-q1' + q2')*B.y + q2*q1'*B.z 
```

注意，输出向量保持了它们提供时所在的框架不变。对于由多个框架的基向量组成分量的向量，这一点仍然成立：

```py
>>> (B.y*q2 + B.z + q2*N.x).diff(q2, N)
N.x + B.y 
```

### 向量的编码方式

接下来是如何在`sympy.physics.vector`中的代码中定义向量的简要说明。这是为了那些想要了解此部分如何工作的人提供的，不需要阅读它就可以使用此模块；除非您想了解如何实现此模块，否则不要阅读它。

每个`Vector`的主要信息存储在`args`属性中，该属性为每个相关帧中的每个基向量存储三个测量数。在创建`ReferenceFrame`之前，代码中不存在向量。此时，参考框架的`x`、`y`和`z`属性是不可变的`Vector`，其测量数分别为[1,0,0]、[0,1,0]和[0,0,1]。一旦可以访问这些向量，可以通过使用基向量进行代数运算来创建新向量。向量可以具有多个帧的分量。这就是为什么`args`是一个列表的原因；它的列表长度等于其组件中唯一`ReferenceFrames`的数量，即如果我们的新向量中有`A`和`B`帧基向量，则`args`的长度为 2；如果它有`A`、`B`和`C`帧基向量，则`args`的长度为 3。

`args`列表中的每个元素都是一个 2 元组；第一个元素是 SymPy `Matrix`（存储每组基向量的测量数），第二个元素是`ReferenceFrame`，用于将这些测量数与之关联。

`ReferenceFrame`存储了几个东西。首先，它存储您在创建时提供的名称（`name`属性）。它还存储方向余弦矩阵，使用`orientnew`方法在创建时定义，或在创建后调用`orient`方法。方向余弦矩阵由 SymPy 的`Matrix`表示，并且是一个字典的一部分，其中键是`ReferenceFrame`，值是`Matrix`；这些设置是双向的；当您将`A`定向到`N`时，您设置了`A`的方向字典，以包括`N`及其`Matrix`，但您也设置了`N`的方向字典，以包括`A`及其`Matrix`（该 DCM 是另一个的转置）。
