- en: What’s new in 1.2.2 (February 09, 2021)
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://pandas.pydata.org/docs/whatsnew/v1.2.2.html](https://pandas.pydata.org/docs/whatsnew/v1.2.2.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: These are the changes in pandas 1.2.2\. See [Release notes](index.html#release)
    for a full changelog including other versions of pandas.
  prefs: []
  type: TYPE_NORMAL
- en: '## Fixed regressions'
  prefs: []
  type: TYPE_NORMAL
- en: Fixed regression in [`read_excel()`](../reference/api/pandas.read_excel.html#pandas.read_excel
    "pandas.read_excel") that caused it to raise `AttributeError` when checking version
    of older xlrd versions ([GH 38955](https://github.com/pandas-dev/pandas/issues/38955))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame`](../reference/api/pandas.DataFrame.html#pandas.DataFrame
    "pandas.DataFrame") constructor reordering element when construction from datetime
    ndarray with dtype not `"datetime64[ns]"` ([GH 39422](https://github.com/pandas-dev/pandas/issues/39422))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.astype()`](../reference/api/pandas.DataFrame.astype.html#pandas.DataFrame.astype
    "pandas.DataFrame.astype") and [`Series.astype()`](../reference/api/pandas.Series.astype.html#pandas.Series.astype
    "pandas.Series.astype") not casting to bytes dtype ([GH 39474](https://github.com/pandas-dev/pandas/issues/39474))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`to_pickle()`](../reference/api/pandas.DataFrame.to_pickle.html#pandas.DataFrame.to_pickle
    "pandas.DataFrame.to_pickle") failing to create bz2/xz compressed pickle files
    with `protocol=5` ([GH 39002](https://github.com/pandas-dev/pandas/issues/39002))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`pandas.testing.assert_series_equal()`](../reference/api/pandas.testing.assert_series_equal.html#pandas.testing.assert_series_equal
    "pandas.testing.assert_series_equal") and [`pandas.testing.assert_frame_equal()`](../reference/api/pandas.testing.assert_frame_equal.html#pandas.testing.assert_frame_equal
    "pandas.testing.assert_frame_equal") always raising `AssertionError` when comparing
    extension dtypes ([GH 39410](https://github.com/pandas-dev/pandas/issues/39410))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`to_csv()`](../reference/api/pandas.DataFrame.to_csv.html#pandas.DataFrame.to_csv
    "pandas.DataFrame.to_csv") opening `codecs.StreamWriter` in binary mode instead
    of in text mode and ignoring user-provided `mode` ([GH 39247](https://github.com/pandas-dev/pandas/issues/39247))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in `Categorical.astype()` casting to incorrect dtype when `np.int32`
    is passed to dtype argument ([GH 39402](https://github.com/pandas-dev/pandas/issues/39402))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`to_excel()`](../reference/api/pandas.DataFrame.to_excel.html#pandas.DataFrame.to_excel
    "pandas.DataFrame.to_excel") creating corrupt files when appending (`mode="a"`)
    to an existing file ([GH 39576](https://github.com/pandas-dev/pandas/issues/39576))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.transform()`](../reference/api/pandas.DataFrame.transform.html#pandas.DataFrame.transform
    "pandas.DataFrame.transform") failing in case of an empty DataFrame or Series
    ([GH 39636](https://github.com/pandas-dev/pandas/issues/39636))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`groupby()`](../reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby
    "pandas.DataFrame.groupby") or [`resample()`](../reference/api/pandas.DataFrame.resample.html#pandas.DataFrame.resample
    "pandas.DataFrame.resample") when aggregating an all-NaN or numeric object dtype
    column ([GH 39329](https://github.com/pandas-dev/pandas/issues/39329))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`Rolling.count()`](../reference/api/pandas.core.window.rolling.Rolling.count.html#pandas.core.window.rolling.Rolling.count
    "pandas.core.window.rolling.Rolling.count") where the `min_periods` argument would
    be set to `0` after the operation ([GH 39554](https://github.com/pandas-dev/pandas/issues/39554))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Fixed regression in [`read_excel()`](../reference/api/pandas.read_excel.html#pandas.read_excel
    "pandas.read_excel") that incorrectly raised when the argument `io` was a non-path
    and non-buffer and the `engine` argument was specified ([GH 39528](https://github.com/pandas-dev/pandas/issues/39528))  ##
    Bug fixes'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[`pandas.read_excel()`](../reference/api/pandas.read_excel.html#pandas.read_excel
    "pandas.read_excel") error message when a specified `sheetname` does not exist
    is now uniform across engines ([GH 39250](https://github.com/pandas-dev/pandas/issues/39250))'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed bug in [`pandas.read_excel()`](../reference/api/pandas.read_excel.html#pandas.read_excel
    "pandas.read_excel") producing incorrect results when the engine `openpyxl` is
    used and the excel file is missing or has incorrect dimension information; the
    fix requires `openpyxl` >= 3.0.0, prior versions may still fail ([GH 38956](https://github.com/pandas-dev/pandas/issues/38956),
    [GH 39001](https://github.com/pandas-dev/pandas/issues/39001))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Fixed bug in [`pandas.read_excel()`](../reference/api/pandas.read_excel.html#pandas.read_excel
    "pandas.read_excel") sometimes producing a `DataFrame` with trailing rows of `np.nan`
    when the engine `openpyxl` is used ([GH 39181](https://github.com/pandas-dev/pandas/issues/39181))  ##
    Contributors'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A total of 14 people contributed patches to this release. People with a “+”
    by their names contributed a patch for the first time.
  prefs: []
  type: TYPE_NORMAL
- en: Andrew Wieteska
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Erfan Nariman
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Joris Van den Bossche
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Matthew Roeschke
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: MeeseeksMachine
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Pandas Development Team
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Pav A
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Richard Shadrach
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Simon Hawkins
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Thomas Li
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Torsten Wörtwein
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Vladimir Podolskiy +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: jbrockmendel
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'patrick  ## Fixed regressions'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`read_excel()`](../reference/api/pandas.read_excel.html#pandas.read_excel
    "pandas.read_excel") that caused it to raise `AttributeError` when checking version
    of older xlrd versions ([GH 38955](https://github.com/pandas-dev/pandas/issues/38955))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame`](../reference/api/pandas.DataFrame.html#pandas.DataFrame
    "pandas.DataFrame") constructor reordering element when construction from datetime
    ndarray with dtype not `"datetime64[ns]"` ([GH 39422](https://github.com/pandas-dev/pandas/issues/39422))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.astype()`](../reference/api/pandas.DataFrame.astype.html#pandas.DataFrame.astype
    "pandas.DataFrame.astype") and [`Series.astype()`](../reference/api/pandas.Series.astype.html#pandas.Series.astype
    "pandas.Series.astype") not casting to bytes dtype ([GH 39474](https://github.com/pandas-dev/pandas/issues/39474))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`to_pickle()`](../reference/api/pandas.DataFrame.to_pickle.html#pandas.DataFrame.to_pickle
    "pandas.DataFrame.to_pickle") failing to create bz2/xz compressed pickle files
    with `protocol=5` ([GH 39002](https://github.com/pandas-dev/pandas/issues/39002))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`pandas.testing.assert_series_equal()`](../reference/api/pandas.testing.assert_series_equal.html#pandas.testing.assert_series_equal
    "pandas.testing.assert_series_equal") and [`pandas.testing.assert_frame_equal()`](../reference/api/pandas.testing.assert_frame_equal.html#pandas.testing.assert_frame_equal
    "pandas.testing.assert_frame_equal") always raising `AssertionError` when comparing
    extension dtypes ([GH 39410](https://github.com/pandas-dev/pandas/issues/39410))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`to_csv()`](../reference/api/pandas.DataFrame.to_csv.html#pandas.DataFrame.to_csv
    "pandas.DataFrame.to_csv") opening `codecs.StreamWriter` in binary mode instead
    of in text mode and ignoring user-provided `mode` ([GH 39247](https://github.com/pandas-dev/pandas/issues/39247))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in `Categorical.astype()` casting to incorrect dtype when `np.int32`
    is passed to dtype argument ([GH 39402](https://github.com/pandas-dev/pandas/issues/39402))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`to_excel()`](../reference/api/pandas.DataFrame.to_excel.html#pandas.DataFrame.to_excel
    "pandas.DataFrame.to_excel") creating corrupt files when appending (`mode="a"`)
    to an existing file ([GH 39576](https://github.com/pandas-dev/pandas/issues/39576))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`DataFrame.transform()`](../reference/api/pandas.DataFrame.transform.html#pandas.DataFrame.transform
    "pandas.DataFrame.transform") failing in case of an empty DataFrame or Series
    ([GH 39636](https://github.com/pandas-dev/pandas/issues/39636))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`groupby()`](../reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby
    "pandas.DataFrame.groupby") or [`resample()`](../reference/api/pandas.DataFrame.resample.html#pandas.DataFrame.resample
    "pandas.DataFrame.resample") when aggregating an all-NaN or numeric object dtype
    column ([GH 39329](https://github.com/pandas-dev/pandas/issues/39329))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`Rolling.count()`](../reference/api/pandas.core.window.rolling.Rolling.count.html#pandas.core.window.rolling.Rolling.count
    "pandas.core.window.rolling.Rolling.count") where the `min_periods` argument would
    be set to `0` after the operation ([GH 39554](https://github.com/pandas-dev/pandas/issues/39554))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed regression in [`read_excel()`](../reference/api/pandas.read_excel.html#pandas.read_excel
    "pandas.read_excel") that incorrectly raised when the argument `io` was a non-path
    and non-buffer and the `engine` argument was specified ([GH 39528](https://github.com/pandas-dev/pandas/issues/39528))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '## Bug fixes'
  prefs: []
  type: TYPE_NORMAL
- en: '[`pandas.read_excel()`](../reference/api/pandas.read_excel.html#pandas.read_excel
    "pandas.read_excel") error message when a specified `sheetname` does not exist
    is now uniform across engines ([GH 39250](https://github.com/pandas-dev/pandas/issues/39250))'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed bug in [`pandas.read_excel()`](../reference/api/pandas.read_excel.html#pandas.read_excel
    "pandas.read_excel") producing incorrect results when the engine `openpyxl` is
    used and the excel file is missing or has incorrect dimension information; the
    fix requires `openpyxl` >= 3.0.0, prior versions may still fail ([GH 38956](https://github.com/pandas-dev/pandas/issues/38956),
    [GH 39001](https://github.com/pandas-dev/pandas/issues/39001))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Fixed bug in [`pandas.read_excel()`](../reference/api/pandas.read_excel.html#pandas.read_excel
    "pandas.read_excel") sometimes producing a `DataFrame` with trailing rows of `np.nan`
    when the engine `openpyxl` is used ([GH 39181](https://github.com/pandas-dev/pandas/issues/39181))
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '## Contributors'
  prefs: []
  type: TYPE_NORMAL
- en: A total of 14 people contributed patches to this release. People with a “+”
    by their names contributed a patch for the first time.
  prefs: []
  type: TYPE_NORMAL
- en: Andrew Wieteska
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Erfan Nariman
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Joris Van den Bossche
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Matthew Roeschke
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: MeeseeksMachine
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Pandas Development Team
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Pav A
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Richard Shadrach
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Simon Hawkins
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Thomas Li
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Torsten Wörtwein
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Vladimir Podolskiy +
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: jbrockmendel
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: patrick
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
