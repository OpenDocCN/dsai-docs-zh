- en: Introduction to Biomechanical Modeling
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 生物力学建模简介
- en: 原文：[https://docs.sympy.org/latest/tutorials/physics/biomechanics/biomechanics.html](https://docs.sympy.org/latest/tutorials/physics/biomechanics/biomechanics.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://docs.sympy.org/latest/tutorials/physics/biomechanics/biomechanics.html](https://docs.sympy.org/latest/tutorials/physics/biomechanics/biomechanics.html)
- en: '[`sympy.physics.biomechanics`](../../../modules/physics/biomechanics/index.html#module-sympy.physics.biomechanics
    "sympy.physics.biomechanics") provides features to enhance models created using
    [`sympy.physics.mechanics`](../../../modules/physics/mechanics/index.html#module-sympy.physics.mechanics
    "sympy.physics.mechanics") with force producing elements that model muscles and
    tendons. In this tutorial, we will introduce the features of this module.'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: '[`sympy.physics.biomechanics`](../../../modules/physics/biomechanics/index.html#module-sympy.physics.biomechanics
    "sympy.physics.biomechanics") 提供了增强使用 [`sympy.physics.mechanics`](../../../modules/physics/mechanics/index.html#module-sympy.physics.mechanics
    "sympy.physics.mechanics") 创建的模型的功能，这些模型包括用于建模肌肉和肌腱的力元素。在本教程中，我们将介绍此模块的特性。'
- en: The initial primary purpose of the biomechanics package is to introduce tools
    for modeling the forces produced by [Hill-type muscle models](https://en.wikipedia.org/wiki/Hill%27s_muscle_model).
    These models generate forces applied to the skeletal structure of an organism
    based on the contraction state of the muscle coupled with the passive stretch
    of tendons. In this tutorial, we introduce the elements that make up a musculotendon
    model and then demonstrate it in operation with a specific implementation, the
    [`MusculotendonDeGroote2016`](../../../modules/physics/biomechanics/api/musculotendon.html#sympy.physics.biomechanics.musculotendon.MusculotendonDeGroote2016
    "sympy.physics.biomechanics.musculotendon.MusculotendonDeGroote2016") model.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 生物力学包的初始主要目的是介绍用于建模由[Hill型肌肉模型](https://en.wikipedia.org/wiki/Hill%27s_muscle_model)产生的力的工具。这些模型生成基于肌肉的收缩状态和肌腱的被动伸展作用于生物体的骨骼结构上的力。在本教程中，我们介绍组成肌腱模型的元素，然后展示其在具体实现中的运行，即[`MusculotendonDeGroote2016`](../../../modules/physics/biomechanics/api/musculotendon.html#sympy.physics.biomechanics.musculotendon.MusculotendonDeGroote2016
    "sympy.physics.biomechanics.musculotendon.MusculotendonDeGroote2016") 模型。
- en: Loads
  id: totrans-4
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 载荷
- en: '[`sympy.physics.mechanics`](../../../modules/physics/mechanics/index.html#module-sympy.physics.mechanics
    "sympy.physics.mechanics") includes two types of loads: [`Force`](../../../modules/physics/mechanics/api/part_bod.html#sympy.physics.mechanics.loads.Force
    "sympy.physics.mechanics.loads.Force") and [`Torque`](../../../modules/physics/mechanics/api/part_bod.html#sympy.physics.mechanics.loads.Torque
    "sympy.physics.mechanics.loads.Torque"). Forces represent bound vector quantities
    that act directed along a line of action and torques are unbound vectors which
    represent the resulting torque of a couple from a set of forces.'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: '[`sympy.physics.mechanics`](../../../modules/physics/mechanics/index.html#module-sympy.physics.mechanics
    "sympy.physics.mechanics") 包括两种类型的载荷：[`Force`](../../../modules/physics/mechanics/api/part_bod.html#sympy.physics.mechanics.loads.Force
    "sympy.physics.mechanics.loads.Force") 和 [`Torque`](../../../modules/physics/mechanics/api/part_bod.html#sympy.physics.mechanics.loads.Torque
    "sympy.physics.mechanics.loads.Torque")。力表示沿着作用线方向的绑定向量量，而力矩是未绑定的向量，表示一对力的结果力矩。'
- en: 'An example of very common force model is a linear spring and linear damper
    in parallel. The force acting on a particle of mass \(m\) with 1D motion described
    by generalized coordinate \(x(t)\) with linear spring and damper coefficients
    \(k\) and \(c\) has the familiar equation of motion:'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 一个非常常见的力模型示例是平行线性弹簧和线性阻尼器。质量为 \(m\) 的粒子，其由广义坐标 \(x(t)\) 描述的一维运动，具有线性弹簧和阻尼器系数
    \(k\) 和 \(c\)，其运动方程如下所示：
- en: \[m \ddot{x} = \sum F = -kx - c\dot{x}\]
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: \[m \ddot{x} = \sum F = -kx - c\dot{x}\]
- en: 'In SymPy, we can formulate the force acting on the particle \(P\) that has
    motion in reference frame \(N\) and position relative to point \(O\) fixed in
    \(N\) like so:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 在 SymPy 中，我们可以这样表达作用在粒子 \(P\) 上的力，该粒子在参考系 \(N\) 中运动，并且相对于固定在 \(N\) 中的点 \(O\)
    的位置如下：
- en: '[PRE0]'
  id: totrans-9
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '[PRE1]'
  id: totrans-10
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '[PRE2]'
  id: totrans-11
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '[PRE3]'
  id: totrans-12
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '[PRE4]'
  id: totrans-13
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'and there would be an equal and opposite force acting on \(O\):'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 并且在 \(O\) 上会有一个等大而相反方向的力作用：
- en: '[PRE5]'
  id: totrans-15
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Forces that a single muscle and tendon applies to a set of rigid bodies will
    be the primary output of the musculotendon models developed further in this tutorial.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 由单一肌肉和肌腱施加到一组刚体上的力将是进一步开发的肌肉肌腱模型的主要输出。
- en: Pathways
  id: totrans-17
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Pathways
- en: Muscles and their associated tendons wrap around the moving skeletal system,
    as well as other muscles and organs. This imposes the challenge of determining
    the lines of action of the forces that the muscle and tendon produce on the skeleton
    and organs it touches. We have introduced the [`pathway`](../../../modules/physics/mechanics/api/pathway.html#module-sympy.physics.mechanics.pathway
    "sympy.physics.mechanics.pathway") module to help manage the specification of
    the geometric relationships to the forces’ lines of action.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 肌肉及其相关的肌腱包裹在运动的骨骼系统周围，以及其他肌肉和器官。这带来了一个挑战，即确定肌肉和肌腱在接触到骨骼和器官时产生的力的作用线。我们引入了 [`pathway`](../../../modules/physics/mechanics/api/pathway.html#module-sympy.physics.mechanics.pathway
    "sympy.physics.mechanics.pathway") 模块来帮助管理几何关系到力的作用线的规范化。
- en: The spring-damper example above has the simplest line of action definition so
    we can use a [`LinearPathway`](../../../modules/physics/mechanics/api/pathway.html#sympy.physics.mechanics.pathway.LinearPathway
    "sympy.physics.mechanics.pathway.LinearPathway") to establish that line of action.
    First provide the two endpoints where the force will have equal and opposite application
    to and the distance between the points and the relative speed between the two
    points are calculated by the pathway with [`length`](../../../modules/physics/mechanics/api/pathway.html#sympy.physics.mechanics.pathway.LinearPathway.length
    "sympy.physics.mechanics.pathway.LinearPathway.length") and [`extension_velocity`](../../../modules/physics/mechanics/api/pathway.html#sympy.physics.mechanics.pathway.LinearPathway.extension_velocity
    "sympy.physics.mechanics.pathway.LinearPathway.extension_velocity"). Note that
    a positive speed implies the points are moving away from each other. Also note
    that the formulation handles the case where \(x\) is positive or negative.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 上述弹簧阻尼器示例具有最简单的作用线定义，因此我们可以使用 [`LinearPathway`](../../../modules/physics/mechanics/api/pathway.html#sympy.physics.mechanics.pathway.LinearPathway
    "sympy.physics.mechanics.pathway.LinearPathway") 来建立该作用线。首先提供力将向两端点施加等大小但方向相反的应用点，路径的长度和两点之间的距离和两点之间的相对速度由
    [`length`](../../../modules/physics/mechanics/api/pathway.html#sympy.physics.mechanics.pathway.LinearPathway.length
    "sympy.physics.mechanics.pathway.LinearPathway.length") 和 [`extension_velocity`](../../../modules/physics/mechanics/api/pathway.html#sympy.physics.mechanics.pathway.LinearPathway.extension_velocity
    "sympy.physics.mechanics.pathway.LinearPathway.extension_velocity") 路径计算。请注意，正速度意味着点正在远离彼此。还请注意，该公式处理了
    \(x\) 是正数或负数的情况。
- en: '[PRE6]'
  id: totrans-20
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: The [`to_loads`](../../../modules/physics/mechanics/api/pathway.html#sympy.physics.mechanics.pathway.LinearPathway.to_loads
    "sympy.physics.mechanics.pathway.LinearPathway.to_loads") method then takes the
    magnitude of a force with a sign convention that positive magnitudes push the
    two points away from each other and returns a list of all forces acting on the
    two points.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，[`to_loads`](../../../modules/physics/mechanics/api/pathway.html#sympy.physics.mechanics.pathway.LinearPathway.to_loads
    "sympy.physics.mechanics.pathway.LinearPathway.to_loads") 方法会采用一种符号约定的力量大小，其中正的大小会推动两个点远离彼此，并返回作用于这两个点的所有力的列表。
- en: '[PRE7]'
  id: totrans-22
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Pathways can be constructed with any arbitrary geometry and any number of interconnected
    particles and rigid bodies. An example, a more complicated pathway is an [`ObstacleSetPathway`](../../../modules/physics/mechanics/api/pathway.html#sympy.physics.mechanics.pathway.ObstacleSetPathway
    "sympy.physics.mechanics.pathway.ObstacleSetPathway"). You can specify any number
    of intermediate points between the two pathway endpoints which the actuation path
    of the forces will follow along. For example, if we introduce two points fixed
    in \(N\) then the force will act along a set of linear segments connecting \(O\)
    to \(Q\) to \(R\) then to \(P\). Each of the four points will experience resultant
    forces. For simplicity we show the effect of only the spring force.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 可以用任意几何形状和任意数量的相互连接的粒子和刚体构造路径。例如，更复杂的路径是 [`ObstacleSetPathway`](../../../modules/physics/mechanics/api/pathway.html#sympy.physics.mechanics.pathway.ObstacleSetPathway
    "sympy.physics.mechanics.pathway.ObstacleSetPathway")。您可以指定两个路径端点之间的任意数量的中间点，力的驱动路径会沿着这些中间点连接
    \(N\) 到 \(O\) 到 \(Q\) 到 \(R\) 到 \(P\)。这四个点各自会经历结果力。为简单起见，我们展示了仅弹簧力的效果。
- en: '[PRE8]'
  id: totrans-24
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'If you set \(x=1\), it is a bit easier to see that the collection of forces
    are correct:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 如果设定 \(x=1\)，就更容易看到力的集合是正确的：
- en: '[PRE9]'
  id: totrans-26
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: You can create your own pathways by sub-classing [`PathwayBase`](../../../modules/physics/mechanics/api/pathway.html#sympy.physics.mechanics.pathway.PathwayBase
    "sympy.physics.mechanics.pathway.PathwayBase").
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以通过子类化[`PathwayBase`](../../../modules/physics/mechanics/api/pathway.html#sympy.physics.mechanics.pathway.PathwayBase
    "sympy.physics.mechanics.pathway.PathwayBase")来创建自己的路径。
- en: Wrapping Geometries
  id: totrans-28
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 包裹几何体
- en: 'It is common for muscles to wrap over bones, tissue, or organs. We have introduced
    wrapping geometries and associated wrapping pathways to help manage their complexities.
    For example, if two pathway endpoints lie on the surface of a cylinder the forces
    act along lines that are tangent to the geodesic connecting the two points at
    the endpoints. The [`WrappingCylinder`](../../../modules/physics/mechanics/api/wrapping_geometry.html#sympy.physics.mechanics.wrapping_geometry.WrappingCylinder
    "sympy.physics.mechanics.wrapping_geometry.WrappingCylinder") object calculates
    the complex geometry for the pathway. A [`WrappingPathway`](../../../modules/physics/mechanics/api/pathway.html#sympy.physics.mechanics.pathway.WrappingPathway
    "sympy.physics.mechanics.pathway.WrappingPathway") then uses the geometry to construct
    the forces. A spring force along this pathway is constructed below:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 肌肉通常包裹在骨骼、组织或器官上。我们引入了包裹几何体和相关的包裹路径来帮助管理它们的复杂性。例如，如果两个路径端点位于圆柱体表面上，则力沿着连接端点的测地线的切线方向作用。[`WrappingCylinder`](../../../modules/physics/mechanics/api/wrapping_geometry.html#sympy.physics.mechanics.wrapping_geometry.WrappingCylinder
    "sympy.physics.mechanics.wrapping_geometry.WrappingCylinder")对象计算了路径的复杂几何形状。然后，[`WrappingPathway`](../../../modules/physics/mechanics/api/pathway.html#sympy.physics.mechanics.pathway.WrappingPathway
    "sympy.physics.mechanics.pathway.WrappingPathway")利用这些几何形状构建力。沿着这条路径的弹簧力如下构建：
- en: '[PRE10]'
  id: totrans-30
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '[PRE11]'
  id: totrans-31
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '[PRE12]'
  id: totrans-32
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '[PRE13]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Actuators
  id: totrans-34
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 执行器
- en: Models of multibody systems commonly have time varying inputs in the form of
    the magnitudes of forces or torques. In many cases, these specified inputs may
    be derived from the state of the system or even from the output of another dynamic
    system. The [`actuator`](../../../modules/physics/mechanics/api/actuator.html#module-sympy.physics.mechanics.actuator
    "sympy.physics.mechanics.actuator") module includes classes to help manage the
    creation of such models of force and torque inputs. An actuator is intended to
    represent a real physical component. For example, the spring-damper force from
    above can be created by sub-classing [`ActuatorBase`](../../../modules/physics/mechanics/api/actuator.html#sympy.physics.mechanics.actuator.ActuatorBase
    "sympy.physics.mechanics.actuator.ActuatorBase") and implementing a method that
    generates the loads associated with that spring-damper actuator.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 多体系统的模型通常具有时间变化的输入，如力或扭矩的大小。在许多情况下，这些指定的输入可以来自系统的状态甚至来自另一个动态系统的输出。[`actuator`](../../../modules/physics/mechanics/api/actuator.html#module-sympy.physics.mechanics.actuator
    "sympy.physics.mechanics.actuator")模块包含帮助管理这些力和扭矩输入模型的类。执行器旨在表示真实的物理组件。例如，上述弹簧-阻尼力可以通过子类化[`ActuatorBase`](../../../modules/physics/mechanics/api/actuator.html#sympy.physics.mechanics.actuator.ActuatorBase
    "sympy.physics.mechanics.actuator.ActuatorBase")并实现生成与该弹簧-阻尼执行器相关的负载的方法来创建。
- en: '[PRE14]'
  id: totrans-36
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: '[PRE15]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: '[PRE16]'
  id: totrans-38
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: There is also a [`ForceActuator`](../../../modules/physics/mechanics/api/actuator.html#sympy.physics.mechanics.actuator.ForceActuator
    "sympy.physics.mechanics.actuator.ForceActuator") that allows seamless integration
    with pathway objects. You only need to set the `.force` attribute in initialization
    in the sub-class.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 还有一个[`ForceActuator`](../../../modules/physics/mechanics/api/actuator.html#sympy.physics.mechanics.actuator.ForceActuator
    "sympy.physics.mechanics.actuator.ForceActuator")，可以与路径对象无缝集成。你只需在子类的初始化中设置`.force`属性即可。
- en: '[PRE17]'
  id: totrans-40
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'This then makes it easy to apply a spring-damper force to other pathways, e.g.:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 这样就可以轻松地对其他路径应用弹簧-阻尼力，例如：
- en: '[PRE18]'
  id: totrans-42
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: Activation Dynamics
  id: totrans-43
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 激活动力学
- en: Musculotendon models are able to produce an active contractile force when they
    are activated. Biologically, this occurs when \(\textrm{Ca}^{2+}\) ions are present
    among the muscle fibers at a sufficient concentration that they start to voluntarily
    contract. This state of voluntary contraction is “activation”. In biomechanical
    models it is typically given the symbol \(a(t)\), which is treated as a normalized
    quantity in the range \([0, 1]\).
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 当肌腱模型被激活时，它们能够产生主动收缩力。在生物学上，当肌纤维中的\(\textrm{Ca}^{2+}\)离子浓度足够高时，它们开始自发收缩。这种自发收缩状态称为“激活”。在生物力学模型中，通常用符号\(a(t)\)表示，它被视为在\([0,
    1]\)范围内的归一化量。
- en: An organism does not directly control the concentration of these \(\textrm{Ca}^{2+}\)
    ions in its muscles, instead its nervous system, controlled by its brain, sends
    an electrical signal to a muscle which causes \(\textrm{Ca}^{2+}\) ions to be
    released. These diffuse and increase in concentration throughout the muscle leading
    to activation. An electrical signal transmitted to a muscle stimulating contraction
    is an “excitation”. In biomechanical models it is usually given the symbol \(e(t)\),
    which is also treated as a normalized quantity in the range \([0, 1]\).
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 生物体并不直接控制其肌肉中的\(\textrm{Ca}^{2+}\)离子浓度，而是其由大脑控制的神经系统向肌肉发送电信号，导致\(\textrm{Ca}^{2+}\)离子释放。这些离子扩散并在肌肉中增加浓度，导致激活。传输到肌肉以刺激收缩的电信号称为“兴奋”。在生物力学模型中，通常用符号\(e(t)\)表示，也被视为在区间\([0,
    1]\)内的归一化量。
- en: The relationship between the excitation input and the activation state is known
    as activation dynamics. Because activation dynamics are so common in biomechanical
    models, SymPy provides the [`activation`](../../../modules/physics/biomechanics/api/activation.html#module-sympy.physics.biomechanics.activation
    "sympy.physics.biomechanics.activation") module, which contains implementations
    for some common models of activation dynamics. These are zeroth-order activation
    dynamics and first-order activation dynamics based on the equations from the paper
    by [[DeGroote2016]](#degroote2016). Below we will work through manually implementing
    these models and then show how these relate to the classes provided by SymPy.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 兴奋输入与激活状态之间的关系称为激活动力学。由于在生物力学模型中激活动力学非常普遍，SymPy提供了[`activation`](../../../modules/physics/biomechanics/api/activation.html#module-sympy.physics.biomechanics.activation
    "sympy.physics.biomechanics.activation")模块，其中包含一些常见激活动力学模型的实现。这些模型包括基于[[DeGroote2016]](#degroote2016)论文方程的零阶激活动力学和一阶激活动力学。接下来我们将手动实现这些模型，并展示它们与SymPy提供的类的关系。
- en: Zeroth-Order
  id: totrans-47
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 零阶
- en: The simplest possible model of activation dynamics is to assume that diffusion
    of \(\textrm{Ca}^{2+}\) ions is instantaneous. Mathematically this gives us \(a(t)
    = e(t)\), a zeroth-order ordinary differential equation.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 激活动力学的最简单模型假设\(\textrm{Ca}^{2+}\)离子的扩散是瞬时的。数学上，这给出了\(a(t) = e(t)\)，一个零阶常微分方程。
- en: '[PRE19]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: Alternatively, you could give \(a(t)\) its own [`dynamicsymbols`](../../../modules/physics/vector/api/functions.html#sympy.physics.vector.dynamicsymbols
    "sympy.physics.vector.dynamicsymbols") and use a substitution to replace this
    with \(e(t)\) in any equation.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 或者，您可以给\(a(t)\)自己的[`dynamicsymbols`](../../../modules/physics/vector/api/functions.html#sympy.physics.vector.dynamicsymbols
    "sympy.physics.vector.dynamicsymbols")并使用替换，在任何方程中用\(e(t)\)替换它。
- en: '[PRE20]'
  id: totrans-51
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: SymPy provides the class [`ZerothOrderActivation`](../../../modules/physics/biomechanics/api/activation.html#sympy.physics.biomechanics.activation.ZerothOrderActivation
    "sympy.physics.biomechanics.activation.ZerothOrderActivation") in the [`activation`](../../../modules/physics/biomechanics/api/activation.html#module-sympy.physics.biomechanics.activation
    "sympy.physics.biomechanics.activation") module. This class must be instantiated
    with a single argument, `name`, which associates a name with the instance. This
    name should be unique per instance.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: SymPy提供了[`ZerothOrderActivation`](../../../modules/physics/biomechanics/api/activation.html#sympy.physics.biomechanics.activation.ZerothOrderActivation
    "sympy.physics.biomechanics.activation.ZerothOrderActivation")类，在[`activation`](../../../modules/physics/biomechanics/api/activation.html#module-sympy.physics.biomechanics.activation
    "sympy.physics.biomechanics.activation")模块中。这个类必须用单个参数`name`实例化，将一个名称与实例关联起来。这个名称应该在每个实例中是唯一的。
- en: '[PRE21]'
  id: totrans-53
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: The argument passed to \(name\) tries to help ensures that the automatically-created
    [`dynamicsymbols`](../../../modules/physics/vector/api/functions.html#sympy.physics.vector.dynamicsymbols
    "sympy.physics.vector.dynamicsymbols") for \(e(t)\) and \(a(t)\) are unique betweem
    instances.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 传递给`name`的参数试图确保在实例之间自动创建的[`dynamicsymbols`](../../../modules/physics/vector/api/functions.html#sympy.physics.vector.dynamicsymbols
    "sympy.physics.vector.dynamicsymbols")对于\(e(t)\)和\(a(t)\)是唯一的。
- en: '[PRE22]'
  id: totrans-55
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: '[`ZerothOrderActivation`](../../../modules/physics/biomechanics/api/activation.html#sympy.physics.biomechanics.activation.ZerothOrderActivation
    "sympy.physics.biomechanics.activation.ZerothOrderActivation") subclasses [`ActivationBase`](../../../modules/physics/biomechanics/api/activation.html#sympy.physics.biomechanics.activation.ActivationBase
    "sympy.physics.biomechanics.activation.ActivationBase"), which provides a consistent
    interface for all concrete classes of activation dynamics. This includes a method
    to inspect the ordinary differential equation(s) associated with the model. As
    zeroth-order activation dynamics correspond to a zeroth-order ordinary differential
    equation, this returns an empty column matrix.'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: '[`ZerothOrderActivation`](../../../modules/physics/biomechanics/api/activation.html#sympy.physics.biomechanics.activation.ZerothOrderActivation
    "sympy.physics.biomechanics.activation.ZerothOrderActivation") 是 [`ActivationBase`](../../../modules/physics/biomechanics/api/activation.html#sympy.physics.biomechanics.activation.ActivationBase
    "sympy.physics.biomechanics.activation.ActivationBase") 的子类，为模型的所有具体激活动力学类提供一致的接口。这包括一个方法来检查与模型相关联的常微分方程(s)。由于零阶激活动力学对应于零阶常微分方程，因此返回一个空列矩阵。'
- en: '[PRE23]'
  id: totrans-57
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: First-Order
  id: totrans-58
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 一阶
- en: 'In practice the diffusion and concentration increase of \(\textrm{Ca}^{2+}\)
    ions is not instantaneous. In a real biological muscle, a step increase in excitation
    will lead to a smooth and gradual increase in activation. [[DeGroote2016]](#degroote2016)
    model this using a first-order ordinary differential equation:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 在实践中，\(\textrm{Ca}^{2+}\)离子的扩散和浓度增加并非瞬时完成。在真实的生物肌肉中，兴奋度的步增将导致激活的平稳逐渐增加。[[DeGroote2016]](#degroote2016)
    使用一阶常微分方程模型来描述：
- en: \[\begin{split}\frac{da}{dt} &= \left( \frac{1}{\tau_a \left(1 + 3a(t)\right)}
    (1 + 2f) + \frac{1 + 3a(t)}{4\tau_d} (1 - 2f) \right) \left(e(t) - a(t) \right)
    \\ f &= \frac{1}{2} \tanh{\left(b \left(e(t) -a(t)\right)\right)}\end{split}\]
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: \[\begin{split}\frac{da}{dt} &= \left( \frac{1}{\tau_a \left(1 + 3a(t)\right)}
    (1 + 2f) + \frac{1 + 3a(t)}{4\tau_d} (1 - 2f) \right) \left(e(t) - a(t) \right)
    \\ f &= \frac{1}{2} \tanh{\left(b \left(e(t) -a(t)\right)\right)}\end{split}\]
- en: where \(\tau_a\) is the time constant for activation, \(\tau_d\) is the time
    constant for deactivation, and \(b\) is a smoothing coefficient.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 其中 \(\tau_a\) 是激活的时间常数，\(\tau_d\) 是去激活的时间常数，\(b\) 是平滑系数。
- en: '[PRE24]'
  id: totrans-62
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: This first-order ordinary differential equation can then be used to propagate
    the state \(a(t)\) under the input \(e(t)\) in a simulation.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 然后可以使用这个一阶常微分方程来在模拟中传播输入 \(e(t)\) 下的状态 \(a(t)\)。
- en: 'Like before, SymPy provides the class [`FirstOrderActivationDeGroote2016`](../../../modules/physics/biomechanics/api/activation.html#sympy.physics.biomechanics.activation.FirstOrderActivationDeGroote2016
    "sympy.physics.biomechanics.activation.FirstOrderActivationDeGroote2016") in the
    [`activation`](../../../modules/physics/biomechanics/api/activation.html#module-sympy.physics.biomechanics.activation
    "sympy.physics.biomechanics.activation") module. This class is another subclass
    of [`ActivationBase`](../../../modules/physics/biomechanics/api/activation.html#sympy.physics.biomechanics.activation.ActivationBase
    "sympy.physics.biomechanics.activation.ActivationBase") and uses the model for
    first-order activation dynamics from [[DeGroote2016]](#degroote2016) defined above.
    This class must be instantiated with four arguments: a name, and three sympifiable
    objects to represent the three constants \(\tau_a\), \(\tau_d\), and \(b\).'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 与之前一样，SymPy在 [`activation`](../../../modules/physics/biomechanics/api/activation.html#module-sympy.physics.biomechanics.activation
    "sympy.physics.biomechanics.activation") 模块中提供了类 [`FirstOrderActivationDeGroote2016`](../../../modules/physics/biomechanics/api/activation.html#sympy.physics.biomechanics.activation.FirstOrderActivationDeGroote2016
    "sympy.physics.biomechanics.activation.FirstOrderActivationDeGroote2016")。这个类是
    [`ActivationBase`](../../../modules/physics/biomechanics/api/activation.html#sympy.physics.biomechanics.activation.ActivationBase
    "sympy.physics.biomechanics.activation.ActivationBase") 的另一个子类，使用从 [[DeGroote2016]](#degroote2016)
    定义的一阶激活动力学模型。这个类必须用四个参数来实例化：名称和三个 sympifiable 对象，用来表示三个常数 \(\tau_a\)、\(\tau_d\)
    和 \(b\)。
- en: '[PRE25]'
  id: totrans-65
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: The first-order ordinary differential equation can be accessed as before, but
    this time a length-1 column vector is returned.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 这一阶常微分方程可以像之前一样访问，但这次返回一个长度为1的列向量。
- en: '[PRE26]'
  id: totrans-67
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'You can also instantiate the class with the suggested values for each of the
    constants. These are: \(\tau_a = 0.015\), \(\tau_d = 0.060\), and \(b = 10.0\).'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以使用建议的每个常数的值来实例化该类。这些值为：\(\tau_a = 0.015\)，\(\tau_d = 0.060\)，和 \(b = 10.0\)。
- en: '[PRE27]'
  id: totrans-69
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: Custom
  id: totrans-70
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 自定义
- en: To create your own custom models of activation dynamics, you can subclass [`ActivationBase`](../../../modules/physics/biomechanics/api/activation.html#sympy.physics.biomechanics.activation.ActivationBase
    "sympy.physics.biomechanics.activation.ActivationBase") and override the abstract
    methods. The concrete class will then conform to the expected API and integrate
    automatically with the rest of [`sympy.physics.mechanics`](../../../modules/physics/mechanics/index.html#module-sympy.physics.mechanics
    "sympy.physics.mechanics") and [`sympy.physics.biomechanics`](../../../modules/physics/biomechanics/index.html#module-sympy.physics.biomechanics
    "sympy.physics.biomechanics").
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建您自己的激活动力学模型，您可以子类化[`ActivationBase`](../../../modules/physics/biomechanics/api/activation.html#sympy.physics.biomechanics.activation.ActivationBase
    "sympy.physics.biomechanics.activation.ActivationBase")并重写抽象方法。具体的类将符合预期的API，并且会自动集成到[`sympy.physics.mechanics`](../../../modules/physics/mechanics/index.html#module-sympy.physics.mechanics
    "sympy.physics.mechanics")和[`sympy.physics.biomechanics`](../../../modules/physics/biomechanics/index.html#module-sympy.physics.biomechanics
    "sympy.physics.biomechanics")的其余部分中。
- en: Musculotendon Curves
  id: totrans-72
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 肌肉肌腱曲线
- en: 'Over the years many different configurations of Hill-type muscle models have
    been published containing different combinations of elements in series and in
    parallel. We’ll consider a very common version of the model that has the tendon
    modeled as an element in series with muscle fibers, which are in turn modeled
    as three elements in parallel: an elastic element, a contractile element, and
    a damper.'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 多年来，已发布了许多不同配置的希尔型肌肉模型，其中包含不同的串联和并联元素组合。我们将考虑模型的一个非常常见版本，将肌腱建模为串联元件，而肌肉纤维则建模为三个并联元件：弹性元件、收缩元件和阻尼器。
- en: '![../../../_images/hill-type-muscle-model.svg](../Images/70b2e69f6923b7b36057f1fb1e5f5007.png)'
  id: totrans-74
  prefs: []
  type: TYPE_IMG
  zh: '![../../../_images/hill-type-muscle-model.svg](../Images/70b2e69f6923b7b36057f1fb1e5f5007.png)'
- en: Schematic showing the four-element Hill-type muscle model. \(SE\) is the series
    element representing the tendon, \(CE\) is the contractile element, \(EE\) is
    the parallel element representing the elasticity of the muscle fibers, and \(DE\)
    is the damper.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 示意图显示了四元素希尔型肌肉模型。\(SE\)是代表肌腱的串联元件，\(CE\)是收缩元件，\(EE\)是代表肌肉纤维弹性的并联元件，\(DE\)是阻尼器。
- en: Each of these components typically has a characteristic curve describing it.
    The following sub-sections will describe and implement the characteristic curves
    described in the paper by [[DeGroote2016]](#degroote2016).
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 每个组成部分通常具有描述其特性曲线。接下来的子章节将描述并实现文章中描述的特性曲线[[DeGroote2016]](#degroote2016)。
- en: Tendon Force-Length
  id: totrans-77
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 肌腱力长度
- en: It is common to model tendons as both rigid (inextensible) and elastic elements.
    If the tendon is being treated as rigid, the tendon length does not change and
    the length of the muscle fibers change directly with changes in musculotendon
    length. A rigid tendon will not have an associated characteristic curve; it does
    not have any force-producing capabilities itself and just directly transmits the
    force produced by the muscle fibers.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 通常将肌腱建模为刚性（不可伸长）和弹性元件。如果肌腱被视为刚性，肌腱长度不会改变，肌肉纤维的长度直接随着肌肉肌腱长度的变化而变化。刚性肌腱不具有相关的特性曲线；它本身没有任何产生力量的能力，只是直接传递由肌肉纤维产生的力量。
- en: 'If the tendon is elastic, it is commonly modeled as a nonlinear spring. We
    therefore have our first characteristic curve, the tendon force-length curve,
    which is a function of normalized tendon length:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 如果肌腱是弹性的，则通常被建模为非线性弹簧。因此，我们有了第一个特性曲线，即肌腱力长度曲线，它是标准化肌腱长度的函数：
- en: \[\tilde{l}^T = \frac{l^T}{l^T_{slack}}\]
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: \[\tilde{l}^T = \frac{l^T}{l^T_{slack}}\]
- en: where \(l^T\) is tendon length, and \(l^T_{slack}\) is the “tendon slack length”,
    a constant representing the tendon length under no force. Characteristic musculotendon
    curves are parameterized in terms of “normalized” (or “dimensionless”) quantities
    such as \(\tilde{l}^T\) because these curves apply generically to all muscle fibers
    and tendons. Their properties can be adjusted to model a specific musculotendon
    by selecting different values for the constants. In the case of the tendon force-length
    characteristic, this is done by tuning \(l^T_{slack}\). Shorter values for this
    constant result in a stiffer tendon.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 其中 \(l^T\) 是肌腱长度，\(l^T_{slack}\) 是“松弛肌腱长度”，一个代表在无力情况下的肌腱长度的常数。肌肉肌腱特性曲线是以“标准化”（或“无量纲”）量表述的，例如
    \(\tilde{l}^T\)，因为这些曲线通用地适用于所有肌肉纤维和肌腱。通过选择不同的常数值，可以调整其属性以模拟特定的肌肉肌腱。在肌腱力长度特性中，通过调节
    \(l^T_{slack}\) 来实现。较小的此常数值会导致肌腱更加僵硬。
- en: 'The equation for the tendon force-length curve \(fl^T\left(\tilde{l}^T\right)\)
    from [[DeGroote2016]](#degroote2016) is:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 肌腱力长度曲线\(fl^T\left(\tilde{l}^T\right)\)的方程来自[[DeGroote2016]](#degroote2016)：
- en: \[fl^T\left(\tilde{l}^T\right) = c_0 \exp{c_3 \left( \tilde{l}^T - c_1 \right)}
    - c_2\]
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: \[fl^T\left(\tilde{l}^T\right) = c_0 \exp{c_3 \left( \tilde{l}^T - c_1 \right)}
    - c_2\]
- en: To implement this in SymPy we need a time-varying dynamic symbol representing
    \(\tilde{l}^T\) and four symbols representing the four constants.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 要在SymPy中实现这一点，我们需要一个表示时间变化的动态符号，代表\(\tilde{l}^T\)，以及四个表示四个常数的符号。
- en: '[PRE28]'
  id: totrans-85
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: '[PRE29]'
  id: totrans-86
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: Alternatively, we could define this in terms of \(l^T\) and \(l^T_{slack}\).
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 或者，我们可以根据\(l^T\)和\(l^T_{slack}\)来定义这个。
- en: '[PRE30]'
  id: totrans-88
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: '[PRE31]'
  id: totrans-89
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: The [`biomechanics`](../../../modules/physics/biomechanics/index.html#module-sympy.physics.biomechanics
    "sympy.physics.biomechanics") module in SymPy provides a class for this exact
    curve, [`TendonForceLengthDeGroote2016`](../../../modules/physics/biomechanics/api/curve.html#sympy.physics.biomechanics.curve.TendonForceLengthDeGroote2016
    "sympy.physics.biomechanics.curve.TendonForceLengthDeGroote2016"). It can be instantiated
    with five arguments. The first argument is \(\tilde{l}^T\), which need not necessarily
    be a symbol; it could be an expression. The further four arguments are all constants.
    It is intended that these will be constants, or sympifiable numerical values.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: SymPy的[`biomechanics`](../../../modules/physics/biomechanics/index.html#module-sympy.physics.biomechanics
    "sympy.physics.biomechanics")模块提供了这条确切曲线的类，[`TendonForceLengthDeGroote2016`](../../../modules/physics/biomechanics/api/curve.html#sympy.physics.biomechanics.curve.TendonForceLengthDeGroote2016
    "sympy.physics.biomechanics.curve.TendonForceLengthDeGroote2016")。它可以用五个参数实例化。第一个参数是\(\tilde{l}^T\)，它不一定是一个符号；它可以是一个表达式。其余四个参数都是常数。预期这些将是常数或可以转换为数值的SymPy类型。
- en: '[PRE32]'
  id: totrans-91
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: '[PRE33]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: This class is a subclass of [`Function`](../../../modules/core.html#sympy.core.function.Function
    "sympy.core.function.Function") and so implements usual SymPy methods for substitution,
    evaluation, differentiation etc. The [`doit`](../../../modules/physics/biomechanics/api/curve.html#sympy.physics.biomechanics.curve.TendonForceLengthDeGroote2016.doit
    "sympy.physics.biomechanics.curve.TendonForceLengthDeGroote2016.doit") method
    allows the equation of the curve to be accessed.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 这个类是[`Function`](../../../modules/core.html#sympy.core.function.Function "sympy.core.function.Function")的子类，因此实现了用于替换、评估、微分等的通常SymPy方法。[`doit`](../../../modules/physics/biomechanics/api/curve.html#sympy.physics.biomechanics.curve.TendonForceLengthDeGroote2016.doit
    "sympy.physics.biomechanics.curve.TendonForceLengthDeGroote2016.doit")方法允许访问曲线的方程。
- en: '[PRE34]'
  id: totrans-94
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: The class provides an alternate constructor that allows it to be constucted
    prepopulated with the values for the constants recommended in [[DeGroote2016]](#degroote2016).
    This takes a single argument, again corresponding to \(\tilde{l}^T\), which can
    against either be a symbol or expression.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 该类提供了一个替代构造函数，允许它使用推荐的常数值在[[DeGroote2016]](#degroote2016)中预填充。这需要一个参数，再次对应于\(\tilde{l}^T\)，它可以是符号或表达式。
- en: '[PRE35]'
  id: totrans-96
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: In the above the constants have been replaced with instances of SymPy numeric
    types like [`Float`](../../../modules/core.html#sympy.core.numbers.Float "sympy.core.numbers.Float").
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 在上述内容中，常数已被替换为SymPy数值类型的实例，如[`Float`](../../../modules/core.html#sympy.core.numbers.Float
    "sympy.core.numbers.Float")。
- en: The [`TendonForceLengthDeGroote2016`](../../../modules/physics/biomechanics/api/curve.html#sympy.physics.biomechanics.curve.TendonForceLengthDeGroote2016
    "sympy.physics.biomechanics.curve.TendonForceLengthDeGroote2016") class also supports
    code generation, so seamlessly integrates with SymPy’s code printers. To visualize
    this curve, we can use [`lambdify`](../../../modules/utilities/lambdify.html#sympy.utilities.lambdify.lambdify
    "sympy.utilities.lambdify.lambdify") on an instance of the function, which will
    create a callable to evaluate it for a given value of \(\tilde{l}^T\). Sensible
    values for \(\tilde{l}^T\) fall within the range \([0.95, 1.05]\), which we will
    plot below.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: '[`TendonForceLengthDeGroote2016`](../../../modules/physics/biomechanics/api/curve.html#sympy.physics.biomechanics.curve.TendonForceLengthDeGroote2016
    "sympy.physics.biomechanics.curve.TendonForceLengthDeGroote2016")类还支持代码生成，因此与SymPy的代码打印机无缝集成。为了可视化这条曲线，我们可以使用[`lambdify`](../../../modules/utilities/lambdify.html#sympy.utilities.lambdify.lambdify
    "sympy.utilities.lambdify.lambdify")在函数的实例上，它将创建一个可调用函数，用于对给定的\(\tilde{l}^T\)值进行评估。合理的\(\tilde{l}^T\)值落在范围\([0.95,
    1.05]\)内，我们将在下面进行绘制。'
- en: '[PRE36]'
  id: totrans-99
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: '[PRE37]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: '[PRE38]'
  id: totrans-101
  prefs: []
  type: TYPE_PRE
  zh: '[PRE38]'
- en: ([`png`](../../../_downloads/1c195d16d5c193cfaa51fd5c284ce437/biomechanics-11.png),
    [`hires.png`](../../../_downloads/137a67af995c8143d13d9fc7e2b2293a/biomechanics-11.hires.png),
    [`pdf`](../../../_downloads/e3465eeb72d4c5e169113f0f14ba26a4/biomechanics-11.pdf))
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: ([`png`](../../../_downloads/1c195d16d5c193cfaa51fd5c284ce437/biomechanics-11.png),
    [`hires.png`](../../../_downloads/137a67af995c8143d13d9fc7e2b2293a/biomechanics-11.hires.png),
    [`pdf`](../../../_downloads/e3465eeb72d4c5e169113f0f14ba26a4/biomechanics-11.pdf))
- en: '![../../../_images/biomechanics-11.png](../Images/441de345350612ac7d32103348323b0a.png)'
  id: totrans-103
  prefs: []
  type: TYPE_IMG
  zh: '![../../../_images/biomechanics-11.png](../Images/441de345350612ac7d32103348323b0a.png)'
- en: When deriving the equations describing the musculotendon dynamics of models
    with elastic tendons, it can be useful to know the inverse of the tendon force-length
    characteristic curve. The curve defined in [[DeGroote2016]](#degroote2016) is
    analytically invertible, which means that we can directly determine \(\tilde{l}^T
    = \left[fl^T\left(\tilde{l}^T\right)\right]^{-1}\) for a given value of \(fl^T\left(\tilde{l}^T\right)\).
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 推导弹性肌腱模型的肌腱肌腱动力学方程时，了解肌腱力长度特征曲线的反函数是很有用的。[[DeGroote2016]](#degroote2016) 中定义的曲线是可解析可逆的，这意味着我们可以直接根据给定的
    \(fl^T\left(\tilde{l}^T\right)\) 确定 \(\tilde{l}^T = \left[fl^T\left(\tilde{l}^T\right)\right]^{-1}\)。
- en: \[\tilde{l}^T = \left[fl^T\left(\tilde{l}^T\right)\right]^{-1} = \frac{\log{\frac{fl^T
    + c_2}{c_0}}}{c_3} + c_1\]
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: \[\tilde{l}^T = \left[fl^T\left(\tilde{l}^T\right)\right]^{-1} = \frac{\log{\frac{fl^T
    + c_2}{c_0}}}{c_3} + c_1\]
- en: There is also a class for this in [`biomechanics`](../../../modules/physics/biomechanics/index.html#module-sympy.physics.biomechanics
    "sympy.physics.biomechanics"), [`TendonForceLengthInverseDeGroote2016`](../../../modules/physics/biomechanics/api/curve.html#sympy.physics.biomechanics.curve.TendonForceLengthInverseDeGroote2016
    "sympy.physics.biomechanics.curve.TendonForceLengthInverseDeGroote2016"), which
    behaves identically to [`TendonForceLengthDeGroote2016`](../../../modules/physics/biomechanics/api/curve.html#sympy.physics.biomechanics.curve.TendonForceLengthDeGroote2016
    "sympy.physics.biomechanics.curve.TendonForceLengthDeGroote2016"). It can be instantiated
    with five parameters, the first for \(fl^T\) followed by four constants, or by
    using the alternate constructor with a single argument for \(fl^T\).
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 在 [`生物力学`](../../../modules/physics/biomechanics/index.html#module-sympy.physics.biomechanics
    "sympy.physics.biomechanics") 中也有一个类 [`TendonForceLengthInverseDeGroote2016`](../../../modules/physics/biomechanics/api/curve.html#sympy.physics.biomechanics.curve.TendonForceLengthInverseDeGroote2016
    "sympy.physics.biomechanics.curve.TendonForceLengthInverseDeGroote2016")，与 [`TendonForceLengthDeGroote2016`](../../../modules/physics/biomechanics/api/curve.html#sympy.physics.biomechanics.curve.TendonForceLengthDeGroote2016
    "sympy.physics.biomechanics.curve.TendonForceLengthDeGroote2016") 行为相同。可以用五个参数实例化它，第一个参数是
    \(fl^T\)，后面是四个常数，或者可以使用单参数的构造函数来实例化 \(fl^T\)。
- en: '[PRE39]'
  id: totrans-107
  prefs: []
  type: TYPE_PRE
  zh: '[PRE39]'
- en: '[PRE40]'
  id: totrans-108
  prefs: []
  type: TYPE_PRE
  zh: '[PRE40]'
- en: '[PRE41]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE41]'
- en: Fiber Passive Force-Length
  id: totrans-110
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 纤维被动力长度
- en: 'The first element used to model the muscle fibers is the fiber passive force-
    length. This is essentially another nonlinear spring representing the elastic
    properties of the muscle fibers. The characteristic curve describing this element
    is a function of normalized muscle fiber length:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 用于建模肌肉纤维的第一个元素是纤维被动力长度。这本质上是另一个非线性弹簧，代表肌肉纤维的弹性特性。描述这个元素的特征曲线是关于归一化肌肉纤维长度的函数：
- en: \[\tilde{l}^M = \frac{l^M}{l^M_{opt}}\]
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: \[\tilde{l}^M = \frac{l^M}{l^M_{opt}}\]
- en: where \(l^M\) is muscle fiber length, and \(l^M_{opt}\) is the “optimal fiber
    length, a constant representing the muscle fiber length at which it produces no
    passive-elastic force (it is also the muscle fiber length at which it can produce
    maximum active force). Like with tuning \(l^T_{slack}\) to change the stiffness
    properties of a modeled tendon via the tendon force-length characteristic, we
    can adjust \(l^M_{opt}\) to change the passive properties of the muscle fibers;
    decreasing \(l^M_{opt}\) will make modeled muscle fibers stiffer.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 其中 \(l^M\) 是肌肉纤维长度，\(l^M_{opt}\) 是“最佳纤维长度”，一个表示肌肉纤维在不产生被动弹性力的长度（也是肌肉纤维能够产生最大主动力的长度）。像调整
    \(l^T_{slack}\) 以通过肌腱力长度特征来改变建模肌腱的刚度属性一样，我们可以调整 \(l^M_{opt}\) 以改变肌肉纤维的被动特性；减小
    \(l^M_{opt}\) 将使建模肌肉纤维变得更加坚硬。
- en: 'The equation for the fiber passive force-length curve \(fl^M_{pas}\left(\tilde{l}^M\right)\)
    from [[DeGroote2016]](#degroote2016) is:'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 来自 [[DeGroote2016]](#degroote2016) 的肌肉纤维被动力长曲线 \(fl^M_{pas}\left(\tilde{l}^M\right)\)
    的方程如下图所示：
- en: \[fl^M_{pas} = \frac{\frac{\exp{c_1 \left(\tilde{l^M} - 1\right)}}{c_0} - 1}{\exp{c_1}
    - 1}\]
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: \[fl^M_{pas} = \frac{\frac{\exp{c_1 \left(\tilde{l^M} - 1\right)}}{c_0} - 1}{\exp{c_1}
    - 1}\]
- en: Similarly to before, to implement this in SymPy we need a time-varying dynamic
    symbol representing \(\tilde{l}^M\) and two symbols representing the two constants.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 类似之前，在 SymPy 中实现这个过程需要一个表示时间变化的动态符号 \(\tilde{l}^M\) 和表示两个常数的符号。
- en: '[PRE42]'
  id: totrans-117
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: '[PRE43]'
  id: totrans-118
  prefs: []
  type: TYPE_PRE
  zh: '[PRE43]'
- en: Alternatively, we could define this in terms of \(l^M\) and \(l^M_{opt}\).
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 或者，我们可以用\(l^M\)和\(l^M_{opt}\)定义这个。
- en: '[PRE44]'
  id: totrans-120
  prefs: []
  type: TYPE_PRE
  zh: '[PRE44]'
- en: '[PRE45]'
  id: totrans-121
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: Again, the [`biomechanics`](../../../modules/physics/biomechanics/index.html#module-sympy.physics.biomechanics
    "sympy.physics.biomechanics") module in SymPy provides a class for this exact
    curve, [`FiberForceLengthPassiveDeGroote2016`](../../../modules/physics/biomechanics/api/curve.html#sympy.physics.biomechanics.curve.FiberForceLengthPassiveDeGroote2016
    "sympy.physics.biomechanics.curve.FiberForceLengthPassiveDeGroote2016"). It can
    be instantiated with three arguments. The first argument is \(\tilde{l}^M\), which
    need not necessarily be a symbol and can be an expression. The further two arguments
    are both constants. It is intended that these will be constants, or sympifiable
    numerical values.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 另外，SymPy中的[`biomechanics`](../../../modules/physics/biomechanics/index.html#module-sympy.physics.biomechanics
    "sympy.physics.biomechanics")模块提供了一个专门处理此曲线的类，[`FiberForceLengthPassiveDeGroote2016`](../../../modules/physics/biomechanics/api/curve.html#sympy.physics.biomechanics.curve.FiberForceLengthPassiveDeGroote2016
    "sympy.physics.biomechanics.curve.FiberForceLengthPassiveDeGroote2016")。可以用三个参数实例化此类。第一个参数是\(\tilde{l}^M\)，不一定是一个符号，可以是一个表达式。另外两个参数都是常数。预期这些将是常数或可以符号化的数值。
- en: '[PRE46]'
  id: totrans-123
  prefs: []
  type: TYPE_PRE
  zh: '[PRE46]'
- en: '[PRE47]'
  id: totrans-124
  prefs: []
  type: TYPE_PRE
  zh: '[PRE47]'
- en: Using the alternate constructor, which takes a single parameter for \(\tilde{l}^M\),
    we can create an instance prepopulated with the values for the constants recommended
    in [[DeGroote2016]](#degroote2016).
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 使用单参数的替代构造函数，可以创建一个已经预设使用[[DeGroote2016]](#degroote2016)推荐常数值的实例。
- en: '[PRE48]'
  id: totrans-126
  prefs: []
  type: TYPE_PRE
  zh: '[PRE48]'
- en: Sensible values for \(\tilde{l}^M\) fall within the range \([0.0, 2.0]\), which
    we will plot below.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: \(\tilde{l}^M\)的合理值位于范围\([0.0, 2.0]\)，我们将在下面绘制。
- en: '[PRE49]'
  id: totrans-128
  prefs: []
  type: TYPE_PRE
  zh: '[PRE49]'
- en: '[PRE50]'
  id: totrans-129
  prefs: []
  type: TYPE_PRE
  zh: '[PRE50]'
- en: '[PRE51]'
  id: totrans-130
  prefs: []
  type: TYPE_PRE
  zh: '[PRE51]'
- en: ([`png`](../../../_downloads/369ad75239934a96d848d986813776da/biomechanics-12.png),
    [`hires.png`](../../../_downloads/c1056b6894e5503ff92f7049e8318808/biomechanics-12.hires.png),
    [`pdf`](../../../_downloads/97921a3a908f376a2711799f4250ab0c/biomechanics-12.pdf))
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: ([`png`](../../../_downloads/369ad75239934a96d848d986813776da/biomechanics-12.png),
    [`hires.png`](../../../_downloads/c1056b6894e5503ff92f7049e8318808/biomechanics-12.hires.png),
    [`pdf`](../../../_downloads/97921a3a908f376a2711799f4250ab0c/biomechanics-12.pdf))
- en: '![../../../_images/biomechanics-12.png](../Images/53edc8c5e7a088d80cf2517dc8bc12bb.png)'
  id: totrans-132
  prefs: []
  type: TYPE_IMG
  zh: '![../../../_images/biomechanics-12.png](../Images/53edc8c5e7a088d80cf2517dc8bc12bb.png)'
- en: The inverse of the fiber passive force-length characteristic curve is sometimes
    required when formulating musculotendon dynamics. The equation for this curve
    from [[DeGroote2016]](#degroote2016) is again analytically invertible.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 要在制定肌腱动力学时，有时需要反转纤维被动力长度特性曲线。这条曲线的方程来自[[DeGroote2016]](#degroote2016)，可以再次进行解析反转。
- en: \[\tilde{l}^M = \left[fl^M_{pas}\right]^{-1} = \frac{c_0 \log{\left(\exp{c_1}
    - 1\right)fl^M_{pas} + 1}}{c_1} + 1\]
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: \[\tilde{l}^M = \left[fl^M_{pas}\right]^{-1} = \frac{c_0 \log{\left(\exp{c_1}
    - 1\right)fl^M_{pas} + 1}}{c_1} + 1\]
- en: There is also a class for this in [`biomechanics`](../../../modules/physics/biomechanics/index.html#module-sympy.physics.biomechanics
    "sympy.physics.biomechanics"), [`FiberForceLengthPassiveInverseDeGroote2016`](../../../modules/physics/biomechanics/api/curve.html#sympy.physics.biomechanics.curve.FiberForceLengthPassiveInverseDeGroote2016
    "sympy.physics.biomechanics.curve.FiberForceLengthPassiveInverseDeGroote2016").
    It can be instantiated with three parameters, the first for \(fl^M\) followed
    by a pair of constants, or by using the alternate constructor with a single argument
    for \(\tilde{l}^M\).
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 在[`biomechanics`](../../../modules/physics/biomechanics/index.html#module-sympy.physics.biomechanics
    "sympy.physics.biomechanics")中也有一个用于此目的的类，[`FiberForceLengthPassiveInverseDeGroote2016`](../../../modules/physics/biomechanics/api/curve.html#sympy.physics.biomechanics.curve.FiberForceLengthPassiveInverseDeGroote2016
    "sympy.physics.biomechanics.curve.FiberForceLengthPassiveInverseDeGroote2016")。可以用三个参数实例化此类，第一个是\(fl^M\)，后跟一对常数，或者使用单参数的替代构造函数来设置\(\tilde{l}^M\)。
- en: '[PRE52]'
  id: totrans-136
  prefs: []
  type: TYPE_PRE
  zh: '[PRE52]'
- en: '[PRE53]'
  id: totrans-137
  prefs: []
  type: TYPE_PRE
  zh: '[PRE53]'
- en: '[PRE54]'
  id: totrans-138
  prefs: []
  type: TYPE_PRE
  zh: '[PRE54]'
- en: Fiber Active Force-Length
  id: totrans-139
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 纤维主动力长度
- en: When a muscle is activated, it contracts to produce a force. This phenomenom
    is modeled by the contractile element in the parallel fiber component of the musculotendon
    model. The amount of force that the fibers can produce is a function of the instantaneous
    length of the fibers. The characteristic curve describing the fiber active force-length
    curve is again parameterized by \(\tilde{l}^M\). This curve is “bell-shaped”.
    For very small and very large values of \(\tilde{l}^M\), the active fiber force-length
    tends to zero. The peak active fiber force-length occurs when \(\tilde{l}^M =
    l^M_{opt}\) and gives a value of \(0.0\).
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 当肌肉被激活时，它收缩产生力。这种现象由肌腱模型中平行纤维组分的收缩元素建模。纤维可以产生的力量取决于纤维的即时长度。描述纤维活动力长度曲线的特征曲线再次由
    \(\tilde{l}^M\) 参数化。这条曲线呈“钟形”。对于非常小和非常大的 \(\tilde{l}^M\) 值，活动纤维力长度趋于零。当 \(\tilde{l}^M
    = l^M_{opt}\) 时，活动纤维力长度达到峰值，其值为 \(0.0\)。
- en: 'The equation for the fiber active force-length curve \(fl^M_{act}\left(\tilde{l}^M\right)\)
    from [[DeGroote2016]](#degroote2016) is:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 来自 [[DeGroote2016]](#degroote2016) 的纤维活动力长度曲线 \(fl^M_{act}\left(\tilde{l}^M\right)\)
    的方程为：
- en: \[fl^M_{act}\left(\tilde{l}^M\right) = c_0 \exp{-\frac{1}{2}\left(\frac{\tilde{l}^M
    - c_1}{\left(c_2 + c_3 \tilde{l}^M\right)}\right)^2} + c_4 \exp{-\frac{1}{2}\left(\frac{\tilde{l}^M
    - c_5}{\left(c_6 + c_7 \tilde{l}^M\right)}\right)^2} + c_8 \exp{-\frac{1}{2}\left(\frac{\tilde{l}^M
    - c_9}{\left(c_{10} + c_{11} \tilde{l}^M\right)}\right)^2}\]
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: \[fl^M_{act}\left(\tilde{l}^M\right) = c_0 \exp{-\frac{1}{2}\left(\frac{\tilde{l}^M
    - c_1}{\left(c_2 + c_3 \tilde{l}^M\right)}\right)^2} + c_4 \exp{-\frac{1}{2}\left(\frac{\tilde{l}^M
    - c_5}{\left(c_6 + c_7 \tilde{l}^M\right)}\right)^2} + c_8 \exp{-\frac{1}{2}\left(\frac{\tilde{l}^M
    - c_9}{\left(c_{10} + c_{11} \tilde{l}^M\right)}\right)^2}\]
- en: To implement this in SymPy we need a time-varying dynamic symbol representing
    \(\tilde{l}^M\) and twelve symbols representing the twelve constants.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 在 SymPy 中实现这一点，我们需要一个表示时间变化的动态符号，表示 \(\tilde{l}^M\)，以及十二个表示十二个常数的符号。
- en: '[PRE55]'
  id: totrans-144
  prefs: []
  type: TYPE_PRE
  zh: '[PRE55]'
- en: '[PRE56]'
  id: totrans-145
  prefs: []
  type: TYPE_PRE
  zh: '[PRE56]'
- en: The SymPy-provided class for this exact curve is [`FiberForceLengthActiveDeGroote2016`](../../../modules/physics/biomechanics/api/curve.html#sympy.physics.biomechanics.curve.FiberForceLengthActiveDeGroote2016
    "sympy.physics.biomechanics.curve.FiberForceLengthActiveDeGroote2016"). It can
    be instantiated with thirteen arguments. The first argument is \(\tilde{l}^M\),
    which need not necessarily be a symbol and can be an expression. The further twelve
    arguments are all constants. It is intended that these will be constants, or sympifiable
    numerical values.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: SymPy 提供的确切曲线类是 [`FiberForceLengthActiveDeGroote2016`](../../../modules/physics/biomechanics/api/curve.html#sympy.physics.biomechanics.curve.FiberForceLengthActiveDeGroote2016)，它可以用十三个参数实例化。第一个参数是
    \(\tilde{l}^M\)，不一定需要是一个符号，可以是一个表达式。接下来的十二个参数都是常数。预期这些将是常数或可 sympify 的数值。
- en: '[PRE57]'
  id: totrans-147
  prefs: []
  type: TYPE_PRE
  zh: '[PRE57]'
- en: '[PRE58]'
  id: totrans-148
  prefs: []
  type: TYPE_PRE
  zh: '[PRE58]'
- en: Using the alternate constructor, which takes a single parameter for \(\tilde{l}^M\),
    we can create an instance prepopulated with the values for the constants recommended
    in [[DeGroote2016]](#degroote2016).
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 使用单参数 \(\tilde{l}^M\) 的替代构造函数，我们可以创建一个实例，其常数值推荐在 [[DeGroote2016]](#degroote2016)
    中。
- en: '[PRE59]'
  id: totrans-150
  prefs: []
  type: TYPE_PRE
  zh: '[PRE59]'
- en: Sensible values for \(\tilde{l}^M\) fall within the range \([0.0, 2.0]\), which
    we will plot below.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 合理的 \(\tilde{l}^M\) 值落在范围 \([0.0, 2.0]\) 内，我们将在下面绘制。
- en: '[PRE60]'
  id: totrans-152
  prefs: []
  type: TYPE_PRE
  zh: '[PRE60]'
- en: '[PRE61]'
  id: totrans-153
  prefs: []
  type: TYPE_PRE
  zh: '[PRE61]'
- en: '[PRE62]'
  id: totrans-154
  prefs: []
  type: TYPE_PRE
  zh: '[PRE62]'
- en: ([`png`](../../../_downloads/92dd6acf499564169dd47d50987d6de2/biomechanics-13.png),
    [`hires.png`](../../../_downloads/8441b002c89aee5ab7fb0337e72bb0d1/biomechanics-13.hires.png),
    [`pdf`](../../../_downloads/04955b3b7dc8e8ff785467390723d72e/biomechanics-13.pdf))
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: ([`png`](../../../_downloads/92dd6acf499564169dd47d50987d6de2/biomechanics-13.png),
    [`hires.png`](../../../_downloads/8441b002c89aee5ab7fb0337e72bb0d1/biomechanics-13.hires.png),
    [`pdf`](../../../_downloads/04955b3b7dc8e8ff785467390723d72e/biomechanics-13.pdf))
- en: '![../../../_images/biomechanics-13.png](../Images/64250cb31543861a544f1b6bb80d2e34.png)'
  id: totrans-156
  prefs: []
  type: TYPE_IMG
  zh: '![../../../_images/biomechanics-13.png](../Images/64250cb31543861a544f1b6bb80d2e34.png)'
- en: No inverse curve exists for the fiber active force-length characteristic curve
    as it has multiple values of \(\tilde{l}^M\) for each value of \(fl^M_{act}\).
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 对于纤维活动力长度特征曲线，不存在反曲线，因为每个 \(fl^M_{act}\) 的值对应多个 \(\tilde{l}^M\) 的值。
- en: Fiber Force-Velocity
  id: totrans-158
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 纤维力-速度
- en: 'The force produced by the contractile element is also a function of its lengthening
    velocity. The characteristic curve describing the velocity-dependent portion of
    the contractile element’s dynamics is a function of normalized muscle fiber lengthening
    velocity:'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 收缩元素产生的力量也是其长度变化速度的函数。描述收缩元素动态中与速度有关部分的特征曲线是肌肉纤维长度变化速度的函数：
- en: \[\tilde{v}^M = \frac{v^M}{v^M_{max}}\]
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: \[\tilde{v}^M = \frac{v^M}{v^M_{max}}\]
- en: where \(v^M\) is muscle fiber lengthening velocity, and \(v^M_{max}\) is the
    “maximum fiber velocity”, a constant representing the muscle fiber velocity at
    which it is not able to produce any contractile force when concentrically contracting.
    \(v^M_{max}\) is commonly given a value of \(10 l^M_{opt}\).
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 这里的 \(v^M\) 是肌肉纤维的拉伸速度，\(v^M_{max}\) 是“最大纤维速度”，代表肌肉纤维在同心收缩时不能产生任何收缩力的速度常数。\(v^M_{max}\)
    通常被赋予一个值 \(10 l^M_{opt}\)。
- en: 'The equation for the fiber force-velocity curve \(fv^M\left(\tilde{v}^M\right)\)
    from [[DeGroote2016]](#degroote2016) is:'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 来自[[DeGroote2016]](#degroote2016)的纤维力-速度曲线 \(fv^M\left(\tilde{v}^M\right)\)
    的方程是：
- en: \[fv^M\left(\tilde{v}^M\right) = c_0 \log{\left(c_1 \tilde{v}^M + c_2\right)
    + \sqrt{\left(c_1 \tilde{v}^M + c_2\right)^2 + 1}} + c_3\]
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: \[fv^M\left(\tilde{v}^M\right) = c_0 \log{\left(c_1 \tilde{v}^M + c_2\right)
    + \sqrt{\left(c_1 \tilde{v}^M + c_2\right)^2 + 1}} + c_3\]
- en: Similarly to before, to implement this in SymPy we need a time-varying dynamic
    symbol representing \(\tilde{v}^M\) and four symbols representing the four constants.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 类似之前，要在 SymPy 中实现这一点，我们需要一个表示 \(\tilde{v}^M\) 的时间变化动态符号，以及四个表示四个常数的符号。
- en: '[PRE63]'
  id: totrans-165
  prefs: []
  type: TYPE_PRE
  zh: '[PRE63]'
- en: '[PRE64]'
  id: totrans-166
  prefs: []
  type: TYPE_PRE
  zh: '[PRE64]'
- en: Alternatively, we could define this in terms of \(v^M\) and \(v^M_{max}\).
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 或者，我们可以根据 \(v^M\) 和 \(v^M_{max}\) 来定义这个曲线。
- en: '[PRE65]'
  id: totrans-168
  prefs: []
  type: TYPE_PRE
  zh: '[PRE65]'
- en: '[PRE66]'
  id: totrans-169
  prefs: []
  type: TYPE_PRE
  zh: '[PRE66]'
- en: The SymPy-provided class for this exact curve is [`FiberForceVelocityDeGroote2016`](../../../modules/physics/biomechanics/api/curve.html#sympy.physics.biomechanics.curve.FiberForceVelocityDeGroote2016
    "sympy.physics.biomechanics.curve.FiberForceVelocityDeGroote2016"). It can be
    instantiated with five arguments. The first argument is \(\tilde{v}^M\), which
    need not necessarily be a symbol and can be an expression. The further four arguments
    are all constants. It is intended that these will be constants, or sympifiable
    numerical values.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: SymPy 提供的精确曲线类是[`FiberForceVelocityDeGroote2016`](../../../modules/physics/biomechanics/api/curve.html#sympy.physics.biomechanics.curve.FiberForceVelocityDeGroote2016
    "sympy.physics.biomechanics.curve.FiberForceVelocityDeGroote2016")。它可以用五个参数实例化。第一个参数是
    \(\tilde{v}^M\)，这不一定需要是一个符号，可以是一个表达式。接下来的四个参数都是常数。预期这些将是常数，或者是可以转换为数值的符号。
- en: '[PRE67]'
  id: totrans-171
  prefs: []
  type: TYPE_PRE
  zh: '[PRE67]'
- en: '[PRE68]'
  id: totrans-172
  prefs: []
  type: TYPE_PRE
  zh: '[PRE68]'
- en: Using the alternate constructor, which takes a single parameter for \(\tilde{v}^M\),
    we can create an instance prepopulated with the values for the constants recommended
    in [[DeGroote2016]](#degroote2016).
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 使用另一种构造函数，它接受一个参数 \(\tilde{v}^M\)，我们可以创建一个预先填充了推荐常数值的实例，这些值来自于[[DeGroote2016]](#degroote2016)。
- en: '[PRE69]'
  id: totrans-174
  prefs: []
  type: TYPE_PRE
  zh: '[PRE69]'
- en: Sensible values for \(\tilde{v}^M\) fall within the range \([-1.0, 1.0]\), which
    we will plot below.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 合理的 \(\tilde{v}^M\) 值落在范围 \([-1.0, 1.0]\) 内，我们将在下面进行绘制。
- en: '[PRE70]'
  id: totrans-176
  prefs: []
  type: TYPE_PRE
  zh: '[PRE70]'
- en: '[PRE71]'
  id: totrans-177
  prefs: []
  type: TYPE_PRE
  zh: '[PRE71]'
- en: '[PRE72]'
  id: totrans-178
  prefs: []
  type: TYPE_PRE
  zh: '[PRE72]'
- en: ([`png`](../../../_downloads/83ff802cb90acb6b4d333a4e217a9d8b/biomechanics-14.png),
    [`hires.png`](../../../_downloads/a9683acdab869b385cd0d3498518169a/biomechanics-14.hires.png),
    [`pdf`](../../../_downloads/93e2e42be1930b8b607d11fbaa0a248b/biomechanics-14.pdf))
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: ([`png`](../../../_downloads/83ff802cb90acb6b4d333a4e217a9d8b/biomechanics-14.png),
    [`hires.png`](../../../_downloads/a9683acdab869b385cd0d3498518169a/biomechanics-14.hires.png),
    [`pdf`](../../../_downloads/93e2e42be1930b8b607d11fbaa0a248b/biomechanics-14.pdf))
- en: '![../../../_images/biomechanics-14.png](../Images/8da254d54d2c3279a19d4e2835642026.png)'
  id: totrans-180
  prefs: []
  type: TYPE_IMG
  zh: '![../../../_images/biomechanics-14.png](../Images/8da254d54d2c3279a19d4e2835642026.png)'
- en: The inverse of the fiber force-velocity characteristic curve is sometimes required
    when formulating musculotendon dynamics. The equation for this curve from [[DeGroote2016]](#degroote2016)
    is again analytically invertible.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 当制定肌腱动力学时，有时需要纤维力-速度特性曲线的反函数。这条曲线的方程来自于[[DeGroote2016]](#degroote2016)，同样可以进行解析反演。
- en: \[\tilde{v}^M = \left[fv^M\right]^{-1} = \frac{\sinh{\frac{fv^M - c_3}{c_0}}
    - c_2}{c_1}\]
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: \[\tilde{v}^M = \left[fv^M\right]^{-1} = \frac{\sinh{\frac{fv^M - c_3}{c_0}}
    - c_2}{c_1}\]
- en: There is also a class for this in [`biomechanics`](../../../modules/physics/biomechanics/index.html#module-sympy.physics.biomechanics
    "sympy.physics.biomechanics"), [`FiberForceVelocityInverseDeGroote2016`](../../../modules/physics/biomechanics/api/curve.html#sympy.physics.biomechanics.curve.FiberForceVelocityInverseDeGroote2016
    "sympy.physics.biomechanics.curve.FiberForceVelocityInverseDeGroote2016"). It
    can be instantiated with five parameters, the first for \(fv^M\) followed by four
    constants, or by using the alternate constructor with a single argument for \(\tilde{v}^M\).
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 这个公式也在[`biomechanics`](../../../modules/physics/biomechanics/index.html#module-sympy.physics.biomechanics
    "sympy.physics.biomechanics")中有一个类，名为[`FiberForceVelocityInverseDeGroote2016`](../../../modules/physics/biomechanics/api/curve.html#sympy.physics.biomechanics.curve.FiberForceVelocityInverseDeGroote2016
    "sympy.physics.biomechanics.curve.FiberForceVelocityInverseDeGroote2016")。它可以用五个参数实例化，第一个是
    \(fv^M\)，后面四个是常数；或者可以用另一种构造函数，只需要一个参数 \(\tilde{v}^M\)。
- en: '[PRE73]'
  id: totrans-184
  prefs: []
  type: TYPE_PRE
  zh: '[PRE73]'
- en: '[PRE74]'
  id: totrans-185
  prefs: []
  type: TYPE_PRE
  zh: '[PRE74]'
- en: '[PRE75]'
  id: totrans-186
  prefs: []
  type: TYPE_PRE
  zh: '[PRE75]'
- en: Fiber Damping
  id: totrans-187
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 纤维阻尼
- en: 'Perhaps the simplest element in the musculotendon model is the fiber damping.
    This does not have an associated characteristic curve as it is typically just
    modeled as a simple linear damper. We will use \(\beta\) as the coefficient of
    damping such that the damping force can be described as:'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 在肌腱模型中，纤维阻尼可能是最简单的元素。它没有关联的特征曲线，通常被建模为简单的线性阻尼器。我们将使用 \(\beta\) 作为阻尼系数，阻尼力可以描述为：
- en: \[f_{damp} = \beta \tilde{v}^M\]
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: \[f_{damp} = \beta \tilde{v}^M\]
- en: '[[DeGroote2016]](#degroote2016) suggest the value \(\beta = 0.1\). However,
    SymPy uses \(\beta = 10\) by default. When conducting forward simulations or solving
    optimal control problems as this increase in damping typically does not significantly
    effect the musculotendon dynamics but does have been empirically found to significantly
    improve the numerical conditioning of the equations.'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: '[[DeGroote2016]](#degroote2016) 建议使用 \(\beta = 0.1\)。然而，SymPy 默认使用 \(\beta
    = 10\)。在进行前向模拟或解决最优控制问题时，这种增加阻尼通常不会显著影响肌腱动力学，但已经经验性地发现可以显著改善方程的数值条件。'
- en: Musculotendon Dynamics
  id: totrans-191
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 肌腱动力学
- en: Rigid Tendon Dynamics
  id: totrans-192
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 刚性肌腱动力学
- en: Rigid tendon musculotendon dynamics are reasonably straightforward to implement
    because the inextensible tendon allows for the normalized muscle fiber length
    to be expressed directly in terms of musculotendon length. With the inextensible
    tendon \(l^T = l^T_{slack}\) and as such, normalized tendon length is just unity,
    \(\tilde{l}^T = 1\). Using trigonometry, muscle fiber length can be expressed
    as
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 由于不可伸展的肌腱允许直接用肌腱长度表示肌肉纤维的归一化长度，刚性肌腱肌腱动力学实现起来相当直接。当不可伸展的肌腱 \(l^T = l^T_{slack}\)，归一化肌腱长度即为单位长度，\(\tilde{l}^T
    = 1\)。利用三角法，肌肉纤维长度可以表达为
- en: \[l^M = \sqrt{\left(l^{MT} - l^T\right)^2 + \left(l^M_{opt} \sin{\alpha_{opt}}
    \right)^2}\]
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: \[l^M = \sqrt{\left(l^{MT} - l^T\right)^2 + \left(l^M_{opt} \sin{\alpha_{opt}}
    \right)^2}\]
- en: where \(\alpha_{opt}\) is the “optimal pennation angle”, another constant property
    of a musculotendon that describes the pennation angle (the angle of the muscle
    fibers relative to the direction parallel to the tendon) at which \(l^M = l^M_{opt}\).
    A common simplifying assumption is to assume \(\alpha_{opt} = 0\), which simplifies
    the above to
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 其中 \(\alpha_{opt}\) 是“最佳斜角”，是肌腱的另一个恒定特性，描述了肌肉纤维相对于与肌腱平行方向的角度（肌肉纤维的角度）。常见的简化假设是假设
    \(\alpha_{opt} = 0\)，这样上述公式简化为
- en: \[l^M = \sqrt{\left(l^{MT} - l^T\right)^2 + \left(l^M_{opt}\right)^2}\]
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: \[l^M = \sqrt{\left(l^{MT} - l^T\right)^2 + \left(l^M_{opt}\right)^2}\]
- en: With \(\tilde{l}^M = \frac{l^M}{l^M_{opt}}\), the muscle fiber velocity can
    be expressed as
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 当 \(\tilde{l}^M = \frac{l^M}{l^M_{opt}}\) 时，肌肉纤维速度可以表达为
- en: \[v^M = v^{MT} \frac{l^{MT} - l^T_{slack}}{l^M}\]
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: \[v^M = v^{MT} \frac{l^{MT} - l^T_{slack}}{l^M}\]
- en: 'Muscle fiber can be normalized as before, \(\tilde{v}^M = \frac{v^M}{v^M_{max}}\).
    Using the curves described above, we can express the normalized muscle fiber force
    (\(\tilde{F}^M\)) can be expressed as a function of normalized tendon length (\(\tilde{l}^T\)),
    normalized fiber length (\(\tilde{l}^M\)), normalized fiber velocity (\(\tilde{v}^M\)),
    and activation (\(a\)):'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，肌肉纤维可以归一化，\(\tilde{v}^M = \frac{v^M}{v^M_{max}}\)。利用上述曲线，我们可以将归一化肌肉纤维力（\(\tilde{F}^M\))
    表达为归一化肌腱长度（\(\tilde{l}^T\))、归一化纤维长度（\(\tilde{l}^M\))、归一化纤维速度（\(\tilde{v}^M\))
    和激活（\(a\)) 的函数。
- en: \[\tilde{F}^M = a \cdot fl^M_{act}\left(\tilde{l}^M\right) \cdot fv^M\left(\tilde{v}^M\right)
    + fl^M_{pas}\left(\tilde{l}^M\right) + \beta \cdot \tilde{v}^M\]
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: \[\tilde{F}^M = a \cdot fl^M_{act}\left(\tilde{l}^M\right) \cdot fv^M\left(\tilde{v}^M\right)
    + fl^M_{pas}\left(\tilde{l}^M\right) + \beta \cdot \tilde{v}^M\]
- en: 'We introduce a new constant, \(F^M_{max}\), the “maximum isometric force”,
    which describes the maximum force that a musculotendon can produce under full
    activation and an isometric (\(v^M = 0\)) contraction. Accounting for the pennation
    angle, the tendon force (\(F^T\)), which is the force applied to the skeleton
    at the musculotendon’s origin and insertion, can be expressed as:'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 我们引入一个新的常数 \(F^M_{max}\)，即“最大等长收缩力”，描述了在全激活和等长（\(v^M = 0\)）收缩状态下肌腱最多可以产生的力。考虑到斜角度，肌腱力（\(F^T\))，即施加在肌腱起点和插入点骨骼上的力，可以表示为：
- en: \[F^T = F^M_{max} \cdot F^M \cdot \sqrt{1 - \sin{\alpha_{opt}}^2}\]
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: \[F^T = F^M_{max} \cdot F^M \cdot \sqrt{1 - \sin{\alpha_{opt}}^2}\]
- en: We can describe all of this using SymPy and the musculotendon curve classes
    that we introduced above. We will need time-varying dynamics symbols for \(l^{MT}\),
    \(v_{MT}\), and \(a\). We will also need constant symbols for \(l^T_{slack}\),
    \(l^M_{opt}\), \(F^M_{max}\), \(v^M_{max}\), \(\alpha_{opt}\), and \(\beta\).
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用上面介绍过的SymPy和肌腱曲线类来描述所有这些。我们将需要时间变化的动力学符号\(l^{MT}\)、\(v_{MT}\)和\(a\)。我们还需要常量符号\(l^T_{slack}\)、\(l^M_{opt}\)、\(F^M_{max}\)、\(v^M_{max}\)、\(\alpha_{opt}\)和\(\beta\)。
- en: '[PRE76]'
  id: totrans-204
  prefs: []
  type: TYPE_PRE
  zh: '[PRE76]'
- en: '[PRE77]'
  id: totrans-205
  prefs: []
  type: TYPE_PRE
  zh: '[PRE77]'
- en: '[PRE78]'
  id: totrans-206
  prefs: []
  type: TYPE_PRE
  zh: '[PRE78]'
- en: '[PRE79]'
  id: totrans-207
  prefs: []
  type: TYPE_PRE
  zh: '[PRE79]'
- en: '[PRE80]'
  id: totrans-208
  prefs: []
  type: TYPE_PRE
  zh: '[PRE80]'
- en: '[PRE81]'
  id: totrans-209
  prefs: []
  type: TYPE_PRE
  zh: '[PRE81]'
- en: '[PRE82]'
  id: totrans-210
  prefs: []
  type: TYPE_PRE
  zh: '[PRE82]'
- en: '[PRE83]'
  id: totrans-211
  prefs: []
  type: TYPE_PRE
  zh: '[PRE83]'
- en: SymPy offers this implementation of rigid tendon dynamics in the [`MusculotendonDeGroote2016`](../../../modules/physics/biomechanics/api/musculotendon.html#sympy.physics.biomechanics.musculotendon.MusculotendonDeGroote2016
    "sympy.physics.biomechanics.musculotendon.MusculotendonDeGroote2016") class, a
    full demonstration of which is shown below when we will construct a complete simple
    musculotendon model.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: SymPy提供了[`MusculotendonDeGroote2016`](../../../modules/physics/biomechanics/api/musculotendon.html#sympy.physics.biomechanics.musculotendon.MusculotendonDeGroote2016)类的刚性肌腱动力学实现，我们将在下面构建一个完整的简单肌腱模型时展示。
- en: Elastic Tendon Dynamics
  id: totrans-213
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 弹性肌腱动力学
- en: Elastic tendon dynamics are more complicated as we cannot directly express fiber
    length in terms of musculotendon length due to tendon length varying. Instead,
    we have to related the forces experienced in the tendon to the forces produced
    by the muscle fibers, ensuring that the two are in equilibrium. We cannot do this
    without introducing an additional state variable into the musculotendon dynamics,
    and thus an additional first-order ordinary differential equation. There are many
    choices that we can make for this state, but perhaps one of the most intuitive
    is to use \(\tilde{l}^M\). With this we will need to both create an expression
    for the tendon force (\(F^T\)) as well as the first-order ordinary differential
    equation for \(\frac{d \tilde{l}^M}{dt}\). \(l^M\), \(l^T\), and \(\tilde{l}^T\)
    can be calculated similar to with rigid tendon dynamics, remembering that we already
    have \(\tilde{l}^M\) available as a know value due to it being a state variable.
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 弹性肌腱动力学更为复杂，因为我们不能直接用肌腱长度表达肌肉肌腱长度。相反，我们必须将肌腱中经历的力与肌肉纤维产生的力联系起来，确保两者处于平衡状态。为了在肌腱肌腱动力学中引入额外的状态变量，我们需要引入一个额外的一阶常微分方程。我们可以对这种状态进行多种选择，但其中一个最直观的选择可能是使用\(\tilde{l}^M\)。因此，我们需要创建肌腱力(\(F^T\))的表达式，以及对\(\frac{d
    \tilde{l}^M}{dt}\)进行一阶常微分方程的处理。\(l^M\)、\(l^T\)和\(\tilde{l}^T\)的计算方式与刚性肌腱动力学类似，记住我们已经有\(\tilde{l}^M\)作为已知值，因为它是一个状态变量。
- en: \[\begin{split}l^M &= \tilde{l}^M \cdot l^M_{opt} \\ l^T &= l^{MT} - \sqrt{\left(l^M\right)^2
    - \left(l^M_{opt} \sin{\alpha_{opt}}\right)^2} \\ \tilde{l}^T &= \frac{l^T}{l^T_{slack}}\end{split}\]
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: \[\begin{split}l^M &= \tilde{l}^M \cdot l^M_{opt} \\ l^T &= l^{MT} - \sqrt{\left(l^M\right)^2
    - \left(l^M_{opt} \sin{\alpha_{opt}}\right)^2} \\ \tilde{l}^T &= \frac{l^T}{l^T_{slack}}\end{split}\]
- en: 'Using \(\tilde{l}^T\) and the tendon force-length curve (\(fl^T\left(\tilde{l}^T\right)\)),
    we can write an equation for the normalized and absolte tendon force:'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 使用\(\tilde{l}^T\)和肌腱力长度曲线（\(fl^T\left(\tilde{l}^T\right)\)），我们可以编写归一化和绝对肌腱力的方程：
- en: \[\begin{split}\tilde{F}^T &= fl^T\left(\tilde{l}^T\right) \\ F^T &= F^M_{max}
    \cdot \tilde{F}^T\end{split}\]
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: \[\begin{split}\tilde{F}^T &= fl^T\left(\tilde{l}^T\right) \\ F^T &= F^M_{max}
    \cdot \tilde{F}^T\end{split}\]
- en: 'To express \(F^M\) we need to know the cosine of the pennation angle (\(\cos{\alpha}\)).
    We can use trigonometry to write an equation for this:'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 要表达\(F^M\)，我们需要知道肌腱角的余弦值（\(\cos{\alpha}\)）。我们可以使用三角学来编写此方程：
- en: \[\begin{split}\cos{\alpha} &= \frac{l^{MT} - l^T}{l^M} \\ F^M &= \frac{F^T}{\cos{\alpha}}\end{split}\]
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: \[\begin{split}\cos{\alpha} &= \frac{l^{MT} - l^T}{l^M} \\ F^M &= \frac{F^T}{\cos{\alpha}}\end{split}\]
- en: 'If we assume that the damping coefficient \(\beta = 0\), we can rearrange the
    muscle fiber force equation:'
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们假设阻尼系数\(\beta = 0\)，我们可以重新排列肌纤维力方程：
- en: \[\tilde{F}^M = a \cdot fl^M_{act}\left(\tilde{l}^M\right) \cdot fv^M\left(\tilde{v}^M\right)
    + fl^M_{pas}\left(\tilde{l}^M\right) + \beta \cdot \tilde{v}^M\]
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: \[\tilde{F}^M = a \cdot fl^M_{act}\left(\tilde{l}^M\right) \cdot fv^M\left(\tilde{v}^M\right)
    + fl^M_{pas}\left(\tilde{l}^M\right) + \beta \cdot \tilde{v}^M\]
- en: 'to give \(fv^M\left(\tilde{v}^M\right)\):'
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 给出\(fv^M\left(\tilde{v}^M\right)\)：
- en: \[fv^M\left(\tilde{v}^M\right) = \frac{\tilde{F}^M - fl^M_{pas}\left(\tilde{l}^M\right)}{a
    \cdot fl^M_{act}\left(\tilde{l}^M\right)}\]
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: \[fv^M\left(\tilde{v}^M\right) = \frac{\tilde{F}^M - fl^M_{pas}\left(\tilde{l}^M\right)}{a
    \cdot fl^M_{act}\left(\tilde{l}^M\right)}\]
- en: 'Using the inverse fiber force-velocity curve, \(\left[fv^M\left(\tilde{v}^M\right)\right]^{-1}\),
    and differentiating \(\tilde{l}^M\) with respect to time, we can finally write
    an equation for \(\frac{d \tilde{l}^M}{dt}\):'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 使用反向纤维力-速度曲线，\(\left[fv^M\left(\tilde{v}^M\right)\right]^{-1}\)，并对\(\tilde{l}^M\)关于时间求导，我们最终可以写出\(\frac{d
    \tilde{l}^M}{dt}\)的方程：
- en: \[\frac{d \tilde{l}^M}{dt} = \frac{v^M_{max}}{l^M_{opt}} \tilde{v}^M\]
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: \[\frac{d \tilde{l}^M}{dt} = \frac{v^M_{max}}{l^M_{opt}} \tilde{v}^M\]
- en: To formulate these elastic tendon musculotendon dynamics, we had to assume that
    \(\beta = 0\), which is suboptimal in forward simulations and optimal control
    problems. It is possible to formulate elastic tendon musculotendon dynamics with
    damping, but this requires a more complicated formulation with an additional input
    variable in addition to an additional state variable, and as such the musculotendon
    dynamics must be enforced as a differential algebraic equation rather than an
    ordinary differential equation. The specifics of these types of formulation will
    not be discussed here, but the interested reader can refer to the docstrings of
    the [`MusculotendonDeGroote2016`](../../../modules/physics/biomechanics/api/musculotendon.html#sympy.physics.biomechanics.musculotendon.MusculotendonDeGroote2016
    "sympy.physics.biomechanics.musculotendon.MusculotendonDeGroote2016") where they
    are implemented.
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 要制定这些弹性肌腱肌肉肌腱动力学，我们不得不假设\(\beta = 0\)，这在前向模拟和最优控制问题中是次优的。可以制定具有阻尼的弹性肌腱肌肉肌腱动力学，但这需要一个更复杂的公式，除了额外的输入变量外还需要额外的状态变量，因此肌腱肌肉肌腱动力学必须作为代数微分方程而不是普通微分方程来实施。这些类型的具体公式不会在此处讨论，但感兴趣的读者可以参考[`MusculotendonDeGroote2016`](../../../modules/physics/biomechanics/api/musculotendon.html#sympy.physics.biomechanics.musculotendon.MusculotendonDeGroote2016
    "sympy.physics.biomechanics.musculotendon.MusculotendonDeGroote2016")的文档字符串，其中它们已实施。
- en: A Simple Musculotendon Model
  id: totrans-227
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 一个简单的肌腱模型
- en: 'To demonstrate a muscle’s effect on a simple system, we can model a particle
    of mass \(m\) under the influence of gravity with a muscle pulling the mass against
    gravity. The mass \(m\) has a single generalized coordinate \(q\) and generalized
    speed \(u\) to describe its position and motion. The following code establishes
    the kinematics and gravitational force and an associated particle:'
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 要展示肌肉对简单系统的影响，我们可以模拟一个质量为\(m\)的粒子，在重力的影响下，由肌肉抵抗重力拉动质量。质量\(m\)具有单一的广义坐标\(q\)和广义速度\(u\)，以描述其位置和运动。以下代码建立了运动学和重力作用以及相关的粒子：
- en: '[PRE84]'
  id: totrans-229
  prefs: []
  type: TYPE_PRE
  zh: '[PRE84]'
- en: '[PRE85]'
  id: totrans-230
  prefs: []
  type: TYPE_PRE
  zh: '[PRE85]'
- en: '[PRE86]'
  id: totrans-231
  prefs: []
  type: TYPE_PRE
  zh: '[PRE86]'
- en: '[PRE87]'
  id: totrans-232
  prefs: []
  type: TYPE_PRE
  zh: '[PRE87]'
- en: '[PRE88]'
  id: totrans-233
  prefs: []
  type: TYPE_PRE
  zh: '[PRE88]'
- en: '[PRE89]'
  id: totrans-234
  prefs: []
  type: TYPE_PRE
  zh: '[PRE89]'
- en: SymPy Biomechanics includes musculotendon actuator models. Here we will use
    a specific musculotendon model implementation. A musculotendon actuator is instantiated
    with two input components, the pathway and the activation dynamics model. The
    actuator must act along a pathway that connects the origin and insertion points
    of the muscle. Our origin will attach to the fixed point \(O\) and insert on the
    moving particle \(P\).
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: SymPy生物力学包括肌腱肌肉肌腱执行器模型。在这里，我们将使用特定的肌腱肌肉肌腱模型实现。肌腱肌肉肌腱执行器使用两个输入组件实例化，即路径和激活动力学模型。执行器必须沿连接肌肉起始点和插入点的路径执行。我们的起始点将附着在固定点\(O\)上，插入到移动粒子\(P\)上。
- en: '[PRE90]'
  id: totrans-236
  prefs: []
  type: TYPE_PRE
  zh: '[PRE90]'
- en: '[PRE91]'
  id: totrans-237
  prefs: []
  type: TYPE_PRE
  zh: '[PRE91]'
- en: 'A pathway has attachment points:'
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 一条路径具有附着点：
- en: '[PRE92]'
  id: totrans-239
  prefs: []
  type: TYPE_PRE
  zh: '[PRE92]'
- en: 'and knows the length between the end attachment points as well as the relative
    speed between the two attachment points:'
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 并知道末端附着点之间的长度以及两个附着点之间的相对速度：
- en: '[PRE93]'
  id: totrans-241
  prefs: []
  type: TYPE_PRE
  zh: '[PRE93]'
- en: 'Finally, the pathway can determine the forces acting on the two attachment
    points give a force magnitude:'
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，路径可以确定作用在两个附着点上的力的大小：
- en: '[PRE94]'
  id: totrans-243
  prefs: []
  type: TYPE_PRE
  zh: '[PRE94]'
- en: The activation dynamics model represents a set of algebraic or ordinary differential
    equations that relate the muscle excitation to the muscle activation. In our case,
    we will use a first order ordinary differential equation that gives a smooth,
    but delayed activation \(a(t)\) from the excitation \(e(t)\).
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 激活动力学模型表示了一组代数或普通微分方程，这些方程将肌肉兴奋与肌肉激活联系起来。在我们的情况下，我们将使用一个一阶普通微分方程，该方程从兴奋\(e(t)\)产生平滑但延迟的激活\(a(t)\)。
- en: '[PRE95]'
  id: totrans-245
  prefs: []
  type: TYPE_PRE
  zh: '[PRE95]'
- en: 'The activation model has a state variable \(\mathbf{x}\), input variable \(\mathbf{r}\),
    and some constant parameters \(\mathbf{p}\):'
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 激活模型具有状态变量\(\mathbf{x}\)，输入变量\(\mathbf{r}\)，以及一些常数参数\(\mathbf{p}\)：
- en: '[PRE96]'
  id: totrans-247
  prefs: []
  type: TYPE_PRE
  zh: '[PRE96]'
- en: Note that the return value for the constants parameters is empty. If we had
    instantiated [`FirstOrderActivationDeGroote2016`](../../../modules/physics/biomechanics/api/activation.html#sympy.physics.biomechanics.activation.FirstOrderActivationDeGroote2016
    "sympy.physics.biomechanics.activation.FirstOrderActivationDeGroote2016") normally
    then we would have had to supply three values for \(\tau_{a}\), \(\tau_{d}\),
    and \(b\). If these had been [`Symbol`](../../../modules/core.html#sympy.core.symbol.Symbol
    "sympy.core.symbol.Symbol") objects then these would have shown up in the returned
    [`MutableDenseMatrix`](../../../modules/matrices/dense.html#sympy.matrices.dense.MutableDenseMatrix
    "sympy.matrices.dense.MutableDenseMatrix").
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，常量参数的返回值为空。如果我们正常实例化 [`FirstOrderActivationDeGroote2016`](../../../modules/physics/biomechanics/api/activation.html#sympy.physics.biomechanics.activation.FirstOrderActivationDeGroote2016)，那么我们将不得不提供
    \(\tau_{a}\)、\(\tau_{d}\) 和 \(b\) 的三个值。如果这些是 [`Symbol`](../../../modules/core.html#sympy.core.symbol.Symbol
    "sympy.core.symbol.Symbol") 对象，那么它们将显示在返回的 [`MutableDenseMatrix`](../../../modules/matrices/dense.html#sympy.matrices.dense.MutableDenseMatrix
    "sympy.matrices.dense.MutableDenseMatrix") 中。
- en: 'These are associated with its first order differential equation \(\dot{a} =
    f(a, e, t)\):'
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 这些与其一阶微分方程 \(\dot{a} = f(a, e, t)\) 相关：
- en: '[PRE97]'
  id: totrans-250
  prefs: []
  type: TYPE_PRE
  zh: '[PRE97]'
- en: With the pathway and activation dynamics, the musculotendon model created using
    them both and needs some parameters to define the muscle and tendon specific properties.
    You need to specify the tendon slack length, peak isometric force, optimal fiber
    length, maximal fiber velocity, optimal pennation angle, and fiber damping coefficients.
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 通过路径和激活动力学，使用它们创建的肌腱肌模型需要一些参数来定义肌肉和肌腱的特定属性。您需要指定肌腱松弛长度、峰值等长力、最佳纤维长度、最大纤维速度、最佳偏角和纤维阻尼系数。
- en: '[PRE98]'
  id: totrans-252
  prefs: []
  type: TYPE_PRE
  zh: '[PRE98]'
- en: '[PRE99]'
  id: totrans-253
  prefs: []
  type: TYPE_PRE
  zh: '[PRE99]'
- en: '[PRE100]'
  id: totrans-254
  prefs: []
  type: TYPE_PRE
  zh: '[PRE100]'
- en: 'Because this musculotendon actuator has a rigid tendon model, it has the same
    state and ordinary differential equation as the activation model:'
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 因为这种肌腱肌致动器具有刚性肌腱模型，它具有与激活模型相同的状态和常微分方程：
- en: '[PRE101]'
  id: totrans-256
  prefs: []
  type: TYPE_PRE
  zh: '[PRE101]'
- en: 'The musculotendon provides the extra ordinary differential equations as well
    as the muscle specific forces applied to the pathway:'
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 肌腱肌提供额外的常微分方程以及应用于路径的肌肉特定力量：
- en: '[PRE102]'
  id: totrans-258
  prefs: []
  type: TYPE_PRE
  zh: '[PRE102]'
- en: These loads are made up of various functions that describe the length and velocity
    relationships to the muscle fiber force.
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 这些负载由描述长度和速度关系与肌肉纤维力量的各种函数组成。
- en: 'Now that we have the forces that the muscles and tendons produce the equations
    of motion of the system can be formed with, for example, Kane’s Method:'
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们有了肌肉和肌腱产生的力，系统的运动方程可以通过例如Kane's方法形成：
- en: '[PRE103]'
  id: totrans-261
  prefs: []
  type: TYPE_PRE
  zh: '[PRE103]'
- en: 'The equations of motion are made up of the kinematical differential equation,
    the dynamical differential equation (Newton’s Second Law), and the muscle activation
    differential equation. The explicit form of each can be formed like so:'
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 运动方程由运动学微分方程、动力学微分方程（牛顿第二定律）和肌肉激活微分方程组成。每个的显式形式可以如下形成：
- en: '[PRE104]'
  id: totrans-263
  prefs: []
  type: TYPE_PRE
  zh: '[PRE104]'
- en: 'We can now create a numerical function that evaluates the equations of motion
    given the state, inputs, and constant parameters. Start by listing each symbolically:'
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们可以创建一个数值函数，根据状态、输入和常量参数评估运动方程。首先通过符号列出每个：
- en: '[PRE105]'
  id: totrans-265
  prefs: []
  type: TYPE_PRE
  zh: '[PRE105]'
- en: 'Then the numerical function to evaluate the right hand side of the explicit
    ordinary differential equations is:'
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，评估显式常微分方程右手边的数值函数是：
- en: '[PRE106]'
  id: totrans-267
  prefs: []
  type: TYPE_PRE
  zh: '[PRE106]'
- en: 'It will additionally be interesting to numerically evaluate the muscle force,
    so create a function for it too:'
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: 另外，数值评估肌肉力量也会很有趣，因此也创建一个函数：
- en: '[PRE107]'
  id: totrans-269
  prefs: []
  type: TYPE_PRE
  zh: '[PRE107]'
- en: 'To test these functions we need some suitable numerical values. This muscle
    will be able to produce a maximum force of 10 N to lift a mass of 0.5 kg:'
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: 为了测试这些函数，我们需要一些合适的数值。这种肌肉能够产生最大10N的力量来提起一个质量为0.5kg的物体：
- en: '[PRE108]'
  id: totrans-271
  prefs: []
  type: TYPE_PRE
  zh: '[PRE108]'
- en: 'Our tendon is rigid, so the length of the muscle will be \(q-l_{T_\textrm{slack}}\)
    and we want to give an initial muscle length near its force producing peak, so
    we choose \(q_0=l_{M_\textrm{opt}} + l_{T_\textrm{slack}}\). Let’s also give the
    muscle a small initial activation so that it produces a non-zero force:'
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的肌腱是刚性的，所以肌肉的长度将是 \(q-l_{T_\textrm{slack}}\)，我们希望初始肌肉长度接近其产力峰值，因此我们选择 \(q_0=l_{M_\textrm{opt}}
    + l_{T_\textrm{slack}}\)。还让肌肉具有小的初始激活以产生非零力量：
- en: '[PRE109]'
  id: totrans-273
  prefs: []
  type: TYPE_PRE
  zh: '[PRE109]'
- en: 'Set the excitation to 1.0 and test the numerical functions:'
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 将兴奋设为1.0并测试数值函数：
- en: '[PRE110]'
  id: totrans-275
  prefs: []
  type: TYPE_PRE
  zh: '[PRE110]'
- en: 'The two functions work so we can now simulate this system to see if and how
    the muscle lifts the mass:'
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 这两个函数工作，因此我们现在可以模拟这个系统，看看肌肉如何提起负载：
- en: '[PRE111]'
  id: totrans-277
  prefs: []
  type: TYPE_PRE
  zh: '[PRE111]'
- en: ([`png`](../../../_downloads/dcdaa307df65b18c0c605bea15881789/biomechanics-34.png),
    [`hires.png`](../../../_downloads/1d551c01f373f4a7b3a87ccc488ab1a3/biomechanics-34.hires.png),
    [`pdf`](../../../_downloads/e580f4a9d3ea5bba6ef2456e504e21c5/biomechanics-34.pdf))
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: ([`png`](../../../_downloads/dcdaa307df65b18c0c605bea15881789/biomechanics-34.png),
    [`hires.png`](../../../_downloads/1d551c01f373f4a7b3a87ccc488ab1a3/biomechanics-34.hires.png),
    [`pdf`](../../../_downloads/e580f4a9d3ea5bba6ef2456e504e21c5/biomechanics-34.pdf))
- en: '![../../../_images/biomechanics-34.png](../Images/a9038a344d6beec6b50ec88eb8930b14.png)'
  id: totrans-279
  prefs: []
  type: TYPE_IMG
  zh: '![../../../_images/biomechanics-34.png](../Images/a9038a344d6beec6b50ec88eb8930b14.png)'
- en: The muscle pulls the mass in opposition to gravity and damps out to an equilibrium
    of 5 N.
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 肌肉抵抗重力对质量施加力，使其达到平衡状态为5 N。
- en: References
  id: totrans-281
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参考文献
- en: '[DeGroote2016] ([1](#id1),[2](#id2),[3](#id3),[4](#id4),[5](#id5),[6](#id6),[7](#id7),[8](#id8),[9](#id9),[10](#id10),[11](#id11),[12](#id12),[13](#id13),[14](#id14),[15](#id15),[16](#id16))'
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: '[DeGroote2016] ([1](#id1),[2](#id2),[3](#id3),[4](#id4),[5](#id5),[6](#id6),[7](#id7),[8](#id8),[9](#id9),[10](#id10),[11](#id11),[12](#id12),[13](#id13),[14](#id14),[15](#id15),[16](#id16))'
- en: De Groote, F., Kinney, A. L., Rao, A. V., & Fregly, B. J., Evaluation of direct
    collocation optimal control problem formulations for solving the muscle redundancy
    problem, Annals of biomedical engineering, 44(10), (2016) pp. 2922-2936
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: De Groote, F., Kinney, A. L., Rao, A. V., & Fregly, B. J., 解决肌肉冗余问题的直接共轭最优控制问题公式评估,
    生物医学工程学报, 44(10), (2016) pp. 2922-2936
